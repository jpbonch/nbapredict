/* NBA Stats v4.32.0 j19.3.2 [prod] - 10/30/2020, 9:19:31 AM - https://stats.nba.com */



!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(w,e){"use strict";var t=[],P=w.document,a=Object.getPrototypeOf,o=t.slice,m=t.concat,l=t.push,i=t.indexOf,n={},r=n.toString,p=n.hasOwnProperty,s=p.toString,c=s.call(Object),g={};function v(e,t){var n=(t=t||P).createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function u(e,t){return t.toUpperCase()}var h="3.1.1",x=function(e,t){return new x.fn.init(e,t)},d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,f=/^-ms-/,y=/-([a-z])/g;function _(e){var t=!!e&&"length"in e&&e.length,n=x.type(e);return"function"!==n&&!x.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}x.fn=x.prototype={jquery:h,constructor:x,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(n){return this.pushStack(x.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},x.extend=x.fn.extend=function(){var e,t,n,a,i,r,s=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[o]||{},o++),"object"==typeof s||x.isFunction(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)n=s[t],s!==(a=e[t])&&(c&&a&&(x.isPlainObject(a)||(i=x.isArray(a)))?(r=i?(i=!1,n&&x.isArray(n)?n:[]):n&&x.isPlainObject(n)?n:{},s[t]=x.extend(c,r,a)):void 0!==a&&(s[t]=a));return s},x.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=x.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==r.call(e)||(t=a(e))&&("function"!=typeof(n=p.call(t,"constructor")&&t.constructor)||s.call(n)!==c))},isEmptyObject:function(e){for(var t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[r.call(e)]||"object":typeof e},globalEval:function(e){v(e)},camelCase:function(e){return e.replace(f,"ms-").replace(y,u)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,a=0;if(_(e))for(n=e.length;a<n&&!1!==t.call(e[a],a,e[a]);a++);else for(a in e)if(!1===t.call(e[a],a,e[a]))break;return e},trim:function(e){return null==e?"":(e+"").replace(d,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(_(Object(e))?x.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,a=0,i=e.length;a<n;a++)e[i++]=t[a];return e.length=i,e},grep:function(e,t,n){for(var a=[],i=0,r=e.length,s=!n;i<r;i++)!t(e[i],i)!=s&&a.push(e[i]);return a},map:function(e,t,n){var a,i,r=0,s=[];if(_(e))for(a=e.length;r<a;r++)null!=(i=t(e[r],r,n))&&s.push(i);else for(r in e)null!=(i=t(e[r],r,n))&&s.push(i);return m.apply([],s)},guid:1,proxy:function(e,t){var n,a,i;if("string"==typeof t&&(n=e[t],t=e,e=n),x.isFunction(e))return a=o.call(arguments,2),(i=function(){return e.apply(t||this,a.concat(o.call(arguments)))}).guid=e.guid=e.guid||x.guid++,i},now:Date.now,support:g}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=t[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var b=function(n){function h(e,t,n){var a="0x"+t-65536;return a!=a||n?t:a<0?String.fromCharCode(65536+a):String.fromCharCode(a>>10|55296,1023&a|56320)}function i(){T()}var e,f,b,r,s,p,d,m,S,l,c,T,w,o,P,g,u,v,y,x="sizzle"+ +new Date,_=n.document,C=0,a=0,D=se(),E=se(),A=se(),k=function(e,t){return e===t&&(c=!0),0},I={}.hasOwnProperty,t=[],M=t.pop,$=t.push,L=t.push,O=t.slice,R=function(e,t){for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",V="\\["+F+"*("+B+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+F+"*\\]",j=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",U=new RegExp(F+"+","g"),H=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),G=new RegExp("^"+F+"*,"+F+"*"),Y=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),q=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),z=new RegExp(j),W=new RegExp("^"+B+"$"),K={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=ge(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{L.apply(t=O.call(_.childNodes),_.childNodes),t[_.childNodes.length].nodeType}catch(e){L={apply:t.length?function(e,t){$.apply(e,O.call(t))}:function(e,t){for(var n=e.length,a=0;e[n++]=t[a++];);e.length=n-1}}}function re(e,t,n,a){var i,r,s,o,l,c,u,h=t&&t.ownerDocument,d=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return n;if(!a&&((t?t.ownerDocument||t:_)!==w&&T(t),t=t||w,P)){if(11!==d&&(l=Z.exec(e)))if(i=l[1]){if(9===d){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(h&&(s=h.getElementById(i))&&y(t,s)&&s.id===i)return n.push(s),n}else{if(l[2])return L.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&f.getElementsByClassName&&t.getElementsByClassName)return L.apply(n,t.getElementsByClassName(i)),n}if(f.qsa&&!A[e+" "]&&(!g||!g.test(e))){if(1!==d)h=t,u=e;else if("object"!==t.nodeName.toLowerCase()){for((o=t.getAttribute("id"))?o=o.replace(ne,ae):t.setAttribute("id",o=x),r=(c=p(e)).length;r--;)c[r]="#"+o+" "+me(c[r]);u=c.join(","),h=ee.test(e)&&fe(t.parentNode)||t}if(u)try{return L.apply(n,h.querySelectorAll(u)),n}catch(e){}finally{o===x&&t.removeAttribute("id")}}}return m(e.replace(H,"$1"),t,n,a)}function se(){var n=[];function a(e,t){return n.push(e+" ")>b.cacheLength&&delete a[n.shift()],a[e+" "]=t}return a}function oe(e){return e[x]=!0,e}function le(e){var t=w.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),a=n.length;a--;)b.attrHandle[n[a]]=t}function ue(e,t){var n=t&&e,a=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(a)return a;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function he(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ie(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function de(s){return oe(function(r){return r=+r,oe(function(e,t){for(var n,a=s([],e.length,r),i=a.length;i--;)e[n=a[i]]&&(e[n]=!(t[n]=e[n]))})})}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=re.support={},s=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},T=re.setDocument=function(e){var t,n,a=e?e.ownerDocument||e:_;return a!==w&&9===a.nodeType&&a.documentElement&&(o=(w=a).documentElement,P=!s(w),_!==w&&(n=w.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",i,!1):n.attachEvent&&n.attachEvent("onunload",i)),f.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=le(function(e){return e.appendChild(w.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=J.test(w.getElementsByClassName),f.getById=le(function(e){return o.appendChild(e).id=x,!w.getElementsByName||!w.getElementsByName(x).length}),f.getById?(b.filter.ID=function(e){var t=e.replace(te,h);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&P){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,h);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&P){var n,a,i,r=t.getElementById(e);if(r){if((n=r.getAttributeNode("id"))&&n.value===e)return[r];for(i=t.getElementsByName(e),a=0;r=i[a++];)if((n=r.getAttributeNode("id"))&&n.value===e)return[r]}return[]}}),b.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,a=[],i=0,r=t.getElementsByTagName(e);if("*"!==e)return r;for(;n=r[i++];)1===n.nodeType&&a.push(n);return a},b.find.CLASS=f.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&P)return t.getElementsByClassName(e)},u=[],g=[],(f.qsa=J.test(w.querySelectorAll))&&(le(function(e){o.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+F+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+x+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=w.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+F+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),o.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(f.matchesSelector=J.test(v=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&le(function(e){f.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),u.push("!=",j)}),g=g.length&&new RegExp(g.join("|")),u=u.length&&new RegExp(u.join("|")),t=J.test(o.compareDocumentPosition),y=t||J.test(o.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,a=t&&t.parentNode;return e===a||!(!a||1!==a.nodeType||!(n.contains?n.contains(a):e.compareDocumentPosition&&16&e.compareDocumentPosition(a)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e===w||e.ownerDocument===_&&y(_,e)?-1:t===w||t.ownerDocument===_&&y(_,t)?1:l?R(l,e)-R(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,a=0,i=e.parentNode,r=t.parentNode,s=[e],o=[t];if(!i||!r)return e===w?-1:t===w?1:i?-1:r?1:l?R(l,e)-R(l,t):0;if(i===r)return ue(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)o.unshift(n);for(;s[a]===o[a];)a++;return a?ue(s[a],o[a]):s[a]===_?-1:o[a]===_?1:0}),w},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==w&&T(e),t=t.replace(q,"='$1']"),f.matchesSelector&&P&&!A[t+" "]&&(!u||!u.test(t))&&(!g||!g.test(t)))try{var n=v.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<re(t,w,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==w&&T(e),y(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==w&&T(e);var n=b.attrHandle[t.toLowerCase()],a=n&&I.call(b.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==a?a:f.attributes||!P?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},re.escape=function(e){return(e+"").replace(ne,ae)},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],a=0,i=0;if(c=!f.detectDuplicates,l=!f.sortStable&&e.slice(0),e.sort(k),c){for(;t=e[i++];)t===e[i]&&(a=n.push(i));for(;a--;)e.splice(n[a],1)}return l=null,e},r=re.getText=function(e){var t,n="",a=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[a++];)n+=r(t);return n},(b=re.selectors={cacheLength:50,createPseudo:oe,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,h),e[3]=(e[3]||e[4]||e[5]||"").replace(te,h),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&z.test(n)&&(t=p(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,h).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=D[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&D(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,a,i){return function(e){var t=re.attr(e,n);return null==t?"!="===a:!a||(t+="","="===a?t===i:"!="===a?t!==i:"^="===a?i&&0===t.indexOf(i):"*="===a?i&&-1<t.indexOf(i):"$="===a?i&&t.slice(-i.length)===i:"~="===a?-1<(" "+t.replace(U," ")+" ").indexOf(i):"|="===a&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(p,e,t,m,g){var v="nth"!==p.slice(0,3),y="last"!==p.slice(-4),_="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var a,i,r,s,o,l,c=v!=y?"nextSibling":"previousSibling",u=e.parentNode,h=_&&e.nodeName.toLowerCase(),d=!n&&!_,f=!1;if(u){if(v){for(;c;){for(s=e;s=s[c];)if(_?s.nodeName.toLowerCase()===h:1===s.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&d){for(f=(o=(a=(i=(r=(s=u)[x]||(s[x]={}))[s.uniqueID]||(r[s.uniqueID]={}))[p]||[])[0]===C&&a[1])&&a[2],s=o&&u.childNodes[o];s=++o&&s&&s[c]||(f=o=0)||l.pop();)if(1===s.nodeType&&++f&&s===e){i[p]=[C,o,f];break}}else if(d&&(f=o=(a=(i=(r=(s=e)[x]||(s[x]={}))[s.uniqueID]||(r[s.uniqueID]={}))[p]||[])[0]===C&&a[1]),!1===f)for(;(s=++o&&s&&s[c]||(f=o=0)||l.pop())&&((_?s.nodeName.toLowerCase()!==h:1!==s.nodeType)||!++f||(d&&((i=(r=s[x]||(s[x]={}))[s.uniqueID]||(r[s.uniqueID]={}))[p]=[C,f]),s!==e)););return(f-=g)===m||f%m==0&&0<=f/m}}},PSEUDO:function(e,r){var t,s=b.pseudos[e]||b.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return s[x]?s(r):1<s.length?(t=[e,e,"",r],b.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var n,a=s(e,r),i=a.length;i--;)e[n=R(e,a[i])]=!(t[n]=a[i])}):function(e){return s(e,0,t)}):s}},pseudos:{not:oe(function(e){var a=[],i=[],o=d(e.replace(H,"$1"));return o[x]?oe(function(e,t,n,a){for(var i,r=o(e,null,a,[]),s=e.length;s--;)(i=r[s])&&(e[s]=!(t[s]=i))}):function(e,t,n){return a[0]=e,o(a,null,n,i),a[0]=null,!i.pop()}}),has:oe(function(t){return function(e){return 0<re(t,e).length}}),contains:oe(function(t){return t=t.replace(te,h),function(e){return-1<(e.textContent||e.innerText||r(e)).indexOf(t)}}),lang:oe(function(n){return W.test(n||"")||re.error("unsupported lang: "+n),n=n.replace(te,h).toLowerCase(),function(e){var t;do{if(t=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===o},focus:function(e){return e===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:de(function(){return[0]}),last:de(function(e,t){return[t-1]}),eq:de(function(e,t,n){return[n<0?n+t:n]}),even:de(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:de(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:de(function(e,t,n){for(var a=n<0?n+t:n;0<=--a;)e.push(a);return e}),gt:de(function(e,t,n){for(var a=n<0?n+t:n;++a<t;)e.push(a);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(e);function pe(){}function me(e){for(var t=0,n=e.length,a="";t<n;t++)a+=e[t].value;return a}function ge(o,e,t){var l=e.dir,c=e.next,u=c||l,h=t&&"parentNode"===u,d=a++;return e.first?function(e,t,n){for(;e=e[l];)if(1===e.nodeType||h)return o(e,t,n);return!1}:function(e,t,n){var a,i,r,s=[C,d];if(n){for(;e=e[l];)if((1===e.nodeType||h)&&o(e,t,n))return!0}else for(;e=e[l];)if(1===e.nodeType||h)if(i=(r=e[x]||(e[x]={}))[e.uniqueID]||(r[e.uniqueID]={}),c&&c===e.nodeName.toLowerCase())e=e[l]||e;else{if((a=i[u])&&a[0]===C&&a[1]===d)return s[2]=a[2];if((i[u]=s)[2]=o(e,t,n))return!0}return!1}}function ve(i){return 1<i.length?function(e,t,n){for(var a=i.length;a--;)if(!i[a](e,t,n))return!1;return!0}:i[0]}function ye(e,t,n,a,i){for(var r,s=[],o=0,l=e.length,c=null!=t;o<l;o++)(r=e[o])&&(n&&!n(r,a,i)||(s.push(r),c&&t.push(o)));return s}function _e(f,p,m,g,v,e){return g&&!g[x]&&(g=_e(g)),v&&!v[x]&&(v=_e(v,e)),oe(function(e,t,n,a){var i,r,s,o=[],l=[],c=t.length,u=e||function(e,t,n){for(var a=0,i=t.length;a<i;a++)re(e,t[a],n);return n}(p||"*",n.nodeType?[n]:n,[]),h=!f||!e&&p?u:ye(u,o,f,n,a),d=m?v||(e?f:c||g)?[]:t:h;if(m&&m(h,d,n,a),g)for(i=ye(d,l),g(i,[],n,a),r=i.length;r--;)(s=i[r])&&(d[l[r]]=!(h[l[r]]=s));if(e){if(v||f){if(v){for(i=[],r=d.length;r--;)(s=d[r])&&i.push(h[r]=s);v(null,d=[],i,a)}for(r=d.length;r--;)(s=d[r])&&-1<(i=v?R(e,s):o[r])&&(e[i]=!(t[i]=s))}}else d=ye(d===t?d.splice(c,d.length):d),v?v(null,t,d,a):L.apply(t,d)})}function be(g,v){function e(e,t,n,a,i){var r,s,o,l=0,c="0",u=e&&[],h=[],d=S,f=e||_&&b.find.TAG("*",i),p=C+=null==d?1:Math.random()||.1,m=f.length;for(i&&(S=t===w||t||i);c!==m&&null!=(r=f[c]);c++){if(_&&r){for(s=0,t||r.ownerDocument===w||(T(r),n=!P);o=g[s++];)if(o(r,t||w,n)){a.push(r);break}i&&(C=p)}y&&((r=!o&&r)&&l--,e&&u.push(r))}if(l+=c,y&&c!==l){for(s=0;o=v[s++];)o(u,h,t,n);if(e){if(0<l)for(;c--;)u[c]||h[c]||(h[c]=M.call(a));h=ye(h)}L.apply(a,h),i&&!e&&0<h.length&&1<l+v.length&&re.uniqueSort(a)}return i&&(C=p,S=d),u}var y=0<v.length,_=0<g.length;return y?oe(e):e}return pe.prototype=b.filters=b.pseudos,b.setFilters=new pe,p=re.tokenize=function(e,t){var n,a,i,r,s,o,l,c=E[e+" "];if(c)return t?0:c.slice(0);for(s=e,o=[],l=b.preFilter;s;){for(r in n&&!(a=G.exec(s))||(a&&(s=s.slice(a[0].length)||s),o.push(i=[])),n=!1,(a=Y.exec(s))&&(n=a.shift(),i.push({value:n,type:a[0].replace(H," ")}),s=s.slice(n.length)),b.filter)!(a=K[r].exec(s))||l[r]&&!(a=l[r](a))||(n=a.shift(),i.push({value:n,type:r,matches:a}),s=s.slice(n.length));if(!n)break}return t?s.length:s?re.error(e):E(e,o).slice(0)},d=re.compile=function(e,t){var n,a=[],i=[],r=A[e+" "];if(!r){for(n=(t=t||p(e)).length;n--;)(r=function e(t){for(var i,n,a,r=t.length,s=b.relative[t[0].type],o=s||b.relative[" "],l=s?1:0,c=ge(function(e){return e===i},o,!0),u=ge(function(e){return-1<R(i,e)},o,!0),h=[function(e,t,n){var a=!s&&(n||t!==S)||((i=t).nodeType?c:u)(e,t,n);return i=null,a}];l<r;l++)if(n=b.relative[t[l].type])h=[ge(ve(h),n)];else{if((n=b.filter[t[l].type].apply(null,t[l].matches))[x]){for(a=++l;a<r&&!b.relative[t[a].type];a++);return _e(1<l&&ve(h),1<l&&me(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(H,"$1"),n,l<a&&e(t.slice(l,a)),a<r&&e(t=t.slice(a)),a<r&&me(t))}h.push(n)}return ve(h)}(t[n]))[x]?a.push(r):i.push(r);(r=A(e,be(i,a))).selector=e}return r},m=re.select=function(e,t,n,a){var i,r,s,o,l,c="function"==typeof e&&e,u=!a&&p(e=c.selector||e);if(n=n||[],1===u.length){if(2<(r=u[0]=u[0].slice(0)).length&&"ID"===(s=r[0]).type&&9===t.nodeType&&P&&b.relative[r[1].type]){if(!(t=(b.find.ID(s.matches[0].replace(te,h),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(i=K.needsContext.test(e)?0:r.length;i--&&(s=r[i],!b.relative[o=s.type]);)if((l=b.find[o])&&(a=l(s.matches[0].replace(te,h),ee.test(r[0].type)&&fe(t.parentNode)||t))){if(r.splice(i,1),!(e=a.length&&me(r)))return L.apply(n,a),n;break}}return(c||d(e,u))(a,t,!P,n,!t||ee.test(e)&&fe(t.parentNode)||t),n},f.sortStable=x.split("").sort(k).join("")===x,f.detectDuplicates=!!c,T(),f.sortDetached=le(function(e){return 1&e.compareDocumentPosition(w.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ce(N,function(e,t,n){var a;if(!n)return!0===e[t]?t.toLowerCase():(a=e.getAttributeNode(t))&&a.specified?a.value:null}),re}(w);x.find=b,x.expr=b.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=b.uniqueSort,x.text=b.getText,x.isXMLDoc=b.isXML,x.contains=b.contains,x.escapeSelector=b.escape;function S(e,t,n){for(var a=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&x(e).is(n))break;a.push(e)}return a}function T(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var C=x.expr.match.needsContext,D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,E=/^.[^:#\[\.,]*$/;function A(e,n,a){return x.isFunction(n)?x.grep(e,function(e,t){return!!n.call(e,t,e)!==a}):n.nodeType?x.grep(e,function(e){return e===n!==a}):"string"!=typeof n?x.grep(e,function(e){return-1<i.call(n,e)!==a}):E.test(n)?x.filter(n,e,a):(n=x.filter(n,e),x.grep(e,function(e){return-1<i.call(n,e)!==a&&1===e.nodeType}))}x.filter=function(e,t,n){var a=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===a.nodeType?x.find.matchesSelector(a,e)?[a]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},x.fn.extend({find:function(e){var t,n,a=this.length,i=this;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;t<a;t++)if(x.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<a;t++)x.find(e,i[t],n);return 1<a?x.uniqueSort(n):n},filter:function(e){return this.pushStack(A(this,e||[],!1))},not:function(e){return this.pushStack(A(this,e||[],!0))},is:function(e){return!!A(this,"string"==typeof e&&C.test(e)?x(e):e||[],!1).length}});var k,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,n){var a,i;if(!e)return this;if(n=n||k,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):x.isFunction(e)?void 0!==n.ready?n.ready(e):e(x):x.makeArray(e,this);if(!(a="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:I.exec(e))||!a[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(a[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:P,!0)),D.test(a[1])&&x.isPlainObject(t))for(a in t)x.isFunction(this[a])?this[a](t[a]):this.attr(a,t[a]);return this}return(i=P.getElementById(a[2]))&&(this[0]=i,this.length=1),this}).prototype=x.fn,k=x(P);var M=/^(?:parents|prev(?:Until|All))/,$={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(x.contains(this,t[e]))return!0})},closest:function(e,t){var n,a=0,i=this.length,r=[],s="string"!=typeof e&&x(e);if(!C.test(e))for(;a<i;a++)for(n=this[a];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&x.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(1<r.length?x.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?i.call(x(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,n){return S(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,n){return S(e,"nextSibling",n)},prevUntil:function(e,t,n){return S(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return e.contentDocument||x.merge([],e.childNodes)}},function(a,i){x.fn[a]=function(e,t){var n=x.map(this,i,e);return"Until"!==a.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=x.filter(t,n)),1<this.length&&($[a]||x.uniqueSort(n),M.test(a)&&n.reverse()),this.pushStack(n)}});var O=/[^\x20\t\r\n\f]+/g;function R(e){return e}function N(e){throw e}function F(e,t,n){var a;try{e&&x.isFunction(a=e.promise)?a.call(e).done(t).fail(n):e&&x.isFunction(a=e.then)?a.call(e,t,n):t.call(void 0,e)}catch(e){n.call(void 0,e)}}x.Callbacks=function(a){var e,n;a="string"==typeof a?(e=a,n={},x.each(e.match(O)||[],function(e,t){n[t]=!0}),n):x.extend({},a);function i(){for(o=a.once,s=r=!0;c.length;u=-1)for(t=c.shift();++u<l.length;)!1===l[u].apply(t[0],t[1])&&a.stopOnFalse&&(u=l.length,t=!1);a.memory||(t=!1),r=!1,o&&(l=t?[]:"")}var r,t,s,o,l=[],c=[],u=-1,h={add:function(){return l&&(t&&!r&&(u=l.length-1,c.push(t)),function n(e){x.each(e,function(e,t){x.isFunction(t)?a.unique&&h.has(t)||l.push(t):t&&t.length&&"string"!==x.type(t)&&n(t)})}(arguments),t&&!r&&i()),this},remove:function(){return x.each(arguments,function(e,t){for(var n;-1<(n=x.inArray(t,l,n));)l.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<x.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return o=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return o=c=[],t||r||(l=t=""),this},locked:function(){return!!o},fireWith:function(e,t){return o||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),r||i()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!s}};return h},x.extend({Deferred:function(e){var r=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var i=arguments;return x.Deferred(function(a){x.each(r,function(e,t){var n=x.isFunction(i[t[4]])&&i[t[4]];o[t[1]](function(){var e=n&&n.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,a){var l=0;function c(i,r,s,o){return function(){function e(){var e,t;if(!(i<l)){if((e=s.apply(n,a))===r.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,x.isFunction(t)?o?t.call(e,c(l,r,R,o),c(l,r,N,o)):(l++,t.call(e,c(l,r,R,o),c(l,r,N,o),c(l,r,R,r.notifyWith))):(s!==R&&(n=void 0,a=[e]),(o||r.resolveWith)(n,a))}}var n=this,a=arguments,t=o?e:function(){try{e()}catch(e){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(e,t.stackTrace),l<=i+1&&(s!==N&&(n=void 0,a=[e]),r.rejectWith(n,a))}};i?t():(x.Deferred.getStackHook&&(t.stackTrace=x.Deferred.getStackHook()),w.setTimeout(t))}}return x.Deferred(function(e){r[0][3].add(c(0,e,x.isFunction(a)?a:R,e.notifyWith)),r[1][3].add(c(0,e,x.isFunction(t)?t:R)),r[2][3].add(c(0,e,x.isFunction(n)?n:N))}).promise()},promise:function(e){return null!=e?x.extend(e,s):s}},o={};return x.each(r,function(e,t){var n=t[2],a=t[5];s[t[1]]=n.add,a&&n.add(function(){i=a},r[3-e][2].disable,r[0][2].lock),n.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=n.fireWith}),s.promise(o),e&&e.call(o,o),o},when:function(e){function t(t){return function(e){i[t]=this,r[t]=1<arguments.length?o.call(arguments):e,--n||s.resolveWith(i,r)}}var n=arguments.length,a=n,i=Array(a),r=o.call(arguments),s=x.Deferred();if(n<=1&&(F(e,s.done(t(a)).resolve,s.reject),"pending"===s.state()||x.isFunction(r[a]&&r[a].then)))return s.then();for(;a--;)F(r[a],t(a),s.reject);return s.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&B.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},x.readyException=function(e){w.setTimeout(function(){throw e})};var V=x.Deferred();function j(){P.removeEventListener("DOMContentLoaded",j),w.removeEventListener("load",j),x.ready()}x.fn.ready=function(e){return V.then(e).catch(function(e){x.readyException(e)}),this},x.extend({isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){(!0===e?--x.readyWait:x.isReady)||((x.isReady=!0)!==e&&0<--x.readyWait||V.resolveWith(P,[x]))}}),x.ready.then=V.then,"complete"===P.readyState||"loading"!==P.readyState&&!P.documentElement.doScroll?w.setTimeout(x.ready):(P.addEventListener("DOMContentLoaded",j),w.addEventListener("load",j));function U(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}var H=function(e,t,n,a,i,r,s){var o=0,l=e.length,c=null==n;if("object"===x.type(n))for(o in i=!0,n)H(e,t,o,n[o],!0,r,s);else if(void 0!==a&&(i=!0,x.isFunction(a)||(s=!0),c&&(t=s?(t.call(e,a),null):(c=t,function(e,t,n){return c.call(x(e),n)})),t))for(;o<l;o++)t(e[o],n,s?a:a.call(e[o],o,t(e[o],n)));return i?e:c?t.call(e):l?t(e[0],n):r};function G(){this.expando=x.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var a,i=this.cache(e);if("string"==typeof t)i[x.camelCase(t)]=n;else for(a in t)i[x.camelCase(a)]=t[a];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][x.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,a=e[this.expando];if(void 0!==a){if(void 0!==t){n=(t=x.isArray(t)?t.map(x.camelCase):(t=x.camelCase(t))in a?[t]:t.match(O)||[]).length;for(;n--;)delete a[t[n]]}void 0!==t&&!x.isEmptyObject(a)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var Y=new G,q=new G,z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,W=/[A-Z]/g;function K(e,t,n){var a,i;if(void 0===n&&1===e.nodeType)if(a="data-"+t.replace(W,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(a))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:z.test(i)?JSON.parse(i):i)}catch(e){}q.set(e,t,n)}else n=void 0;return n}x.extend({hasData:function(e){return q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return q.access(e,t,n)},removeData:function(e,t){q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),x.fn.extend({data:function(n,e){var t,a,i,r=this[0],s=r&&r.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){q.set(this,n)}):H(this,function(e){var t;if(r&&void 0===e){if(void 0!==(t=q.get(r,n)))return t;if(void 0!==(t=K(r,n)))return t}else this.each(function(){q.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=q.get(r),1===r.nodeType&&!Y.get(r,"hasDataAttrs"))){for(t=s.length;t--;)s[t]&&(0===(a=s[t].name).indexOf("data-")&&(a=x.camelCase(a.slice(5)),K(r,a,i[a])));Y.set(r,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){q.remove(this,e)})}}),x.extend({queue:function(e,t,n){var a;if(e)return t=(t||"fx")+"queue",a=Y.get(e,t),n&&(!a||x.isArray(n)?a=Y.access(e,t,x.makeArray(n)):a.push(n)),a||[]},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),a=n.length,i=n.shift(),r=x._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),a--),i&&("fx"===t&&n.unshift("inprogress"),delete r.stop,i.call(e,function(){x.dequeue(e,t)},r)),!a&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:x.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?x.queue(this[0],t):void 0===n?this:this.each(function(){var e=x.queue(this,t,n);x._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&x.dequeue(this,t)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--i||r.resolveWith(s,[s])}var a,i=1,r=x.Deferred(),s=this,o=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(a=Y.get(s[o],e+"queueHooks"))&&a.empty&&(i++,a.empty.add(n));return n(),r.promise(t)}});function X(e,t,n,a){var i,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];for(r in i=n.apply(e,a||[]),t)e.style[r]=s[r];return i}var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,J=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Z=["Top","Right","Bottom","Left"],ee=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&x.contains(e.ownerDocument,e)&&"none"===x.css(e,"display")};function te(e,t,n,a){var i,r=1,s=20,o=a?function(){return a.cur()}:function(){return x.css(e,t,"")},l=o(),c=n&&n[3]||(x.cssNumber[t]?"":"px"),u=(x.cssNumber[t]||"px"!==c&&+l)&&J.exec(x.css(e,t));if(u&&u[3]!==c)for(c=c||u[3],n=n||[],u=+l||1;u/=r=r||".5",x.style(e,t,u+c),r!==(r=o()/l)&&1!==r&&--s;);return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],a&&(a.unit=c,a.start=u,a.end=i)),i}var ne={};function ae(e,t){for(var n,a,i,r,s,o,l,c=[],u=0,h=e.length;u<h;u++)(a=e[u]).style&&(n=a.style.display,t?("none"===n&&(c[u]=Y.get(a,"display")||null,c[u]||(a.style.display="")),""===a.style.display&&ee(a)&&(c[u]=(l=o=s=r=void 0,s=(i=a).ownerDocument,o=i.nodeName,(l=ne[o])||(r=s.body.appendChild(s.createElement(o)),l=x.css(r,"display"),r.parentNode.removeChild(r),"none"===l&&(l="block"),ne[o]=l)))):"none"!==n&&(c[u]="none",Y.set(a,"display",n)));for(u=0;u<h;u++)null!=c[u]&&(e[u].style.display=c[u]);return e}x.fn.extend({show:function(){return ae(this,!0)},hide:function(){return ae(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ee(this)?x(this).show():x(this).hide()})}});var ie=/^(?:checkbox|radio)$/i,re=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,se=/^$|\/(?:java|ecma)script/i,oe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function le(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&x.nodeName(e,t)?x.merge([e],n):n}function ce(e,t){for(var n=0,a=e.length;n<a;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}oe.optgroup=oe.option,oe.tbody=oe.tfoot=oe.colgroup=oe.caption=oe.thead,oe.th=oe.td;var ue,he,de=/<|&#?\w+;/;function fe(e,t,n,a,i){for(var r,s,o,l,c,u,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((r=e[f])||0===r)if("object"===x.type(r))x.merge(d,r.nodeType?[r]:r);else if(de.test(r)){for(s=s||h.appendChild(t.createElement("div")),o=(re.exec(r)||["",""])[1].toLowerCase(),l=oe[o]||oe._default,s.innerHTML=l[1]+x.htmlPrefilter(r)+l[2],u=l[0];u--;)s=s.lastChild;x.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(r));for(h.textContent="",f=0;r=d[f++];)if(a&&-1<x.inArray(r,a))i&&i.push(r);else if(c=x.contains(r.ownerDocument,r),s=le(h.appendChild(r),"script"),c&&ce(s),n)for(u=0;r=s[u++];)se.test(r.type||"")&&n.push(r);return h}ue=P.createDocumentFragment().appendChild(P.createElement("div")),(he=P.createElement("input")).setAttribute("type","radio"),he.setAttribute("checked","checked"),he.setAttribute("name","t"),ue.appendChild(he),g.checkClone=ue.cloneNode(!0).cloneNode(!0).lastChild.checked,ue.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!ue.cloneNode(!0).lastChild.defaultValue;var pe=P.documentElement,me=/^key/,ge=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ve=/^([^.]*)(?:\.(.+)|)/;function ye(){return!0}function _e(){return!1}function be(){try{return P.activeElement}catch(e){}}function Se(e,t,n,a,i,r){var s,o;if("object"==typeof t){for(o in"string"!=typeof n&&(a=a||n,n=void 0),t)Se(e,o,n,a,t[o],r);return e}if(null==a&&null==i?(i=n,a=n=void 0):null==i&&("string"==typeof n?(i=a,a=void 0):(i=a,a=n,n=void 0)),!1===i)i=_e;else if(!i)return e;return 1===r&&(s=i,(i=function(e){return x().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=x.guid++)),e.each(function(){x.event.add(this,t,i,a,n)})}x.event={global:{},add:function(t,e,n,a,i){var r,s,o,l,c,u,h,d,f,p,m,g=Y.get(t);if(g)for(n.handler&&(n=(r=n).handler,i=r.selector),i&&x.find.matchesSelector(pe,i),n.guid||(n.guid=x.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(e){return void 0!==x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(O)||[""]).length;c--;)f=m=(o=ve.exec(e[c])||[])[1],p=(o[2]||"").split(".").sort(),f&&(h=x.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=x.event.special[f]||{},u=x.extend({type:f,origType:m,data:a,handler:n,guid:n.guid,selector:i,needsContext:i&&x.expr.match.needsContext.test(i),namespace:p.join(".")},r),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,a,p,s)||t.addEventListener&&t.addEventListener(f,s)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,u):d.push(u),x.event.global[f]=!0)},remove:function(e,t,n,a,i){var r,s,o,l,c,u,h,d,f,p,m,g=Y.hasData(e)&&Y.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(O)||[""]).length;c--;)if(f=m=(o=ve.exec(t[c])||[])[1],p=(o[2]||"").split(".").sort(),f){for(h=x.event.special[f]||{},d=l[f=(a?h.delegateType:h.bindType)||f]||[],o=o[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)u=d[r],!i&&m!==u.origType||n&&n.guid!==u.guid||o&&!o.test(u.namespace)||a&&a!==u.selector&&("**"!==a||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||x.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)x.event.remove(e,f+t[c],n,a,!0);x.isEmptyObject(l)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,a,i,r,s,o=x.event.fix(e),l=new Array(arguments.length),c=(Y.get(this,"events")||{})[o.type]||[],u=x.event.special[o.type]||{};for(l[0]=o,t=1;t<arguments.length;t++)l[t]=arguments[t];if(o.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,o)){for(s=x.event.handlers.call(this,o,c),t=0;(i=s[t++])&&!o.isPropagationStopped();)for(o.currentTarget=i.elem,n=0;(r=i.handlers[n++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!o.rnamespace.test(r.namespace)||(o.handleObj=r,o.data=r.data,void 0!==(a=((x.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,l))&&!1===(o.result=a)&&(o.preventDefault(),o.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,o),o.result}},handlers:function(e,t){var n,a,i,r,s,o=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(r=[],s={},n=0;n<l;n++)void 0===s[i=(a=t[n]).selector+" "]&&(s[i]=a.needsContext?-1<x(i,this).index(c):x.find(i,this,null,[c]).length),s[i]&&r.push(a);r.length&&o.push({elem:c,handlers:r})}return c=this,l<t.length&&o.push({elem:c,handlers:t.slice(l)}),o},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:x.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==be()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===be()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&x.nodeName(this,"input"))return this.click(),!1},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},x.Event=function(e,t){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ye:_e,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||x.now(),void(this[x.expando]=!0)):new x.Event(e,t)},x.Event.prototype={constructor:x.Event,isDefaultPrevented:_e,isPropagationStopped:_e,isImmediatePropagationStopped:_e,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ye,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ye,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ye,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&me.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ge.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},x.event.addProp),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){x.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,a=e.handleObj;return n&&(n===this||x.contains(this,n))||(e.type=a.origType,t=a.handler.apply(this,arguments),e.type=i),t}}}),x.fn.extend({on:function(e,t,n,a){return Se(this,e,t,n,a)},one:function(e,t,n,a){return Se(this,e,t,n,a,1)},off:function(e,t,n){var a,i;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,x(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=_e),this.each(function(){x.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this}});var Te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,we=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,xe=/^true\/(.*)/,Ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function De(e,t){return x.nodeName(e,"table")&&x.nodeName(11!==t.nodeType?t:t.firstChild,"tr")&&e.getElementsByTagName("tbody")[0]||e}function Ee(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ae(e){var t=xe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ke(e,t){var n,a,i,r,s,o,l,c;if(1===t.nodeType){if(Y.hasData(e)&&(r=Y.access(e),s=Y.set(t,r),c=r.events))for(i in delete s.handle,s.events={},c)for(n=0,a=c[i].length;n<a;n++)x.event.add(t,i,c[i][n]);q.hasData(e)&&(o=q.access(e),l=x.extend({},o),q.set(t,l))}}function Ie(n,a,i,r){a=m.apply([],a);var e,t,s,o,l,c,u=0,h=n.length,d=h-1,f=a[0],p=x.isFunction(f);if(p||1<h&&"string"==typeof f&&!g.checkClone&&Pe.test(f))return n.each(function(e){var t=n.eq(e);p&&(a[0]=f.call(this,e,t.html())),Ie(t,a,i,r)});if(h&&(t=(e=fe(a,n[0].ownerDocument,!1,n,r)).firstChild,1===e.childNodes.length&&(e=t),t||r)){for(o=(s=x.map(le(e,"script"),Ee)).length;u<h;u++)l=e,u!==d&&(l=x.clone(l,!0,!0),o&&x.merge(s,le(l,"script"))),i.call(n[u],l,u);if(o)for(c=s[s.length-1].ownerDocument,x.map(s,Ae),u=0;u<o;u++)l=s[u],se.test(l.type||"")&&!Y.access(l,"globalEval")&&x.contains(c,l)&&(l.src?x._evalUrl&&x._evalUrl(l.src):v(l.textContent.replace(Ce,""),c))}return n}function Me(e,t,n){for(var a,i=t?x.filter(t,e):e,r=0;null!=(a=i[r]);r++)n||1!==a.nodeType||x.cleanData(le(a)),a.parentNode&&(n&&x.contains(a.ownerDocument,a)&&ce(le(a,"script")),a.parentNode.removeChild(a));return e}x.extend({htmlPrefilter:function(e){return e.replace(Te,"<$1></$2>")},clone:function(e,t,n){var a,i,r,s,o,l,c,u=e.cloneNode(!0),h=x.contains(e.ownerDocument,e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(s=le(u),a=0,i=(r=le(e)).length;a<i;a++)o=r[a],l=s[a],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&ie.test(o.type)?l.checked=o.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=o.defaultValue);if(t)if(n)for(r=r||le(e),s=s||le(u),a=0,i=r.length;a<i;a++)ke(r[a],s[a]);else ke(e,u);return 0<(s=le(u,"script")).length&&ce(s,!h&&le(e,"script")),u},cleanData:function(e){for(var t,n,a,i=x.event.special,r=0;void 0!==(n=e[r]);r++)if(U(n)){if(t=n[Y.expando]){if(t.events)for(a in t.events)i[a]?x.event.remove(n,a):x.removeEvent(n,a,t.handle);n[Y.expando]=void 0}n[q.expando]&&(n[q.expando]=void 0)}}}),x.fn.extend({detach:function(e){return Me(this,e,!0)},remove:function(e){return Me(this,e)},text:function(e){return H(this,function(e){return void 0===e?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||De(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=De(this,e)).insertBefore(e,t.firstChild)})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(le(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,a=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!we.test(e)&&!oe[(re.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;n<a;n++)1===(t=this[n]||{}).nodeType&&(x.cleanData(le(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ie(this,arguments,function(e){var t=this.parentNode;x.inArray(this,n)<0&&(x.cleanData(le(this)),t&&t.replaceChild(e,this))},n)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){x.fn[e]=function(e){for(var t,n=[],a=x(e),i=a.length-1,r=0;r<=i;r++)t=r===i?this:this.clone(!0),x(a[r])[s](t),l.apply(n,t.get());return this.pushStack(n)}});var $e,Le,Oe,Re,Ne,Fe,Be=/^margin/,Ve=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),je=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=w),t.getComputedStyle(e)};function Ue(){var e;Fe&&(Fe.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",Fe.innerHTML="",pe.appendChild(Ne),e=w.getComputedStyle(Fe),$e="1%"!==e.top,Re="2px"===e.marginLeft,Le="4px"===e.width,Fe.style.marginRight="50%",Oe="4px"===e.marginRight,pe.removeChild(Ne),Fe=null)}function He(e,t,n){var a,i,r,s,o=e.style;return(n=n||je(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||x.contains(e.ownerDocument,e)||(s=x.style(e,t)),!g.pixelMarginRight()&&Ve.test(s)&&Be.test(t)&&(a=o.width,i=o.minWidth,r=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=a,o.minWidth=i,o.maxWidth=r)),void 0!==s?s+"":s}function Ge(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}Ne=P.createElement("div"),(Fe=P.createElement("div")).style&&(Fe.style.backgroundClip="content-box",Fe.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===Fe.style.backgroundClip,Ne.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",Ne.appendChild(Fe),x.extend(g,{pixelPosition:function(){return Ue(),$e},boxSizingReliable:function(){return Ue(),Le},pixelMarginRight:function(){return Ue(),Oe},reliableMarginLeft:function(){return Ue(),Re}}));var Ye=/^(none|table(?!-c[ea]).+)/,qe={position:"absolute",visibility:"hidden",display:"block"},ze={letterSpacing:"0",fontWeight:"400"},We=["Webkit","Moz","ms"],Ke=P.createElement("div").style;function Xe(e){if(e in Ke)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=We.length;n--;)if((e=We[n]+t)in Ke)return e}function Qe(e,t,n){var a=J.exec(t);return a?Math.max(0,a[2]-(n||0))+(a[3]||"px"):t}function Je(e,t,n,a,i){for(var r=0,s=n===(a?"border":"content")?4:"width"===t?1:0;s<4;s+=2)"margin"===n&&(r+=x.css(e,n+Z[s],!0,i)),a?("content"===n&&(r-=x.css(e,"padding"+Z[s],!0,i)),"margin"!==n&&(r-=x.css(e,"border"+Z[s]+"Width",!0,i))):(r+=x.css(e,"padding"+Z[s],!0,i),"padding"!==n&&(r+=x.css(e,"border"+Z[s]+"Width",!0,i)));return r}function Ze(e,t,n){var a,i=!0,r=je(e),s="border-box"===x.css(e,"boxSizing",!1,r);if(e.getClientRects().length&&(a=e.getBoundingClientRect()[t]),a<=0||null==a){if(((a=He(e,t,r))<0||null==a)&&(a=e.style[t]),Ve.test(a))return a;i=s&&(g.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+Je(e,t,n||(s?"border":"content"),i,r)+"px"}function et(e,t,n,a,i){return new et.prototype.init(e,t,n,a,i)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=He(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,r,s,o=x.camelCase(t),l=e.style;return t=x.cssProps[o]||(x.cssProps[o]=Xe(o)||o),s=x.cssHooks[t]||x.cssHooks[o],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,a))?i:l[t]:("string"===(r=typeof n)&&(i=J.exec(n))&&i[1]&&(n=te(e,t,i),r="number"),void(null!=n&&n==n&&("number"===r&&(n+=i&&i[3]||(x.cssNumber[o]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,a))||(l[t]=n))))}},css:function(e,t,n,a){var i,r,s,o=x.camelCase(t);return t=x.cssProps[o]||(x.cssProps[o]=Xe(o)||o),(s=x.cssHooks[t]||x.cssHooks[o])&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=He(e,t,a)),"normal"===i&&t in ze&&(i=ze[t]),""===n||n?(r=parseFloat(i),!0===n||isFinite(r)?r||0:i):i}}),x.each(["height","width"],function(e,s){x.cssHooks[s]={get:function(e,t,n){if(t)return!Ye.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,s,n):X(e,qe,function(){return Ze(e,s,n)})},set:function(e,t,n){var a,i=n&&je(e),r=n&&Je(e,s,n,"border-box"===x.css(e,"boxSizing",!1,i),i);return r&&(a=J.exec(t))&&"px"!==(a[3]||"px")&&(e.style[s]=t,t=x.css(e,s)),Qe(0,t,r)}}}),x.cssHooks.marginLeft=Ge(g.reliableMarginLeft,function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-X(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(i,r){x.cssHooks[i+r]={expand:function(e){for(var t=0,n={},a="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+Z[t]+r]=a[t]||a[t-2]||a[0];return n}},Be.test(i)||(x.cssHooks[i+r].set=Qe)}),x.fn.extend({css:function(e,t){return H(this,function(e,t,n){var a,i,r={},s=0;if(x.isArray(t)){for(a=je(e),i=t.length;s<i;s++)r[t[s]]=x.css(e,t[s],!1,a);return r}return void 0!==n?x.style(e,t,n):x.css(e,t)},e,t,1<arguments.length)}}),(x.Tween=et).prototype={constructor:et,init:function(e,t,n,a,i,r){this.elem=e,this.prop=n,this.easing=i||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=a,this.unit=r||(x.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}},et.prototype.init.prototype=et.prototype,et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[x.cssProps[e.prop]]&&!x.cssHooks[e.prop]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}},et.propHooks.scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},x.fx=et.prototype.init,x.fx.step={};var tt,nt,at,it,rt=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function ot(){nt&&(w.requestAnimationFrame(ot),x.fx.tick())}function lt(){return w.setTimeout(function(){tt=void 0}),tt=x.now()}function ct(e,t){var n,a=0,i={height:e};for(t=t?1:0;a<4;a+=2-t)i["margin"+(n=Z[a])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var a,i=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),r=0,s=i.length;r<s;r++)if(a=i[r].call(n,t,e))return a}function ht(r,e,t){var n,s,a=0,i=ht.prefilters.length,o=x.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=tt||lt(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),a=0,i=c.tweens.length;a<i;a++)c.tweens[a].run(n);return o.notifyWith(r,[c,n,t]),n<1&&i?t:(o.resolveWith(r,[c]),!1)},c=o.promise({elem:r,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||lt(),duration:t.duration,tweens:[],createTween:function(e,t){var n=x.Tween(r,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var t=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;t<n;t++)c.tweens[t].run(1);return e?(o.notifyWith(r,[c,1,0]),o.resolveWith(r,[c,e])):o.rejectWith(r,[c,e]),this}}),u=c.props;for(function(e,t){var n,a,i,r,s;for(n in e)if(i=t[a=x.camelCase(n)],r=e[n],x.isArray(r)&&(i=r[1],r=e[n]=r[0]),n!==a&&(e[a]=r,delete e[n]),(s=x.cssHooks[a])&&"expand"in s)for(n in r=s.expand(r),delete e[a],r)n in e||(e[n]=r[n],t[n]=i);else t[a]=i}(u,c.opts.specialEasing);a<i;a++)if(n=ht.prefilters[a].call(c,r,u,c.opts))return x.isFunction(n.stop)&&(x._queueHooks(c.elem,c.opts.queue).stop=x.proxy(n.stop,n)),n;return x.map(u,ut,c),x.isFunction(c.opts.start)&&c.opts.start.call(r,c),x.fx.timer(x.extend(l,{elem:r,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}x.Animation=x.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,J.exec(t),n),n}]},tweener:function(e,t){for(var n,a=0,i=(e=x.isFunction(e)?(t=e,["*"]):e.match(O)).length;a<i;a++)n=e[a],ht.tweeners[n]=ht.tweeners[n]||[],ht.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var a,i,r,s,o,l,c,u,h="width"in t||"height"in t,d=this,f={},p=e.style,m=e.nodeType&&ee(e),g=Y.get(e,"fxshow");for(a in n.queue||(null==(s=x._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,x.queue(e,"fx").length||s.empty.fire()})})),t)if(i=t[a],rt.test(i)){if(delete t[a],r=r||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[a])continue;m=!0}f[a]=g&&g[a]||x.style(e,a)}if((l=!x.isEmptyObject(t))||!x.isEmptyObject(f))for(a in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=Y.get(e,"display")),"none"===(u=x.css(e,"display"))&&(c?u=c:(ae([e],!0),c=e.style.display||c,u=x.css(e,"display"),ae([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===x.css(e,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=Y.access(e,"fxshow",{display:c}),r&&(g.hidden=!m),m&&ae([e],!0),d.done(function(){for(a in m||ae([e]),Y.remove(e,"fxshow"),f)x.style(e,a,f[a])})),l=ut(m?g[a]:0,a,d),a in g||(g[a]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),x.speed=function(e,t,n){var a=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return x.fx.off||P.hidden?a.duration=0:"number"!=typeof a.duration&&(a.duration in x.fx.speeds?a.duration=x.fx.speeds[a.duration]:a.duration=x.fx.speeds._default),null!=a.queue&&!0!==a.queue||(a.queue="fx"),a.old=a.complete,a.complete=function(){x.isFunction(a.old)&&a.old.call(this),a.queue&&x.dequeue(this,a.queue)},a},x.fn.extend({fadeTo:function(e,t,n,a){return this.filter(ee).css("opacity",0).show().end().animate({opacity:t},e,n,a)},animate:function(t,e,n,a){function i(){var e=ht(this,x.extend({},t),s);(r||Y.get(this,"finish"))&&e.stop(!0)}var r=x.isEmptyObject(t),s=x.speed(e,n,a);return i.finish=i,r||!1===s.queue?this.each(i):this.queue(s.queue,i)},stop:function(i,e,r){function s(e){var t=e.stop;delete e.stop,t(r)}return"string"!=typeof i&&(r=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=x.timers,a=Y.get(this);if(t)a[t]&&a[t].stop&&s(a[t]);else for(t in a)a[t]&&a[t].stop&&st.test(t)&&s(a[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(r),e=!1,n.splice(t,1));!e&&r||x.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=Y.get(this),n=t[s+"queue"],a=t[s+"queueHooks"],i=x.timers,r=n?n.length:0;for(t.finish=!0,x.queue(this,s,[]),a&&a.stop&&a.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===s&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),x.each(["toggle","show","hide"],function(e,a){var i=x.fn[a];x.fn[a]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ct(a,!0),e,t,n)}}),x.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,a){x.fn[e]=function(e,t,n){return this.animate(a,e,t,n)}}),x.timers=[],x.fx.tick=function(){var e,t=0,n=x.timers;for(tt=x.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||x.fx.stop(),tt=void 0},x.fx.timer=function(e){x.timers.push(e),e()?x.fx.start():x.timers.pop()},x.fx.interval=13,x.fx.start=function(){nt=nt||(w.requestAnimationFrame?w.requestAnimationFrame(ot):w.setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){w.cancelAnimationFrame?w.cancelAnimationFrame(nt):w.clearInterval(nt),nt=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(a,e){return a=x.fx&&x.fx.speeds[a]||a,e=e||"fx",this.queue(e,function(e,t){var n=w.setTimeout(e,a);t.stop=function(){w.clearTimeout(n)}})},at=P.createElement("input"),it=P.createElement("select").appendChild(P.createElement("option")),at.type="checkbox",g.checkOn=""!==at.value,g.optSelected=it.selected,(at=P.createElement("input")).value="t",at.type="radio",g.radioValue="t"===at.value;var dt,ft=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return H(this,x.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})}}),x.extend({attr:function(e,t,n){var a,i,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?x.prop(e,t,n):(1===r&&x.isXMLDoc(e)||(i=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void x.removeAttr(e,t):i&&"set"in i&&void 0!==(a=i.set(e,n,t))?a:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(a=i.get(e,t))?a:null==(a=x.find.attr(e,t))?void 0:a)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,a=0,i=t&&t.match(O);if(i&&1===e.nodeType)for(;n=i[a++];)e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var s=ft[t]||x.find.attr;ft[t]=function(e,t,n){var a,i,r=t.toLowerCase();return n||(i=ft[r],ft[r]=a,a=null!=s(e,t,n)?r:null,ft[r]=i),a}});var pt=/^(?:input|select|textarea|button)$/i,mt=/^(?:a|area)$/i;function gt(e){return(e.match(O)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}x.fn.extend({prop:function(e,t){return H(this,x.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})}}),x.extend({prop:function(e,t,n){var a,i,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&x.isXMLDoc(e)||(t=x.propFix[t]||t,i=x.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(a=i.set(e,n,t))?a:e[t]=n:i&&"get"in i&&null!==(a=i.get(e,t))?a:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||mt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(t){var e,n,a,i,r,s,o,l=0;if(x.isFunction(t))return this.each(function(e){x(this).addClass(t.call(this,e,vt(this)))});if("string"==typeof t&&t)for(e=t.match(O)||[];n=this[l++];)if(i=vt(n),a=1===n.nodeType&&" "+gt(i)+" "){for(s=0;r=e[s++];)a.indexOf(" "+r+" ")<0&&(a+=r+" ");i!==(o=gt(a))&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,a,i,r,s,o,l=0;if(x.isFunction(t))return this.each(function(e){x(this).removeClass(t.call(this,e,vt(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(O)||[];n=this[l++];)if(i=vt(n),a=1===n.nodeType&&" "+gt(i)+" "){for(s=0;r=e[s++];)for(;-1<a.indexOf(" "+r+" ");)a=a.replace(" "+r+" "," ");i!==(o=gt(a))&&n.setAttribute("class",o)}return this},toggleClass:function(i,t){var r=typeof i;return"boolean"==typeof t&&"string"==r?t?this.addClass(i):this.removeClass(i):x.isFunction(i)?this.each(function(e){x(this).toggleClass(i.call(this,e,vt(this),t),t)}):this.each(function(){var e,t,n,a;if("string"==r)for(t=0,n=x(this),a=i.match(O)||[];e=a[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==i&&"boolean"!=r||((e=vt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==i&&Y.get(this,"__className__")||""))})},hasClass:function(e){for(var t,n=0,a=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+gt(vt(t))+" ").indexOf(a))return!0;return!1}});var yt=/\r/g;x.fn.extend({val:function(n){var a,e,i,t=this[0];return arguments.length?(i=x.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,x(this).val()):n)?t="":"number"==typeof t?t+="":x.isArray(t)&&(t=x.map(t,function(e){return null==e?"":e+""})),(a=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in a&&void 0!==a.set(this,t,"value")||(this.value=t))})):t?(a=x.valHooks[t.type]||x.valHooks[t.nodeName.toLowerCase()])&&"get"in a&&void 0!==(e=a.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:gt(x.text(e))}},select:{get:function(e){for(var t,n,a=e.options,i=e.selectedIndex,r="select-one"===e.type,s=r?null:[],o=r?i+1:a.length,l=i<0?o:r?i:0;l<o;l++)if(((n=a[l]).selected||l===i)&&!n.disabled&&(!n.parentNode.disabled||!x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var n,a,i=e.options,r=x.makeArray(t),s=i.length;s--;)((a=i[s]).selected=-1<x.inArray(x.valHooks.option.get(a),r))&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){if(x.isArray(t))return e.checked=-1<x.inArray(x(e).val(),t)}},g.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var _t=/^(?:focusinfocus|focusoutblur)$/;x.extend(x.event,{trigger:function(e,t,n,a){var i,r,s,o,l,c,u=[n||P],h=p.call(e,"type")?e.type:e,d=p.call(e,"namespace")?e.namespace.split("."):[],f=r=n=n||P;if(3!==n.nodeType&&8!==n.nodeType&&!_t.test(h+x.event.triggered)&&(-1<h.indexOf(".")&&(h=(d=h.split(".")).shift(),d.sort()),o=h.indexOf(":")<0&&"on"+h,(e=e[x.expando]?e:new x.Event(h,"object"==typeof e&&e)).isTrigger=a?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:x.makeArray(t,[e]),c=x.event.special[h]||{},a||!c.trigger||!1!==c.trigger.apply(n,t))){if(!a&&!c.noBubble&&!x.isWindow(n)){for(s=c.delegateType||h,_t.test(s+h)||(f=f.parentNode);f;f=f.parentNode)u.push(f),r=f;r===(n.ownerDocument||P)&&u.push(r.defaultView||r.parentWindow||w)}for(i=0;(f=u[i++])&&!e.isPropagationStopped();)e.type=1<i?s:c.bindType||h,(l=(Y.get(f,"events")||{})[e.type]&&Y.get(f,"handle"))&&l.apply(f,t),(l=o&&f[o])&&l.apply&&U(f)&&(e.result=l.apply(f,t),!1===e.result&&e.preventDefault());return e.type=h,a||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(u.pop(),t)||!U(n)||o&&x.isFunction(n[h])&&!x.isWindow(n)&&((r=n[o])&&(n[o]=null),n[x.event.triggered=h](),x.event.triggered=void 0,r&&(n[o]=r)),e.result}},simulate:function(e,t,n){var a=x.extend(new x.Event,n,{type:e,isSimulated:!0});x.event.trigger(a,null,t)}}),x.fn.extend({trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return x.event.trigger(e,t,n,!0)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){x.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),g.focusin="onfocusin"in w,g.focusin||x.each({focus:"focusin",blur:"focusout"},function(n,a){function i(e){x.event.simulate(a,e.target,x.event.fix(e))}x.event.special[a]={setup:function(){var e=this.ownerDocument||this,t=Y.access(e,a);t||e.addEventListener(n,i,!0),Y.access(e,a,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Y.access(e,a)-1;t?Y.access(e,a,t):(e.removeEventListener(n,i,!0),Y.remove(e,a))}}});var bt=w.location,St=x.now(),Tt=/\?/;x.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+e),t};var wt=/\[\]$/,Pt=/\r?\n/g,xt=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i;x.param=function(e,t){function n(e,t){var n=x.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)}var a,i=[];if(x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){n(this.name,this.value)});else for(a in e)!function n(a,e,i,r){if(x.isArray(e))x.each(e,function(e,t){i||wt.test(a)?r(a,t):n(a+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,r)});else if(i||"object"!==x.type(e))r(a,e);else for(var t in e)n(a+"["+t+"]",e[t],i,r)}(a,e[a],t,n);return i.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&Ct.test(this.nodeName)&&!xt.test(e)&&(this.checked||!ie.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}}):{name:t.name,value:n.replace(Pt,"\r\n")}}).get()}});var Dt=/%20/g,Et=/#.*$/,At=/([?&])_=[^&]*/,kt=/^(.*?):[ \t]*([^\r\n]*)$/gm,It=/^(?:GET|HEAD)$/,Mt=/^\/\//,$t={},Lt={},Ot="*/".concat("*"),Rt=P.createElement("a");function Nt(r){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,a=0,i=e.toLowerCase().match(O)||[];if(x.isFunction(t))for(;n=i[a++];)"+"===n[0]?(n=n.slice(1)||"*",(r[n]=r[n]||[]).unshift(t)):(r[n]=r[n]||[]).push(t)}}function Ft(t,i,r,s){var o={},l=t===Lt;function c(e){var a;return o[e]=!0,x.each(t[e]||[],function(e,t){var n=t(i,r,s);return"string"!=typeof n||l||o[n]?l?!(a=n):void 0:(i.dataTypes.unshift(n),c(n),!1)}),a}return c(i.dataTypes[0])||!o["*"]&&c("*")}function Bt(e,t){var n,a,i=x.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:a=a||{})[n]=t[n]);return a&&x.extend(!0,e,a),e}Rt.href=bt.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ot,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Bt(Bt(e,x.ajaxSettings),t):Bt(x.ajaxSettings,e)},ajaxPrefilter:Nt($t),ajaxTransport:Nt(Lt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var u,h,d,n,f,a,p,m,i,r,g=x.ajaxSetup({},t),v=g.context||g,y=g.context&&(v.nodeType||v.jquery)?x(v):x.event,_=x.Deferred(),b=x.Callbacks("once memory"),S=g.statusCode||{},s={},o={},l="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(p){if(!n)for(n={};t=kt.exec(d);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return p?d:null},setRequestHeader:function(e,t){return null==p&&(e=o[e.toLowerCase()]=o[e.toLowerCase()]||e,s[e]=t),this},overrideMimeType:function(e){return null==p&&(g.mimeType=e),this},statusCode:function(e){if(e)if(p)T.always(e[T.status]);else for(var t in e)S[t]=[S[t],e[t]];return this},abort:function(e){var t=e||l;return u&&u.abort(t),c(0,t),this}};if(_.promise(T),g.url=((e||g.url||bt.href)+"").replace(Mt,bt.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(O)||[""],null==g.crossDomain){a=P.createElement("a");try{a.href=g.url,a.href=a.href,g.crossDomain=Rt.protocol+"//"+Rt.host!=a.protocol+"//"+a.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=x.param(g.data,g.traditional)),Ft($t,g,t,T),p)return T;for(i in(m=x.event&&g.global)&&0==x.active++&&x.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!It.test(g.type),h=g.url.replace(Et,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Dt,"+")):(r=g.url.slice(h.length),g.data&&(h+=(Tt.test(h)?"&":"?")+g.data,delete g.data),!1===g.cache&&(h=h.replace(At,"$1"),r=(Tt.test(h)?"&":"?")+"_="+St+++r),g.url=h+r),g.ifModified&&(x.lastModified[h]&&T.setRequestHeader("If-Modified-Since",x.lastModified[h]),x.etag[h]&&T.setRequestHeader("If-None-Match",x.etag[h])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&T.setRequestHeader("Content-Type",g.contentType),T.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ot+"; q=0.01":""):g.accepts["*"]),g.headers)T.setRequestHeader(i,g.headers[i]);if(g.beforeSend&&(!1===g.beforeSend.call(v,T,g)||p))return T.abort();if(l="abort",b.add(g.complete),T.done(g.success),T.fail(g.error),u=Ft(Lt,g,t,T)){if(T.readyState=1,m&&y.trigger("ajaxSend",[T,g]),p)return T;g.async&&0<g.timeout&&(f=w.setTimeout(function(){T.abort("timeout")},g.timeout));try{p=!1,u.send(s,c)}catch(e){if(p)throw e;c(-1,e)}}else c(-1,"No Transport");function c(e,t,n,a){var i,r,s,o,l,c=t;p||(p=!0,f&&w.clearTimeout(f),u=void 0,d=a||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(o=function(e,t,n){for(var a,i,r,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(i in o)if(o[i]&&o[i].test(a)){l.unshift(i);break}if(l[0]in n)r=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){r=i;break}s=s||i}r=r||s}if(r)return r!==l[0]&&l.unshift(r),n[r]}(g,T,n)),o=function(e,t,n,a){var i,r,s,o,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&a&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(i in c)if((o=i.split(" "))[1]===r&&(s=c[l+" "+o[0]]||c["* "+o[0]])){!0===s?s=c[i]:!0!==c[i]&&(r=o[0],u.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(g,o,T,i),i?(g.ifModified&&((l=T.getResponseHeader("Last-Modified"))&&(x.lastModified[h]=l),(l=T.getResponseHeader("etag"))&&(x.etag[h]=l)),204===e||"HEAD"===g.type?c="nocontent":304===e?c="notmodified":(c=o.state,r=o.data,i=!(s=o.error))):(s=c,!e&&c||(c="error",e<0&&(e=0))),T.status=e,T.statusText=(t||c)+"",i?_.resolveWith(v,[r,c,T]):_.rejectWith(v,[T,c,s]),T.statusCode(S),S=void 0,m&&y.trigger(i?"ajaxSuccess":"ajaxError",[T,g,i?r:s]),b.fireWith(v,[T,c]),m&&(y.trigger("ajaxComplete",[T,g]),--x.active||x.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],function(e,i){x[i]=function(e,t,n,a){return x.isFunction(t)&&(a=a||n,n=t,t=void 0),x.ajax(x.extend({url:e,type:i,dataType:a,data:t,success:n},x.isPlainObject(e)&&e))}}),x._evalUrl=function(e){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},x.fn.extend({wrapAll:function(e){var t;return this[0]&&(x.isFunction(e)&&(e=e.call(this[0])),t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return x.isFunction(n)?this.each(function(e){x(this).wrapInner(n.call(this,e))}):this.each(function(){var e=x(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=x.isFunction(t);return this.each(function(e){x(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},jt=x.ajaxSettings.xhr();g.cors=!!jt&&"withCredentials"in jt,g.ajax=jt=!!jt,x.ajaxTransport(function(i){var r,s;if(g.cors||jt&&!i.crossDomain)return{send:function(e,t){var n,a=i.xhr();if(a.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)a[n]=i.xhrFields[n];for(n in i.mimeType&&a.overrideMimeType&&a.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)a.setRequestHeader(n,e[n]);r=function(e){return function(){r&&(r=s=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?t(0,"error"):t(a.status,a.statusText):t(Vt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=r(),s=a.onerror=r("error"),void 0!==a.onabort?a.onabort=s:a.onreadystatechange=function(){4===a.readyState&&w.setTimeout(function(){r&&s()})},r=r("abort");try{a.send(i.hasContent&&i.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}}),x.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(n){var a,i;if(n.crossDomain)return{send:function(e,t){a=x("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){a.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),P.head.appendChild(a[0])},abort:function(){i&&i()}}});var Ut,Ht=[],Gt=/(=)\?(?=&|$)|\?\?/;function Yt(e){return x.isWindow(e)?e:9===e.nodeType&&e.defaultView}x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ht.pop()||x.expando+"_"+St++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(e,t,n){var a,i,r,s=!1!==e.jsonp&&(Gt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=x.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Gt,"$1"+a):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return r||x.error(a+" was not called"),r[0]},e.dataTypes[0]="json",i=w[a],w[a]=function(){r=arguments},n.always(function(){void 0===i?x(w).removeProp(a):w[a]=i,e[a]&&(e.jsonpCallback=t.jsonpCallback,Ht.push(a)),r&&x.isFunction(i)&&i(r[0]),r=i=void 0}),"script"}),g.createHTMLDocument=((Ut=P.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),x.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((a=(t=P.implementation.createHTMLDocument("")).createElement("base")).href=P.location.href,t.head.appendChild(a)):t=P),r=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=fe([e],t,r),r&&r.length&&x(r).remove(),x.merge([],i.childNodes)));var a,i,r},x.fn.load=function(e,t,n){var a,i,r,s=this,o=e.indexOf(" ");return-1<o&&(a=gt(e.slice(o)),e=e.slice(0,o)),x.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<s.length&&x.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){r=arguments,s.html(a?x("<div>").append(x.parseHTML(e)).find(a):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,r||[e.responseText,t,e])})}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.expr.pseudos.animated=function(t){return x.grep(x.timers,function(e){return t===e.elem}).length},x.offset={setOffset:function(e,t,n){var a,i,r,s,o,l,c=x.css(e,"position"),u=x(e),h={};"static"===c&&(e.style.position="relative"),o=u.offset(),r=x.css(e,"top"),l=x.css(e,"left"),i=("absolute"===c||"fixed"===c)&&-1<(r+l).indexOf("auto")?(s=(a=u.position()).top,a.left):(s=parseFloat(r)||0,parseFloat(l)||0),x.isFunction(t)&&(t=t.call(e,n,x.extend({},o))),null!=t.top&&(h.top=t.top-o.top+s),null!=t.left&&(h.left=t.left-o.left+i),"using"in t?t.using.call(e,h):u.css(h)}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){x.offset.setOffset(this,t,e)});var e,n,a,i,r=this[0];return r?r.getClientRects().length?(a=r.getBoundingClientRect()).width||a.height?(n=Yt(i=r.ownerDocument),e=i.documentElement,{top:a.top+n.pageYOffset-e.clientTop,left:a.left+n.pageXOffset-e.clientLeft}):a:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n=this[0],a={top:0,left:0};return"fixed"===x.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(a=e.offset()),a={top:a.top+x.css(e[0],"borderTopWidth",!0),left:a.left+x.css(e[0],"borderLeftWidth",!0)}),{top:t.top-a.top-x.css(n,"marginTop",!0),left:t.left-a.left-x.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent;return e||pe})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var r="pageYOffset"===i;x.fn[t]=function(e){return H(this,function(e,t,n){var a=Yt(e);return void 0===n?a?a[i]:e[t]:void(a?a.scrollTo(r?a.pageXOffset:n,r?n:a.pageYOffset):e[t]=n)},t,e,arguments.length)}}),x.each(["top","left"],function(e,n){x.cssHooks[n]=Ge(g.pixelPosition,function(e,t){if(t)return t=He(e,n),Ve.test(t)?x(e).position()[n]+"px":t})}),x.each({Height:"height",Width:"width"},function(s,o){x.each({padding:"inner"+s,content:o,"":"outer"+s},function(a,r){x.fn[r]=function(e,t){var n=arguments.length&&(a||"boolean"!=typeof e),i=a||(!0===e||!0===t?"margin":"border");return H(this,function(e,t,n){var a;return x.isWindow(e)?0===r.indexOf("outer")?e["inner"+s]:e.document.documentElement["client"+s]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+s],a["scroll"+s],e.body["offset"+s],a["offset"+s],a["client"+s])):void 0===n?x.css(e,t,i):x.style(e,t,n,i)},o,n?e:void 0,n)}})}),x.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,a){return this.on(t,e,n,a)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),x.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var qt=w.jQuery,zt=w.$;return x.noConflict=function(e){return w.$===x&&(w.$=zt),e&&w.jQuery===x&&(w.jQuery=qt),x},e||(w.jQuery=w.$=x),x}),function($){"use strict";function E(i,r){return r=r||Error,function(){for(var e="["+(i?i+":":"")+(t=arguments[0])+"] http://errors.angularjs.org/1.6.4/"+(i?i+"/":"")+t,t=1;t<arguments.length;t++){e=e+(1==t?"?":"&")+"p"+(t-1)+"=";var n=encodeURIComponent,a=arguments[t];e+=n(a="function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):void 0===a?"undefined":"string"!=typeof a?JSON.stringify(a):a)}return new r(e)}}function e(e){if(!fe(e))return Gn;O(e.objectMaxDepth)&&(Gn.objectMaxDepth=b(e.objectMaxDepth)?e.objectMaxDepth:NaN)}function b(e){return _(e)&&0<e}function A(e){if(null!=e&&!c(e)){if(ra(e)||R(e)||Bn&&e instanceof Bn)return 1;var t="length"in Object(e)&&e.length;return _(t)&&(0<=t&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}}function ce(e,t,n){if(e)if(pe(e))for(i in e)"prototype"!==i&&"length"!==i&&"name"!==i&&e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else if(ra(e)||A(e))for(var a="object"!=typeof e,i=0,r=e.length;i<r;i++)(a||i in e)&&t.call(n,e[i],i,e);else if(e.forEach&&e.forEach!==ce)e.forEach(t,n,e);else if(l(e))for(i in e)t.call(n,e[i],i,e);else if("function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else for(i in e)Hn.call(e,i)&&t.call(n,e[i],i,e);return e}function r(e,t,n){for(var a=Object.keys(e).sort(),i=0;i<a.length;i++)t.call(n,e[a[i]],a[i]);return a}function g(n){return function(e,t){n(t,e)}}function d(e,t,n){for(var a=e.$$hashKey,i=0,r=t.length;i<r;++i){var s=t[i];if(fe(s)||pe(s))for(var o=Object.keys(s),l=0,c=o.length;l<c;l++){var u=o[l],h=s[u];n&&fe(h)?S(h)?e[u]=new Date(h.valueOf()):f(h)?e[u]=new RegExp(h):h.nodeName?e[u]=h.cloneNode(!0):p(h)?e[u]=h.clone():(fe(e[u])||(e[u]=ra(h)?[]:{}),d(e[u],[h],!0)):e[u]=h}}return a?e.$$hashKey=a:delete e.$$hashKey,e}function ue(e){return d(e,zn.call(arguments,1),!1)}function t(e){return d(e,zn.call(arguments,1),!0)}function v(e){return parseInt(e,10)}function he(e,t){return ue(Object.create(e),t)}function L(){}function y(e){return e}function w(e){return function(){return e}}function u(e){return pe(e.toString)&&e.toString!==Xn}function de(e){return void 0===e}function O(e){return void 0!==e}function fe(e){return null!==e&&"object"==typeof e}function l(e){return null!==e&&"object"==typeof e&&!Qn(e)}function R(e){return"string"==typeof e}function _(e){return"number"==typeof e}function S(e){return"[object Date]"===Xn.call(e)}function pe(e){return"function"==typeof e}function f(e){return"[object RegExp]"===Xn.call(e)}function c(e){return e&&e.window===e}function me(e){return e&&e.$evalAsync&&e.$watch}function N(e){return"boolean"==typeof e}function p(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function ge(e){return Yn(e.nodeName||e[0]&&e[0].nodeName)}function F(e,t){var n=e.indexOf(t);return 0<=n&&e.splice(n,1),n}function P(e,n,t){function i(e,t,n){if(--n<0)return"...";var a,i=t.$$hashKey;if(ra(e)){a=0;for(var r=e.length;a<r;a++)t.push(s(e[a],n))}else if(l(e))for(a in e)t[a]=s(e[a],n);else if(e&&"function"==typeof e.hasOwnProperty)for(a in e)e.hasOwnProperty(a)&&(t[a]=s(e[a],n));else for(a in e)Hn.call(e,a)&&(t[a]=s(e[a],n));return i?t.$$hashKey=i:delete t.$$hashKey,t}function s(e,t){if(!fe(e))return e;if(-1!==(n=r.indexOf(e)))return o[n];if(c(e)||me(e))throw Jn("cpws");var n=!1,a=function(e){switch(Xn.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(s(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t;case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":return(t=new RegExp(e.source,e.toString().match(/[^/]*$/)[0])).lastIndex=e.lastIndex,t;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(pe(e.cloneNode))return e.cloneNode(!0)}(e);return void 0===a&&(a=ra(e)?[]:Object.create(Qn(e)),n=!0),r.push(e),o.push(a),n?i(e,a,t):a}var a,r=[],o=[];if(t=b(t)?t:NaN,n){if((a=n)&&_(a.length)&&sa.test(Xn.call(a))||"[object ArrayBuffer]"===Xn.call(n))throw Jn("cpta");if(e===n)throw Jn("cpi");return ra(n)?n.length=0:ce(n,function(e,t){"$$hashKey"!==t&&delete n[t]}),r.push(e),o.push(n),i(e,n,t)}return s(e,t)}function ve(e,t){return e===t||e!=e&&t!=t}function ye(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,a=typeof e;if(a===typeof t&&"object"===a){if(!ra(e)){if(S(e))return!!S(t)&&ve(e.getTime(),t.getTime());if(f(e))return!!f(t)&&e.toString()===t.toString();if(me(e)||me(t)||c(e)||c(t)||ra(t)||S(t)||f(t))return!1;for(n in a=we(),e)if("$"!==n.charAt(0)&&!pe(e[n])){if(!ye(e[n],t[n]))return!1;a[n]=!0}for(n in t)if(!(n in a)&&"$"!==n.charAt(0)&&O(t[n])&&!pe(t[n]))return!1;return!0}if(!ra(t))return!1;if((a=e.length)===t.length){for(n=0;n<a;n++)if(!ye(e[n],t[n]))return!1;return!0}}return!1}function x(e,t,n){return e.concat(zn.call(t,n))}function _e(e,t){var n=2<arguments.length?zn.call(arguments,2):[];return!pe(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,x(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function T(e,t){var n=t;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?n=void 0:c(t)?n="$WINDOW":t&&$.document===t?n="$DOCUMENT":me(t)&&(n="$SCOPE"),n}function n(e,t){if(!de(e))return _(t)||(t=t?2:null),JSON.stringify(e,T,t)}function i(e){return R(e)?JSON.parse(e):e}function C(e,t){e=e.replace(ha,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return na(n)?t:n}function D(e,t,n){n=n?-1:1;var a=e.getTimezoneOffset();return n*=(t=C(t,a))-a,(e=new Date(e.getTime())).setMinutes(e.getMinutes()+n),e}function be(e){e=Bn(e).clone();try{e.empty()}catch(e){}var t=Bn("<div>").append(e).html();try{return e[0].nodeType===ga?Yn(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+Yn(t)})}catch(e){return Yn(t)}}function s(e){try{return decodeURIComponent(e)}catch(e){}}function o(e){var i={};return ce((e||"").split("&"),function(e){var t,n,a;e&&(n=e=e.replace(/\+/g,"%20"),-1!==(t=e.indexOf("="))&&(n=e.substring(0,t),a=e.substring(t+1)),O(n=s(n))&&(a=!O(a)||s(a),Hn.call(i,n)?ra(i[n])?i[n].push(a):i[n]=[i[n],a]:i[n]=a))}),i}function a(e){var n=[];return ce(e,function(e,t){ra(e)?ce(e,function(e){n.push(m(t,!0)+(!0===e?"":"="+m(e,!0)))}):n.push(m(t,!0)+(!0===e?"":"="+m(e,!0)))}),n.length?n.join("&"):""}function h(e){return m(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function m(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function k(n,e){var a,i,t={};ce(da,function(e){e+="app",!a&&n.hasAttribute&&n.hasAttribute(e)&&(i=(a=n).getAttribute(e))}),ce(da,function(e){var t;e+="app",!a&&(t=n.querySelector("["+e.replace(":","\\:")+"]"))&&(i=(a=t).getAttribute(e))}),a&&(fa?(t.strictDi=null!==function(e,t){for(var n,a=da.length,i=0;i<a;++i)if(n=da[i]+t,R(n=e.getAttribute(n)))return n;return null}(a,"strict-di"),e(a,i?[i]:[],t)):$.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}function I(t,n,a){fe(a)||(a={}),a=ue({strictDi:!1},a);function i(){if((t=Bn(t)).injector()){var e=t[0]===$.document?"document":be(t);throw Jn("btstrpd",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}return(n=n||[]).unshift(["$provide",function(e){e.value("$rootElement",t)}]),a.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng"),(e=Oe(n,a.strictDi)).invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,a){e.$apply(function(){t.data("$injector",a),n(t)(e)})}]),e}var e=/^NG_ENABLE_DEBUG_INFO!/,r=/^NG_DEFER_BOOTSTRAP!/;if($&&e.test($.name)&&(a.debugInfoEnabled=!0,$.name=$.name.replace(e,"")),$&&!r.test($.name))return i();$.name=$.name.replace(r,""),Zn.resumeBootstrap=function(e){return ce(e,function(e){n.push(e)}),i()},pe(Zn.resumeDeferredBootstrap)&&Zn.resumeDeferredBootstrap()}function M(){$.name="NG_ENABLE_DEBUG_INFO!"+$.name,$.location.reload()}function B(e){if(!(e=Zn.element(e).injector()))throw Jn("test");return e.get("$$testability")}function Se(e,n){return n=n||"_",e.replace(pa,function(e,t){return(t?n:"")+e.toLowerCase()})}function Te(e,t,n){if(!e)throw Jn("areq",t||"?",n||"required");return e}function V(e,t,n){return n&&ra(e)&&(e=e[e.length-1]),Te(pe(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function j(e,t){if("hasOwnProperty"===e)throw Jn("badname",t)}function U(e,t,n){if(!t)return e;for(var a,i=e,r=(t=t.split(".")).length,s=0;s<r;s++)a=t[s],e=e&&(i=e)[a];return!n&&pe(e)?_e(i,e):e}function H(e){for(var t,n=e[0],a=e[e.length-1],i=1;n!==a&&(n=n.nextSibling);i++)!t&&e[i]===n||(t=t||Bn(zn.call(e,0,i))).push(n);return t||e}function we(){return Object.create(null)}function G(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!u(e)||ra(e)||S(e)?n(e):e.toString()}return e}function Y(e,t){if(ra(e)){t=t||[];for(var n=0,a=e.length;n<a;n++)t[n]=e[n]}else if(fe(e))for(n in t=t||{},e)"$"===n.charAt(0)&&"$"===n.charAt(1)||(t[n]=e[n]);return t||e}function q(e,t){return t.toUpperCase()}function z(e){return e.replace(ba,q)}function W(e){return 1===(e=e.nodeType)||!e||9===e}function K(e,t){var n,a,i=t.createDocumentFragment(),r=[];if(xa.test(e)){for(n=i.appendChild(t.createElement("div")),a=(Ca.exec(e)||["",""])[1].toLowerCase(),a=Ea[a]||Ea._default,n.innerHTML=a[1]+e.replace(Da,"<$1></$2>")+a[2],a=a[0];a--;)n=n.lastChild;r=x(r,n.childNodes),(n=i.firstChild).textContent=""}else r.push(t.createTextNode(e));return i.textContent="",i.innerHTML="",ce(r,function(e){i.appendChild(e)}),i}function X(e){if(e instanceof X)return e;var t,n;if(R(e)&&(e=oa(e),n=!0),!(this instanceof X)){if(n&&"<"!==e.charAt(0))throw wa("nosel");return new X(e)}n?(n=$.document,re(this,e=(t=Pa.exec(e))?[n.createElement(t[1])]:(t=K(e,n))?t.childNodes:[])):pe(e)?Ce(e):re(this,e)}function Pe(e){return e.cloneNode(!0)}function Q(e,t){!t&&W(e)&&Bn.cleanData([e]),e.querySelectorAll&&Bn.cleanData(e.querySelectorAll("*"))}function J(n,e,a,t){if(O(t))throw wa("offargs");var i=(t=ee(n))&&t.events,r=t&&t.handle;if(r)if(e){var s=function(e){var t=i[e];O(a)&&F(t||[],a),O(a)&&t&&0<t.length||(n.removeEventListener(e,r),delete i[e])};ce(e.split(" "),function(e){s(e),Ta[e]&&s(Ta[e])})}else for(e in i)"$destroy"!==e&&n.removeEventListener(e,r),delete i[e]}function Z(e,t){var n=e.ng339,a=n&&ya[n];a&&(t?delete a.data[t]:(a.handle&&(a.events.$destroy&&a.handle({},"$destroy"),J(e)),delete ya[n],e.ng339=void 0))}function ee(e,t){var n=(n=e.ng339)&&ya[n];return t&&!n&&(e.ng339=n=++_a,n=ya[n]={events:{},data:{},handle:void 0}),n}function te(e,t,n){if(W(e)){var a,i=O(n),r=!i&&t&&!fe(t),s=!t;if(e=(e=ee(e,!r))&&e.data,i)e[z(t)]=n;else{if(s)return e;if(r)return e&&e[z(t)];for(a in t)e[z(a)]=t[a]}}}function ne(e,t){return!!e.getAttribute&&-1<(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")}function ae(t,e){e&&t.setAttribute&&ce(e.split(" "),function(e){t.setAttribute("class",oa((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+oa(e)+" "," ")))})}function ie(e,t){var n;t&&e.setAttribute&&(n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),ce(t.split(" "),function(e){e=oa(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",oa(n)))}function re(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var a=0;a<n;a++)e[e.length++]=t[a]}else e[e.length++]=t}}function se(e,t){return oe(e,"$"+(t||"ngController")+"Controller")}function oe(e,t,n){for(9===e.nodeType&&(e=e.documentElement),t=ra(t)?t:[t];e;){for(var a=0,i=t.length;a<i;a++)if(O(n=Bn.data(e,t[a])))return n;e=e.parentNode||11===e.nodeType&&e.host}}function le(e){for(Q(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function xe(e,t){t||Q(e);var n=e.parentNode;n&&n.removeChild(e)}function Ce(e){function t(){$.document.removeEventListener("DOMContentLoaded",t),$.removeEventListener("load",t),e()}"complete"===$.document.readyState?$.setTimeout(e):($.document.addEventListener("DOMContentLoaded",t),$.addEventListener("load",t))}function De(e,t){var n=Ia[t.toLowerCase()];return n&&Ma[ge(e)]&&n}function Ee(o,l){function e(e,t){e.isDefaultPrevented=function(){return e.defaultPrevented};var n,a=l[t||e.type],i=a?a.length:0;if(i){de(e.immediatePropagationStopped)&&(n=e.stopImmediatePropagation,e.stopImmediatePropagation=function(){e.immediatePropagationStopped=!0,e.stopPropagation&&e.stopPropagation(),n&&n.call(e)}),e.isImmediatePropagationStopped=function(){return!0===e.immediatePropagationStopped};var r=a.specialHandlerWrapper||Ae;1<i&&(a=Y(a));for(var s=0;s<i;s++)e.isImmediatePropagationStopped()||r(o,e,a[s])}}return e.elem=o,e}function Ae(e,t,n){n.call(e,t)}function ke(e,t,n){var a=t.relatedTarget;a&&(a===e||Aa.call(e,a))||n.call(e,t)}function Ie(){this.$get=function(){return ue(X,{hasClass:function(e,t){return e.attr&&(e=e[0]),ne(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),ie(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),ae(e,t)}})}}function Me(e,t){var n=e&&e.$$hashKey;return n?("function"==typeof n&&(n=e.$$hashKey()),n):"function"===(n=typeof e)||"object"===n&&null!==e?e.$$hashKey=n+":"+(t||function(){return++ea})():n+":"+e}function $e(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function Le(e){return(e=Function.prototype.toString.call(e).replace(Ua,"")).match(Fa)||e.match(Ba)}function Oe(e,l){function t(n){return function(e,t){if(!fe(e))return n(e,t);ce(e,g(n))}}function r(e,t){if(j(e,"service"),(pe(t)||ra(t))&&(t=u.instantiate(t)),!t.$get)throw Ha("pget",e);return c[e+"Provider"]=t}function n(e,t,n){return r(e,{$get:!1!==n?(a=e,i=t,function(){var e=f.invoke(i,this);if(de(e))throw Ha("undef",a);return e}):t});var a,i}function a(n,a){function o(t,e){if(n.hasOwnProperty(t)){if(n[t]===i)throw Ha("cdep",t+" <- "+s.join(" <- "));return n[t]}try{return s.unshift(t),n[t]=i,n[t]=a(t,e),n[t]}catch(e){throw n[t]===i&&delete n[t],e}finally{s.shift()}}function r(e,t,n){for(var a=[],i=0,r=(e=Oe.$$annotate(e,l,n)).length;i<r;i++){var s=e[i];if("string"!=typeof s)throw Ha("itkn",s);a.push(t&&t.hasOwnProperty(s)?t[s]:o(s,n))}return a}return{invoke:function(e,t,n,a){var i;return"string"==typeof n&&(a=n,n=null),n=r(e,n,a),ra(e)&&(e=e[e.length-1]),a=e,(a=!ta&&"function"==typeof a&&(N(i=a.$$ngIsClass)||(i=a.$$ngIsClass=/^(?:class\b|constructor\()/.test(Function.prototype.toString.call(a))),i))?(n.unshift(null),new(Function.prototype.bind.apply(e,n))):e.apply(t,n)},instantiate:function(e,t,n){var a=ra(e)?e[e.length-1]:e;return(e=r(e,t,n)).unshift(null),new(Function.prototype.bind.apply(a,e))},get:o,annotate:Oe.$$annotate,has:function(e){return c.hasOwnProperty(e+"Provider")||n.hasOwnProperty(e)}}}l=!0===l;var i={},s=[],o=new Ra,c={$provide:{provider:t(r),factory:t(n),service:t(function(e,t){return n(e,["$injector",function(e){return e.instantiate(t)}])}),value:t(function(e,t){return n(e,w(t),!1)}),constant:t(function(e,t){j(e,"constant"),c[e]=t,h[e]=t}),decorator:function(e,t){var n=u.get(e+"Provider"),a=n.$get;n.$get=function(){var e=f.invoke(a,n);return f.invoke(t,null,{$delegate:e})}}}},u=c.$injector=a(c,function(e,t){throw Zn.isString(t)&&s.push(t),Ha("unpr",s.join(" <- "))}),h={},d=a(h,function(e,t){var n=u.get(e+"Provider",t);return f.invoke(n.$get,n,void 0,e)}),f=d;c.$injectorProvider={$get:w(d)},f.modules=u.modules=we();var p=function n(e){Te(de(e)||ra(e),"modulesToLoad","not an array");var a,i=[];return ce(e,function(t){function e(e){for(var t=0,n=e.length;t<n;t++){var a=e[t],i=u.get(a[0]);i[a[1]].apply(i,a[2])}}if(!o.get(t)){o.set(t,!0);try{R(t)?(a=jn(t),f.modules[t]=a,i=i.concat(n(a.requires)).concat(a._runBlocks),e(a._invokeQueue),e(a._configBlocks)):pe(t)||ra(t)?i.push(u.invoke(t)):V(t,"module")}catch(e){throw ra(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ha("modulerr",t,e.stack||e.message||e)}}}),i}(e);return(f=d.get("$injector")).strictDi=l,ce(p,function(e){e&&f.invoke(e)}),f}function Re(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,i,r){function s(e){var t;e?(e.scrollIntoView(),pe(t=o.yOffset)?t=t():p(t)?(t=t[0],t="fixed"!==n.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom):_(t)||(t=0),t&&(e=e.getBoundingClientRect().top,n.scrollBy(0,e-t))):n.scrollTo(0,0)}function o(e){var t,n,a;(e=R(e)?e:_(e)?e.toString():i.hash())?(t=l.getElementById(e))?s(t):(n=l.getElementsByName(e),a=null,Array.prototype.some.call(n,function(e){if("a"===ge(e))return a=e,!0}),(t=a)?s(t):"top"===e&&s(null)):s(null)}var l=n.document;return e&&r.$watch(function(){return i.hash()},function(e,t){var n,a;e===t&&""===e||(n=function(){r.$evalAsync(o)},"complete"===(a=a||$).document.readyState?a.setTimeout(n):Bn(a).on("load",n))}),o}]}function Ne(e,t){return e||t?e?t?(ra(e)&&(e=e.join(" ")),ra(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function Fe(e){return fe(e)?e:{}}function Be(r,e,t,s){function a(e){try{e.apply(null,zn.call(arguments,1))}finally{if(0===--p)for(;m.length;)try{m.pop()()}catch(e){t.error(e)}}}function n(){b=null,i()}function o(){ye(g=de(g=S())?null:g,P)&&(g=P),v=P=g}function i(){var e=v;o(),y===l.url()&&e===g||(y=l.url(),v=g,ce(T,function(e){e(l.url(),g)}))}var l=this,c=r.location,u=r.history,h=r.setTimeout,d=r.clearTimeout,f={};l.isMock=!1;var p=0,m=[];l.$$completeOutstandingRequest=a,l.$$incOutstandingRequestCount=function(){p++},l.notifyWhenNoOutstandingRequests=function(e){0===p?e():m.push(e)};var g,v,y=c.href,_=e.find("base"),b=null,S=s.history?function(){try{return u.state}catch(e){}}:L;o(),l.url=function(e,t,n){if(de(n)&&(n=null),c!==r.location&&(c=r.location),u!==r.history&&(u=r.history),e){var a=v===n;if(y===e&&(!s.history||a))return l;var i=y&&mt(y)===mt(e);return y=e,v=n,!s.history||i&&a?(i||(b=e),t?c.replace(e):i?(t=c,n=-1===(n=e.indexOf("#"))?"":e.substr(n),t.hash=n):c.href=e,c.href!==e&&(b=e)):(u[t?"replaceState":"pushState"](n,"",e),o()),b=b&&e,l}return b||c.href.replace(/%27/g,"'")},l.state=function(){return g};var T=[],w=!1,P=null;l.onUrlChange=function(e){return w||(s.history&&Bn(r).on("popstate",n),Bn(r).on("hashchange",n),w=!0),T.push(e),e},l.$$applicationDestroyed=function(){Bn(r).off("hashchange popstate",n)},l.$$checkUrlChange=i,l.baseHref=function(){var e=_.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""},l.defer=function(e,t){var n;return p++,n=h(function(){delete f[n],a(e)},t||0),f[n]=!0,n},l.defer.cancel=function(e){return!!f[e]&&(delete f[e],d(e),a(L),!0)}}function Ve(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,a){return new Be(e,a,t,n)}]}function je(){this.$get=function(){function e(e,t){function n(e){e!==c&&(u?u===e&&(u=e.n):u=e,a(e.n,e.p),a(e,c),(c=e).n=null)}function a(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(e in h)throw E("$cacheFactory")("iid",e);var i=0,r=ue({},t,{id:e}),s=we(),o=t&&t.capacity||Number.MAX_VALUE,l=we(),c=null,u=null;return h[e]={put:function(e,t){if(!de(t))return o<Number.MAX_VALUE&&n(l[e]||(l[e]={key:e})),e in s||i++,s[e]=t,o<i&&this.remove(u.key),t},get:function(e){if(o<Number.MAX_VALUE){var t=l[e];if(!t)return;n(t)}return s[e]},remove:function(e){if(o<Number.MAX_VALUE){var t=l[e];if(!t)return;t===c&&(c=t.p),t===u&&(u=t.n),a(t.n,t.p),delete l[e]}e in s&&(delete s[e],i--)},removeAll:function(){s=we(),i=0,l=we(),c=u=null},destroy:function(){l=r=s=null,delete h[e]},info:function(){return ue({},r,{size:i})}}}var h={};return e.info=function(){var n={};return ce(h,function(e,t){n[t]=e.info()}),n},e.get=function(e){return h[e]},e}}function Ue(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function He(n,t){function f(e,a,i){var r=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,s=we();return ce(e,function(e,t){if(e in o)s[t]=o[e];else{var n=e.match(r);if(!n)throw Qa("iscp",a,t,e,i?"controller bindings definition":"isolate scope definition");s[t]={mode:n[1][0],collection:"*"===n[2],optional:"?"===n[3],attrName:n[4]||t},n[4]&&(o[e]=s[t])}}),s}var E={},A=/^\s*directive:\s*([\w-]+)\s+(.*)$/,k=/(([\w-]+)(?::([^;]+))?;?)/,I=function(e){var t,n={};for(e=e.split(","),t=0;t<e.length;t++)n[e[t]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),p=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,M=/^(on[a-z]+|formaction)$/,o=we();this.directive=function e(u,t){return Te(u,"name"),j(u,"directive"),R(u)?(function(e){var t=e.charAt(0);if(!t||t!==Yn(t))throw Qa("baddir",e);if(e!==e.trim())throw Qa("baddir",e)}(u),Te(t,"directiveFactory"),E.hasOwnProperty(u)||(E[u]=[],n.factory(u+"Directive",["$injector","$exceptionHandler",function(o,l){var c=[];return ce(E[u],function(e,t){try{var n=o.invoke(e);pe(n)?n={compile:w(n)}:!n.compile&&n.link&&(n.compile=w(n.link)),n.priority=n.priority||0,n.index=t,n.name=n.name||u,n.require=(s=(r=n).require||r.controller&&r.name,!ra(s)&&fe(s)&&ce(s,function(e,t){var n=e.match(p);e.substring(n[0].length)||(s[t]=n[0]+t)}),s);var a=n,i=n.restrict;if(i&&(!R(i)||!/[EACM]/.test(i)))throw Qa("badrestrict",i,u);a.restrict=i||"EA",n.$$moduleName=e.$$moduleName,c.push(n)}catch(e){l(e)}var r,s}),c}])),E[u].push(t)):ce(u,g(e)),this},this.component=function(e,i){function n(a){function e(n){return pe(n)||ra(n)?function(e,t){return a.invoke(n,this,{$element:e,$attrs:t})}:n}var t=i.template||i.templateUrl?i.template:"",n={controller:r,controllerAs:function(e,t){if(t&&R(t))return t;if(R(e)){var n=ai.exec(e);if(n)return n[3]}}(i.controller)||i.controllerAs||"$ctrl",template:e(t),templateUrl:e(i.templateUrl),transclude:i.transclude,scope:{},bindToController:i.bindings||{},restrict:"E",require:i.require};return ce(i,function(e,t){"$"===t.charAt(0)&&(n[t]=e)}),n}var r=i.controller||function(){};return ce(i,function(e,t){"$"===t.charAt(0)&&(n[t]=e,pe(r)&&(r[t]=e))}),n.$inject=["$injector"],this.directive(e,n)},this.aHrefSanitizationWhitelist=function(e){return O(e)?(t.aHrefSanitizationWhitelist(e),this):t.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return O(e)?(t.imgSrcSanitizationWhitelist(e),this):t.imgSrcSanitizationWhitelist()};var i=!0,le=!(this.debugInfoEnabled=function(e){return O(e)?(i=e,this):i});this.preAssignBindingsEnabled=function(e){return O(e)?(le=e,this):le};var l=10;this.onChangesTtl=function(e){return arguments.length?(l=e,this):l};var c=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(c=e,this):c};var m=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(m=e,this):m},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(_,b,B,V,v,j,r,S,a,u){function s(){try{if(!--e)throw o=void 0,Qa("infchng",l);r.$apply(function(){for(var t=[],e=0,n=o.length;e<n;++e)try{o[e]()}catch(e){t.push(e)}if(o=void 0,t.length)throw t})}finally{e++}}function U(e,t){if(t)for(var n,a=Object.keys(t),i=0,r=a.length;i<r;i++)this[n=a[i]]=t[n];else this.$attr={};this.$$element=e}function H(e,t){try{e.addClass(t)}catch(e){}}function G(s,e,t,n,o){s instanceof Bn||(s=Bn(s));var l=Y(s,e,s,t,n,o);G.$$addScopeClass(s);var c=null;return function(e,t,n){if(!s)throw Qa("multilink");Te(e,"scope"),o&&o.needsNewScope&&(e=e.$parent.$new());var a=(n=n||{}).parentBoundTranscludeFn,i=n.transcludeControllers;if(n=n.futureParentElement,a&&a.$$boundTransclude&&(a=a.$$boundTransclude),n="html"!==(c=c||((n=n&&n[0])&&"foreignobject"!==ge(n)&&Xn.call(n).match(/SVG/)?"svg":"html"))?Bn(ne(c,Bn("<div>").append(s).html())):t?ka.clone.call(s):s,i)for(var r in i)n.data("$"+r+"Controller",i[r].instance);return G.$$addScopeInfo(n,e),t&&t(n,e),l&&l(e,n,n,a),t||(s=l=null),n}}function Y(e,u,t,n,a,i){for(var r,s,o,l,h,d=[],c=ra(e)||e instanceof Bn,f=0;f<e.length;f++)r=new U,11===ta&&function(e,t,n){var a,i=e[t],r=i.parentNode;if(i.nodeType===ga)for(;(a=r?i.nextSibling:e[t+1])&&a.nodeType===ga;)i.nodeValue+=a.nodeValue,a.parentNode&&a.parentNode.removeChild(a),n&&a===e[t+1]&&e.splice(t+1,1)}(e,f,c),(i=(s=z(e[f],[],r,0===f?n:void 0,a)).length?Q(s,e[f],r,u,t,null,[],[],i):null)&&i.scope&&G.$$addScopeClass(r.$$element),r=i&&i.terminal||!(o=e[f].childNodes)||!o.length?null:Y(o,i?(i.transcludeOnThisElement||!i.templateOnThisElement)&&i.transclude:u),(i||r)&&(d.push(f,i,r),l=!0,h=h||i),i=null;return l?function(e,t,n,a){var i,r,s,o,l,c;if(h)for(c=Array(t.length),o=0;o<d.length;o+=3)c[i=d[o]]=t[i];else c=t;for(o=0,l=d.length;o<l;)r=c[d[o++]],t=d[o++],i=d[o++],t?(t.scope?(s=e.$new(),G.$$addScopeInfo(Bn(r),s)):s=e,t(i,s,r,n,t.transcludeOnThisElement?q(e,t.transclude,a):!t.templateOnThisElement&&a?a:!a&&u?q(e,u):null)):i&&i(e,r.childNodes,void 0,a)}:null}function q(r,s,o){function e(e,t,n,a,i){return e||((e=r.$new(!1,i)).$$transcluded=!0),s(e,t,{parentBoundTranscludeFn:o,transcludeControllers:n,futureParentElement:a})}var t,n=e.$$slots=we();for(t in s.$$slots)n[t]=s.$$slots[t]?q(r,s.$$slots[t],o):null;return e}function z(e,t,n,a,i){var r,s,o,l,c=n.$attr;switch(e.nodeType){case 1:T(t,Ye(r=ge(e)),"E",a,i);for(var u,h=e.attributes,d=0,f=h&&h.length;d<f;d++){var p,m=!1,g=!1,v=(p=h[d]).name,y=p.value;p=Ye(v),(u=C.test(p))&&(v=v.replace(ei,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()})),(p=p.match(D))&&function(e){if(E.hasOwnProperty(e))for(var t=_.get(e+"Directive"),n=0,a=t.length;n<a;n++)if((e=t[n]).multiElement)return!0;return!1}(p[1])&&(g=(m=v).substr(0,v.length-5)+"end",v=v.substr(0,v.length-6)),c[p=Ye(v.toLowerCase())]=v,!u&&n.hasOwnProperty(p)||(n[p]=y,De(e,p)&&(n[p]=!0)),function(e,t,i,r,n){var s=function(e,t){if("srcdoc"===t)return S.HTML;var n=ge(e);if("src"===t||"ngSrc"===t){if(-1===["img","video","audio","source","track"].indexOf(n))return S.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t||"link"===n&&"href"===t)return S.RESOURCE_URL}(e,r),o=I[r]||n,l=b(i,!n,s,o);if(l){if("multiple"===r&&"select"===ge(e))throw Qa("selmulti",be(e));if(M.test(r))throw Qa("nodomevents");t.push({priority:100,compile:function(){return{pre:function(e,t,n){t=n.$$observers||(n.$$observers=we());var a=n[r];a!==i&&(l=a&&b(a,!0,s,o),i=a),l&&(n[r]=l(e),(t[r]||(t[r]=[])).$$inter=!0,(n.$$observers&&n.$$observers[r].$$scope||e).$watch(l,function(e,t){"class"===r&&e!==t?n.$updateClass(e,t):n.$set(r,e)}))}}}})}}(e,t,y,p,u),T(t,p,"A",a,i,m,g)}if("input"===r&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!x)break;if(fe(c=e.className)&&(c=c.animVal),R(c)&&""!==c)for(;e=k.exec(c);)T(t,p=Ye(e[2]),"C",a,i)&&(n[p]=oa(e[3])),c=c.substr(e.index+e[0].length);break;case ga:s=t,o=e.nodeValue,(l=b(o,!0))&&s.push({priority:0,compile:function(e){var a=!!(e=e.parent()).length;return a&&G.$$addBindingClass(e),function(e,t){var n=t.parent();a||G.$$addBindingClass(n),G.$$addBindingInfo(n,l.expressions),e.$watch(l,function(e){t[0].nodeValue=e})}}});break;case 8:if(!P)break;!function(e,t,n,a,i){try{var r,s=A.exec(e.nodeValue);s&&(r=Ye(s[1]),T(t,r,"M",a,i)&&(n[r]=oa(s[2])))}catch(e){}}(e,t,n,a,i)}return t.sort(w),t}function W(e,t,n){var a=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw Qa("uterdir",t,n);1===e.nodeType&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),a.push(e),e=e.nextSibling}while(0<i);else a.push(e);return Bn(a)}function K(r,s,o){return function(e,t,n,a,i){return t=W(t[0],s,o),r(e,t,n,a,i)}}function X(e,t,n,a,i,r){var s;return e?G(t,n,a,i,r):function(){return s||(s=G(t,n,a,i,r),t=n=r=null),s.apply(this,arguments)}}function Q(e,g,v,t,n,a,y,_,i){function r(e,t,n,a){e&&(n&&(e=K(e,n,a)),e.require=o.require,e.directiveName=l,T!==o&&!o.$$isolateScope||(e=ie(e,{isolateScope:!0})),y.push(e)),t&&(n&&(t=K(t,n,a)),t.require=o.require,t.directiveName=l,T!==o&&!o.$$isolateScope||(t=ie(t,{isolateScope:!0})),_.push(t))}function s(e,t,n,a,s){var i,r,o,l,c,u,h,d;for(i in g===n?d=(a=v).$$element:a=new U(d=Bn(n),v),c=t,T?l=t.$new(!0):b&&(c=t.$parent),s&&((h=function(e,t,n,a){var i;if(me(e)||(a=n,n=t,t=e,e=void 0),P&&(i=u),n=n||(P?d.parent():d),!a)return s(e,t,i,n,m);var r=s.$$slots[a];if(r)return r(e,t,i,n,m);if(de(r))throw Qa("noslot",a,be(d))}).$$boundTransclude=s,h.isSlotFilled=function(e){return!!s.$$slots[e]}),S&&(u=function(e,t,n,a,i,r,s){var o,l=we();for(o in a){var c=a[o],u={$scope:c===s||c.$$isolateScope?i:r,$element:e,$attrs:t,$transclude:n},h=c.controller;"@"===h&&(h=t[c.name]),u=j(h,u,!0,c.controllerAs),l[c.name]=u,e.data("$"+c.name+"Controller",u.instance)}return l}(d,a,h,S,l,t,T)),T&&(G.$$addScopeInfo(d,l,!0,!(w&&(w===T||w===T.$$originalDirective))),G.$$addScopeClass(d,!0),l.$$isolateBindings=T.$$isolateBindings,(r=se(t,a,l,l.$$isolateBindings,T)).removeWatches&&l.$on("$destroy",r.removeWatches)),u){r=S[i],o=u[i];var f,p=r.$$bindings.bindToController;le?(o.bindingInfo=p?se(c,a,o.instance,p,r):{},(f=o())!==o.instance&&(o.instance=f,d.data("$"+r.name+"Controller",f),o.bindingInfo.removeWatches&&o.bindingInfo.removeWatches(),o.bindingInfo=se(c,a,o.instance,p,r))):(o.instance=o(),d.data("$"+r.name+"Controller",o.instance),o.bindingInfo=se(c,a,o.instance,p,r))}for(ce(S,function(e,t){var n=e.require;e.bindToController&&!ra(n)&&fe(n)&&ue(u[t].instance,J(t,n,d,u))}),ce(u,function(e){var t=e.instance;if(pe(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){B(e)}if(pe(t.$onInit))try{t.$onInit()}catch(e){B(e)}pe(t.$doCheck)&&(c.$watch(function(){t.$doCheck()}),t.$doCheck()),pe(t.$onDestroy)&&c.$on("$destroy",function(){t.$onDestroy()})}),i=0,r=y.length;i<r;i++)re(o=y[i],o.isolateScope?l:t,d,a,o.require&&J(o.directiveName,o.require,d,u),h);var m=t;for(T&&(T.template||null===T.templateUrl)&&(m=l),e&&e(m,n.childNodes,void 0,s),i=_.length-1;0<=i;i--)re(o=_[i],o.isolateScope?l:t,d,a,o.require&&J(o.directiveName,o.require,d,u),h);ce(u,function(e){pe((e=e.instance).$postLink)&&e.$postLink()})}i=i||{};for(var o,l,c,u,h,d=-Number.MAX_VALUE,b=i.newScopeDirective,S=i.controllerDirectives,T=i.newIsolateScopeDirective,w=i.templateDirective,f=i.nonTlbTranscludeDirective,p=!1,m=!1,P=i.hasElementTranscludeDirective,x=v.$$element=Bn(g),C=t,D=!1,E=!1,A=0,k=e.length;A<k;A++){var I=(o=e[A]).$$start,M=o.$$end;if(I&&(x=W(g,I,M)),c=void 0,d>o.priority)break;if((h=o.scope)&&(o.templateUrl||(fe(h)?(te("new/isolated scope",T||b,o,x),T=o):te("new/isolated scope",T,o,x)),b=b||o),l=o.name,!D&&(o.replace&&(o.templateUrl||o.template)||o.transclude&&!o.$$tlb)){for(h=A+1;D=e[h++];)if(D.transclude&&!D.$$tlb||D.replace&&(D.templateUrl||D.template)){E=!0;break}D=!0}if(!o.templateUrl&&o.controller&&(S=S||we(),te("'"+l+"' controller",S[l],o,x),S[l]=o),h=o.transclude)if(p=!0,o.$$tlb||(te("transclusion",f,o,x),f=o),"element"===h)P=!0,d=o.priority,c=x,x=v.$$element=Bn(G.$$createComment(l,v[l])),g=x[0],ae(n,zn.call(c,0),g),c[0].$$parentNode=c[0].parentNode,C=X(E,c,t,d,a&&a.name,{nonTlbTranscludeDirective:f});else{var $=we();if(fe(h)){c=[];var L,O=we(),R=we();for(L in ce(h,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,O[e]=t,$[t]=null,R[t]=n}),ce(x.contents(),function(e){var t=O[Ye(ge(e))];t?(R[t]=!0,$[t]=$[t]||[],$[t].push(e)):c.push(e)}),ce(R,function(e,t){if(!e)throw Qa("reqslot",t)}),$)$[L]&&($[L]=X(E,$[L],t))}else c=Bn(Pe(g)).contents();x.empty(),(C=X(E,c,t,void 0,void 0,{needsNewScope:o.$$isolateScope||o.$$newScope})).$$slots=$}if(o.template)if(m=!0,te("template",w,o,x),h=pe((w=o).template)?o.template(x,v):o.template,h=oe(h),o.replace){if(a=o,c=xa.test(h)?ze(ne(o.templateNamespace,oa(h))):[],g=c[0],1!==c.length||1!==g.nodeType)throw Qa("tplrt",l,"");ae(n,x,g),h=z(g,[],k={$attr:{}});var N=e.splice(A+1,e.length-(A+1));(T||b)&&Z(h,T,b),e=e.concat(h).concat(N),ee(v,k),k=e.length}else x.html(h);if(o.templateUrl)m=!0,te("template",w,o,x),(w=o).replace&&(a=o),s=function(o,l,c,u,h,d,f,p){var m,g,v=[],y=l[0],_=o.shift(),b=he(_,{templateUrl:null,transclude:null,replace:null,$$originalDirective:_}),S=pe(_.templateUrl)?_.templateUrl(l,c):_.templateUrl,T=_.templateNamespace;return l.empty(),V(S).then(function(e){var n,t;if(e=oe(e),_.replace){if(e=xa.test(e)?ze(ne(T,oa(e))):[],n=e[0],1!==e.length||1!==n.nodeType)throw Qa("tplrt",_.name,S);e={$attr:{}},ae(u,l,n);var a=z(n,[],e);fe(_.scope)&&Z(a,!0),o=a.concat(o),ee(c,e)}else n=y,l.html(e);for(o.unshift(b),m=Q(o,n,c,h,l,_,d,f,p),ce(u,function(e,t){e===n&&(u[t]=l[0])}),g=Y(l[0].childNodes,h);v.length;){e=v.shift(),t=v.shift();var i,r=v.shift(),s=v.shift(),a=l[0];e.$$destroyed||(t!==y&&(i=t.className,p.hasElementTranscludeDirective&&_.replace||(a=Pe(n)),ae(r,Bn(t),a),H(Bn(a),i)),t=m.transcludeOnThisElement?q(e,m.transclude,s):s,m(g,e,a,u,t))}v=null}).catch(function(e){e instanceof Error&&B(e)}),function(e,t,n,a,i){e=i,t.$$destroyed||(v?v.push(t,n,a,e):(m.transcludeOnThisElement&&(e=q(t,m.transclude,i)),m(g,t,n,a,e)))}}(e.splice(A,e.length-A),x,v,n,p&&C,y,_,{controllerDirectives:S,newScopeDirective:b!==o&&b,newIsolateScopeDirective:T,templateDirective:w,nonTlbTranscludeDirective:f}),k=e.length;else if(o.compile)try{u=o.compile(x,v,C);var F=o.$$originalDirective||o;pe(u)?r(null,_e(F,u),I,M):u&&r(_e(F,u.pre),_e(F,u.post),I,M)}catch(e){B(e,be(x))}o.terminal&&(s.terminal=!0,d=Math.max(d,o.priority))}return s.scope=b&&!0===b.scope,s.transcludeOnThisElement=p,s.templateOnThisElement=m,s.transclude=C,i.hasElementTranscludeDirective=P,s}function J(n,e,a,i){if(R(e)){var t=e.match(p);e=e.substring(t[0].length);var r,s,o=t[1]||t[3],t="?"===t[2];if("^^"===o?a=a.parent():s=(s=i&&i[e])&&s.instance,s||(r="$"+e+"Controller",s=o?a.inheritedData(r):a.data(r)),!s&&!t)throw Qa("ctreq",e,n)}else if(ra(e))for(s=[],o=0,t=e.length;o<t;o++)s[o]=J(n,e[o],a,i);else fe(e)&&(s={},ce(e,function(e,t){s[t]=J(n,e,a,i)}));return s||null}function Z(e,t,n){for(var a=0,i=e.length;a<i;a++)e[a]=he(e[a],{$$isolateScope:t,$$newScope:n})}function T(e,t,n,a,i,r,s){if(t!==i){var o=null;if(E.hasOwnProperty(t))for(var l=0,c=(i=_.get(t+"Directive")).length;l<c;l++)if(t=i[l],(de(a)||a>t.priority)&&-1!==t.restrict.indexOf(n)){if(r&&(t=he(t,{$$start:r,$$end:s})),!t.$$bindings){var u=o=t,h=t.name,d={isolateScope:null,bindToController:null};if(fe(u.scope)&&(!0===u.bindToController?(d.bindToController=f(u.scope,h,!0),d.isolateScope={}):d.isolateScope=f(u.scope,h,!1)),fe(u.bindToController)&&(d.bindToController=f(u.bindToController,h,!0)),d.bindToController&&!u.controller)throw Qa("noctrl",h);fe((o=o.$$bindings=d).isolateScope)&&(t.$$isolateBindings=o.isolateScope)}e.push(t),o=t}return o}}function ee(n,a){var i=a.$attr,r=n.$attr;ce(n,function(e,t){"$"!==t.charAt(0)&&(a[t]&&a[t]!==e&&(e=e.length?e+(("style"===t?";":" ")+a[t]):a[t]),n.$set(t,e,!0,i[t]))}),ce(a,function(e,t){n.hasOwnProperty(t)||"$"===t.charAt(0)||(n[t]=e,"class"!==t&&"style"!==t&&(r[t]=i[t]))})}function w(e,t){var n=t.priority-e.priority;return 0!=n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function te(e,t,n,a){function i(e){return e?" (module: "+e+")":""}if(t)throw Qa("multidir",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,be(a))}function ne(e,t){switch(e=Yn(e||"html")){case"svg":case"math":var n=$.document.createElement("div");return n.innerHTML="<"+e+">"+t+"</"+e+">",n.childNodes[0].childNodes;default:return t}}function ae(e,t,n){var a,i,r=t[0],s=t.length,o=r.parentNode;if(e)for(a=0,i=e.length;a<i;a++)if(e[a]===r){e[a++]=n,i=a+s-1;for(var l=e.length;a<l;a++,i++)i<l?e[a]=e[i]:delete e[a];e.length-=s-1,e.context===r&&(e.context=n);break}for(o&&o.replaceChild(n,r),e=$.document.createDocumentFragment(),a=0;a<s;a++)e.appendChild(t[a]);for(Bn.hasData(r)&&(Bn.data(n,Bn.data(r)),Bn(r).off("$destroy")),Bn.cleanData(e.querySelectorAll("*")),a=1;a<s;a++)delete t[a];t[0]=n,t.length=1}function ie(e,t){return ue(function(){return e.apply(null,arguments)},e,t)}function re(e,t,n,a,i,r){try{e(t,n,a,i,r)}catch(e){B(e,be(n))}}function se(u,h,d,e,f){function p(e,t,n){pe(d.$onChanges)&&!ve(t,n)&&(o||(u.$$postDigest(s),o=[]),i||(i={},o.push(a)),i[e]&&(n=i[e].previousValue),i[e]=new Ge(n,t))}function a(){d.$onChanges(i),i=void 0}var i,m=[],g={};return ce(e,function(e,n){var t,a,i,r,s=e.attrName,o=e.optional;switch(e.mode){case"@":o||Hn.call(h,s)||(d[n]=h[s]=void 0),o=h.$observe(s,function(e){(R(e)||N(e))&&(p(n,e,d[n]),d[n]=e)}),h.$$observers[s].$$scope=u,R(t=h[s])?d[n]=b(t)(u):N(t)&&(d[n]=t),g[n]=new Ge(Ja,d[n]),m.push(o);break;case"=":if(!Hn.call(h,s)){if(o)break;h[s]=void 0}if(o&&!h[s])break;a=v(h[s]),r=a.literal?ye:ve,i=a.assign||function(){throw t=d[n]=a(u),Qa("nonassign",h[s],s,f.name)},t=d[n]=a(u),(o=function(e){return r(e,d[n])||(r(e,t)?i(u,e=d[n]):d[n]=e),t=e}).$stateful=!0,o=e.collection?u.$watchCollection(h[s],o):u.$watch(v(h[s],o),null,a.literal),m.push(o);break;case"<":if(!Hn.call(h,s)){if(o)break;h[s]=void 0}if(o&&!h[s])break;var l=(a=v(h[s])).literal,c=d[n]=a(u);g[n]=new Ge(Ja,d[n]),o=u.$watch(a,function(e,t){if(t===e){if(t===c||l&&ye(t,c))return;t=c}p(n,e,t),d[n]=e},l),m.push(o);break;case"&":if((a=h.hasOwnProperty(s)?v(h[s]):L)===L&&o)break;d[n]=function(e){return a(u,e)}}}),{initialChanges:g,removeWatches:m.length&&function(){for(var e=0,t=m.length;e<t;++e)m[e]()}}}var o,h=/^\w/,d=$.document.createElement("div"),P=c,x=m,e=l;U.prototype={$normalize:Ye,$addClass:function(e){e&&0<e.length&&a.addClass(this.$$element,e)},$removeClass:function(e){e&&0<e.length&&a.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=qe(e,t);n&&n.length&&a.addClass(this.$$element,n),(n=qe(t,e))&&n.length&&a.removeClass(this.$$element,n)},$set:function(e,t,n,a){var i=De(this.$$element[0],e),r=$a[e],s=e;if(i?(this.$$element.prop(e,t),a=i):r&&(this[r]=t,s=r),this[e]=t,a?this.$attr[e]=a:(a=this.$attr[e])||(this.$attr[e]=a=Se(e,"-")),"a"===(i=ge(this.$$element))&&("href"===e||"xlinkHref"===e)||"img"===i&&"src"===e)this[e]=t=u(t,"src"===e);else if("img"===i&&"srcset"===e&&O(t)){for(var i="",r=oa(t),o=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,o=/\s/.test(r)?o:/(,)/,r=r.split(o),o=Math.floor(r.length/2),l=0;l<o;l++)var c=2*l,i=(i=i+u(oa(r[c]),!0))+(" "+oa(r[1+c]));r=oa(r[2*l]).split(/\s/),i+=u(oa(r[0]),!0),2===r.length&&(i+=" "+oa(r[1])),this[e]=t=i}!1!==n&&(null===t||de(t)?this.$$element.removeAttr(a):h.test(a)?this.$$element.attr(a,t):function(e,t,n){d.innerHTML="<span "+t+">";var a=(t=d.firstChild.attributes)[0];t.removeNamedItem(a.name),a.value=n,e.attributes.setNamedItem(a)}(this.$$element[0],a,t)),(e=this.$$observers)&&ce(e[s],function(e){try{e(t)}catch(e){B(e)}})},$observe:function(e,t){var n=this,a=n.$$observers||(n.$$observers=we()),i=a[e]||(a[e]=[]);return i.push(t),r.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||de(n[e])||t(n[e])}),function(){F(i,t)}}};var t=b.startSymbol(),n=b.endSymbol(),oe="{{"===t&&"}}"===n?y:function(e){return e.replace(/\{\{/g,t).replace(/}}/g,n)},C=/^ngAttr[A-Z]/,D=/^(.+)Start$/;return G.$$addBindingInfo=i?function(e,t){var n=e.data("$binding")||[];ra(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:L,G.$$addBindingClass=i?function(e){H(e,"ng-binding")}:L,G.$$addScopeInfo=i?function(e,t,n,a){e.data(n?a?"$isolateScopeNoTemplate":"$isolateScope":"$scope",t)}:L,G.$$addScopeClass=i?function(e,t){H(e,t?"ng-isolate-scope":"ng-scope")}:L,G.$$createComment=function(e,t){var n="";return i&&(n=" "+(e||"")+": ",t&&(n+=t+" ")),$.document.createComment(n)},G}]}function Ge(e,t){this.previousValue=e,this.currentValue=t}function Ye(e){return e.replace(ei,"").replace(ti,q)}function qe(e,t){var n="",a=e.split(/\s+/),i=t.split(/\s+/),r=0;e:for(;r<a.length;r++){for(var s=a[r],o=0;o<i.length;o++)if(s===i[o])continue e;n+=(0<n.length?" ":"")+s}return n}function ze(e){var t=(e=Bn(e)).length;if(t<=1)return e;for(;t--;){var n=e[t];(8===n.nodeType||n.nodeType===ga&&""===n.nodeValue.trim())&&Wn.call(e,t,1)}return e}function We(){var u={},h=!1;this.has=function(e){return u.hasOwnProperty(e)},this.register=function(e,t){j(e,"controller"),fe(e)?ue(u,e):u[e]=t},this.allowGlobals=function(){h=!0},this.$get=["$injector","$window",function(o,l){function c(e,t,n,a){if(!e||!fe(e.$scope))throw E("$controller")("noscp",a,t);e.$scope[t]=n}return function(t,n,e,a){var i,r,s;if(e=!0===e,a&&R(a)&&(s=a),R(t)){if(!(a=t.match(ai)))throw ni("ctrlfmt",t);if(r=a[1],s=s||a[3],!(t=u.hasOwnProperty(r)?u[r]:U(n.$scope,r,!0)||(h?U(l,r,!0):void 0)))throw ni("ctrlreg",r);V(t,r,!0)}return e?(e=(ra(t)?t[t.length-1]:t).prototype,i=Object.create(e||null),s&&c(n,s,i,r||t.name),ue(function(){var e=o.invoke(t,i,n,r);return e!==i&&(fe(e)||pe(e))&&(i=e,s&&c(n,s,i,r||t.name)),i},{instance:i,identifier:s})):(i=o.instantiate(t,n,r),s&&c(n,s,i,r||t.name),i)}}]}function Ke(){this.$get=["$window",function(e){return Bn(e.document)}]}function Xe(){this.$get=["$document","$rootScope",function(e,t){function n(){i=a.hidden}var a=e[0],i=a&&a.hidden;return e.on("visibilitychange",n),t.$on("$destroy",function(){e.off("visibilitychange",n)}),function(){return i}}]}function Qe(){this.$get=["$log",function(n){return function(e,t){n.error.apply(n,arguments)}}]}function Je(e){return fe(e)?S(e)?e.toISOString():n(e):e}function Ze(){this.$get=function(){return function(e){if(!e)return"";var n=[];return r(e,function(e,t){null===e||de(e)||(ra(e)?ce(e,function(e){n.push(m(t)+"="+m(Je(e)))}):n.push(m(t)+"="+m(Je(e))))}),n.join("&")}}}function et(){this.$get=function(){return function(e){if(!e)return"";var t=[];return function n(e,a,i){null===e||de(e)||(ra(e)?ce(e,function(e,t){n(e,a+"["+(fe(e)?t:"")+"]")}):fe(e)&&!S(e)?r(e,function(e,t){n(e,a+(i?"":"[")+t+(i?"":"]"))}):t.push(m(a)+"="+m(Je(e))))}(e,"",!0),t.join("&")}}}function tt(t,e){if(R(t)){var n=t.replace(li,"").trim();if(n){var a=e("Content-Type");if((a=a&&0===a.indexOf(ii))||(a=(a=n.match(si))&&oi[a[0]].test(n)),a)try{t=i(n)}catch(e){throw ci("baddata",t,e)}}}return t}function nt(e){var n,i=we();return R(e)?ce(e.split("\n"),function(e){n=e.indexOf(":");var t=Yn(oa(e.substr(0,n)));e=oa(e.substr(n+1)),t&&(i[t]=i[t]?i[t]+", "+e:e)}):fe(e)&&ce(e,function(e,t){var n=Yn(t),a=oa(e);n&&(i[n]=i[n]?i[n]+", "+a:a)}),i}function at(t){var n;return function(e){return n=n||nt(t),e?(void 0===(e=n[Yn(e)])&&(e=null),e):n}}function it(t,n,a,e){return pe(e)?e(t,n,a):(ce(e,function(e){t=e(t,n,a)}),t)}function rt(){var P=this.defaults={transformResponse:[tt],transformRequest:[function(e){return fe(e)&&"[object File]"!==Xn.call(e)&&"[object Blob]"!==Xn.call(e)&&"[object FormData]"!==Xn.call(e)?n(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Y(ri),put:Y(ri),patch:Y(ri)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},x=!1;this.useApplyAsync=function(e){return O(e)?(x=!!e,this):x};var t=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(r,v,y,e,_,b,s,S){function T(e){function t(e,t){for(var n=0,a=t.length;n<a;){var i=t[n++],r=t[n++];e=e.then(i,r)}return t.length=0,e}function g(e){var t=ue({},e);return t.data=it(e.data,e.headers,e.status,n.transformResponse),200<=(e=e.status)&&e<300?t:b.reject(t)}if(!fe(e))throw E("$http")("badreq",e);if(!R(S.valueOf(e.url)))throw E("$http")("badreq",e.url);var n=ue({method:"get",transformRequest:P.transformRequest,transformResponse:P.transformResponse,paramSerializer:P.paramSerializer,jsonpCallbackParam:P.jsonpCallbackParam},e);n.headers=function(e){var t,n,a,i,r,s,o,l=P.headers,c=ue({},e.headers),l=ue({},l.common,l[Yn(e.method)]);e:for(t in l){for(a in n=Yn(t),c)if(Yn(a)===n)continue e;c[t]=l[t]}return i=c,r=Y(e),o={},ce(i,function(e,t){pe(e)?null!=(s=e(r))&&(o[t]=s):o[t]=e}),o}(e),n.method=qn(n.method),n.paramSerializer=R(n.paramSerializer)?s.get(n.paramSerializer):n.paramSerializer,r.$$incOutstandingRequestCount();var a=[],i=[];return e=b.resolve(n),ce(o,function(e){(e.request||e.requestError)&&a.unshift(e.request,e.requestError),(e.response||e.responseError)&&i.push(e.response,e.responseError)}),e=t(e,a),(e=t(e=e.then(function(e){var i,t,r,n,s,a,o,l,c,u=e.headers,h=it(e.data,at(u),void 0,e.transformRequest);return de(h)&&ce(u,function(e,t){"content-type"===Yn(t)&&delete u[t]}),de(e.withCredentials)&&!de(P.withCredentials)&&(e.withCredentials=P.withCredentials),i=e,t=h,s=b.defer(),a=s.promise,o=i.headers,l="jsonp"===Yn(i.method),c=i.url,l?c=S.getTrustedResourceUrl(c):R(c)||(c=S.valueOf(c)),c=function(e,t){return 0<t.length&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}(c,i.paramSerializer(i.params)),l&&(c=function(e,t){if(/[&?][^=]+=JSON_CALLBACK/.test(e))throw ci("badjsonp",e);if(new RegExp("[&?]"+t+"=").test(e))throw ci("badjsonp",t,e);return e+=(-1===e.indexOf("?")?"?":"&")+t+"=JSON_CALLBACK"}(c,i.jsonpCallbackParam)),T.pendingRequests.push(i),a.then(m,m),!i.cache&&!P.cache||!1===i.cache||"GET"!==i.method&&"JSONP"!==i.method||(r=fe(i.cache)?i.cache:fe(P.cache)?P.cache:w),r&&(O(n=r.get(c))?n&&pe(n.then)?n.then(p,p):ra(n)?f(n[1],n[0],Y(n[2]),n[3]):f(n,200,{},"OK"):r.put(c,a)),de(n)&&((n=Xt(i.url)?y()[i.xsrfCookieName||P.xsrfCookieName]:void 0)&&(o[i.xsrfHeaderName||P.xsrfHeaderName]=n),v(i.method,c,t,function(e,t,n,a){function i(){f(t,e,n,a)}r&&(200<=e&&e<300?r.put(c,[e,t,nt(n),a]):r.remove(c)),x?_.$applyAsync(i):(i(),_.$$phase||_.$apply())},o,i.timeout,i.withCredentials,i.responseType,d(i.eventHandlers),d(i.uploadEventHandlers))),a.then(g,g);function d(e){if(e){var t={};return ce(e,function(n,e){t[e]=function(e){function t(){n(e)}x?_.$applyAsync(t):_.$$phase?t():_.$apply(t)}}),t}}function f(e,t,n,a){(200<=(t=-1<=t?t:0)&&t<300?s.resolve:s.reject)({data:e,status:t,headers:at(n),config:i,statusText:a})}function p(e){f(e.data,e.status,Y(e.headers()),e.statusText)}function m(){var e=T.pendingRequests.indexOf(i);-1!==e&&T.pendingRequests.splice(e,1)}}),i)).finally(function(){r.$$completeOutstandingRequest(L)})}var w=e("$http");P.paramSerializer=R(P.paramSerializer)?s.get(P.paramSerializer):P.paramSerializer;var o=[];return ce(t,function(e){o.unshift(R(e)?s.get(e):s.invoke(e))}),T.pendingRequests=[],function(e){ce(arguments,function(n){T[n]=function(e,t){return T(ue({},t||{},{method:n,url:e}))}})}("get","delete","head","jsonp"),function(e){ce(arguments,function(a){T[a]=function(e,t,n){return T(ue({},n||{},{method:a,url:e,data:t}))}})}("post","put","patch"),T.defaults=P,T}]}function st(){this.$get=function(){return function(){return new $.XMLHttpRequest}}}function ot(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,a){return g=a,v=(m=e).defer,y=t,_=n[0],function(e,i,t,r,n,a,s,o,l,c){function u(){d&&d(),f&&f.abort()}if(i=i||m.url(),"jsonp"===Yn(e))var h=y.createCallback(i),d=function(e,a,i){e=e.replace("JSON_CALLBACK",a);var r=_.createElement("script"),s=null;return r.type="text/javascript",r.src=e,r.async=!0,s=function(e){r.removeEventListener("load",s),r.removeEventListener("error",s),_.body.removeChild(r),r=null;var t=-1,n="unknown";e&&("load"!==e.type||y.wasCalled(a)||(e={type:"error"}),n=e.type,t="error"===e.type?404:200),i&&i(t,n)},r.addEventListener("load",s),r.addEventListener("error",s),_.body.appendChild(r),s}(i,h,function(e,t){var n=200===e&&y.getResponse(h);O(p)&&v.cancel(p),d=f=null,r(e,n,"",t),y.removeCallback(h)});else{var f=g(e,i);if(f.open(e,i,!0),ce(n,function(e,t){O(e)&&f.setRequestHeader(t,e)}),f.onload=function(){var e=f.statusText||"",t="response"in f?f.response:f.responseText,n=1223===f.status?204:f.status;0===n&&(n=t?200:"file"===Kt(i).protocol?404:0);var a=f.getAllResponseHeaders();O(p)&&v.cancel(p),d=f=null,r(n,t,a,e)},e=function(){O(p)&&v.cancel(p),d=f=null,r(-1,null,null,"")},f.onerror=e,f.onabort=e,f.ontimeout=e,ce(l,function(e,t){f.addEventListener(t,e)}),ce(c,function(e,t){f.upload.addEventListener(t,e)}),s&&(f.withCredentials=!0),o)try{f.responseType=o}catch(e){if("json"!==o)throw e}f.send(de(t)?null:t)}var p;0<a?p=v(u,a):a&&pe(a.then)&&a.then(u)};var m,g,v,y,_}]}function lt(){var S="{{",T="}}";this.startSymbol=function(e){return e?(S=e,this):S},this.endSymbol=function(e){return e?(T=e,this):T},this.$get=["$parse","$exceptionHandler","$sce",function(p,m,g){function e(e){return"\\\\\\"+e}function v(e){return e.replace(n,S).replace(a,T)}function y(e,t,n,a){var i=e.$watch(function(e){return i(),a(e)},t,n);return i}function t(i,e,n,a){function t(e){try{var t=e;return e=n?g.getTrusted(n,t):g.valueOf(t),a&&!O(e)?e:G(e)}catch(e){m(ui.interr(i,e))}}if(!i.length||-1===i.indexOf(S))return e||((u=w(e=v(i))).exp=i,u.expressions=[],u.$$watchDelegate=y),u;a=!!a;for(var r,s,o=0,l=[],c=[],u=i.length,h=[],d=[];o<u;){if(-1===(r=i.indexOf(S,o))||-1===(s=i.indexOf(T,r+_))){o!==u&&h.push(v(i.substring(o)));break}o!==r&&h.push(v(i.substring(o,r))),o=i.substring(r+_,s),l.push(o),c.push(p(o,t)),o=s+b,d.push(h.length),h.push("")}if(n&&1<h.length&&ui.throwNoconcat(i),!e||l.length){var f=function(e){for(var t=0,n=l.length;t<n;t++){if(a&&de(e[t]))return;h[d[t]]=e[t]}return h.join("")};return ue(function(e){var t=0,n=l.length,a=Array(n);try{for(;t<n;t++)a[t]=c[t](e);return f(a)}catch(e){m(ui.interr(i,e))}},{exp:i,expressions:l,$$watchDelegate:function(a,i){var r;return a.$watchGroup(c,function(e,t){var n=f(e);pe(i)&&i.call(this,n,e!==t?r:n,a),r=n})}})}}var _=S.length,b=T.length,n=new RegExp(S.replace(/./g,e),"g"),a=new RegExp(T.replace(/./g,e),"g");return t.startSymbol=function(){return S},t.endSymbol=function(){return T},t}]}function ct(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(f,p,m,g,v){function e(e,t,n,a){function i(){r?e.apply(null,s):e(c)}var r=4<arguments.length,s=r?zn.call(arguments,4):[],o=p.setInterval,l=p.clearInterval,c=0,u=O(a)&&!a,h=(u?g:m).defer(),d=h.promise;return n=O(n)?n:0,d.$$intervalId=o(function(){u?v.defer(i):f.$evalAsync(i),h.notify(c++),0<n&&n<=c&&(h.resolve(c),l(d.$$intervalId),delete y[d.$$intervalId]),u||f.$apply()},t),y[d.$$intervalId]=h,d}var y={};return e.cancel=function(e){return!!(e&&e.$$intervalId in y)&&(y[e.$$intervalId].promise.catch(L),y[e.$$intervalId].reject("canceled"),p.clearInterval(e.$$intervalId),delete y[e.$$intervalId],!0)},e}]}function ut(e){for(var t=(e=e.split("/")).length;t--;)e[t]=h(e[t]);return e.join("/")}function ht(e,t){var n=Kt(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=v(n.port)||fi[n.protocol]||null}function dt(e,t){if(mi.test(e))throw pi("badpath",e);var n="/"!==e.charAt(0);n&&(e="/"+e);var a=Kt(e);t.$$path=decodeURIComponent(n&&"/"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname),t.$$search=o(a.search),t.$$hash=decodeURIComponent(a.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function ft(e,t){return e.slice(0,t.length)===t}function pt(e,t){if(ft(t,e))return t.substr(e.length)}function mt(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function gt(e){return e.replace(/(#.+)|#$/,"$1")}function vt(i,r,s){this.$$html5=!0,s=s||"",ht(i,this),this.$$parse=function(e){var t=pt(r,e);if(!R(t))throw pi("ipthprfx",e,r);dt(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=a(this.$$search),t=this.$$hash?"#"+h(this.$$hash):"";this.$$url=ut(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(O(n=pt(i,e))?(a=n,a=s&&O(n=pt(s,n))?r+(pt("/",n)||n):i+a):O(n=pt(r,e))?a=r+n:r===e+"/"&&(a=r),a&&this.$$parse(a),!!a);var n,a}}function yt(i,r,s){ht(i,this),this.$$parse=function(e){var t,n=pt(i,e)||pt(r,e);de(n)||"#"!==n.charAt(0)?this.$$html5?t=n:(t="",de(n)&&(i=e,this.replace())):de(t=pt(s,n))&&(t=n),dt(t,this),e=this.$$path;var a=/^\/[A-Z]:(\/.*)/;ft(t,n=i)&&(t=t.replace(n,"")),a.exec(t)||(e=(t=a.exec(e))?t[1]:e),this.$$path=e,this.$$compose()},this.$$compose=function(){var e=a(this.$$search),t=this.$$hash?"#"+h(this.$$hash):"";this.$$url=ut(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+(this.$$url?s+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,t){return mt(i)===mt(e)&&(this.$$parse(e),!0)}}function _t(i,r,s){this.$$html5=!0,yt.apply(this,arguments),this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(i===mt(e)?n=e:(a=pt(r,e))?n=i+s+a:r===e+"/"&&(n=r),n&&this.$$parse(n),!!n);var n,a},this.$$compose=function(){var e=a(this.$$search),t=this.$$hash?"#"+h(this.$$hash):"";this.$$url=ut(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+s+this.$$url,this.$$urlUpdatedByLocation=!0}}function bt(e){return function(){return this[e]}}function St(t,n){return function(e){return de(e)?this[t]:(this[t]=n(e),this.$$compose(),this)}}function Tt(){var p="!",m={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return O(e)?(p=e,this):p},this.html5Mode=function(e){return N(e)?(m.enabled=e,this):fe(e)?(N(e.enabled)&&(m.enabled=e.enabled),N(e.requireBase)&&(m.requireBase=e.requireBase),(N(e.rewriteLinks)||R(e.rewriteLinks))&&(m.rewriteLinks=e.rewriteLinks),this):m},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(s,o,t,i,r){function l(e,t,n){var a=u.url(),i=u.$$state;try{o.url(e,t,n),u.$$state=o.state()}catch(e){throw u.url(a),u.$$state=i,e}}function c(e,t){s.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var e,n=o.baseHref(),a=o.url();if(m.enabled){if(!n&&m.requireBase)throw pi("nobase");e=a.substring(0,a.indexOf("/",a.indexOf("//")+2))+(n||"/"),n=t.history?vt:_t}else e=mt(a),n=yt;var u,h=e.substr(0,mt(e).lastIndexOf("/")+1);(u=new n(e,h,"#"+p)).$$parseLinkUrl(a,a),u.$$state=o.state();var d=/^\s*(javascript|mailto):/i;i.on("click",function(e){if((t=m.rewriteLinks)&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var t,n,a=Bn(e.target);"a"!==ge(a[0]);)if(a[0]===i[0]||!(a=a.parent())[0])return;R(t)&&de(a.attr(t))||(t=a.prop("href"),n=a.attr("href")||a.attr("xlink:href"),fe(t)&&"[object SVGAnimatedString]"===t.toString()&&(t=Kt(t.animVal).href),d.test(t)||!t||a.attr("target")||e.isDefaultPrevented()||!u.$$parseLinkUrl(t,n)||(e.preventDefault(),u.absUrl()!==o.url()&&(s.$apply(),r.angular["ff-684208-preventDefault"]=!0)))}}),gt(u.absUrl())!==gt(a)&&o.url(u.absUrl(),!0);var f=!0;return o.onUrlChange(function(a,i){ft(a,h)?(s.$evalAsync(function(){var e,t=u.absUrl(),n=u.$$state;a=gt(a),u.$$parse(a),u.$$state=i,e=s.$broadcast("$locationChangeStart",a,t,i,n).defaultPrevented,u.absUrl()===a&&(e?(u.$$parse(t),u.$$state=n,l(t,!1,n)):(f=!1,c(t,n)))}),s.$$phase||s.$digest()):r.location.href=a}),s.$watch(function(){var n,e,a,i,r;(f||u.$$urlUpdatedByLocation)&&(u.$$urlUpdatedByLocation=!1,n=gt(o.url()),e=gt(u.absUrl()),a=o.state(),i=u.$$replace,r=n!==e||u.$$html5&&t.history&&a!==u.$$state,(f||r)&&(f=!1,s.$evalAsync(function(){var e=u.absUrl(),t=s.$broadcast("$locationChangeStart",e,n,u.$$state,a).defaultPrevented;u.absUrl()===e&&(t?(u.$$parse(n),u.$$state=a):(r&&l(e,i,a===u.$$state?null:u.$$state),c(n,a)))}))),u.$$replace=!1}),u}]}function wt(){var a=!0,r=this;this.debugEnabled=function(e){return O(e)?(a=e,this):a},this.$get=["$window",function(n){function e(e){var t=n.console||{},a=t[e]||t.log||L;e=!1;try{e=!!a.apply}catch(e){}return e?function(){var n=[];return ce(arguments,function(e){var t;n.push(((t=e)instanceof Error&&(t.stack&&i?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t))}),a.apply(t,n)}:function(e,t){a(e,null==t?"":t)}}var t,i=ta||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:(t=e("debug"),function(){a&&t.apply(r,arguments)})}}]}function Pt(e){return e+""}function xt(e,t){return void 0!==e?e:t}function Ct(e,t){return void 0===e?t:void 0===t?e:e+t}function Dt(e,t){var n,a,i;switch(e.type){case Ti.Program:n=!0,ce(e.body,function(e){Dt(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case Ti.Literal:e.constant=!0,e.toWatch=[];break;case Ti.UnaryExpression:Dt(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Ti.BinaryExpression:Dt(e.left,t),Dt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Ti.LogicalExpression:Dt(e.left,t),Dt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Ti.ConditionalExpression:Dt(e.test,t),Dt(e.alternate,t),Dt(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Ti.Identifier:e.constant=!1,e.toWatch=[e];break;case Ti.MemberExpression:Dt(e.object,t),e.computed&&Dt(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case Ti.CallExpression:n=i=!!e.filter&&!t(e.callee.name).$stateful,a=[],ce(e.arguments,function(e){Dt(e,t),n=n&&e.constant,e.constant||a.push.apply(a,e.toWatch)}),e.constant=n,e.toWatch=i?a:[e];break;case Ti.AssignmentExpression:Dt(e.left,t),Dt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Ti.ArrayExpression:n=!0,a=[],ce(e.elements,function(e){Dt(e,t),n=n&&e.constant,e.constant||a.push.apply(a,e.toWatch)}),e.constant=n,e.toWatch=a;break;case Ti.ObjectExpression:n=!0,a=[],ce(e.properties,function(e){Dt(e.value,t),n=n&&e.value.constant&&!e.computed,e.value.constant||a.push.apply(a,e.value.toWatch),e.computed&&(Dt(e.key,t),e.key.constant||a.push.apply(a,e.key.toWatch))}),e.constant=n,e.toWatch=a;break;case Ti.ThisExpression:e.constant=!1,e.toWatch=[];break;case Ti.LocalsExpression:e.constant=!1,e.toWatch=[]}}function Et(e){if(1===e.length){var t=(e=e[0].expression).toWatch;return 1!==t.length||t[0]!==e?t:void 0}}function At(e){return e.type===Ti.Identifier||e.type===Ti.MemberExpression}function kt(e){if(1===e.body.length&&At(e.body[0].expression))return{type:Ti.AssignmentExpression,left:e.body[0].expression,right:{type:Ti.NGValueParameter},operator:"="}}function It(e){this.$filter=e}function Mt(e){this.$filter=e}function $t(e,t,n){this.ast=new Ti(e,n),this.astCompiler=new(n.csp?Mt:It)(t)}function Lt(e){return pe(e.valueOf)?e.valueOf():yi.call(e)}function Ot(){var n,a,f=we(),i={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){i[e]=t},this.setIdentifierFns=function(e,t){return n=e,a=t,this},this.$get=["$filter",function(r){function d(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&("object"==typeof(e=Lt(e))&&!n))&&(e===t||e!=e&&t!=t)}function c(e,t,n,r,a){var s;if(1===(o=r.inputs).length){var i=d,o=o[0];return e.$watch(function(e){var t=o(e);return d(t,i,r.literal)||(s=r(e,void 0,void 0,[t]),i=t&&Lt(t)),s},t,n,a)}for(var l=[],c=[],u=0,h=o.length;u<h;u++)l[u]=d,c[u]=null;return e.$watch(function(e){for(var t=!1,n=0,a=o.length;n<a;n++){var i=o[n](e);(t=t||!d(i,l[n],r.literal))&&(c[n]=i,l[n]=i&&Lt(i))}return t&&(s=r(e,void 0,void 0,c)),s},t,n,a)}function s(e,a,t,n,i){function r(e,t,n){o=e,pe(a)&&a(e,t,n),l(e)&&n.$$postDigest(function(){l(o)&&s()})}var s,o,l=n.literal?u:O;return s=n.inputs?c(e,r,t,n,i):e.$watch(function(e){return n(e)},r,t)}function u(e){var t=!0;return ce(e,function(e){O(e)||(t=!1)}),t}function o(e,t,n,a){var i=e.$watch(function(e){return i(),a(e)},t,n);return i}function l(i,r){if(!r)return i;var e=i.$$watchDelegate,s=!1,o=i.literal?u:O,t=i.oneTime?function(e,t,n,a){return n=s&&a?a[0]:i(e,t,n,a),e=r(n,e,t),o(n)?e:n}:function(e,t,n,a){return n=s&&a?a[0]:i(e,t,n,a),r(n,e,t)};return t.literal=i.literal,t.oneTime=i.oneTime,s=!i.inputs,e&&e!==c?(t.$$watchDelegate=e,t.inputs=i.inputs):r.$stateful||(t.$$watchDelegate=c,t.inputs=i.inputs?i.inputs:[i]),t}var h={csp:ca().noUnsafeEval,literals:P(i),isIdentifierStart:pe(n)&&n,isIdentifierContinue:pe(a)&&a};return function(e,t){var n,a,i;switch(typeof e){case"string":return i=e=e.trim(),(n=f[i])||(":"===e.charAt(0)&&":"===e.charAt(1)&&(a=!0,e=e.substring(2)),(n=new $t(n=new Si(h),r,h).parse(e)).constant?n.$$watchDelegate=o:a?(n.oneTime=!0,n.$$watchDelegate=s):n.inputs&&(n.$$watchDelegate=c),f[i]=n),l(n,t);case"function":return l(e,t);default:return l(L,t)}}}]}function Rt(){var n=!0;this.$get=["$rootScope","$exceptionHandler",function(t,e){return Ft(function(e){t.$evalAsync(e)},e,n)}],this.errorOnUnhandledRejections=function(e){return O(e)?(n=e,this):n}}function Nt(){var n=!0;this.$get=["$browser","$exceptionHandler",function(t,e){return Ft(function(e){t.defer(e)},e,n)}],this.errorOnUnhandledRejections=function(e){return O(e)?(n=e,this):n}}function Ft(s,o,l){function n(){return new e}function e(){var t=this.promise=new r;this.resolve=function(e){h(t,e)},this.reject=function(e){d(t,e)},this.notify=function(e){p(t,e)}}function r(){this.$$state={status:0}}function c(){for(;!v&&y.length;){var e,t=y.shift();t.pur||(t.pur=!0,e="Possibly unhandled rejection: "+("function"==typeof(e=t.value)?e.toString().replace(/ \{[\s\S]*$/,""):de(e)?"undefined":"string"!=typeof e?function(e,t){var n=[];return b(t)&&(e=P(e,null,t)),JSON.stringify(e,function(e,t){if(fe(t=T(e,t))){if(0<=n.indexOf(t))return"...";n.push(t)}return t})}(e,void 0):e),t.value instanceof Error?o(t.value,e):o(e))}}function u(r){!l||r.pending||2!==r.status||r.pur||(0===v&&0===y.length&&s(c),y.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++v,s(function(){var e,t,n=r.pending;r.processScheduled=!1,r.pending=void 0;try{for(var a=0,i=n.length;a<i;++a){r.pur=!0,t=n[a][0],e=n[a][r.status];try{pe(e)?h(t,e(r.value)):(1===r.status?h:d)(t,r.value)}catch(e){d(t,e)}}}finally{--v,l&&0===v&&s(c)}}))}function h(e,t){e.$$state.status||(t===e?f(e,g("qcycle",t)):function t(n,e){function a(e){o||(o=!0,t(n,e))}function i(e){o||(o=!0,f(n,e))}function r(e){p(n,e)}var s,o=!1;try{(fe(e)||pe(e))&&(s=e.then),pe(s)?(n.$$state.status=-1,s.call(e,a,i,r)):(n.$$state.value=e,n.$$state.status=1,u(n.$$state))}catch(e){i(e)}}(e,t))}function d(e,t){e.$$state.status||f(e,t)}function f(e,t){e.$$state.value=t,e.$$state.status=2,u(e.$$state)}function p(e,i){var r=e.$$state.pending;e.$$state.status<=0&&r&&r.length&&s(function(){for(var e,t,n=0,a=r.length;n<a;n++){t=r[n][0],e=r[n][3];try{p(t,pe(e)?e(i):i)}catch(e){o(e)}}})}function i(e){var t=new r;return d(t,e),t}function a(e,t,n){var a=null;try{pe(n)&&(a=n())}catch(e){return i(e)}return a&&pe(a.then)?a.then(function(){return t(e)},i):t(e)}function m(e,t,n,a){var i=new r;return h(i,e),i.then(t,n,a)}function t(e){if(!pe(e))throw g("norslvr",e);var t=new r;return e(function(e){h(t,e)},function(e){d(t,e)}),t}var g=E("$q",TypeError),v=0,y=[];ue(r.prototype,{then:function(e,t,n){if(de(e)&&de(t)&&de(n))return this;var a=new r;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([a,e,t,n]),0<this.$$state.status&&u(this.$$state),a},catch:function(e){return this.then(null,e)},finally:function(t,e){return this.then(function(e){return a(e,_,t)},function(e){return a(e,i,t)},e)}});var _=m;return t.prototype=r.prototype,t.defer=n,t.reject=i,t.when=m,t.resolve=_,t.all=function(e){var n=new r,a=0,i=ra(e)?[]:{};return ce(e,function(e,t){a++,m(e).then(function(e){i[t]=e,--a||h(n,i)},function(e){d(n,e)})}),0===a&&h(n,i),n},t.race=function(e){var t=n();return ce(e,function(e){m(e).then(t.resolve,t.reject)}),t.promise},t}function Bt(){this.$get=["$window","$timeout",function(e,n){var a=e.requestAnimationFrame||e.webkitRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,t=!!a,r=t?function(e){var t=a(e);return function(){i(t)}}:function(e){var t=n(e,16.66,!1);return function(){n.cancel(t)}};return r.supported=t,r}]}function Vt(){var b=10,S=E("$rootScope"),T=null,w=null;this.digestTtl=function(e){return arguments.length&&(b=e),b},this.$get=["$exceptionHandler","$parse","$browser",function(u,p,h){function i(e){e.currentScope.$$destroyed=!0}function r(){this.$id=++ea,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,(this.$root=this).$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function d(e){if(g.$$phase)throw S("inprog",g.$$phase);g.$$phase=e}function l(e,t){for(;e.$$watchersCount+=t,e=e.$parent;);}function s(e,t,n){for(;e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n],e=e.$parent;);}function f(){}function m(){for(;n.length;)try{n.shift()()}catch(e){u(e)}w=null}r.prototype={constructor:r,$new:function(e,t){var n;function a(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=++ea,this.$$ChildScope=null}return t=t||this,e?(n=new r).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=(a.prototype=this,a)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,!e&&t===this||n.$on("$destroy",i),n},$watch:function(e,t,n,a){var i=p(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var r=this,s=r.$$watchers,o={fn:t,last:f,get:i,exp:a||e,eq:!!n};return T=null,pe(t)||(o.fn=L),s||((s=r.$$watchers=[]).$$digestWatchIndex=-1),s.unshift(o),s.$$digestWatchIndex++,l(this,1),function(){var e=F(s,o);0<=e&&(l(r,-1),e<s.$$digestWatchIndex&&s.$$digestWatchIndex--),T=null}},$watchGroup:function(e,a){function i(){c=!1,t?(t=!1,a(s,s,l)):a(s,r,l)}var r=Array(e.length),s=Array(e.length),o=[],l=this,c=!1,t=!0;if(e.length)return 1===e.length?this.$watch(e[0],function(e,t,n){s[0]=e,r[0]=t,a(s,e===t?s:r,n)}):(ce(e,function(e,n){var t=l.$watch(e,function(e,t){s[n]=e,r[n]=t,c||(c=!0,l.$evalAsync(i))});o.push(t)}),function(){for(;o.length;)o.shift()()});var n=!0;return l.$evalAsync(function(){n&&a(s,s,l)}),function(){n=!1}},$watchCollection:function(e,t){function n(e){var t,n,a;if(!de(i=e)){if(fe(i))if(A(i))for(r!==u&&(f=(r=u).length=0,l++),e=i.length,f!==e&&(l++,r.length=f=e),t=0;t<e;t++)a=r[t],n=i[t],a!=a&&n!=n||a===n||(l++,r[t]=n);else{for(t in r!==h&&(r=h={},f=0,l++),e=0,i)Hn.call(i,t)&&(e++,n=i[t],a=r[t],t in r?a!=a&&n!=n||a===n||(l++,r[t]=n):(f++,r[t]=n,l++));if(e<f)for(t in l++,r)Hn.call(i,t)||(f--,delete r[t])}else r!==i&&(r=i,l++);return l}}n.$stateful=!0;var i,r,a,s=this,o=1<t.length,l=0,c=p(e,n),u=[],h={},d=!0,f=0;return this.$watch(c,function(){if(d?(d=!1,t(i,i,s)):t(i,a,s),o)if(fe(i))if(A(i)){a=Array(i.length);for(var e=0;e<i.length;e++)a[e]=i[e]}else for(e in a={},i)Hn.call(i,e)&&(a[e]=i[e]);else a=i})},$digest:function(){var e,t,n,a,i,r,s,o,l=b,c=[];d("$digest"),h.$$checkUrlChange(),this===g&&null!==w&&(h.defer.cancel(w),m()),T=null;do{for(i=!1,r=this,a=0;a<v.length;a++){try{(0,(o=v[a]).fn)(o.scope,o.locals)}catch(e){u(e)}T=null}v.length=0;e:do{if(a=r.$$watchers)for(a.$$digestWatchIndex=a.length;a.$$digestWatchIndex--;)try{if(e=a[a.$$digestWatchIndex])if((t=(0,e.get)(r))===(n=e.last)||(e.eq?ye(t,n):na(t)&&na(n))){if(e===T){i=!1;break e}}else i=!0,(T=e).last=e.eq?P(t,null):t,(0,e.fn)(t,n===f?t:n,r),l<5&&(c[s=4-l]||(c[s]=[]),c[s].push({msg:pe(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:t,oldVal:n}))}catch(e){u(e)}if(!(a=r.$$watchersCount&&r.$$childHead||r!==this&&r.$$nextSibling))for(;r!==this&&!(a=r.$$nextSibling);)r=r.$parent}while(r=a);if((i||v.length)&&!l--)throw g.$$phase=null,S("infdig",b,c)}while(i||v.length);for(g.$$phase=null;_<y.length;)try{y[_++]()}catch(e){u(e)}y.length=_=0,h.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var e,t=this.$parent;for(e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===g&&h.$$applicationDestroyed(),l(this,-this.$$watchersCount),this.$$listenerCount)s(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=L,this.$on=this.$watch=this.$watchGroup=function(){return L},this.$$listeners={},this.$$nextSibling=null,function e(t){9===ta&&(t.$$childHead&&e(t.$$childHead),t.$$nextSibling&&e(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}(this)}},$eval:function(e,t){return p(e)(this,t)},$evalAsync:function(e,t){g.$$phase||v.length||h.defer(function(){v.length&&g.$digest()}),v.push({scope:this,fn:p(e),locals:t})},$$postDigest:function(e){y.push(e)},$apply:function(e){try{d("$apply");try{return this.$eval(e)}finally{g.$$phase=null}}catch(e){u(e)}finally{try{g.$digest()}catch(e){throw u(e),e}}},$applyAsync:function(e){var t=this;e&&n.push(function(){t.$eval(e)}),e=p(e),null===w&&(w=h.defer(function(){g.$apply(m)}))},$on:function(t,n){var a=this.$$listeners[t];a||(this.$$listeners[t]=a=[]),a.push(n);for(var e=this;e.$$listenerCount[t]||(e.$$listenerCount[t]=0),e.$$listenerCount[t]++,e=e.$parent;);var i=this;return function(){var e=a.indexOf(n);-1!==e&&(a[e]=null,s(i,1,t))}},$emit:function(e,t){var n,a,i,r=[],s=this,o=!1,l={name:e,targetScope:s,stopPropagation:function(){o=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=x([l],arguments,1);do{for(n=s.$$listeners[e]||r,l.currentScope=s,a=0,i=n.length;a<i;a++)if(n[a])try{n[a].apply(null,c)}catch(e){u(e)}else n.splice(a,1),a--,i--;if(o)return l.currentScope=null,l;s=s.$parent}while(s);return l.currentScope=null,l},$broadcast:function(e,t){var n=this,a=this,i={name:e,targetScope:this,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[e])return i;for(var r,s,o=x([i],arguments,1);n=a;){for(r=0,s=(a=(i.currentScope=n).$$listeners[e]||[]).length;r<s;r++)if(a[r])try{a[r].apply(null,o)}catch(e){u(e)}else a.splice(r,1),r--,s--;if(!(a=n.$$listenerCount[e]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(a=n.$$nextSibling);)n=n.$parent}return i.currentScope=null,i}};var g=new r,v=g.$$asyncQueue=[],y=g.$$postDigestQueue=[],n=g.$$applyAsyncQueue=[],_=0;return g}]}function jt(){var i=/^\s*(https?|ftp|mailto|tel|file):/,r=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return O(e)?(i=e,this):i},this.imgSrcSanitizationWhitelist=function(e){return O(e)?(r=e,this):r},this.$get=function(){return function(e,t){var n=t?r:i,a=Kt(e).href;return""===a||a.match(n)?e:"unsafe:"+a}}}function Ut(e){var t=[];return O(e)&&ce(e,function(e){t.push(function(e){if("self"===e)return e;if(R(e)){if(-1<e.indexOf("***"))throw wi("iwcard",e);return e=la(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(f(e))return new RegExp("^"+e.source+"$");throw wi("imatcher")}(e))}),t}function Ht(){this.SCE_CONTEXTS=Pi;var c=["self"],u=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(c=Ut(e)),c},this.resourceUrlBlacklist=function(e){return arguments.length&&(u=Ut(e)),u},this.$get=["$injector",function(e){function s(e,t){return"self"===e?Xt(t):e.exec(t.href)}function t(e){function t(e){this.$$unwrapTrustedValue=function(){return e}}return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}var o=function(e){throw wi("unsafe")};e.has("$sanitize")&&(o=e.get("$sanitize"));var n=t(),l={};return l[Pi.HTML]=t(n),l[Pi.CSS]=t(n),l[Pi.URL]=t(n),l[Pi.JS]=t(n),l[Pi.RESOURCE_URL]=t(l[Pi.URL]),{trustAs:function(e,t){var n=l.hasOwnProperty(e)?l[e]:null;if(!n)throw wi("icontext",e,t);if(null===t||de(t)||""===t)return t;if("string"!=typeof t)throw wi("itype",e);return new n(t)},getTrusted:function(e,t){if(null===t||de(t)||""===t)return t;if((n=l.hasOwnProperty(e)?l[e]:null)&&t instanceof n)return t.$$unwrapTrustedValue();if(e===Pi.RESOURCE_URL){for(var n=Kt(t.toString()),a=!1,i=0,r=c.length;i<r;i++)if(s(c[i],n)){a=!0;break}if(a)for(i=0,r=u.length;i<r;i++)if(s(u[i],n)){a=!1;break}if(a)return t;throw wi("insecurl",t.toString())}if(e===Pi.HTML)return o(t);throw wi("unsafe")},valueOf:function(e){return e instanceof n?e.$$unwrapTrustedValue():e}}}]}function Gt(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(a,e){if(t&&ta<8)throw wi("iequirks");var i=Y(Pi);i.isEnabled=function(){return t},i.trustAs=e.trustAs,i.getTrusted=e.getTrusted,i.valueOf=e.valueOf,t||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=y),i.parseAs=function(t,e){var n=a(e);return n.literal&&n.constant?n:a(e,function(e){return i.getTrusted(t,e)})};var r=i.parseAs,s=i.getTrusted,o=i.trustAs;return ce(Pi,function(t,e){var n=Yn(e);i[("parse_as_"+n).replace(xi,q)]=function(e){return r(t,e)},i[("get_trusted_"+n).replace(xi,q)]=function(e){return s(t,e)},i[("trust_as_"+n).replace(xi,q)]=function(e){return o(t,e)}}),i}]}function Yt(){this.$get=["$window","$document",function(e,t){var n={},a=!((!e.nw||!e.nw.process)&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id))&&e.history&&e.history.pushState,i=v((/android (\d+)/.exec(Yn((e.navigator||{}).userAgent))||[])[1]),r=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},o=s.body&&s.body.style,l=!1,c=!1;return o&&(l=!!("transition"in o||"webkitTransition"in o),c=!!("animation"in o||"webkitAnimation"in o)),{history:!(!a||i<4||r),hasEvent:function(e){return("input"!==e||!ta)&&(de(n[e])&&(t=s.createElement("div"),n[e]="on"+e in t),n[e]);var t},csp:ca(),transitions:l,animations:c,android:i}}]}function qt(){var c;this.httpOptions=function(e){return e?(c=e,this):c},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(a,i,r,s,o){function l(t,n){l.totalPendingRequests++,R(t)&&!de(i.get(t))||(t=o.getTrustedResourceUrl(t));var e=r.defaults&&r.defaults.transformResponse;return ra(e)?e=e.filter(function(e){return e!==tt}):e===tt&&(e=null),r.get(t,ue({cache:i,transformResponse:e},c)).finally(function(){l.totalPendingRequests--}).then(function(e){return i.put(t,e.data),e.data},function(e){return n||(e=Ci("tpload",t,e.status,e.statusText),a(e)),s.reject(e)})}return l.totalPendingRequests=0,l}]}function zt(){this.$get=["$rootScope","$browser","$location",function(t,n,a){return{findBindings:function(e,n,a){e=e.getElementsByClassName("ng-binding");var i=[];return ce(e,function(t){var e=Zn.element(t).data("$binding");e&&ce(e,function(e){a?new RegExp("(^|\\s)"+la(n)+"(\\s|\\||$)").test(e)&&i.push(t):-1!==e.indexOf(n)&&i.push(t)})}),i},findModels:function(e,t,n){for(var a=["ng-","data-ng-","ng\\:"],i=0;i<a.length;++i){var r=e.querySelectorAll("["+a[i]+"model"+(n?"=":"*=")+'"'+t+'"]');if(r.length)return r}},getLocation:function(){return a.url()},setLocation:function(e){e!==a.url()&&(a.url(e),t.$digest())},whenStable:function(e){n.notifyWhenNoOutstandingRequests(e)}}}]}function Wt(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(l,c,u,h,d){function e(e,t,n){pe(e)||(n=t,t=e,e=L);var a=zn.call(arguments,3),i=O(n)&&!n,r=(i?h:u).defer(),s=r.promise,o=c.defer(function(){try{r.resolve(e.apply(null,a))}catch(e){r.reject(e),d(e)}finally{delete f[s.$$timeoutId]}i||l.$apply()},t);return s.$$timeoutId=o,f[o]=r,s}var f={};return e.cancel=function(e){return!!(e&&e.$$timeoutId in f)&&(f[e.$$timeoutId].promise.catch(L),f[e.$$timeoutId].reject("canceled"),delete f[e.$$timeoutId],c.defer.cancel(e.$$timeoutId))},e}]}function Kt(e){return ta&&(Di.setAttribute("href",e),e=Di.href),Di.setAttribute("href",e),{href:Di.href,protocol:Di.protocol?Di.protocol.replace(/:$/,""):"",host:Di.host,search:Di.search?Di.search.replace(/^\?/,""):"",hash:Di.hash?Di.hash.replace(/^#/,""):"",hostname:Di.hostname,port:Di.port,pathname:"/"===Di.pathname.charAt(0)?Di.pathname:"/"+Di.pathname}}function Xt(e){return(e=R(e)?Kt(e):e).protocol===Ei.protocol&&e.host===Ei.host}function Qt(){this.$get=w($)}function Jt(e){function r(t){try{return decodeURIComponent(t)}catch(e){return t}}var s=e[0]||{},o={},l="";return function(){var t,e,n,a,i;try{t=s.cookie||""}catch(e){t=""}if(t!==l)for(t=(l=t).split("; "),o={},n=0;n<t.length;n++)0<(a=(e=t[n]).indexOf("="))&&(i=r(e.substring(0,a)),de(o[i])&&(o[i]=r(e.substring(a+1))));return o}}function Zt(){this.$get=Jt}function en(a){function i(e,t){if(fe(e)){var n={};return ce(e,function(e,t){n[t]=i(t,e)}),n}return a.factory(e+"Filter",t)}this.register=i,this.$get=["$injector",function(t){return function(e){return t.get(e+"Filter")}}],i("currency",rn),i("date",pn),i("filter",tn),i("json",mn),i("limitTo",gn),i("lowercase",Oi),i("number",sn),i("orderBy",yn),i("uppercase",Ri)}function tn(){return function(e,t,n,a){if(!A(e)){if(null==e)return e;throw E("filter")("notarray",e)}var i,r,s,o,l,c;switch(a=a||"$",an(t)){case"function":break;case"boolean":case"null":case"number":case"string":i=!0;case"object":s=n,o=a,l=i,c=fe(r=t)&&o in r,!0===s?s=ye:pe(s)||(s=function(e,t){return!de(e)&&(null===e||null===t?e===t:!(fe(t)||fe(e)&&!u(e))&&(e=Yn(""+e),t=Yn(""+t),-1!==e.indexOf(t)))}),t=function(e){return c&&!fe(e)?nn(e,r[o],s,o,!1):nn(e,r,s,o,l)};break;default:return e}return Array.prototype.filter.call(e,t)}}function nn(e,t,n,a,i,r){var s,o=an(e),l=an(t);if("string"===l&&"!"===t.charAt(0))return!nn(e,t.substring(1),n,a,i);if(ra(e))return e.some(function(e){return nn(e,t,n,a,i)});switch(o){case"object":if(i){for(s in e)if(s.charAt&&"$"!==s.charAt(0)&&nn(e[s],t,n,a,!0))return!0;return!r&&nn(e,t,n,a,!1)}if("object"!==l)return n(e,t);for(s in t)if(!pe(r=t[s])&&!de(r)&&!nn((o=s===a)?e:e[s],r,n,a,o,o))return!1;return!0;case"function":return!1;default:return n(e,t)}}function an(e){return null===e?"null":typeof e}function rn(e){var a=e.NUMBER_FORMATS;return function(e,t,n){return de(t)&&(t=a.CURRENCY_SYM),de(n)&&(n=a.PATTERNS[1].maxFrac),null==e?e:on(e,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,n).replace(/\u00A4/g,t)}}function sn(e){var n=e.NUMBER_FORMATS;return function(e,t){return null==e?e:on(e,n.PATTERNS[0],n.GROUP_SEP,n.DECIMAL_SEP,t)}}function on(e,t,n,a,i){if(!R(e)&&!_(e)||isNaN(e))return"";var r=!isFinite(e),s=!1,o=Math.abs(e)+"",l="";if(r)l="â";else{for(function(e,t,n,a){var i=e.d,r=i.length-e.i;if(a=i[n=(t=de(t)?Math.min(Math.max(n,r),a):+t)+e.i],0<n){i.splice(Math.max(e.i,n));for(var s=n;s<i.length;s++)i[s]=0}else for(r=Math.max(0,r),e.i=1,i.length=Math.max(1,n=t+1),i[0]=0,s=1;s<n;s++)i[s]=0;if(5<=a)if(n-1<0){for(a=0;n<a;a--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[n-1]++;for(;r<Math.max(0,t);r++)i.push(0);(t=i.reduceRight(function(e,t,n,a){return t+=e,a[n]=t%10,Math.floor(t/10)},0))&&(i.unshift(t),e.i++)}(s=function(e){var t,n,a,i,r,s=0;for(-1<(n=e.indexOf(ki))&&(e=e.replace(ki,"")),0<(a=e.search(/e/i))?(n<0&&(n=a),n+=+e.slice(a+1),e=e.substring(0,a)):n<0&&(n=e.length),a=0;e.charAt(a)===Ii;a++);if(a===(r=e.length))t=[0],n=1;else{for(r--;e.charAt(r)===Ii;)r--;for(n-=a,t=[],i=0;a<=r;a++,i++)t[i]=+e.charAt(a)}return Ai<n&&(t=t.splice(0,Ai-1),s=n-1,n=1),{d:t,e:s,i:n}}(o),i,t.minFrac,t.maxFrac),l=s.d,o=s.i,i=s.e,r=[],s=l.reduce(function(e,t){return e&&!t},!0);o<0;)l.unshift(0),o++;for(0<o?r=l.splice(o,l.length):(r=l,l=[0]),o=[],l.length>=t.lgSize&&o.unshift(l.splice(-t.lgSize,l.length).join(""));l.length>t.gSize;)o.unshift(l.splice(-t.gSize,l.length).join(""));l.length&&o.unshift(l.join("")),l=o.join(n),r.length&&(l+=a+r.join("")),i&&(l+="e+"+i)}return e<0&&!s?t.negPre+l+t.negSuf:t.posPre+l+t.posSuf}function ln(e,t,n,a){var i="";for((e<0||a&&e<=0)&&(a?e=1-e:(e=-e,i="-")),e=""+e;e.length<t;)e=Ii+e;return n&&(e=e.substr(e.length-t)),i+e}function cn(t,n,a,i,r){return a=a||0,function(e){return e=e["get"+t](),(0<a||-a<e)&&(e+=a),0===e&&-12===a&&(e=12),ln(e,n,i,r)}}function un(a,i,r){return function(e,t){var n=e["get"+a]();return t[qn((r?"STANDALONE":"")+(i?"SHORT":"")+a)][n]}}function hn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function dn(n){return function(e){var t=hn(e.getFullYear());return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))-t,ln(e=1+Math.round(e/6048e5),n)}}function fn(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function pn(p){var m=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,e,n){var a,i,r,s,o,l,c,u,h="",d=[];if(e=e||"mediumDate",e=p.DATETIME_FORMATS[e]||e,R(t)&&(t=Li.test(t)?v(t):((s=(r=t).match(m))&&(r=new Date(0),l=o=0,c=s[8]?r.setUTCFullYear:r.setFullYear,u=s[8]?r.setUTCHours:r.setHours,s[9]&&(o=v(s[9]+s[10]),l=v(s[9]+s[11])),c.call(r,v(s[1]),v(s[2])-1,v(s[3])),o=v(s[4]||0)-o,l=v(s[5]||0)-l,c=v(s[6]||0),s=Math.round(1e3*parseFloat("0."+(s[7]||0))),u.call(r,o,l,c,s)),r)),_(t)&&(t=new Date(t)),!S(t)||!isFinite(t.getTime()))return t;for(;e;)e=(i=$i.exec(e))?(d=x(d,i,1)).pop():(d.push(e),null);var f=t.getTimezoneOffset();return n&&(f=C(n,f),t=D(t,n,!0)),ce(d,function(e){a=Mi[e],h+=a?a(t,p.DATETIME_FORMATS,f):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}}function mn(){return function(e,t){return de(t)&&(t=2),n(e,t)}}function gn(){return function(e,t,n){return t=(1/0===Math.abs(Number(t))?Number:v)(t),na(t)?e:(_(e)&&(e=e.toString()),A(e)?(n=(n=!n||isNaN(n)?0:v(n))<0?Math.max(0,e.length+n):n,0<=t?vn(e,n,n+t):0===n?vn(e,t,e.length):vn(e,Math.max(0,n+t),n)):e)}}function vn(e,t,n){return R(e)?e.slice(t,n):zn.call(e,t,n)}function yn(i){function l(e){switch(typeof e){case"number":case"boolean":case"string":return 1;default:return}}function c(e,t){var n,a=0,i=e.type,r=t.type;return i===r?(r=e.value,n=t.value,"string"===i?(r=r.toLowerCase(),n=n.toLowerCase()):"object"===i&&(fe(r)&&(r=e.index),fe(n)&&(n=t.index)),r!==n&&(a=r<n?-1:1)):a=i<r?-1:1,a}return function(e,t,n,a){if(null==e)return e;if(!A(e))throw E("orderBy")("notarray",e);ra(t)||(t=[t]),0===t.length&&(t=["+"]);var r=t.map(function(e){var t,n=1,a=y;return pe(e)?a=e:R(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(a=i(e)).constant&&(t=a(),a=function(e){return e[t]})),{get:a,descending:n}}),s=n?-1:1,o=pe(a)?a:c;return(e=Array.prototype.map.call(e,function(n,a){return{value:n,tieBreaker:{value:a,type:"number",index:a},predicateValues:r.map(function(e){var t=e.get(n);return e=typeof t,null===t?(e="string",t="null"):"object"===e&&(pe(t.valueOf)&&l(t=t.valueOf())||u(t)&&l(t=t.toString())),{value:t,type:e,index:a}})}})).sort(function(e,t){for(var n=0,a=r.length;n<a;n++){var i=o(e.predicateValues[n],t.predicateValues[n]);if(i)return i*r[n].descending*s}return o(e.tieBreaker,t.tieBreaker)*s}),e.map(function(e){return e.value})}}function _n(e){return pe(e)&&(e={link:e}),e.restrict=e.restrict||"AC",w(e)}function bn(e,t,n,a,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$valid=this.$pristine=!0,this.$submitted=this.$invalid=!1,this.$$parentForm=Bi,this.$$element=e,this.$$animate=a,Sn(this)}function Sn(e){e.$$classCache={},e.$$classCache[br]=!(e.$$classCache[_r]=e.$$element.hasClass(_r))}function Tn(e){function a(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function i(e,t,n){t=t?"-"+Se(t,"-"):"",a(e,_r+t,!0===n),a(e,br+t,!1===n)}var r=e.set,s=e.unset;e.clazz.prototype.$setValidity=function(e,t,n){de(t)?(this.$pending||(this.$pending={}),r(this.$pending,e,n)):(this.$pending&&s(this.$pending,e,n),wn(this.$pending)&&(this.$pending=void 0)),N(t)?t?(s(this.$error,e,n),r(this.$$success,e,n)):(r(this.$error,e,n),s(this.$$success,e,n)):(s(this.$error,e,n),s(this.$$success,e,n)),this.$pending?(a(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,i(this,"",null)):(a(this,"ng-pending",!1),this.$valid=wn(this.$error),this.$invalid=!this.$valid,i(this,"",this.$valid)),i(this,e,t=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null)),this.$$parentForm.$setValidity(e,t,this)}}function wn(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Pn(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function xn(e,n,a,i,t,r){var s,o=Yn(n[0].type);t.android||(s=!1,n.on("compositionstart",function(){s=!0}),n.on("compositionend",function(){s=!1,u()}));var l,c,u=function(e){var t;l&&(r.defer.cancel(l),l=null),s||(t=n.val(),e=e&&e.type,"password"===o||a.ngTrim&&"false"===a.ngTrim||(t=oa(t)),(i.$viewValue!==t||""===t&&i.$$hasNativeValidators)&&i.$setViewValue(t,e))};t.hasEvent("input")?n.on("input",u):(c=function(e,t,n){l=l||r.defer(function(){l=null,t&&t.value===n||u(e)})},n.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||c(e,this,this.value)}),t.hasEvent("paste")&&n.on("paste cut",c)),n.on("change",u),Ji[o]&&i.$$hasNativeValidators&&o===a.type&&n.on("keydown wheel mousedown",function(e){var t,n,a;l||(t=this.validity,n=t.badInput,a=t.typeMismatch,l=r.defer(function(){l=null,t.badInput===n&&t.typeMismatch===a||u(e)}))}),i.$render=function(){var e=i.$isEmpty(i.$viewValue)?"":i.$viewValue;n.val()!==e&&n.val(e)}}function Cn(i,r){return function(e,t){var n,a;if(S(e))return e;if(R(e)){if('"'===e.charAt(0)&&'"'===e.charAt(e.length-1)&&(e=e.substring(1,e.length-1)),Hi.test(e))return new Date(e);if(i.lastIndex=0,n=i.exec(e))return n.shift(),a=t?{yyyy:t.getFullYear(),MM:t.getMonth()+1,dd:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds(),sss:t.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},ce(n,function(e,t){t<r.length&&(a[r[t]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function Dn(f,p,m,g){return function(e,t,n,a,i,r,s){function o(e){return e&&(!e.getTime||e.getTime()===e.getTime())}function l(e){return O(e)&&!S(e)?m(e)||void 0:e}En(0,t,0,a),xn(0,t,n,a,i,r);var c,u,h,d=a&&a.$options.getOption("timezone");a.$$parserName=f,a.$parsers.push(function(e){return a.$isEmpty(e)?null:p.test(e)?(e=m(e,c),d&&(e=D(e,d)),e):void 0}),a.$formatters.push(function(e){if(e&&!S(e))throw wr("datefmt",e);return o(e)?((c=e)&&d&&(c=D(c,d,!0)),s("date")(e,g,d)):(c=null,"")}),(O(n.min)||n.ngMin)&&(a.$validators.min=function(e){return!o(e)||de(u)||m(e)>=u},n.$observe("min",function(e){u=l(e),a.$validate()})),(O(n.max)||n.ngMax)&&(a.$validators.max=function(e){return!o(e)||de(h)||m(e)<=h},n.$observe("max",function(e){h=l(e),a.$validate()}))}}function En(e,n,t,a){(a.$$hasNativeValidators=fe(n[0].validity))&&a.$parsers.push(function(e){var t=n.prop("validity")||{};return t.badInput||t.typeMismatch?void 0:e})}function An(t){t.$$parserName="number",t.$parsers.push(function(e){return t.$isEmpty(e)?null:qi.test(e)?parseFloat(e):void 0}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!_(e))throw wr("numfmt",e);e=e.toString()}return e})}function kn(e){return O(e)&&!_(e)&&(e=parseFloat(e)),na(e)?void 0:e}function In(e){var t=e.toString(),n=t.indexOf(".");return-1===n?-1<e&&e<1&&(e=/e-(\d+)$/.exec(t))?Number(e[1]):0:t.length-n-1}function Mn(e,t,n){var a,i,r,s=(0|(e=Number(e)))!==e,o=(0|t)!==t,l=(0|n)!==n;return(s||o||l)&&(r=s?In(e):0,a=o?In(t):0,i=l?In(n):0,r=Math.max(r,a,i),e*=r=Math.pow(10,r),t*=r,n*=r,s&&(e=Math.round(e)),o&&(t=Math.round(t)),l&&(n=Math.round(n))),0==(e-t)%n}function $n(e,t,n,a,i){if(O(a)){if(!(e=e(a)).constant)throw wr("constexpr",n,a);return e(t)}return i}function Ln(l,c){function u(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[],a=0;e:for(;a<e.length;a++){for(var i=e[a],r=0;r<t.length;r++)if(i===t[r])continue e;n.push(i)}return n}function h(t){var e=t;return ra(t)?e=t.map(h).join(" "):fe(t)&&(e=Object.keys(t).filter(function(e){return t[e]}).join(" ")),e}var d;return l="ngClass"+l,["$parse",function(n){return{restrict:"AC",link:function(e,t,i){function r(e,t){var n=[];return ce(e,function(e){(0<t||a[e])&&(a[e]=(a[e]||0)+t,a[e]===+(0<t)&&n.push(e))}),n.join(" ")}var s,a=t.data("$classCounts"),o=!0;a||(a=we(),t.data("$classCounts",a)),"ngClass"!==l&&(d=d||n("$index",function(e){return 1&e}),e.$watch(d,function(e){var t;e===c?(t=r((t=s)&&t.split(" "),1),i.$addClass(t)):(t=r((t=s)&&t.split(" "),-1),i.$removeClass(t)),o=e})),e.$watch(n(i[l],h),function(e){var t,n,a;R(e)||(e=h(e)),o===c&&(n=e,n=u(a=s&&s.split(" "),t=n&&n.split(" ")),a=u(t,a),n=r(n,-1),a=r(a,1),i.$addClass(a),i.$removeClass(n)),s=e})}}}]}function On(e,t,n,a,i,r,s,o,l){var c;this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(e),this.$$parentForm=Bi,this.$options=Pr,this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:e}),this.$$attr=n,this.$$element=a,this.$$animate=r,this.$$timeout=s,this.$$parse=i,this.$$q=o,this.$$exceptionHandler=t,Sn(this),(c=this).$$scope.$watch(function(e){if((e=c.$$ngModelGet(e))!==c.$modelValue&&(c.$modelValue==c.$modelValue||e==e)){c.$modelValue=c.$$rawModelValue=e,c.$$parserValid=void 0;for(var t=c.$formatters,n=t.length,a=e;n--;)a=t[n](a);c.$viewValue!==a&&(c.$$updateEmptyClasses(a),c.$viewValue=c.$$lastCommittedViewValue=a,c.$render(),c.$$runValidators(c.$modelValue,c.$viewValue,L))}return e})}function Rn(e){this.$$options=e}function Nn(n,e){ce(e,function(e,t){O(n[t])||(n[t]=e)})}function Fn(e,t){e.prop("selected",t),e.attr("selected",t)}var Bn,Vn,jn,Un=/^\/(.+)\/([a-z]*)$/,Hn=Object.prototype.hasOwnProperty,Gn={objectMaxDepth:5},Yn=function(e){return R(e)?e.toLowerCase():e},qn=function(e){return R(e)?e.toUpperCase():e},zn=[].slice,Wn=[].splice,Kn=[].push,Xn=Object.prototype.toString,Qn=Object.getPrototypeOf,Jn=E("ng"),Zn=$.angular||($.angular={}),ea=0,ta=$.document.documentMode,na=Number.isNaN||function(e){return e!=e};L.$inject=[],y.$inject=[];var aa,ia,ra=Array.isArray,sa=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,oa=function(e){return R(e)?e.trim():e},la=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},ca=function(){if(!O(ca.rules)){var e=$.document.querySelector("[ng-csp]")||$.document.querySelector("[data-ng-csp]");if(e){var t=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ca.rules={noUnsafeEval:!t||-1!==t.indexOf("no-unsafe-eval"),noInlineStyle:!t||-1!==t.indexOf("no-inline-style")}}else{e=ca;try{new Function(""),t=!1}catch(e){t=!0}e.rules={noUnsafeEval:t,noInlineStyle:!1}}}return ca.rules},ua=function(){if(O(ua.name_))return ua.name_;for(var e,t,n,a=da.length,i=0;i<a;++i)if(t=da[i],e=$.document.querySelector("["+t.replace(":","\\:")+"jq]")){n=e.getAttribute(t+"jq");break}return ua.name_=n},ha=/:/g,da=["ng-","data-ng-","ng:","x-ng-"],fa=(aa=$.document,!(ia=aa.currentScript)||(ia instanceof $.HTMLScriptElement||ia instanceof $.SVGScriptElement)&&[(ia=ia.attributes).getNamedItem("src"),ia.getNamedItem("href"),ia.getNamedItem("xlink:href")].every(function(e){if(!e)return!0;if(!e.value)return!1;var t=aa.createElement("a");if(t.href=e.value,aa.location.origin===t.origin)return!0;switch(t.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})),pa=/[A-Z]/g,ma=!1,ga=3,va={full:"1.6.4",major:1,minor:6,dot:4,codeName:"phenomenal-footnote"};X.expando="ng339";var ya=X.cache={},_a=1;X._data=function(e){return this.cache[e[this.expando]]||{}};var ba=/-([a-z])/g,Sa=/^-ms-/,Ta={mouseleave:"mouseout",mouseenter:"mouseover"},wa=E("jqLite"),Pa=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,xa=/<|&#?\w+;/,Ca=/<([\w:-]+)/,Da=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ea={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ea.optgroup=Ea.option,Ea.tbody=Ea.tfoot=Ea.colgroup=Ea.caption=Ea.thead,Ea.th=Ea.td;var Aa=$.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},ka=X.prototype={ready:Ce,toString:function(){var t=[];return ce(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(e){return Bn(0<=e?this[e]:this[this.length+e])},length:0,push:Kn,sort:[].sort,splice:[].splice},Ia={};ce("multiple selected checked disabled readOnly required open".split(" "),function(e){Ia[Yn(e)]=e});var Ma={};ce("input select option textarea button form details".split(" "),function(e){Ma[e]=!0});var $a={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function La(e,t){if(de(t)){var n=e.nodeType;return 1===n||n===ga?e.textContent:""}e.textContent=t}ce({data:te,removeData:Z,hasData:function(e){for(var t in ya[e.ng339])return!0;return!1},cleanData:function(e){for(var t=0,n=e.length;t<n;t++)Z(e[t])}},function(e,t){X[t]=e}),ce({data:te,inheritedData:oe,scope:function(e){return Bn.data(e,"$scope")||oe(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Bn.data(e,"$isolateScope")||Bn.data(e,"$isolateScopeNoTemplate")},controller:se,injector:function(e){return oe(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:ne,css:function(e,t,n){if(t=z(t.replace(Sa,"ms-")),!O(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){if((a=e.nodeType)!==ga&&2!==a&&8!==a&&e.getAttribute){var a=Yn(t),i=Ia[a];if(!O(n))return e=e.getAttribute(t),i&&null!==e&&(e=a),null===e?void 0:e;null===n||!1===n&&i?e.removeAttribute(t):e.setAttribute(t,i?a:n)}},prop:function(e,t,n){if(!O(n))return e[t];e[t]=n},text:(La.$dv="",La),val:function(e,t){if(de(t)){if(e.multiple&&"select"===ge(e)){var n=[];return ce(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){if(de(t))return e.innerHTML;Q(e,!0),e.innerHTML=t},empty:le},function(s,e){X.prototype[e]=function(e,t){var n,a=this.length;if(s!==le&&de(2===s.length&&s!==ne&&s!==se?e:t)){if(fe(e)){for(r=0;r<a;r++)if(s===te)s(this[r],e);else for(n in e)s(this[r],n,e[n]);return this}for(a=de(r=s.$dv)?Math.min(a,1):a,n=0;n<a;n++)var i=s(this[n],e,t),r=r?r+i:i;return r}for(r=0;r<a;r++)s(this[r],e,t);return this}}),ce({removeData:Z,on:function(i,e,r,t){if(O(t))throw wa("onargs");if(W(i))for(var s=(t=ee(i,!0)).events,o=(o=t.handle)||(t.handle=Ee(i,s)),n=(t=0<=e.indexOf(" ")?e.split(" "):[e]).length,a=function(e,t,n){var a=s[e];a||((a=s[e]=[]).specialHandlerWrapper=t,"$destroy"===e||n||i.addEventListener(e,o)),a.push(r)};n--;)e=t[n],Ta[e]?(a(Ta[e],ke),a(e,void 0,!0)):a(e)},off:J,one:function(t,n,a){(t=Bn(t)).on(n,function e(){t.off(n,a),t.off(n,e)}),t.on(n,a)},replaceWith:function(t,e){var n,a=t.parentNode;Q(t),ce(new X(e),function(e){n?a.insertBefore(e,n.nextSibling):a.replaceChild(e,t),n=e})},children:function(e){var t=[];return ce(e.childNodes,function(e){1===e.nodeType&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){if(1===(n=e.nodeType)||11===n)for(var n=0,a=(t=new X(t)).length;n<a;n++)e.appendChild(t[n])},prepend:function(t,e){var n;1===t.nodeType&&(n=t.firstChild,ce(new X(e),function(e){t.insertBefore(e,n)}))},wrap:function(e,t){var n=Bn(t).eq(0).clone()[0],a=e.parentNode;a&&a.replaceChild(n,e),n.appendChild(e)},remove:xe,detach:function(e){xe(e,!0)},after:function(e,t){var n=e,a=e.parentNode;if(a)for(var i=0,r=(t=new X(t)).length;i<r;i++){var s=t[i];a.insertBefore(s,n.nextSibling),n=s}},addClass:ie,removeClass:ae,toggleClass:function(n,e,a){e&&ce(e.split(" "),function(e){var t=a;de(t)&&(t=!ne(n,e)),(t?ie:ae)(n,e)})},parent:function(e){return(e=e.parentNode)&&11!==e.nodeType?e:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Pe,triggerHandler:function(t,e,n){var a,i,r=e.type||e,s=ee(t);(s=(s=s&&s.events)&&s[r])&&(a={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:L,type:r,target:t},e.type&&(a=ue(a,e)),e=Y(s),i=n?[a].concat(n):[a],ce(e,function(e){a.isImmediatePropagationStopped()||e.apply(t,i)}))}},function(s,e){X.prototype[e]=function(e,t,n){for(var a,i=0,r=this.length;i<r;i++)de(a)?O(a=s(this[i],e,t,n))&&(a=Bn(a)):re(a,s(this[i],e,t,n));return O(a)?a:this}}),X.prototype.bind=X.prototype.on,X.prototype.unbind=X.prototype.off;var Oa=Object.create(null);$e.prototype={_idx:function(e){return e===this._lastKey?this._lastIndex:(this._lastKey=e,this._lastIndex=this._keys.indexOf(e))},_transformKey:function(e){return na(e)?Oa:e},get:function(e){if(e=this._transformKey(e),-1!==(e=this._idx(e)))return this._values[e]},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){return e=this._transformKey(e),-1!==(e=this._idx(e))&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Ra=$e,Na=[function(){this.$get=[function(){return Ra}]}],Fa=/^([^(]+?)=>/,Ba=/^[^(]*\(\s*([^)]*)\)/m,Va=/,/,ja=/^\s*(_?)(\S+?)\1\s*$/,Ua=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ha=E("$injector");Oe.$$annotate=function(e,t,n){var a,i;if("function"==typeof e){if(!(a=e.$inject)){if(a=[],e.length){if(t)throw R(n)&&n||(n=e.name||((i=Le(i=e))?"function("+(i[1]||"").replace(/[\s\r\n]+/," ")+")":"fn")),Ha("strictdi",n);ce((t=Le(e))[1].split(Va),function(e){e.replace(ja,function(e,t,n){a.push(n)})})}e.$inject=a}}else ra(e)?(V(e[t=e.length-1],"fn"),a=e.slice(0,t)):V(e,"fn",!0);return a};function Ga(){this.$get=L}function Ya(){var l=new Ra,c=[];this.$get=["$$AnimateRunner","$rootScope",function(i,r){function s(t,e,n){var a=!1;return e&&ce(e=R(e)?e.split(" "):ra(e)?e:[],function(e){e&&(a=!0,t[e]=n)}),a}function o(){ce(c,function(e){var n,a,i,t=l.get(e);t&&(n=function(e){R(e)&&(e=e.split(" "));var t=we();return ce(e,function(e){e.length&&(t[e]=!0)}),t}(e.attr("class")),i=a="",ce(t,function(e,t){e!==!!n[t]&&(e?a+=(a.length?" ":"")+t:i+=(i.length?" ":"")+t)}),ce(e,function(e){a&&ie(e,a),i&&ae(e,i)}),l.delete(e))}),c.length=0}return{enabled:L,on:L,off:L,pin:L,push:function(e,t,n,a){return a&&a(),(n=n||{}).from&&e.css(n.from),n.to&&e.css(n.to),(n.addClass||n.removeClass)&&(t=n.addClass,a=n.removeClass,t=s(n=l.get(e)||{},t,!0),a=s(n,a,!1),(t||a)&&(l.set(e,n),c.push(e),1===c.length&&r.$$postDigest(o))),(e=new i).complete(),e}}}]}function qa(){this.$get=["$$rAF",function(t){function n(e){a.push(e),1<a.length||t(function(){for(var e=0;e<a.length;e++)a[e]();a=[]})}var a=[];return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]}function za(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,a,i){function r(e){this.setHost(e);var t=n();this._doneCallbacks=[],this._tick=function(e){a()?i(e,0,!1):t(e)},this._state=0}return r.chain=function(e,n){var a=0;!function t(){a===e.length?n(!0):e[a](function(e){!1===e?n(!1):(a++,t())})}()},r.all=function(t,n){function a(e){r=r&&e,++i===t.length&&n(r)}var i=0,r=!0;ce(t,function(e){e.done(a)})},r.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:L,getPromise:function(){var e;return this.promise||((e=this).promise=t(function(t,n){e.done(function(e){(!1===e?n:t)()})})),this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick(function(){t._resolve(e)}))},_resolve:function(t){2!==this._state&&(ce(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},r}]}function Wa(){this.$get=["$$rAF","$q","$$AnimateRunner",function(s,e,o){return function(e,t){function n(){return s(function(){a.addClass&&(e.addClass(a.addClass),a.addClass=null),a.removeClass&&(e.removeClass(a.removeClass),a.removeClass=null),a.to&&(e.css(a.to),a.to=null),i||r.complete(),i=!0}),r}var a=t||{};a.$$prepared||(a=P(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(e.css(a.from),a.from=null);var i,r=new o;return{start:n,end:n}}}]}var Ka=E("$animate"),Xa=["$provide",function(a){var i=this,t=null;this.$$registeredAnimations=Object.create(null),this.register=function(e,t){if(e&&"."!==e.charAt(0))throw Ka("notcsel",e);var n=e+"-animation";i.$$registeredAnimations[e.substr(1)]=n,a.factory(n,t)},this.classNameFilter=function(e){if(1===arguments.length&&(t=e instanceof RegExp?e:null)&&/[(\s|\/)]ng-animate[(\s|\/)]/.test(t.toString()))throw t=null,Ka("nongcls","ng-animate");return t},this.$get=["$$animateQueue",function(r){function i(e,t,n){if(n){var a;e:{for(a=0;a<n.length;a++){var i=n[a];if(1===i.nodeType){a=i;break e}}a=void 0}!a||a.parentNode||a.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:r.on,off:r.off,pin:r.pin,enabled:r.enabled,cancel:function(e){e.end&&e.end()},enter:function(e,t,n,a){return t=t&&Bn(t),n=n&&Bn(n),i(e,t=t||n.parent(),n),r.push(e,"enter",Fe(a))},move:function(e,t,n,a){return t=t&&Bn(t),n=n&&Bn(n),i(e,t=t||n.parent(),n),r.push(e,"move",Fe(a))},leave:function(e,t){return r.push(e,"leave",Fe(t),function(){e.remove()})},addClass:function(e,t,n){return(n=Fe(n)).addClass=Ne(n.addclass,t),r.push(e,"addClass",n)},removeClass:function(e,t,n){return(n=Fe(n)).removeClass=Ne(n.removeClass,t),r.push(e,"removeClass",n)},setClass:function(e,t,n,a){return(a=Fe(a)).addClass=Ne(a.addClass,t),a.removeClass=Ne(a.removeClass,n),r.push(e,"setClass",a)},animate:function(e,t,n,a,i){return(i=Fe(i)).from=i.from?ue(i.from,t):t,i.to=i.to?ue(i.to,n):n,i.tempClasses=Ne(i.tempClasses,a||"ng-inline-animate"),r.push(e,"animate",i)}}}]}],Qa=E("$compile"),Ja=new function(){};He.$inject=["$provide","$$sanitizeUriProvider"],Ge.prototype.isFirstChange=function(){return this.previousValue===Ja};function Za(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof Bn&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]}var ei=/^((?:x|data)[:\-_])/i,ti=/[:\-_]+(.)/g,ni=E("$controller"),ai=/^(\S+)(\s+as\s+([\w$]+))?$/,ii="application/json",ri={"Content-Type":ii+";charset=utf-8"},si=/^\[|^\{(?!\{)/,oi={"[":/]$/,"{":/}$/},li=/^\)]\}',?\n/,ci=E("$http"),ui=Zn.$interpolateMinErr=E("$interpolate");ui.throwNoconcat=function(e){throw ui("noconcat",e)},ui.interr=function(e,t){return ui("interr",e,t.toString())};function hi(){this.$get=function(){var i=Zn.callbacks,r={};return{createCallback:function(e){var t,n="angular.callbacks."+(e="_"+(i.$$counter++).toString(36)),a=((t=function(e){t.data=e,t.called=!0}).id=e,t);return r[n]=i[e]=a,n},wasCalled:function(e){return r[e].called},getResponse:function(e){return r[e].data},removeCallback:function(e){delete i[r[e].id],delete r[e]}}}}var di=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,fi={http:80,https:443,ftp:21},pi=E("$location"),mi=/^\s*[\\/]{2,}/,gi={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:bt("$$absUrl"),url:function(e){if(de(e))return this.$$url;var t=di.exec(e);return!t[1]&&""!==e||this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:bt("$$protocol"),host:bt("$$host"),port:bt("$$port"),path:St("$$path",function(e){return"/"===(e=null!==e?e.toString():"").charAt(0)?e:"/"+e}),search:function(n,e){switch(arguments.length){case 0:return this.$$search;case 1:if(R(n)||_(n))n=n.toString(),this.$$search=o(n);else{if(!fe(n))throw pi("isrcharg");ce(n=P(n,{}),function(e,t){null==e&&delete n[t]}),this.$$search=n}break;default:de(e)||null===e?delete this.$$search[n]:this.$$search[n]=e}return this.$$compose(),this},hash:St("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};ce([_t,yt,vt],function(t){t.prototype=Object.create(gi),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==vt||!this.$$html5)throw pi("nostate");return this.$$state=de(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var vi=E("$parse"),yi={}.constructor.prototype.valueOf,_i=we();ce("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){_i[e]=!0});var bi={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Si=function(e){this.options=e};Si.prototype={constructor:Si,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t,n,a,i;'"'===(e=this.text.charAt(this.index))||"'"===e?this.readString(e):this.isNumber(e)||"."===e&&this.isNumber(this.peek())?this.readNumber():this.isIdentifierStart(this.peekMultichar())?this.readIdent():this.is(e,"(){}[].,;:?")?(this.tokens.push({index:this.index,text:e}),this.index++):this.isWhitespace(e)?this.index++:(n=(t=e+this.peek())+this.peek(2),a=_i[t],i=_i[n],_i[e]||a||i?(e=i?n:a?t:e,this.tokens.push({index:this.index,text:e,operator:!0}),this.index+=e.length):this.throwError("Unexpected next character ",this.index,this.index+1))}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){return e=e||1,this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||"Â "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),a=t.charCodeAt(0);return 55296<=n&&n<=56319&&56320<=a&&a<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){throw n=n||this.index,t=O(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n,vi("lexerr",e,t,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Yn(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var a=this.peek();if("e"===n&&this.isExpOperator(a))e+=n;else if(this.isExpOperator(n)&&a&&this.isNumber(a)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||a&&this.isNumber(a)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",a=e,i=!1;this.index<this.text.length;){var r=this.text.charAt(this.index),a=a+r;if(i)"u"===r?((i=this.text.substring(this.index+1,this.index+5)).match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+i+"]"),this.index+=4,n+=String.fromCharCode(parseInt(i,16))):n+=bi[r]||r,i=!1;else if("\\"===r)i=!0;else{if(r===e)return this.index++,void this.tokens.push({index:t,text:a,constant:!0,value:n});n+=r}this.index++}this.throwError("Unterminated quote",t)}};var Ti=function(e,t){this.lexer=e,this.options=t};Ti.Program="Program",Ti.ExpressionStatement="ExpressionStatement",Ti.AssignmentExpression="AssignmentExpression",Ti.ConditionalExpression="ConditionalExpression",Ti.LogicalExpression="LogicalExpression",Ti.BinaryExpression="BinaryExpression",Ti.UnaryExpression="UnaryExpression",Ti.CallExpression="CallExpression",Ti.MemberExpression="MemberExpression",Ti.Identifier="Identifier",Ti.Literal="Literal",Ti.ArrayExpression="ArrayExpression",Ti.Property="Property",Ti.ObjectExpression="ObjectExpression",Ti.ThisExpression="ThisExpression",Ti.LocalsExpression="LocalsExpression",Ti.NGValueParameter="NGValueParameter",Ti.prototype={ast:function(e){return this.text=e,this.tokens=this.lexer.lex(e),e=this.program(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var e=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Ti.Program,body:e}},expressionStatement:function(){return{type:Ti.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!At(e))throw vi("lval");e={type:Ti.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Ti.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Ti.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Ti.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Ti.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Ti.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Ti.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Ti.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Ti.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=P(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:Ti.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(e={type:Ti.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Ti.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Ti.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){e=[e];for(var t={type:Ti.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return t},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)for(;e.push(this.filterChain()),this.expect(","););return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Ti.Identifier,name:e.text}},constant:function(){return{type:Ti.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ti.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:Ti.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Ti.ObjectExpression,properties:t}},throwError:function(e,t){throw vi("syntax",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw vi("ueoe",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw vi("ueoe",this.text);return this.tokens[0]},peek:function(e,t,n,a){return this.peekAhead(0,e,t,n,a)},peekAhead:function(e,t,n,a,i){if(this.tokens.length>e){var r=(e=this.tokens[e]).text;if(r===t||r===n||r===a||r===i||!(t||n||a||i))return e}return!1},expect:function(e,t,n,a){return!!(e=this.peek(e,t,n,a))&&(this.tokens.shift(),e)},selfReferential:{this:{type:Ti.ThisExpression},$locals:{type:Ti.LocalsExpression}}},It.prototype={compile:function(e){var i=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Dt(e,i.$filter);var t,n="";return this.stage="assign",(t=kt(e))&&(this.state.computing="assign",n=this.nextId(),this.recurse(t,n),this.return_(n),n="fn.assign="+this.generateFunction("assign","s,v,l")),t=Et(e.body),i.stage="inputs",ce(t,function(e,t){var n="fn"+t;i.state[n]={vars:[],body:[],own:{}},i.state.computing=n;var a=i.nextId();i.recurse(e,a),i.return_(a),i.state.inputs.push(n),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(e),e='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",e=new Function("$filter","getStringValue","ifDefined","plus",e)(this.$filter,Pt,xt,Ct),this.state=this.stage=void 0,e},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return ce(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var n=[],a=this;return ce(this.state.filters,function(e,t){n.push(e+"=$filter("+a.escape(t)+")")}),n.length?"var "+n.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(n,t,e,a,i,r){var s,o,l,c,u,h=this;if(a=a||L,!r&&O(n.watchId))t=t||this.nextId(),this.if_("i",this.lazyAssign(t,this.computedMember("i",n.watchId)),this.lazyRecurse(n,t,e,a,i,!0));else switch(n.type){case Ti.Program:ce(n.body,function(e,t){h.recurse(e.expression,void 0,void 0,function(e){o=e}),t!==n.body.length-1?h.current().body.push(o,";"):h.return_(o)});break;case Ti.Literal:c=this.escape(n.value),this.assign(t,c),a(t||c);break;case Ti.UnaryExpression:this.recurse(n.argument,void 0,void 0,function(e){o=e}),c=n.operator+"("+this.ifDefined(o,0)+")",this.assign(t,c),a(c);break;case Ti.BinaryExpression:this.recurse(n.left,void 0,void 0,function(e){s=e}),this.recurse(n.right,void 0,void 0,function(e){o=e}),c="+"===n.operator?this.plus(s,o):"-"===n.operator?this.ifDefined(s,0)+n.operator+this.ifDefined(o,0):"("+s+")"+n.operator+"("+o+")",this.assign(t,c),a(c);break;case Ti.LogicalExpression:t=t||this.nextId(),h.recurse(n.left,t),h.if_("&&"===n.operator?t:h.not(t),h.lazyRecurse(n.right,t)),a(t);break;case Ti.ConditionalExpression:t=t||this.nextId(),h.recurse(n.test,t),h.if_(t,h.lazyRecurse(n.alternate,t),h.lazyRecurse(n.consequent,t)),a(t);break;case Ti.Identifier:t=t||this.nextId(),e&&(e.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",n.name)+"?l:s"),e.computed=!1,e.name=n.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",n.name)),function(){h.if_("inputs"===h.stage||"s",function(){i&&1!==i&&h.if_(h.isNull(h.nonComputedMember("s",n.name)),h.lazyAssign(h.nonComputedMember("s",n.name),"{}")),h.assign(t,h.nonComputedMember("s",n.name))})},t&&h.lazyAssign(t,h.nonComputedMember("l",n.name))),a(t);break;case Ti.MemberExpression:s=e&&(e.context=this.nextId())||this.nextId(),t=t||this.nextId(),h.recurse(n.object,s,void 0,function(){h.if_(h.notNull(s),function(){n.computed?(o=h.nextId(),h.recurse(n.property,o),h.getStringValue(o),i&&1!==i&&h.if_(h.not(h.computedMember(s,o)),h.lazyAssign(h.computedMember(s,o),"{}")),c=h.computedMember(s,o),h.assign(t,c),e&&(e.computed=!0,e.name=o)):(i&&1!==i&&h.if_(h.isNull(h.nonComputedMember(s,n.property.name)),h.lazyAssign(h.nonComputedMember(s,n.property.name),"{}")),c=h.nonComputedMember(s,n.property.name),h.assign(t,c),e&&(e.computed=!1,e.name=n.property.name))},function(){h.assign(t,"undefined")}),a(t)},!!i);break;case Ti.CallExpression:t=t||this.nextId(),n.filter?(o=h.filter(n.callee.name),l=[],ce(n.arguments,function(e){var t=h.nextId();h.recurse(e,t),l.push(t)}),c=o+"("+l.join(",")+")",h.assign(t,c),a(t)):(o=h.nextId(),s={},l=[],h.recurse(n.callee,o,s,function(){h.if_(h.notNull(o),function(){ce(n.arguments,function(e){h.recurse(e,n.constant?void 0:h.nextId(),void 0,function(e){l.push(e)})}),c=s.name?h.member(s.context,s.name,s.computed)+"("+l.join(",")+")":o+"("+l.join(",")+")",h.assign(t,c)},function(){h.assign(t,"undefined")}),a(t)}));break;case Ti.AssignmentExpression:o=this.nextId(),s={},this.recurse(n.left,void 0,s,function(){h.if_(h.notNull(s.context),function(){h.recurse(n.right,o),c=h.member(s.context,s.name,s.computed)+n.operator+o,h.assign(t,c),a(t||c)})},1);break;case Ti.ArrayExpression:l=[],ce(n.elements,function(e){h.recurse(e,n.constant?void 0:h.nextId(),void 0,function(e){l.push(e)})}),c="["+l.join(",")+"]",this.assign(t,c),a(t||c);break;case Ti.ObjectExpression:u=!(l=[]),ce(n.properties,function(e){e.computed&&(u=!0)}),u?(t=t||this.nextId(),this.assign(t,"{}"),ce(n.properties,function(e){e.computed?(s=h.nextId(),h.recurse(e.key,s)):s=e.key.type===Ti.Identifier?e.key.name:""+e.key.value,o=h.nextId(),h.recurse(e.value,o),h.assign(h.member(t,s,e.computed),o)})):(ce(n.properties,function(t){h.recurse(t.value,n.constant?void 0:h.nextId(),void 0,function(e){l.push(h.escape(t.key.type===Ti.Identifier?t.key.name:""+t.key.value)+":"+e)})}),c="{"+l.join(",")+"}",this.assign(t,c)),a(t||c);break;case Ti.ThisExpression:this.assign(t,"s"),a(t||"s");break;case Ti.LocalsExpression:this.assign(t,"l"),a(t||"l");break;case Ti.NGValueParameter:this.assign(t,"v"),a(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,a=this.current().own;return a.hasOwnProperty(n)||(a[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),a[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){var a;!0===e?t():((a=this.current().body).push("if(",e,"){"),t(),a.push("}"),n&&(a.push("else{"),n(),a.push("}")))},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(t)?e+"."+t:e+'["'+t.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,a,i,r){var s=this;return function(){s.recurse(e,t,n,a,i,r)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(R(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(_(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw vi("esc")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},Mt.prototype={compile:function(e){var t,a,i,r=this;Dt(e,r.$filter),(t=kt(e))&&(a=this.recurse(t)),(t=Et(e.body))&&(i=[],ce(t,function(e,t){var n=r.recurse(e);e.input=n,i.push(n),e.watchId=t}));var s=[];return ce(e.body,function(e){s.push(r.recurse(e.expression))}),e=0===e.body.length?L:1===e.body.length?s[0]:function(t,n){var a;return ce(s,function(e){a=e(t,n)}),a},a&&(e.assign=function(e,t,n){return a(e,n,t)}),i&&(e.inputs=i),e},recurse:function(e,o,t){var r,l,c,n=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Ti.Literal:return this.value(e.value,o);case Ti.UnaryExpression:return l=this.recurse(e.argument),this["unary"+e.operator](l,o);case Ti.BinaryExpression:case Ti.LogicalExpression:return r=this.recurse(e.left),l=this.recurse(e.right),this["binary"+e.operator](r,l,o);case Ti.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),o);case Ti.Identifier:return n.identifier(e.name,o,t);case Ti.MemberExpression:return r=this.recurse(e.object,!1,!!t),e.computed||(l=e.property.name),e.computed&&(l=this.recurse(e.property)),e.computed?this.computedMember(r,l,o,t):this.nonComputedMember(r,l,o,t);case Ti.CallExpression:return c=[],ce(e.arguments,function(e){c.push(n.recurse(e))}),e.filter&&(l=this.$filter(e.callee.name)),e.filter||(l=this.recurse(e.callee,!0)),e.filter?function(e,t,n,a){for(var i=[],r=0;r<c.length;++r)i.push(c[r](e,t,n,a));return e=l.apply(void 0,i,a),o?{context:void 0,name:void 0,value:e}:e}:function(e,t,n,a){var i,r=l(e,t,n,a);if(null!=r.value){i=[];for(var s=0;s<c.length;++s)i.push(c[s](e,t,n,a));i=r.value.apply(r.context,i)}return o?{value:i}:i};case Ti.AssignmentExpression:return r=this.recurse(e.left,!0,1),l=this.recurse(e.right),function(e,t,n,a){var i=r(e,t,n,a);return e=l(e,t,n,a),i.context[i.name]=e,o?{value:e}:e};case Ti.ArrayExpression:return c=[],ce(e.elements,function(e){c.push(n.recurse(e))}),function(e,t,n,a){for(var i=[],r=0;r<c.length;++r)i.push(c[r](e,t,n,a));return o?{value:i}:i};case Ti.ObjectExpression:return c=[],ce(e.properties,function(e){e.computed?c.push({key:n.recurse(e.key),computed:!0,value:n.recurse(e.value)}):c.push({key:e.key.type===Ti.Identifier?e.key.name:""+e.key.value,computed:!1,value:n.recurse(e.value)})}),function(e,t,n,a){for(var i={},r=0;r<c.length;++r)c[r].computed?i[c[r].key(e,t,n,a)]=c[r].value(e,t,n,a):i[c[r].key]=c[r].value(e,t,n,a);return o?{value:i}:i};case Ti.ThisExpression:return function(e){return o?{value:e}:e};case Ti.LocalsExpression:return function(e,t){return o?{value:t}:t};case Ti.NGValueParameter:return function(e,t,n){return o?{value:n}:n}}},"unary+":function(i,r){return function(e,t,n,a){return e=O(e=i(e,t,n,a))?+e:0,r?{value:e}:e}},"unary-":function(i,r){return function(e,t,n,a){return e=O(e=i(e,t,n,a))?-e:-0,r?{value:e}:e}},"unary!":function(i,r){return function(e,t,n,a){return e=!i(e,t,n,a),r?{value:e}:e}},"binary+":function(r,s,o){return function(e,t,n,a){var i=Ct(i=r(e,t,n,a),e=s(e,t,n,a));return o?{value:i}:i}},"binary-":function(r,s,o){return function(e,t,n,a){var i=r(e,t,n,a);return e=s(e,t,n,a),i=(O(i)?i:0)-(O(e)?e:0),o?{value:i}:i}},"binary*":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)*r(e,t,n,a),s?{value:e}:e}},"binary/":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)/r(e,t,n,a),s?{value:e}:e}},"binary%":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)%r(e,t,n,a),s?{value:e}:e}},"binary===":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)===r(e,t,n,a),s?{value:e}:e}},"binary!==":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)!==r(e,t,n,a),s?{value:e}:e}},"binary==":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)==r(e,t,n,a),s?{value:e}:e}},"binary!=":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)!=r(e,t,n,a),s?{value:e}:e}},"binary<":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)<r(e,t,n,a),s?{value:e}:e}},"binary>":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)>r(e,t,n,a),s?{value:e}:e}},"binary<=":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)<=r(e,t,n,a),s?{value:e}:e}},"binary>=":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)>=r(e,t,n,a),s?{value:e}:e}},"binary&&":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)&&r(e,t,n,a),s?{value:e}:e}},"binary||":function(i,r,s){return function(e,t,n,a){return e=i(e,t,n,a)||r(e,t,n,a),s?{value:e}:e}},"ternary?:":function(i,r,s,o){return function(e,t,n,a){return e=(i(e,t,n,a)?r:s)(e,t,n,a),o?{value:e}:e}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(i,r,s){return function(e,t,n,a){return e=t&&i in t?t:e,s&&1!==s&&e&&null==e[i]&&(e[i]={}),t=e?e[i]:void 0,r?{context:e,name:i,value:t}:t}},computedMember:function(o,l,c,u){return function(e,t,n,a){var i,r,s=o(e,t,n,a);return null!=s&&(i=l(e,t,n,a),i+="",u&&1!==u&&s&&!s[i]&&(s[i]={}),r=s[i]),c?{context:s,name:i,value:r}:r}},nonComputedMember:function(i,r,s,o){return function(e,t,n,a){return e=i(e,t,n,a),o&&1!==o&&e&&null==e[r]&&(e[r]={}),t=null!=e?e[r]:void 0,s?{context:e,name:r,value:t}:t}},inputs:function(i,r){return function(e,t,n,a){return a?a[r]:i(e,t,n)}}},$t.prototype={constructor:$t,parse:function(e){e=this.ast.ast(e);var t=this.astCompiler.compile(e);return t.literal=0===e.body.length||1===e.body.length&&(e.body[0].expression.type===Ti.Literal||e.body[0].expression.type===Ti.ArrayExpression||e.body[0].expression.type===Ti.ObjectExpression),t.constant=e.constant,t}};var wi=E("$sce"),Pi={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},xi=/_([a-z])/g,Ci=E("$compile"),Di=$.document.createElement("a"),Ei=Kt($.location.href);Jt.$inject=["$document"],en.$inject=["$provide"];var Ai=22,ki=".",Ii="0";rn.$inject=["$locale"];var Mi={yyyy:cn("FullYear",4,0,!(sn.$inject=["$locale"]),!0),yy:cn("FullYear",2,0,!0,!0),y:cn("FullYear",1,0,!1,!0),MMMM:un("Month"),MMM:un("Month",!0),MM:cn("Month",2,1),M:cn("Month",1,1),LLLL:un("Month",!1,!0),dd:cn("Date",2),d:cn("Date",1),HH:cn("Hours",2),H:cn("Hours",1),hh:cn("Hours",2,-12),h:cn("Hours",1,-12),mm:cn("Minutes",2),m:cn("Minutes",1),ss:cn("Seconds",2),s:cn("Seconds",1),sss:cn("Milliseconds",3),EEEE:un("Day"),EEE:un("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,n){return(0<=(e=-1*n)?"+":"")+(ln(Math[0<e?"floor":"ceil"](e/60),2)+ln(Math.abs(e%60),2))},ww:dn(2),w:dn(1),G:fn,GG:fn,GGG:fn,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},$i=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Li=/^-?\d+$/;pn.$inject=["$locale"];var Oi=w(Yn),Ri=w(qn);yn.$inject=["$parse"];var Ni=w({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){var n;"a"===t[0].nodeName.toLowerCase()&&(n="[object SVGAnimatedString]"===Xn.call(t.prop("href"))?"xlink:href":"href",t.on("click",function(e){t.attr(n)||e.preventDefault()}))}}}),Fi={};ce(Ia,function(e,a){function i(e,t,n){e.$watch(n[r],function(e){n.$set(a,!!e)})}var r,t;"multiple"!==e&&(r=Ye("ng-"+a),t="checked"===e?function(e,t,n){n.ngModel!==n[r]&&i(e,0,n)}:i,Fi[r]=function(){return{restrict:"A",priority:100,link:t}})}),ce($a,function(e,a){Fi[a]=function(){return{priority:100,link:function(e,t,n){"ngPattern"===a&&"/"===n.ngPattern.charAt(0)&&(t=n.ngPattern.match(Un))?n.$set("ngPattern",new RegExp(t[1],t[2])):e.$watch(n[a],function(e){n.$set(a,e)})}}}}),ce(["src","srcset","href"],function(r){var s=Ye("ng-"+r);Fi[s]=function(){return{priority:99,link:function(e,t,n){var a=r,i=r;"href"===r&&"[object SVGAnimatedString]"===Xn.call(t.prop("href"))&&(i="xlinkHref",n.$attr[i]="xlink:href",a=null),n.$observe(s,function(e){e?(n.$set(i,e),ta&&a&&t.prop(a,n[i])):"href"===r&&n.$set(i,null)})}}}});var Bi={$addControl:L,$$renameControl:function(e,t){e.$name=t},$removeControl:L,$setValidity:L,$setDirty:L,$setPristine:L,$setSubmitted:L};bn.$inject=["$element","$attrs","$scope","$animate","$interpolate"],bn.prototype={$rollbackViewValue:function(){ce(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){ce(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){j(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],(this[t]=e).$name=t},$removeControl:function(n){n.$name&&this[n.$name]===n&&delete this[n.$name],ce(this.$pending,function(e,t){this.$setValidity(t,null,n)},this),ce(this.$error,function(e,t){this.$setValidity(t,null,n)},this),ce(this.$$success,function(e,t){this.$setValidity(t,null,n)},this),F(this.$$controls,n),n.$$parentForm=Bi},$setDirty:function(){this.$$animate.removeClass(this.$$element,Sr),this.$$animate.addClass(this.$$element,Tr),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Sr,Tr+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,ce(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){ce(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},Tn({clazz:bn,set:function(e,t,n){var a=e[t];a?-1===a.indexOf(n)&&a.push(n):e[t]=[n]},unset:function(e,t,n){var a=e[t];a&&(F(a,n),0===a.length&&delete e[t])}});function Vi(n){return["$timeout","$parse",function(l,t){function c(e){return""===e?t('this[""]').assign:t(e).assign||L}return{name:"form",restrict:n?"EAC":"E",require:["form","^^?form"],controller:bn,compile:function(e,t){e.addClass(Sr).addClass(_r);var o=t.name?"name":!(!n||!t.ngForm)&&"ngForm";return{pre:function(t,e,n,a){var i,r=a[0];"action"in n||(i=function(e){t.$apply(function(){r.$commitViewValue(),r.$setSubmitted()}),e.preventDefault()},e[0].addEventListener("submit",i),e.on("$destroy",function(){l(function(){e[0].removeEventListener("submit",i)},0,!1)})),(a[1]||r.$$parentForm).$addControl(r);var s=o?c(r.$name):L;o&&(s(t,r),n.$observe(o,function(e){r.$name!==e&&(s(t,void 0),r.$$parentForm.$$renameControl(r,e),(s=c(r.$name))(t,r))})),e.on("$destroy",function(){r.$$parentForm.$removeControl(r),s(t,void 0),ue(r,Bi)})}}}}}]}var ji=Vi(),Ui=Vi(!0),Hi=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Gi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Yi=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,qi=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,zi=/^(\d{4,})-(\d{2})-(\d{2})$/,Wi=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ki=/^(\d{4,})-W(\d\d)$/,Xi=/^(\d{4,})-(\d\d)$/,Qi=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ji=we();ce(["date","datetime-local","month","time","week"],function(e){Ji[e]=!0});function Zi(){function a(e,t,n){var a=O(n)?n:9===ta?"":null;e.prop("value",a),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,t){return nr.test(t.ngValue)?function(e,t,n){a(t,n,e=e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){a(t,n,e)})}}}}var er={text:function(e,t,n,a,i,r){xn(0,t,n,a,i,r),Pn(a)},date:Dn("date",zi,Cn(zi,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Dn("datetimelocal",Wi,Cn(Wi,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:Dn("time",Qi,Cn(Qi,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Dn("week",Ki,function(e,t){if(S(e))return e;if(R(e)){Ki.lastIndex=0;var n=Ki.exec(e);if(n){var a=+n[1],i=+n[2],r=n=0,s=0,o=0,l=hn(a),i=7*(i-1);return t&&(n=t.getHours(),r=t.getMinutes(),s=t.getSeconds(),o=t.getMilliseconds()),new Date(a,0,l.getDate()+i,n,r,s,o)}}return NaN},"yyyy-Www"),month:Dn("month",Xi,Cn(Xi,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,a,i,r){var s,o,l;En(0,t,0,a),An(a),xn(0,t,n,a,i,r),(O(n.min)||n.ngMin)&&(a.$validators.min=function(e){return a.$isEmpty(e)||de(s)||s<=e},n.$observe("min",function(e){s=kn(e),a.$validate()})),(O(n.max)||n.ngMax)&&(a.$validators.max=function(e){return a.$isEmpty(e)||de(o)||e<=o},n.$observe("max",function(e){o=kn(e),a.$validate()})),(O(n.step)||n.ngStep)&&(a.$validators.step=function(e,t){return a.$isEmpty(t)||de(l)||Mn(t,s||0,l)},n.$observe("step",function(e){l=kn(e),a.$validate()}))},url:function(e,t,n,a,i,r){xn(0,t,n,a,i,r),Pn(a),a.$$parserName="url",a.$validators.url=function(e,t){var n=e||t;return a.$isEmpty(n)||Gi.test(n)}},email:function(e,t,n,a,i,r){xn(0,t,n,a,i,r),Pn(a),a.$$parserName="email",a.$validators.email=function(e,t){var n=e||t;return a.$isEmpty(n)||Yi.test(n)}},radio:function(e,n,a,i){var r=!a.ngTrim||"false"!==oa(a.ngTrim);de(a.name)&&n.attr("name",++ea),n.on("click",function(e){var t;n[0].checked&&(t=a.value,r&&(t=oa(t)),i.$setViewValue(t,e&&e.type))}),i.$render=function(){var e=a.value;r&&(e=oa(e)),n[0].checked=e===i.$viewValue},a.$observe("value",i.$render)},range:function(e,n,a,i,t,r){function s(e,t){n.attr(e,a[e]),a.$observe(e,t)}En(0,n,0,i),An(i),xn(0,n,a,i,t,r);var o=i.$$hasNativeValidators&&"range"===n[0].type,l=o?0:void 0,c=o?100:void 0,u=o?1:void 0,h=n[0].validity;e=O(a.min),t=O(a.max),r=O(a.step);var d=i.$render;i.$render=o&&O(h.rangeUnderflow)&&O(h.rangeOverflow)?function(){d(),i.$setViewValue(n.val())}:d,e&&(i.$validators.min=o?function(){return!0}:function(e,t){return i.$isEmpty(t)||de(l)||l<=t},s("min",function(e){l=kn(e),na(i.$modelValue)||(o?((e=n.val())<l&&(e=l,n.val(e)),i.$setViewValue(e)):i.$validate())})),t&&(i.$validators.max=o?function(){return!0}:function(e,t){return i.$isEmpty(t)||de(c)||t<=c},s("max",function(e){c=kn(e),na(i.$modelValue)||(o?(e=n.val(),c<e&&(n.val(c),e=c<l?l:c),i.$setViewValue(e)):i.$validate())})),r&&(i.$validators.step=o?function(){return!h.stepMismatch}:function(e,t){return i.$isEmpty(t)||de(u)||Mn(t,l||0,u)},s("step",function(e){u=kn(e),na(i.$modelValue)||(o&&i.$viewValue!==n.val()?i.$setViewValue(n.val()):i.$validate())}))},checkbox:function(e,t,n,a,i,r,s,o){var l=$n(o,e,"ngTrueValue",n.ngTrueValue,!0),c=$n(o,e,"ngFalseValue",n.ngFalseValue,!1);t.on("click",function(e){a.$setViewValue(t[0].checked,e&&e.type)}),a.$render=function(){t[0].checked=a.$viewValue},a.$isEmpty=function(e){return!1===e},a.$formatters.push(function(e){return ye(e,l)}),a.$parsers.push(function(e){return e?l:c})},hidden:L,button:L,submit:L,reset:L,file:L},tr=["$browser","$sniffer","$filter","$parse",function(i,r,s,o){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,t,n,a){a[0]&&(er[Yn(n.type)]||er.text)(e,t,n,a[0],r,i,s,o)}}}}],nr=/^(true|false|\d+)$/,ar=["$compile",function(a){return{restrict:"AC",compile:function(e){return a.$$addBindingClass(e),function(e,t,n){a.$$addBindingInfo(t,n.ngBind),t=t[0],e.$watch(n.ngBind,function(e){t.textContent=G(e)})}}}}],ir=["$interpolate","$compile",function(a,i){return{compile:function(e){return i.$$addBindingClass(e),function(e,t,n){e=a(t.attr(n.$attr.ngBindTemplate)),i.$$addBindingInfo(t,e.expressions),t=t[0],n.$observe("ngBindTemplate",function(e){t.textContent=de(e)?"":e})}}}}],rr=["$sce","$parse","$compile",function(r,n,s){return{restrict:"A",compile:function(e,t){var a=n(t.ngBindHtml),i=n(t.ngBindHtml,function(e){return r.valueOf(e)});return s.$$addBindingClass(e),function(t,n,e){s.$$addBindingInfo(n,e.ngBindHtml),t.$watch(i,function(){var e=a(t);n.html(r.getTrustedHtml(e)||"")})}}}}],sr=w({restrict:"A",require:"ngModel",link:function(e,t,n,a){a.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),or=Ln("",!0),lr=Ln("Odd",0),cr=Ln("Even",1),ur=_n({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),hr=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],dr={},fr={blur:!0,focus:!0};ce("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(r){var s=Ye("ng-"+r);dr[s]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(e,t){var a=n(t[s]);return function(n,e){e.on(r,function(e){function t(){a(n,{$event:e})}fr[r]&&i.$$phase?n.$evalAsync(t):n.$apply(t)})}}}}]});function pr(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,a){var i=n.ngList||", ",r="false"!==n.ngTrim,s=r?oa(i):i;a.$parsers.push(function(e){if(!de(e)){var t=[];return e&&ce(e.split(s),function(e){e&&t.push(r?oa(e):e)}),t}}),a.$formatters.push(function(e){if(ra(e))return e.join(i)}),a.$isEmpty=function(e){return!e||!e.length}}}}var mr=["$animate","$compile",function(l,c){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(e,n,a,t,i){var r,s,o;e.$watch(a.ngIf,function(e){e?s||i(function(e,t){s=t,e[e.length++]=c.$$createComment("end ngIf",a.ngIf),r={clone:e},l.enter(e,n.parent(),n)}):(o&&(o.remove(),o=null),s&&(s.$destroy(),s=null),r&&(o=H(r.clone),l.leave(o).done(function(e){!1!==e&&(o=null)}),r=null))})}}}],gr=["$templateRequest","$anchorScroll","$animate",function(m,g,v){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Zn.noop,compile:function(e,t){var n=t.ngInclude||t.src,f=t.onload||"",p=t.autoscroll;return function(r,s,e,o,l){function c(){t&&(t.remove(),t=null),u&&(u.$destroy(),u=null),h&&(v.leave(h).done(function(e){!1!==e&&(t=null)}),t=h,h=null)}var u,t,h,d=0;r.$watch(n,function(n){function a(e){!1===e||!O(p)||p&&!r.$eval(p)||g()}var i=++d;n?(m(n,!0).then(function(e){var t;r.$$destroyed||i!==d||(t=r.$new(),o.template=e,e=l(t,function(e){c(),v.enter(e,null,s).done(a)}),h=e,(u=t).$emit("$includeContentLoaded",n),r.$eval(f))},function(){r.$$destroyed||i!==d||(c(),r.$emit("$includeContentError",n))}),r.$emit("$includeContentRequested",n)):(c(),o.template=null)})}}}}],vr=["$compile",function(i){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(e,t,n,a){Xn.call(t[0]).match(/SVG/)?(t.empty(),i(K(a.template,$.document).childNodes)(e,function(e){t.append(e)},{futureParentElement:t})):(t.html(a.template),i(t.contents())(e))}}}],yr=_n({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),_r="ng-valid",br="ng-invalid",Sr="ng-pristine",Tr="ng-dirty",wr=E("ngModel");On.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" "),On.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var n=this.$$parse(this.$$attr.ngModel+"()"),a=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var t=this.$$parsedNgModel(e);return pe(t)&&(t=n(e)),t},this.$$ngModelSet=function(e,t){pe(this.$$parsedNgModel(e))?a(e,{$$$p:t}):this.$$parsedNgModelAssign(e,t)}}else if(!this.$$parsedNgModel.assign)throw wr("nonassign",this.$$attr.ngModel,be(this.$$element))},$render:L,$isEmpty:function(e){return de(e)||""===e||null===e||e!=e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Tr),this.$$animate.addClass(this.$$element,Sr)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Sr),this.$$animate.addClass(this.$$element,Tr),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){var e,t,n,a,i,r;na(this.$modelValue)||(e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,a=this.$modelValue,i=this.$options.getOption("allowInvalid"),(r=this).$$runValidators(t,e,function(e){i||n===e||(r.$modelValue=e?t:void 0,r.$modelValue!==a&&r.$$writeModelToScope())}))},$$runValidators:function(a,i,t){function r(e,t){c===u.$$currentValidationRunId&&u.$setValidity(e,t)}function e(e){c===u.$$currentValidationRunId&&t(e)}this.$$currentValidationRunId++;var s,o,l,n,c=this.$$currentValidationRunId,u=this;n=u.$$parserName||"parse",(de(u.$$parserValid)?(r(n,null),1):(u.$$parserValid||(ce(u.$validators,function(e,t){r(t,null)}),ce(u.$asyncValidators,function(e,t){r(t,null)})),r(n,u.$$parserValid),u.$$parserValid))?(l=!0,ce(u.$validators,function(e,t){var n=Boolean(e(a,i));l=l&&n,r(t,n)}),l||(ce(u.$asyncValidators,function(e,t){r(t,null)}),0)?(s=[],o=!0,ce(u.$asyncValidators,function(e,t){var n=e(a,i);if(!n||!pe(n.then))throw wr("nopromise",n);r(t,void 0),s.push(n.then(function(){r(t,!0)},function(){r(t,o=!1)}))}),s.length?u.$$q.all(s).then(function(){e(o)},L):e(!0)):e(!1)):e(!1)},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,n=this;if(this.$$parserValid=!de(t)||void 0)for(var e=0;e<this.$parsers.length;e++)if(de(t=this.$parsers[e](t))){this.$$parserValid=!1;break}na(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var a=this.$modelValue,i=this.$options.getOption("allowInvalid");this.$$rawModelValue=t,i&&(this.$modelValue=t,n.$modelValue!==a&&n.$$writeModelToScope()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(e){i||(n.$modelValue=e?t:void 0,n.$modelValue!==a&&n.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),ce(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");_(t[e])?t=t[e]:_(t.default)&&(t=t.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;0<t?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e)}},Tn({clazz:On,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Pr,xr=["$rootScope",function(s){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:On,priority:1,compile:function(e){return e.addClass(Sr).addClass("ng-untouched").addClass(_r),{pre:function(e,t,n,a){var i=a[0];t=a[1]||i.$$parentForm,(a=a[2])&&(i.$options=a.$options),i.$$initGetterSetters(),t.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,t,n,a){function i(){r.$setTouched()}var r=a[0];r.$options.getOption("updateOn")&&t.on(r.$options.getOption("updateOn"),function(e){r.$$debounceViewValueCommit(e&&e.type)}),t.on("blur",function(){r.$touched||(s.$$phase?e.$evalAsync(i):e.$apply(i))})}}}}}],Cr=/(\s+|^)default(\s+|$)/;Rn.prototype={getOption:function(e){return this.$$options[e]},createChild:function(n){var a=!1;return ce(n=ue({},n),function(e,t){"$inherit"===e?"*"===t?a=!0:(n[t]=this.$$options[t],"updateOn"===t&&(n.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===t&&(n.updateOnDefault=!1,n[t]=oa(e.replace(Cr,function(){return n.updateOnDefault=!0," "})))},this),a&&(delete n["*"],Nn(n,this.$$options)),Nn(n,Pr.$$options),new Rn(n)}},Pr=new Rn({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});function Dr(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Pr,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}}function Er(){return{restrict:"E",require:["select","?ngModel"],controller:es,priority:1,link:{pre:function(e,a,t,n){var i,r,s=n[0],o=n[1];o?(s.ngModelCtrl=o,a.on("change",function(){s.removeUnknownOption(),e.$apply(function(){o.$setViewValue(s.readValue())})}),t.multiple&&(s.multiple=!0,s.readValue=function(){var t=[];return ce(a.find("option"),function(e){e.selected&&!e.disabled&&(e=e.value,t.push(e in s.selectValueMap?s.selectValueMap[e]:e))}),t},s.writeValue=function(n){ce(a.find("option"),function(e){var t=!!n&&(-1!==Array.prototype.indexOf.call(n,e.value)||-1!==Array.prototype.indexOf.call(n,s.selectValueMap[e.value]));t!==e.selected&&Fn(Bn(e),t)})},r=NaN,e.$watch(function(){r!==o.$viewValue||ye(i,o.$viewValue)||(i=Y(o.$viewValue),o.$render()),r=o.$viewValue}),o.$isEmpty=function(e){return!e||0===e.length})):s.registerOption=L},post:function(e,t,n,a){var i,r=a[1];r&&(i=a[0],r.$render=function(){i.writeValue(r.$viewValue)})}}}}function Ar(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,a){a&&(n.required=!0,a.$validators.required=function(e,t){return!n.required||!a.$isEmpty(t)},n.$observe("required",function(){a.$validate()}))}}}function kr(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,a){var i,r;a&&(r=n.ngPattern||n.pattern,n.$observe("pattern",function(e){if(R(e)&&0<e.length&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw E("ngPattern")("noregexp",r,e,be(t));i=e||void 0,a.$validate()}),a.$validators.pattern=function(e,t){return a.$isEmpty(t)||de(i)||i.test(t)})}}}function Ir(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,a){var i;a&&(i=-1,n.$observe("maxlength",function(e){e=v(e),i=na(e)?-1:e,a.$validate()}),a.$validators.maxlength=function(e,t){return i<0||a.$isEmpty(t)||t.length<=i})}}}function Mr(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,a){var i;a&&(i=0,n.$observe("minlength",function(e){i=v(e)||0,a.$validate()}),a.$validators.minlength=function(e,t){return a.$isEmpty(t)||t.length>=i})}}}var $r,Lr,Or,Rr,Nr,Fr=_n({terminal:!0,priority:1e3}),Br=E("ngOptions"),Vr=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,jr=["$compile","$document","$parse",function(m,g,s){function v(e,t,c){function u(e,t,n,a,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=a,this.disabled=i}function h(e){var t;if(!a&&A(e))t=e;else for(var n in t=[],e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n);return t}var o=e.match(Vr);if(!o)throw Br("iexp",e,be(t));var n=o[5]||o[7],a=o[6];e=/ as /.test(o[0])&&o[1];var d=o[9];t=s(o[2]?o[1]:n);function f(e,t){return m(e,b(e,t))}var p=e&&s(e)||t,i=d&&s(d),m=d?function(e,t){return i(c,t)}:function(e){return Me(e)},g=s(o[2]||o[1]),v=s(o[3]||""),y=s(o[4]||""),_=s(o[8]),r={},b=a?function(e,t){return r[a]=t,r[n]=e,r}:function(e){return r[n]=e,r};return{trackBy:d,getTrackByValue:f,getWatchables:s(_,function(e){for(var t=[],n=h(e=e||[]),a=n.length,i=0;i<a;i++){var r=e[s=e===n?i:n[i]],s=b(r,s),r=m(r,s);t.push(r),(o[2]||o[1])&&(r=g(c,s),t.push(r)),o[4]&&(s=y(c,s),t.push(s))}return t}),getOptions:function(){for(var e=[],t={},n=_(c)||[],a=h(n),i=a.length,r=0;r<i;r++){var s=n===a?r:a[r],o=b(n[s],s),l=p(c,o),l=new u(s=m(l,o),l,g(c,o),v(c,o),o=y(c,o));e.push(l),t[s]=l}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[f(e)]},getViewValueFromOption:function(e){return d?P(e.viewValue):e.viewValue}}}}}var y=$.document.createElement("option"),_=$.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,a){a[0].registerOption=L},post:function(e,a,t,n){function i(e){var t=(e=d.getOptionFromViewValue(e))&&e.element;return t&&!t.selected&&(t.selected=!0),e}function r(){var e=d&&s.readValue();if(d)for(var t=d.items.length-1;0<=t;t--){var n=d.items[t];O(n.group)?xe(n.element.parentNode):xe(n.element)}d=f.getOptions();var r={};h&&a.prepend(s.emptyOption),d.items.forEach(function(e){var t,n,a,i=(O(e.group)?(t=r[e.group])||(t=_.cloneNode(!1),p.appendChild(t),t.label=null===e.group?"null":e.group,r[e.group]=t):t=p,y.cloneNode(!1));t.appendChild(i),a=i,((n=e).element=a).disabled=n.disabled,n.label!==a.label&&(a.label=n.label,a.textContent=n.label),a.value=n.selectValue}),a[0].appendChild(p),o.$render(),o.$isEmpty(e)||(t=s.readValue(),(f.trackBy||l?ye(e,t):e===t)||(o.$setViewValue(t),o.$render()))}var s=n[0],o=n[1],l=t.multiple;n=0;for(var c=a.children(),u=c.length;n<u;n++)if(""===c[n].value){s.hasEmptyOption=!0,s.emptyOption=c.eq(n);break}var h=!!s.emptyOption;Bn(y.cloneNode(!1)).val("?");var d,f=v(t.ngOptions,a,e),p=g[0].createDocumentFragment();s.generateUnknownOptionValue=function(e){return"?"},l?(s.writeValue=function(e){var t=e&&e.map(i)||[];d.items.forEach(function(e){e.element.selected&&-1===Array.prototype.indexOf.call(t,e)&&(e.element.selected=!1)})},s.readValue=function(){var e=a.val()||[],t=[];return ce(e,function(e){(e=d.selectValueMap[e])&&!e.disabled&&t.push(d.getViewValueFromOption(e))}),t},f.trackBy&&e.$watchCollection(function(){if(ra(o.$viewValue))return o.$viewValue.map(function(e){return f.getTrackByValue(e)})},function(){o.$render()})):(s.writeValue=function(e){var t=d.selectValueMap[a.val()],n=d.getOptionFromViewValue(e);t&&t.element.removeAttribute("selected"),n?(a[0].value!==n.selectValue&&(s.removeUnknownOption(),s.unselectEmptyOption(),a[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):h?s.selectEmptyOption():s.unknownOption.parent().length?s.updateUnknownOption(e):s.renderUnknownOption(e)},s.readValue=function(){var e=d.selectValueMap[a.val()];return e&&!e.disabled?(s.unselectEmptyOption(),s.removeUnknownOption(),d.getViewValueFromOption(e)):null},f.trackBy&&e.$watch(function(){return f.getTrackByValue(o.$viewValue)},function(){o.$render()})),h&&(s.emptyOption.remove(),m(s.emptyOption)(e),8===s.emptyOption[0].nodeType?(s.hasEmptyOption=!1,s.registerOption=function(e,t){""===t.val()&&(s.hasEmptyOption=!0,s.emptyOption=t,s.emptyOption.removeClass("ng-scope"),o.$render(),t.on("$destroy",function(){s.hasEmptyOption=!1,s.emptyOption=void 0}))}):s.emptyOption.removeClass("ng-scope")),a.empty(),r(),e.$watchCollection(f.getWatchables,r)}}}}],Ur=["$locale","$interpolate","$log",function(p,m,g){var v=/{}/g,y=/^when(Minus)?(.+)$/;return{link:function(a,i,r){function s(e){i.text(e||"")}var o,e=r.count,l=r.$attr.when&&i.attr(r.$attr.when),c=r.offset||0,u=a.$eval(l)||{},h={},t=m.startSymbol(),n=m.endSymbol(),d=t+e+"-"+c+n,f=Zn.noop;ce(r,function(e,t){var n=y.exec(t);n&&(n=(n[1]?"-":"")+Yn(n[2]),u[n]=i.attr(r.$attr[t]))}),ce(u,function(e,t){h[t]=m(e.replace(v,d))}),a.$watch(e,function(e){var t=parseFloat(e),n=na(t);n||t in u||(t=p.pluralCat(t-c)),t===o||n&&na(o)||(f(),de(n=h[t])?(null!=e&&g.debug("ngPluralize: no rule defined for '"+t+"' in "+l),f=L,s()):f=a.$watch(n,s),o=t)})}}}],Hr=["$parse","$animate","$compile",function(l,x,c){function C(e,t,n,a,i,r,s){e[n]=a,i&&(e[i]=r),e.$index=t,e.$first=0===t,e.$last=t===s-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))}var D=E("ngRepeat");return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,t){var v=t.ngRepeat,y=c.$$createComment("end ngRepeat",v),n=v.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!n)throw D("iexp",v);var a=n[1],i=n[2],_=n[3],r=n[4];if(!(n=a.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw D("iidexp",a);var b=n[3]||n[1],S=n[2];if(_&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(_)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(_)))throw D("badident",_);var s,T,w,P,o={$id:Me};return r?s=l(r):(w=function(e,t){return Me(t)},P=function(e){return e}),function(f,p,e,t,m){s&&(T=function(e,t,n){return S&&(o[S]=e),o[b]=t,o.$index=n,s(f,o)});var g=we();f.$watchCollection(i,function(e){var a,t,n,i,r,s,o,l,c,u,h=p[0],d=we();if(_&&(f[_]=e),A(e))l=e,t=T||w;else for(u in t=T||P,l=[],e)Hn.call(e,u)&&"$"!==u.charAt(0)&&l.push(u);for(i=l.length,u=Array(i),a=0;a<i;a++)if(r=e===l?a:l[a],s=e[r],o=t(r,s,a),g[o])c=g[o],delete g[o],d[o]=c,u[a]=c;else{if(d[o])throw ce(u,function(e){e&&e.scope&&(g[e.id]=e)}),D("dupes",v,o,s);u[a]={id:o,scope:void 0,clone:void 0},d[o]=!0}for(n in g){if(o=H((c=g[n]).clone),x.leave(o),o[0].parentNode)for(a=0,t=o.length;a<t;a++)o[a].$$NG_REMOVED=!0;c.scope.$destroy()}for(a=0;a<i;a++)if(r=e===l?a:l[a],s=e[r],(c=u[a]).scope){for(n=h;(n=n.nextSibling)&&n.$$NG_REMOVED;);c.clone[0]!==n&&x.move(H(c.clone),null,h),h=c.clone[c.clone.length-1],C(c.scope,a,b,s,S,r,i)}else m(function(e,t){c.scope=t;var n=y.cloneNode(!1);e[e.length++]=n,x.enter(e,null,h),h=n,c.clone=e,d[c.id]=c,C(c.scope,a,b,s,S,r,i)});g=d})}}}}],Gr=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngShow,function(e){a[e?"removeClass":"addClass"](t,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Yr=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngHide,function(e){a[e?"addClass":"removeClass"](t,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],qr=_n(function(e,n,t){e.$watch(t.ngStyle,function(e,t){t&&e!==t&&ce(t,function(e,t){n.css(t,"")}),e&&n.css(e)},!0)}),zr=["$animate","$compile",function(c,u){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(e,t,n,i){var r,s=[],o=[],l=[];e.$watch(n.ngSwitch||n.on,function(e){for(var t,n;o.length;)c.cancel(o.pop());for(t=0,n=l.length;t<n;++t){var a=H(s[t].clone);l[t].$destroy(),(o[t]=c.leave(a)).done(function(t,n){return function(e){!1!==e&&t.splice(n,1)}}(o,t))}s.length=0,l.length=0,(r=i.cases["!"+e]||i.cases["?"])&&ce(r,function(a){a.transclude(function(e,t){l.push(t);var n=a.element;e[e.length++]=u.$$createComment("end ngSwitchWhen"),s.push({clone:e}),c.enter(e,n.parent(),n)})})})}}}],Wr=_n({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,a,i){ce(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e}),function(e){a.cases["!"+e]=a.cases["!"+e]||[],a.cases["!"+e].push({transclude:i,element:t})})}}),Kr=_n({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,a,i){a.cases["?"]=a.cases["?"]||[],a.cases["?"].push({transclude:i,element:t})}}),Xr=E("ngTransclude"),Qr=["$compile",function(t){return{restrict:"EAC",terminal:!0,compile:function(e){var i=t(e.contents());return e.empty(),function(e,r,t,n,a){function s(){i(e,function(e){r.append(e)})}if(!a)throw Xr("orphan",be(r));t.ngTransclude===t.$attr.ngTransclude&&(t.ngTransclude=""),a(function(e,t){var n;if(n=e.length)e:{n=0;for(var a=e.length;n<a;n++){var i=e[n];if(i.nodeType!==ga||i.nodeValue.trim()){n=!0;break e}}n=void 0}n?r.append(e):(s(),t.$destroy())},null,t=t.ngTransclude||t.ngTranscludeSlot),t&&!a.isSlotFilled(t)&&s()}}}}],Jr=["$templateCache",function(n){return{restrict:"E",terminal:!0,compile:function(e,t){"text/ng-template"===t.type&&n.put(t.id,e[0].text)}}}],Zr={$setViewValue:L,$render:L},es=["$element","$scope",function(n,t){function o(){e||(e=!0,t.$$postDigest(function(){e=!1,c.ngModelCtrl.$render()}))}function l(e){i||(i=!0,t.$$postDigest(function(){t.$$destroyed||(i=!1,c.ngModelCtrl.$setViewValue(c.readValue()),e&&c.ngModelCtrl.$render())}))}var c=this,a=new Ra;c.selectValueMap={},c.ngModelCtrl=Zr,c.multiple=!1,c.unknownOption=Bn($.document.createElement("option")),c.hasEmptyOption=!1,c.emptyOption=void 0,c.renderUnknownOption=function(e){e=c.generateUnknownOptionValue(e),c.unknownOption.val(e),n.prepend(c.unknownOption),Fn(c.unknownOption,!0),n.val(e)},c.updateUnknownOption=function(e){e=c.generateUnknownOptionValue(e),c.unknownOption.val(e),Fn(c.unknownOption,!0),n.val(e)},c.generateUnknownOptionValue=function(e){return"? "+Me(e)+" ?"},c.removeUnknownOption=function(){c.unknownOption.parent()&&c.unknownOption.remove()},c.selectEmptyOption=function(){c.emptyOption&&(n.val(""),Fn(c.emptyOption,!0))},c.unselectEmptyOption=function(){c.hasEmptyOption&&c.emptyOption.removeAttr("selected")},t.$on("$destroy",function(){c.renderUnknownOption=L}),c.readValue=function(){var e=(e=n.val())in c.selectValueMap?c.selectValueMap[e]:e;return c.hasOption(e)?e:null},c.writeValue=function(e){var t=n[0].options[n[0].selectedIndex];t&&Fn(Bn(t),!1),c.hasOption(e)?(c.removeUnknownOption(),t=Me(e),n.val(t in c.selectValueMap?t:e),Fn(Bn(n[0].options[n[0].selectedIndex]),!0)):null==e&&c.emptyOption?(c.removeUnknownOption(),c.selectEmptyOption()):c.unknownOption.parent().length?c.updateUnknownOption(e):c.renderUnknownOption(e)},c.addOption=function(e,t){var n;8!==t[0].nodeType&&(j(e,'"option value"'),""===e&&(c.hasEmptyOption=!0,c.emptyOption=t),n=a.get(e)||0,a.set(e,n+1),o())},c.removeOption=function(e){var t=a.get(e);t&&(1===t?(a.delete(e),""===e&&(c.hasEmptyOption=!1,c.emptyOption=void 0)):a.set(e,t-1))};var e=!(c.hasOption=function(e){return!!a.get(e)}),i=!1;c.registerOption=function(e,a,i,t,n){var r,s;i.$attr.ngValue?(s=NaN,i.$observe("value",function(e){var t,n=a.prop("selected");O(s)&&(c.removeOption(r),delete c.selectValueMap[s],t=!0),s=Me(e),r=e,c.selectValueMap[s]=e,c.addOption(e,a),a.attr("value",s),t&&n&&l()})):t?i.$observe("value",function(e){c.readValue();var t,n=a.prop("selected");O(r)&&(c.removeOption(r),t=!0),r=e,c.addOption(e,a),t&&n&&l()}):n?e.$watch(n,function(e,t){i.$set("value",e);var n=a.prop("selected");t!==e&&c.removeOption(t),c.addOption(e,a),t&&n&&l()}):c.addOption(i.value,a),i.$observe("disabled",function(e){("true"===e||e&&a.prop("selected"))&&(c.multiple?l(!0):(c.ngModelCtrl.$setViewValue(null),c.ngModelCtrl.$render()))}),a.on("$destroy",function(){var e=c.readValue(),t=i.value;c.removeOption(t),o(),(c.multiple&&e&&-1!==e.indexOf(t)||e===t)&&l(!0)})}}],ts=["$interpolate",function(n){return{restrict:"E",priority:100,compile:function(e,t){var i,r;return O(t.ngValue)||(O(t.value)?i=n(t.value,!0):(r=n(e.text(),!0))||t.$set("value",e.text())),function(e,t,n){var a=t.parent();(a=a.data("$selectController")||a.parent().data("$selectController"))&&a.registerOption(e,t,n,i,r)}}}}];function ns(e,t,n){return e[t]||(e[t]=n())}$.angular.bootstrap?$.console&&console.log("WARNING: Tried to load angular more than once."):(ma||(Nr=ua(),(Vn=de(Nr)?$.jQuery:Nr?$[Nr]:void 0)&&Vn.fn.on?(ue((Bn=Vn).fn,{scope:ka.scope,isolateScope:ka.isolateScope,controller:ka.controller,injector:ka.injector,inheritedData:ka.inheritedData}),Rr=Vn.cleanData,Vn.cleanData=function(e){for(var t,n,a=0;null!=(n=e[a]);a++)(t=Vn._data(n,"events"))&&t.$destroy&&Vn(n).triggerHandler("$destroy");Rr(e)}):Bn=X,Zn.element=Bn,ma=!0),ue(Zn,{errorHandlingConfig:e,bootstrap:I,copy:P,extend:ue,merge:t,equals:ye,element:Bn,forEach:ce,injector:Oe,noop:L,bind:_e,toJson:n,fromJson:i,identity:y,isUndefined:de,isDefined:O,isString:R,isFunction:pe,isObject:fe,isNumber:_,isElement:p,isArray:ra,version:va,isDate:S,lowercase:Yn,uppercase:qn,callbacks:{$$counter:0},getTestability:B,reloadWithDebugInfo:M,$$minErr:E,$$csp:ca,$$encodeUriSegment:h,$$encodeUriQuery:m,$$stringify:G}),$r=$,Lr=E("$injector"),Or=E("ng"),($r=ns($r,"angular",Object)).$$minErr=$r.$$minErr||E,(jn=ns($r,"module",function(){var e={};return function(o,l,c){var u={};if("hasOwnProperty"===o)throw Or("badname","module");return l&&e.hasOwnProperty(o)&&(e[o]=null),ns(e,o,function(){function e(e,t,n,a){return a=a||r,function(){return a[n||"push"]([e,t,arguments]),s}}function t(n,a,i){return i=i||r,function(e,t){return t&&pe(t)&&(t.$$moduleName=o),i.push([n,a,arguments]),s}}if(!l)throw Lr("nomod",o);var r=[],n=[],a=[],i=e("$injector","invoke","push",n),s={_invokeQueue:r,_configBlocks:n,_runBlocks:a,info:function(e){if(O(e)){if(!fe(e))throw Or("aobj","value");return u=e,this}return u},requires:l,name:o,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:t("$provide","decorator",n),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),component:t("$compileProvider","component"),config:i,run:function(e){return a.push(e),this}};return c&&i(c),s})}}))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:jt}),e.provider("$compile",He).directive({a:Ni,input:tr,textarea:tr,form:ji,script:Jr,select:Er,option:ts,ngBind:ar,ngBindHtml:rr,ngBindTemplate:ir,ngClass:or,ngClassEven:cr,ngClassOdd:lr,ngCloak:ur,ngController:hr,ngForm:Ui,ngHide:Yr,ngIf:mr,ngInclude:gr,ngInit:yr,ngNonBindable:Fr,ngPluralize:Ur,ngRepeat:Hr,ngShow:Gr,ngStyle:qr,ngSwitch:zr,ngSwitchWhen:Wr,ngSwitchDefault:Kr,ngOptions:jr,ngTransclude:Qr,ngModel:xr,ngList:pr,ngChange:sr,pattern:kr,ngPattern:kr,required:Ar,ngRequired:Ar,minlength:Mr,ngMinlength:Mr,maxlength:Ir,ngMaxlength:Ir,ngValue:Zi,ngModelOptions:Dr}).directive({ngInclude:vr}).directive(Fi).directive(dr),e.provider({$anchorScroll:Re,$animate:Xa,$animateCss:Wa,$$animateJs:Ga,$$animateQueue:Ya,$$AnimateRunner:za,$$animateAsyncRun:qa,$browser:Ve,$cacheFactory:je,$controller:We,$document:Ke,$$isDocumentHidden:Xe,$exceptionHandler:Qe,$filter:en,$$forceReflow:Za,$interpolate:lt,$interval:ct,$http:rt,$httpParamSerializer:Ze,$httpParamSerializerJQLike:et,$httpBackend:ot,$xhrFactory:st,$jsonpCallbacks:hi,$location:Tt,$log:wt,$parse:Ot,$rootScope:Vt,$q:Rt,$$q:Nt,$sce:Gt,$sceDelegate:Ht,$sniffer:Yt,$templateCache:Ue,$templateRequest:qt,$$testability:zt,$timeout:Wt,$window:Qt,$$rAF:Bt,$$jqLite:Ie,$$Map:Na,$$cookieReader:Zt})}]).info({angularVersion:"1.6.4"}),Zn.module("ngLocale",[],["$provide",function(e){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-Â¤",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var n,a,i=0|e,r=t;return void 0===r&&(r=Math.min((n=e,-1==(a=(n+="").indexOf("."))?0:n.length-a-1),3)),Math.pow(10,r),1==i&&0==r?"one":"other"}})}]),Bn(function(){k($.document,I)}))}(window),window.angular.$$csp().noInlineStyle||window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(t){"use strict";function c(e,t){return-1!==t.indexOf(e[0].nodeName)}var r="BUTTON A INPUT TEXTAREA SELECT DETAILS SUMMARY".split(" ");t.module("ngAria",["ng"]).info({angularVersion:"1.6.4"}).provider("$aria",function(){function e(i,r,s,o){return function(e,t,n){var a=n.$normalize(r);!l[a]||c(t,s)||n[a]||e.$watch(n[i],function(e){e=o?!e:!!e,t.attr(r,e)})}}var l={ariaHidden:!0,ariaChecked:!0,ariaReadonly:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaValue:!0,tabindex:!0,bindKeydown:!0,bindRoleForClick:!0};this.config=function(e){l=t.extend(l,e)},this.$get=function(){return{config:function(e){return l[e]},$$watchExpr:e}}}).directive("ngShow",["$aria",function(e){return e.$$watchExpr("ngShow","aria-hidden",[],!0)}]).directive("ngHide",["$aria",function(e){return e.$$watchExpr("ngHide","aria-hidden",[],!1)}]).directive("ngValue",["$aria",function(e){return e.$$watchExpr("ngValue","aria-checked",r,!1)}]).directive("ngChecked",["$aria",function(e){return e.$$watchExpr("ngChecked","aria-checked",r,!1)}]).directive("ngReadonly",["$aria",function(e){return e.$$watchExpr("ngReadonly","aria-readonly",r,!1)}]).directive("ngRequired",["$aria",function(e){return e.$$watchExpr("ngRequired","aria-required",r,!1)}]).directive("ngModel",["$aria",function(u){function h(e,t,n,a){return u.config(t)&&!n.attr(e)&&(a||!c(n,r))}function d(e,t){return!t.attr("role")&&t.attr("type")===e&&!c(t,r)}return{restrict:"A",require:"ngModel",priority:200,compile:function(e,t){var n,a,i,c=(a=(n=t).type,i=n.role,"checkbox"===(a||i)||"menuitemcheckbox"===i?"checkbox":"radio"===(a||i)||"menuitemradio"===i?"radio":"range"===a||"progressbar"===i||"slider"===i?"range":"");return{post:function(e,t,n,a){function i(){return a.$modelValue}var r,s,o,l=h("tabindex","tabindex",t,!1);switch(c){case"radio":case"checkbox":d(c,t)&&t.attr("role",c),h("aria-checked","ariaChecked",t,!1)&&e.$watch(i,"radio"==c?function(e){t.attr("aria-checked",n.value==a.$viewValue)}:function(){t.attr("aria-checked",!a.$isEmpty(a.$viewValue))}),l&&t.attr("tabindex",0);break;case"range":d(c,t)&&t.attr("role","slider"),u.config("ariaValue")&&(r=!t.attr("aria-valuemin")&&(n.hasOwnProperty("min")||n.hasOwnProperty("ngMin")),s=!t.attr("aria-valuemax")&&(n.hasOwnProperty("max")||n.hasOwnProperty("ngMax")),o=!t.attr("aria-valuenow"),r&&n.$observe("min",function(e){t.attr("aria-valuemin",e)}),s&&n.$observe("max",function(e){t.attr("aria-valuemax",e)}),o&&e.$watch(i,function(e){t.attr("aria-valuenow",e)})),l&&t.attr("tabindex",0)}!n.hasOwnProperty("ngRequired")&&a.$validators.required&&h("aria-required","ariaRequired",t,!1)&&n.$observe("required",function(){t.attr("aria-required",!!n.required)}),h("aria-invalid","ariaInvalid",t,!0)&&e.$watch(function(){return a.$invalid},function(e){t.attr("aria-invalid",!!e)})}}}}}]).directive("ngDisabled",["$aria",function(e){return e.$$watchExpr("ngDisabled","aria-disabled",r,!1)}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(e,t,n,a){t.attr("aria-live")||t.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function(i,n){return{restrict:"A",compile:function(e,t){var a=n(t.ngClick);return function(n,e,t){c(e,r)||(i.config("bindRoleForClick")&&!e.attr("role")&&e.attr("role","button"),i.config("tabindex")&&!e.attr("tabindex")&&e.attr("tabindex",0),!i.config("bindKeydown")||t.ngKeydown||t.ngKeypress||t.ngKeyup)||e.on("keydown",function(e){var t=e.which||e.keyCode;32!==t&&13!==t||n.$apply(function(){a(n,{$event:e})})})}}}}]).directive("ngDblclick",["$aria",function(a){return function(e,t,n){!a.config("tabindex")||t.attr("tabindex")||c(t,r)||t.attr("tabindex",0)}}])}((window,window.angular)),function(l){"use strict";function e(e,r,t){var s=t.baseHref(),o=e[0];return function(e,t,n){var a=(n=n||{}).expires,i=l.isDefined(n.path)?n.path:s;l.isUndefined(t)&&(a="Thu, 01 Jan 1970 00:00:00 GMT",t=""),l.isString(a)&&(a=new Date(a)),t=(t=encodeURIComponent(e)+"="+encodeURIComponent(t))+(i?";path="+i:"")+(n.domain?";domain="+n.domain:""),t+=a?";expires="+a.toUTCString():"",4096<(n=(t+=n.secure?";secure":"").length+1)&&r.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+n+" > 4096 bytes)!"),o.cookie=t}}l.module("ngCookies",["ng"]).info({angularVersion:"1.6.4"}).provider("$cookies",[function(){var i=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(t,a){return{get:function(e){return t()[e]},getObject:function(e){return(e=this.get(e))?l.fromJson(e):e},getAll:function(){return t()},put:function(e,t,n){a(e,t,n?l.extend({},i,n):i)},putObject:function(e,t,n){this.put(e,l.toJson(t),n)},remove:function(e,t){a(e,void 0,t?l.extend({},i,t):i)}}}]}]),l.module("ngCookies").factory("$cookieStore",["$cookies",function(n){return{get:function(e){return n.getObject(e)},put:function(e,t){n.putObject(e,t)},remove:function(e){n.remove(e)}}}]),e.$inject=["$document","$log","$browser"],l.module("ngCookies").provider("$$cookieWriter",function(){this.$get=e})}((window,window.angular)),function(S){"use strict";function e(e){i&&e.get("$route")}function t(d,f,p){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(n,a,e,t,i){function r(){c&&(p.cancel(c),c=null),o&&(o.$destroy(),o=null),l&&((c=p.leave(l)).done(function(e){!1!==e&&(c=null)}),l=null)}function s(){var e,t=d.current&&d.current.locals;S.isDefined(t&&t.$template)?(t=n.$new(),e=d.current,l=i(t,function(e){p.enter(e,null,l||a).done(function(e){!1===e||!S.isDefined(u)||u&&!n.$eval(u)||f()}),r()}),(o=e.scope=t).$emit("$viewContentLoaded"),o.$eval(h)):r()}var o,l,c,u=e.autoscroll,h=e.onload||"";n.$on("$routeChangeSuccess",s),s()}}}function n(s,o,l){return{restrict:"ECA",priority:-400,link:function(e,t){var n=l.current,a=n.locals;t.html(a.$template);var i,r=s(t.contents());n.controller&&(a.$scope=e,i=o(n.controller,a),n.controllerAs&&(e[n.controllerAs]=i),t.data("$ngControllerController",i),t.children().data("$ngControllerController",i)),e[n.resolveAs||"$resolve"]=a,r(e)}}}var s,o,a,T,i,r=S.module("ngRoute",[]).info({angularVersion:"1.6.4"}).provider("$route",function(){function _(e,t){return S.extend(Object.create(e),t)}function r(e,t){var n=t.caseInsensitiveMatch,a={originalPath:e,regexp:e},i=a.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(e,t,n,a){return e="?"===a||"*?"===a?"?":null,a="*"===a||"*?"===a?"*":null,i.push({name:n,optional:!!e}),t=t||"",(e?"":t)+"(?:"+(e?t:"")+(a?"(.+?)":"([^/]+)")+(e||"")+")"+(e||"")}).replace(/([/$*])/g,"\\$1"),a.regexp=new RegExp("^"+e+"$",n?"i":""),a}s=S.isArray,o=S.isObject,a=S.isDefined,T=S.noop;var b={};this.when=function(e,t){var n=void 0;if(s(t)){n=n||[];for(var a=0,i=t.length;a<i;a++)n[a]=t[a]}else if(o(t))for(a in n=n||{},t)"$"===a.charAt(0)&&"$"===a.charAt(1)||(n[a]=t[a]);return n=n||t,S.isUndefined(n.reloadOnSearch)&&(n.reloadOnSearch=!0),S.isUndefined(n.caseInsensitiveMatch)&&(n.caseInsensitiveMatch=this.caseInsensitiveMatch),b[e]=S.extend(n,e&&r(e,n)),e&&(a="/"===e[e.length-1]?e.substr(0,e.length-1):e+"/",b[a]=S.extend({redirectTo:e},r(a,n))),this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},i=!0,this.eagerInstantiationEnabled=function(e){return a(e)?(i=e,this):i},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(i,h,r,s,o,l,c,e){function t(e){var c,u,t=y.current;S.forEach(b,function(e,t){if(a=!u){var n=h.path(),a=e.keys,i={};if(e.regexp)if(n=e.regexp.exec(n)){for(var r=1,s=n.length;r<s;++r){var o=a[r-1],l=n[r];o&&l&&(i[o.name]=l)}a=i}else a=null;else a=null;a=c=a}a&&((u=_(e,{params:S.extend({},h.search(),c),pathParams:c})).$$route=e)}),(g=(m=u||b.null&&_(b.null,{params:{},pathParams:{}}))&&t&&m.$$route===t.$$route&&S.equals(m.pathParams,t.pathParams)&&!m.reloadOnSearch&&!v)||!t&&!m||i.$broadcast("$routeChangeStart",m,t).defaultPrevented&&e&&e.preventDefault()}function n(){var t,n=y.current,a=m;g?(n.params=a.params,S.copy(n.params,r),i.$broadcast("$routeUpdate",n)):(a||n)&&(v=!1,y.current=a,t=s.resolve(a),e.$$incOutstandingRequestCount(),t.then(u).then(d).then(function(e){return e&&t.then(f).then(function(e){a===y.current&&(a&&(a.locals=e,S.copy(a.params,r)),i.$broadcast("$routeChangeSuccess",a,n))})}).catch(function(e){a===y.current&&i.$broadcast("$routeChangeError",a,n,e)}).finally(function(){e.$$completeOutstandingRequest(T)}))}function u(e){var t,n,a={route:e,hasRedirection:!1};if(e)if(e.redirectTo){S.isString(e.redirectTo)?(a.path=p(e.redirectTo,e.params),a.search=e.params,a.hasRedirection=!0):(t=h.path(),n=h.search(),e=e.redirectTo(e.pathParams,t,n),S.isDefined(e)&&(a.url=e,a.hasRedirection=!0))}else if(e.resolveRedirectTo)return s.resolve(o.invoke(e.resolveRedirectTo)).then(function(e){return S.isDefined(e)&&(a.url=e,a.hasRedirection=!0),a});return a}function d(e){var t,n,a=!0;return e.route!==y.current?a=!1:e.hasRedirection&&(t=h.url(),(n=e.url)?h.url(n).replace():n=h.path(e.path).search(e.search).replace().url(),n!==t&&(a=!1)),a}function f(e){if(e){var n=S.extend({},e.resolve);return S.forEach(n,function(e,t){n[t]=S.isString(e)?o.get(e):o.invoke(e,null,null,t)}),t=e,S.isDefined(a=t.template)?S.isFunction(a)&&(a=a(t.params)):S.isDefined(i=t.templateUrl)&&(S.isFunction(i)&&(i=i(t.params)),S.isDefined(i)&&(t.loadedTemplateUrl=c.valueOf(i),a=l(i))),e=a,S.isDefined(e)&&(n.$template=e),s.all(n)}var t,a,i}function p(e,i){var r=[];return S.forEach((e||"").split(":"),function(e,t){var n,a;0===t?r.push(e):(a=(n=e.match(/(\w+)(?:[?*])?(.*)/))[1],r.push(i[a]),r.push(n[2]||""),delete i[a])}),r.join("")}var m,g,v=!1,y={routes:b,reload:function(){var e={defaultPrevented:!(v=!0),preventDefault:function(){this.defaultPrevented=!0,v=!1}};i.$evalAsync(function(){t(e),e.defaultPrevented||n()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw w("norout");e=S.extend({},this.current.params,e),h.path(p(this.current.$$route.originalPath,e)),h.search(e)}};return i.$on("$locationChangeStart",t),i.$on("$locationChangeSuccess",n),y}]}).run(e),w=S.$$minErr("ngRoute");e.$inject=["$injector"],r.provider("$routeParams",function(){this.$get=function(){return{}}}),r.directive("ngView",t),r.directive("ngView",n),t.$inject=["$route","$anchorScroll","$animate"],n.$inject=["$compile","$controller","$route"]}((window,window.angular)),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.d3=e.d3||{})}(this,function(V){"use strict";function o(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function P(r){var n;return 1===r.length&&(n=r,r=function(e,t){return o(n(e),t)}),{left:function(e,t,n,a){for(null==n&&(n=0),null==a&&(a=e.length);n<a;){var i=n+a>>>1;r(e[i],t)<0?n=1+i:a=i}return n},right:function(e,t,n,a){for(null==n&&(n=0),null==a&&(a=e.length);n<a;){var i=n+a>>>1;0<r(e[i],t)?a=i:n=1+i}return n}}}var e=P(o),m=e.right,t=e.left;function u(e,t){return[e,t]}function c(e){return null===e?NaN:+e}function a(e,t){var n,a,i=e.length,r=0,s=-1,o=0,l=0;if(null==t)for(;++s<i;)isNaN(n=c(e[s]))||(l+=(a=n-o)*(n-(o+=a/++r)));else for(;++s<i;)isNaN(n=c(t(e[s],s,e)))||(l+=(a=n-o)*(n-(o+=a/++r)));if(1<r)return l/(r-1)}function i(e,t){var n=a(e,t);return n?Math.sqrt(n):n}function l(e,t){var n,a,i,r=e.length,s=-1;if(null==t){for(;++s<r;)if(null!=(n=e[s])&&n<=n)for(a=i=n;++s<r;)null!=(n=e[s])&&(n<a&&(a=n),i<n&&(i=n))}else for(;++s<r;)if(null!=(n=t(e[s],s,e))&&n<=n)for(a=i=n;++s<r;)null!=(n=t(e[s],s,e))&&(n<a&&(a=n),i<n&&(i=n));return[a,i]}var n=Array.prototype,r=n.slice,s=n.map;function h(e){return function(){return e}}function g(e){return e}function x(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var a=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),r=new Array(i);++a<i;)r[a]=e+a*n;return r}var d=Math.sqrt(50),f=Math.sqrt(10),p=Math.sqrt(2);function v(e,t,n){var a,i,r,s,o=-1;if(n=+n,(e=+e)==(t=+t)&&0<n)return[e];if((a=t<e)&&(i=e,e=t,t=i),0===(s=y(e,t,n))||!isFinite(s))return[];if(0<s)for(e=Math.ceil(e/s),t=Math.floor(t/s),r=new Array(i=Math.ceil(t-e+1));++o<i;)r[o]=(e+o)*s;else for(e=Math.floor(e*s),t=Math.ceil(t*s),r=new Array(i=Math.ceil(e-t+1));++o<i;)r[o]=(e-o)/s;return a&&r.reverse(),r}function y(e,t,n){var a=(t-e)/Math.max(0,n),i=Math.floor(Math.log(a)/Math.LN10),r=a/Math.pow(10,i);return 0<=i?(d<=r?10:f<=r?5:p<=r?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(d<=r?10:f<=r?5:p<=r?2:1)}function C(e,t,n){var a=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),r=a/i;return d<=r?i*=10:f<=r?i*=5:p<=r&&(i*=2),t<e?-i:i}function _(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function b(e,t,n){if(null==n&&(n=c),a=e.length){if((t=+t)<=0||a<2)return+n(e[0],0,e);if(1<=t)return+n(e[a-1],a-1,e);var a,i=(a-1)*t,r=Math.floor(i),s=+n(e[r],r,e);return s+(n(e[r+1],r+1,e)-s)*(i-r)}}function S(e,t){var n,a,i=e.length,r=-1;if(null==t){for(;++r<i;)if(null!=(n=e[r])&&n<=n)for(a=n;++r<i;)null!=(n=e[r])&&a<n&&(a=n)}else for(;++r<i;)if(null!=(n=t(e[r],r,e))&&n<=n)for(a=n;++r<i;)null!=(n=t(e[r],r,e))&&a<n&&(a=n);return a}function D(e){for(var t,n,a,i=e.length,r=-1,s=0;++r<i;)s+=e[r].length;for(n=new Array(s);0<=--i;)for(t=(a=e[i]).length;0<=--t;)n[--s]=a[t];return n}function T(e,t){var n,a,i=e.length,r=-1;if(null==t){for(;++r<i;)if(null!=(n=e[r])&&n<=n)for(a=n;++r<i;)null!=(n=e[r])&&n<a&&(a=n)}else for(;++r<i;)if(null!=(n=t(e[r],r,e))&&n<=n)for(a=n;++r<i;)null!=(n=t(e[r],r,e))&&n<a&&(a=n);return a}function w(e){if(!(i=e.length))return[];for(var t=-1,n=T(e,E),a=new Array(n);++t<n;)for(var i,r=-1,s=a[t]=new Array(i);++r<i;)s[r]=e[r][t];return a}function E(e){return e.length}var A=Array.prototype.slice;function k(e){return e}function I(e){return"translate("+(e+.5)+",0)"}function M(e){return"translate(0,"+(e+.5)+")"}function $(){return!this.__axis}function L(m,g){var v=[],y=null,_=null,b=6,S=6,T=3,w=1===m||4===m?-1:1,P=4===m||2===m?"x":"y",x=1===m||3===m?I:M;function t(e){var t=null==y?g.ticks?g.ticks.apply(g,v):g.domain():y,n=null==_?g.tickFormat?g.tickFormat.apply(g,v):k:_,a=Math.max(b,0)+T,i=g.range(),r=+i[0]+.5,s=+i[i.length-1]+.5,o=(g.bandwidth?function(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}:function(t){return function(e){return+t(e)}})(g.copy()),l=e.selection?e.selection():e,c=l.selectAll(".domain").data([null]),u=(p=l.selectAll(".tick").data(t,g).order()).exit(),h=p.enter().append("g").attr("class","tick"),d=p.select("line"),f=p.select("text"),c=c.merge(c.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),p=p.merge(h),d=d.merge(h.append("line").attr("stroke","currentColor").attr(P+"2",w*b)),f=f.merge(h.append("text").attr("fill","currentColor").attr(P,w*a).attr("dy",1===m?"0em":3===m?"0.71em":"0.32em"));e!==l&&(c=c.transition(e),p=p.transition(e),d=d.transition(e),f=f.transition(e),u=u.transition(e).attr("opacity",1e-6).attr("transform",function(e){return isFinite(e=o(e))?x(e):this.getAttribute("transform")}),h.attr("opacity",1e-6).attr("transform",function(e){var t=this.parentNode.__axis;return x(t&&isFinite(t=t(e))?t:o(e))})),u.remove(),c.attr("d",4===m||2==m?S?"M"+w*S+","+r+"H0.5V"+s+"H"+w*S:"M0.5,"+r+"V"+s:S?"M"+r+","+w*S+"V0.5H"+s+"V"+w*S:"M"+r+",0.5H"+s),p.attr("opacity",1).attr("transform",function(e){return x(o(e))}),d.attr(P+"2",w*b),f.attr(P,w*a).text(n),l.filter($).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===m?"start":4===m?"end":"middle"),l.each(function(){this.__axis=o})}return t.scale=function(e){return arguments.length?(g=e,t):g},t.ticks=function(){return v=A.call(arguments),t},t.tickArguments=function(e){return arguments.length?(v=null==e?[]:A.call(e),t):v.slice()},t.tickValues=function(e){return arguments.length?(y=null==e?null:A.call(e),t):y&&y.slice()},t.tickFormat=function(e){return arguments.length?(_=e,t):_},t.tickSize=function(e){return arguments.length?(b=S=+e,t):b},t.tickSizeInner=function(e){return arguments.length?(b=+e,t):b},t.tickSizeOuter=function(e){return arguments.length?(S=+e,t):S},t.tickPadding=function(e){return arguments.length?(T=+e,t):T},t}var O={value:function(){}};function j(){for(var e,t=0,n=arguments.length,a={};t<n;++t){if(!(e=arguments[t]+"")||e in a)throw new Error("illegal type: "+e);a[e]=[]}return new R(a)}function R(e){this._=e}function N(e,t,n){for(var a=0,i=e.length;a<i;++a)if(e[a].name===t){e[a]=O,e=e.slice(0,a).concat(e.slice(a+1));break}return null!=n&&e.push({name:t,value:n}),e}R.prototype=j.prototype={constructor:R,on:function(e,t){var n,a,i=this._,r=(a=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!a.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),s=-1,o=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<o;)if(n=(e=r[s]).type)i[n]=N(i[n],e.name,t);else if(null==t)for(n in i)i[n]=N(i[n],e.name,null);return this}for(;++s<o;)if((n=(e=r[s]).type)&&(n=function(e,t){for(var n,a=0,i=e.length;a<i;++a)if((n=e[a]).name===t)return n.value}(i[n],e.name)))return n},copy:function(){var e,t={},n=this._;for(e in n)t[e]=n[e].slice();return new R(t)},call:function(e,t){if(0<(n=arguments.length-2))for(var n,a,i=new Array(n),r=0;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=0,n=(a=this._[e]).length;r<n;++r)a[r].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)}};var F="http://www.w3.org/1999/xhtml",B={svg:"http://www.w3.org/2000/svg",xhtml:F,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function U(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),B.hasOwnProperty(t)?{space:B[t],local:e}:e}function H(e){var t=U(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===F&&e.documentElement.namespaceURI===F?e.createElement(n):e.createElementNS(t,n)}})(t)}function G(){}function Y(e){return null==e?G:function(){return this.querySelector(e)}}function q(){return[]}function z(e){return null==e?q:function(){return this.querySelectorAll(e)}}var W,K,X=function(e){return function(){return this.matches(e)}};"undefined"!=typeof document&&((W=document.documentElement).matches||(K=W.webkitMatchesSelector||W.msMatchesSelector||W.mozMatchesSelector||W.oMatchesSelector,X=function(e){return function(){return K.call(this,e)}}));var Q=X;function J(e){return new Array(e.length)}function Z(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Z.prototype={constructor:Z,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ee(e,t,n,a,i,r){for(var s,o=0,l=t.length,c=r.length;o<c;++o)(s=t[o])?(s.__data__=r[o],a[o]=s):n[o]=new Z(e,r[o]);for(;o<l;++o)(s=t[o])&&(i[o]=s)}function te(e,t,n,a,i,r,s){for(var o,l,c={},u=t.length,h=r.length,d=new Array(u),f=0;f<u;++f)(o=t[f])&&(d[f]=l="$"+s.call(o,o.__data__,f,t),l in c?i[f]=o:c[l]=o);for(f=0;f<h;++f)(o=c[l="$"+s.call(e,r[f],f,r)])?((a[f]=o).__data__=r[f],c[l]=null):n[f]=new Z(e,r[f]);for(f=0;f<u;++f)(o=t[f])&&c[d[f]]===o&&(i[f]=o)}function ne(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function ae(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ie(e,t){return e.style.getPropertyValue(t)||ae(e).getComputedStyle(e,null).getPropertyValue(t)}function re(e){return e.trim().split(/^|\s+/)}function se(e){return e.classList||new oe(e)}function oe(e){this._node=e,this._names=re(e.getAttribute("class")||"")}function le(e,t){for(var n=se(e),a=-1,i=t.length;++a<i;)n.add(t[a])}function ce(e,t){for(var n=se(e),a=-1,i=t.length;++a<i;)n.remove(t[a])}function ue(){this.textContent=""}function he(){this.innerHTML=""}function de(){this.nextSibling&&this.parentNode.appendChild(this)}function fe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pe(){return null}function me(){var e=this.parentNode;e&&e.removeChild(this)}function ge(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function ve(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}oe.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var ye={};function _e(n,e,t){return n=be(n,e,t),function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}function be(n,a,i){return function(e){var t=V.event;V.event=e;try{n.call(this,this.__data__,a,i)}finally{V.event=t}}}function Se(r){return function(){var e=this.__on;if(e){for(var t,n=0,a=-1,i=e.length;n<i;++n)t=e[n],r.type&&t.type!==r.type||t.name!==r.name?e[++a]=t:this.removeEventListener(t.type,t.listener,t.capture);++a?e.length=a:delete this.__on}}}function Te(l,c,u){var h=ye.hasOwnProperty(l.type)?_e:be;return function(e,t,n){var a,i=this.__on,r=h(c,t,n);if(i)for(var s=0,o=i.length;s<o;++s)if((a=i[s]).type===l.type&&a.name===l.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=r,a.capture=u),void(a.value=c);this.addEventListener(l.type,r,u),a={type:l.type,name:l.name,value:c,listener:r,capture:u},i?i.push(a):this.__on=[a]}}function we(e,t,n,a){var i=V.event;e.sourceEvent=V.event,V.event=e;try{return t.apply(n,a)}finally{V.event=i}}function Pe(e,t,n){var a=ae(e),i=a.CustomEvent;"function"==typeof i?i=new i(t,n):(i=a.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}V.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ye={mouseenter:"mouseover",mouseleave:"mouseout"}));var xe=[null];function Ce(e,t){this._groups=e,this._parents=t}function De(){return new Ce([[document.documentElement]],xe)}function Ee(e){return"string"==typeof e?new Ce([[document.querySelector(e)]],[document.documentElement]):new Ce([[e]],xe)}Ce.prototype=De.prototype={constructor:Ce,select:function(e){"function"!=typeof e&&(e=Y(e));for(var t=this._groups,n=t.length,a=new Array(n),i=0;i<n;++i)for(var r,s,o=t[i],l=o.length,c=a[i]=new Array(l),u=0;u<l;++u)(r=o[u])&&(s=e.call(r,r.__data__,u,o))&&("__data__"in r&&(s.__data__=r.__data__),c[u]=s);return new Ce(a,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=z(e));for(var t=this._groups,n=t.length,a=[],i=[],r=0;r<n;++r)for(var s,o=t[r],l=o.length,c=0;c<l;++c)(s=o[c])&&(a.push(e.call(s,s.__data__,c,o)),i.push(s));return new Ce(a,i)},filter:function(e){"function"!=typeof e&&(e=Q(e));for(var t=this._groups,n=t.length,a=new Array(n),i=0;i<n;++i)for(var r,s=t[i],o=s.length,l=a[i]=[],c=0;c<o;++c)(r=s[c])&&e.call(r,r.__data__,c,s)&&l.push(r);return new Ce(a,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),u=-1,this.each(function(e){p[++u]=e}),p;var n,a=t?te:ee,i=this._parents,r=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var s=r.length,o=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var h=i[u],d=r[u],f=d.length,p=e.call(h,h&&h.__data__,u,i),m=p.length,g=l[u]=new Array(m),v=o[u]=new Array(m);a(h,d,g,v,c[u]=new Array(f),p,t);for(var y,_,b=0,S=0;b<m;++b)if(y=g[b]){for(S<=b&&(S=b+1);!(_=v[S])&&++S<m;);y._next=_||null}}return(o=new Ce(o,i))._enter=l,o._exit=c,o},enter:function(){return new Ce(this._enter||this._groups.map(J),this._parents)},exit:function(){return new Ce(this._exit||this._groups.map(J),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,a=t.length,i=n.length,r=Math.min(a,i),s=new Array(a),o=0;o<r;++o)for(var l,c=t[o],u=n[o],h=c.length,d=s[o]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;o<a;++o)s[o]=t[o];return new Ce(s,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a,i=e[t],r=i.length-1,s=i[r];0<=--r;)(a=i[r])&&(s&&s!==a.nextSibling&&s.parentNode.insertBefore(a,s),s=a);return this},sort:function(n){function e(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}n=n||ne;for(var t=this._groups,a=t.length,i=new Array(a),r=0;r<a;++r){for(var s,o=t[r],l=o.length,c=i[r]=new Array(l),u=0;u<l;++u)(s=o[u])&&(c[u]=s);c.sort(e)}return new Ce(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],i=0,r=a.length;i<r;++i){var s=a[i];if(s)return s}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var i,r=t[n],s=0,o=r.length;s<o;++s)(i=r[s])&&e.call(i,i.__data__,s,r);return this},attr:function(e,t){var n=U(e);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(t,n,a){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,a)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):ie(this.node(),e)},property:function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=re(e+"");if(arguments.length<2){for(var a=se(this.node()),i=-1,r=n.length;++i<r;)if(!a.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?le:ce)(this,e)}}:t?function(e){return function(){le(this,e)}}:function(e){return function(){ce(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?ue:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?he:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(de)},lower:function(){return this.each(fe)},append:function(e){var t="function"==typeof e?e:H(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:H(e),a=null==t?pe:"function"==typeof t?t:Y(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})},remove:function(){return this.each(me)},clone:function(e){return this.select(e?ve:ge)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var a,i,r=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return 0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),s=r.length;if(!(arguments.length<2)){for(o=t?Te:Se,null==n&&(n=!1),a=0;a<s;++a)this.each(o(r[a],t,n));return this}var o=this.node().__on;if(o)for(var l,c=0,u=o.length;c<u;++c)for(a=0,l=o[c];a<s;++a)if((i=r[a]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return Pe(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return Pe(this,e,t)}})(e,t))}};var Ae=0;function ke(){return new Ie}function Ie(){this._="@"+(++Ae).toString(36)}function Me(){for(var e,t=V.event;e=t.sourceEvent;)t=e;return t}function $e(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,[(a=a.matrixTransform(e.getScreenCTM().inverse())).x,a.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function Le(e){var t=Me();return t.changedTouches&&(t=t.changedTouches[0]),$e(e,t)}function Oe(e,t,n){arguments.length<3&&(n=t,t=Me().changedTouches);for(var a,i=0,r=t?t.length:0;i<r;++i)if((a=t[i]).identifier===n)return $e(e,a);return null}function Re(){V.event.stopImmediatePropagation()}function Ne(){V.event.preventDefault(),V.event.stopImmediatePropagation()}function Fe(e){var t=e.document.documentElement,n=Ee(e).on("dragstart.drag",Ne,!0);"onselectstart"in t?n.on("selectstart.drag",Ne,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Be(e,t){var n=e.document.documentElement,a=Ee(e).on("dragstart.drag",null);t&&(a.on("click.drag",Ne,!0),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in n?a.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ve(e){return function(){return e}}function je(e,t,n,a,i,r,s,o,l,c){this.target=e,this.type=t,this.subject=n,this.identifier=a,this.active=i,this.x=r,this.y=s,this.dx=o,this.dy=l,this._=c}function Ue(){return!V.event.button}function He(){return this.parentNode}function Ge(e){return null==e?{x:V.event.x,y:V.event.y}:e}function Ye(){return"ontouchstart"in this}function qe(e,t,n){(e.prototype=t.prototype=n).constructor=e}function ze(e,t){var n,a=Object.create(e.prototype);for(n in t)a[n]=t[n];return a}function We(){}Ie.prototype=ke.prototype={constructor:Ie,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}},je.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Ke="\\s*([+-]?\\d+)\\s*",Xe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Je=/^#([0-9a-f]{3})$/,Ze=/^#([0-9a-f]{6})$/,et=new RegExp("^rgb\\("+[Ke,Ke,Ke]+"\\)$"),tt=new RegExp("^rgb\\("+[Qe,Qe,Qe]+"\\)$"),nt=new RegExp("^rgba\\("+[Ke,Ke,Ke,Xe]+"\\)$"),at=new RegExp("^rgba\\("+[Qe,Qe,Qe,Xe]+"\\)$"),it=new RegExp("^hsl\\("+[Xe,Qe,Qe]+"\\)$"),rt=new RegExp("^hsla\\("+[Xe,Qe,Qe,Xe]+"\\)$"),st={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ot(e){var t;return e=(e+"").trim().toLowerCase(),(t=Je.exec(e))?new dt((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=Ze.exec(e))?lt(parseInt(t[1],16)):(t=et.exec(e))?new dt(t[1],t[2],t[3],1):(t=tt.exec(e))?new dt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=nt.exec(e))?ct(t[1],t[2],t[3],t[4]):(t=at.exec(e))?ct(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=it.exec(e))?pt(t[1],t[2]/100,t[3]/100,1):(t=rt.exec(e))?pt(t[1],t[2]/100,t[3]/100,t[4]):st.hasOwnProperty(e)?lt(st[e]):"transparent"===e?new dt(NaN,NaN,NaN,0):null}function lt(e){return new dt(e>>16&255,e>>8&255,255&e,1)}function ct(e,t,n,a){return a<=0&&(e=t=n=NaN),new dt(e,t,n,a)}function ut(e){return e instanceof We||(e=ot(e)),e?new dt((e=e.rgb()).r,e.g,e.b,e.opacity):new dt}function ht(e,t,n,a){return 1===arguments.length?ut(e):new dt(e,t,n,null==a?1:a)}function dt(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}function ft(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function pt(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new gt(e,t,n,a)}function mt(e,t,n,a){return 1===arguments.length?function(e){if(e instanceof gt)return new gt(e.h,e.s,e.l,e.opacity);if(e instanceof We||(e=ot(e)),!e)return new gt;if(e instanceof gt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,a=e.b/255,i=Math.min(t,n,a),r=Math.max(t,n,a),s=NaN,o=r-i,l=(r+i)/2;return o?(s=t===r?(n-a)/o+6*(n<a):n===r?(a-t)/o+2:(t-n)/o+4,o/=l<.5?r+i:2-r-i,s*=60):o=0<l&&l<1?0:s,new gt(s,o,l,e.opacity)}(e):new gt(e,t,n,null==a?1:a)}function gt(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}function vt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}qe(We,ot,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),qe(dt,ht,ze(We,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new dt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new dt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+ft(this.r)+ft(this.g)+ft(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),qe(gt,mt,ze(We,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new gt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new gt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,i=2*n-a;return new dt(vt(240<=e?e-240:120+e,i,a),vt(e,i,a),vt(e<120?240+e:e-120,i,a),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var yt=Math.PI/180,_t=180/Math.PI,bt=.96422,St=1,Tt=.82521,wt=4/29,Pt=6/29*3*(6/29),xt=6/29*(6/29)*(6/29);function Ct(e){if(e instanceof Et)return new Et(e.l,e.a,e.b,e.opacity);if(e instanceof Ot){if(isNaN(e.h))return new Et(e.l,0,0,e.opacity);var t=e.h*yt;return new Et(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof dt||(e=ut(e));var n,a,i=Mt(e.r),r=Mt(e.g),s=Mt(e.b),o=At((.2225045*i+.7168786*r+.0606169*s)/St);return i===r&&r===s?n=a=o:(n=At((.4360747*i+.3850649*r+.1430804*s)/bt),a=At((.0139322*i+.0971045*r+.7141733*s)/Tt)),new Et(116*o-16,500*(n-o),200*(o-a),e.opacity)}function Dt(e,t,n,a){return 1===arguments.length?Ct(e):new Et(e,t,n,null==a?1:a)}function Et(e,t,n,a){this.l=+e,this.a=+t,this.b=+n,this.opacity=+a}function At(e){return xt<e?Math.pow(e,1/3):e/Pt+wt}function kt(e){return 6/29<e?e*e*e:Pt*(e-wt)}function It(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Mt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function $t(e){if(e instanceof Ot)return new Ot(e.h,e.c,e.l,e.opacity);if(e instanceof Et||(e=Ct(e)),0===e.a&&0===e.b)return new Ot(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*_t;return new Ot(t<0?360+t:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Lt(e,t,n,a){return 1===arguments.length?$t(e):new Ot(e,t,n,null==a?1:a)}function Ot(e,t,n,a){this.h=+e,this.c=+t,this.l=+n,this.opacity=+a}qe(Et,Dt,ze(We,{brighter:function(e){return new Et(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Et(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new dt(It(3.1338561*(t=bt*kt(t))-1.6168667*(e=St*kt(e))-.4906146*(n=Tt*kt(n))),It(-.9787684*t+1.9161415*e+.033454*n),It(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),qe(Ot,Lt,ze(We,{brighter:function(e){return new Ot(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Ot(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Ct(this).rgb()}}));var Rt=-.29227,Nt=-.90649,Ft=1.97294,Bt=Ft*Nt,Vt=1.78277*Ft,jt=1.78277*Rt- -.14861*Nt;function Ut(e,t,n,a){return 1===arguments.length?function(e){if(e instanceof Ht)return new Ht(e.h,e.s,e.l,e.opacity);e instanceof dt||(e=ut(e));var t=e.r/255,n=e.g/255,a=e.b/255,i=(jt*a+Bt*t-Vt*n)/(jt+Bt-Vt),r=a-i,s=(Ft*(n-i)-Rt*r)/Nt,o=Math.sqrt(s*s+r*r)/(Ft*i*(1-i)),l=o?Math.atan2(s,r)*_t-120:NaN;return new Ht(l<0?l+360:l,o,i,e.opacity)}(e):new Ht(e,t,n,null==a?1:a)}function Ht(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}function Gt(e,t,n,a,i){var r=e*e,s=r*e;return((1-3*e+3*r-s)*t+(4-6*r+3*s)*n+(1+3*e+3*r-3*s)*a+s*i)/6}function Yt(s){var o=s.length-1;return function(e){var t=e<=0?e=0:1<=e?o-(e=1):Math.floor(e*o),n=s[t],a=s[t+1],i=0<t?s[t-1]:2*n-a,r=t<o-1?s[t+2]:2*a-n;return Gt((e-t/o)*o,i,n,a,r)}}function qt(s){var o=s.length;return function(e){var t=Math.floor(((e%=1)<0?++e:e)*o),n=s[(t+o-1)%o],a=s[t%o],i=s[(t+1)%o],r=s[(t+2)%o];return Gt((e-t/o)*o,n,a,i,r)}}function zt(e){return function(){return e}}function Wt(t,n){return function(e){return t+e*n}}function Kt(e,t){var n=t-e;return n?Wt(e,180<n||n<-180?n-360*Math.round(n/360):n):zt(isNaN(e)?t:e)}function Xt(r){return 1==(r=+r)?Qt:function(e,t){return t-e?(n=e,a=t,i=r,n=Math.pow(n,i),a=Math.pow(a,i)-n,i=1/i,function(e){return Math.pow(n+e*a,i)}):zt(isNaN(e)?t:e);var n,a,i}}function Qt(e,t){var n=t-e;return n?Wt(e,n):zt(isNaN(e)?t:e)}qe(Ht,Ut,ze(We,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Ht(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Ht(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*yt,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),a=Math.cos(e),i=Math.sin(e);return new dt(255*(t+n*(-.14861*a+1.78277*i)),255*(t+n*(Rt*a+Nt*i)),255*(t+Ft*a*n),this.opacity)}}));var Jt=function e(t){var s=Xt(t);function n(t,e){var n=s((t=ht(t)).r,(e=ht(e)).r),a=s(t.g,e.g),i=s(t.b,e.b),r=Qt(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=a(e),t.b=i(e),t.opacity=r(e),t+""}}return n.gamma=e,n}(1);function Zt(o){return function(e){for(var t,n=e.length,a=new Array(n),i=new Array(n),r=new Array(n),s=0;s<n;++s)t=ht(e[s]),a[s]=t.r||0,i[s]=t.g||0,r[s]=t.b||0;return a=o(a),i=o(i),r=o(r),t.opacity=1,function(e){return t.r=a(e),t.g=i(e),t.b=r(e),t+""}}}var en=Zt(Yt),tn=Zt(qt);function nn(e,t){for(var n=t?t.length:0,a=e?Math.min(n,e.length):0,i=new Array(a),r=new Array(n),s=0;s<a;++s)i[s]=un(e[s],t[s]);for(;s<n;++s)r[s]=t[s];return function(e){for(s=0;s<a;++s)r[s]=i[s](e);return r}}function an(t,n){var a=new Date;return n-=t=+t,function(e){return a.setTime(t+n*e),a}}function rn(t,n){return n-=t=+t,function(e){return t+n*e}}function sn(e,t){var n,a={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?a[n]=un(e[n],t[n]):i[n]=t[n];return function(e){for(n in a)i[n]=a[n](e);return i}}var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ln=new RegExp(on.source,"g");function cn(e,a){var t,n,i,r,s,o=on.lastIndex=ln.lastIndex=0,l=-1,c=[],u=[];for(e+="",a+="";(t=on.exec(e))&&(n=ln.exec(a));)(i=n.index)>o&&(i=a.slice(o,i),c[l]?c[l]+=i:c[++l]=i),(t=t[0])===(n=n[0])?c[l]?c[l]+=n:c[++l]=n:(c[++l]=null,u.push({i:l,x:rn(t,n)})),o=ln.lastIndex;return o<a.length&&(i=a.slice(o),c[l]?c[l]+=i:c[++l]=i),c.length<2?u[0]?(s=u[0].x,function(e){return s(e)+""}):(r=a,function(){return r}):(a=u.length,function(e){for(var t,n=0;n<a;++n)c[(t=u[n]).i]=t.x(e);return c.join("")})}function un(e,t){var n,a=typeof t;return null==t||"boolean"==a?zt(t):("number"==a?rn:"string"==a?(n=ot(t))?(t=n,Jt):cn:t instanceof ot?Jt:t instanceof Date?an:Array.isArray(t)?nn:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?sn:rn)(e,t)}function hn(t,n){return n-=t=+t,function(e){return Math.round(t+n*e)}}var dn,fn,pn,mn,gn=180/Math.PI,vn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yn(e,t,n,a,i,r){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*a)&&(n-=e*l,a-=t*l),(o=Math.sqrt(n*n+a*a))&&(n/=o,a/=o,l/=o),e*a<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*gn,skewX:Math.atan(l)*gn,scaleX:s,scaleY:o}}function _n(P,x,C,D){function E(e){return e.length?e.pop()+" ":""}return function(e,t){var n,a,i,r,s,o,l,c,u,h,d,f,p,m,g,v,y,_,b,S,T=[],w=[];return e=P(e),t=P(t),m=e.translateX,g=e.translateY,v=t.translateX,y=t.translateY,_=T,b=w,m!==v||g!==y?(S=_.push("translate(",null,x,null,C),b.push({i:S-4,x:rn(m,v)},{i:S-2,x:rn(g,y)})):(v||y)&&_.push("translate("+v+x+y+C),d=e.rotate,f=t.rotate,p=T,d!==f?(180<d-f?f+=360:180<f-d&&(d+=360),w.push({i:p.push(E(p)+"rotate(",null,D)-2,x:rn(d,f)})):f&&p.push(E(p)+"rotate("+f+D),c=e.skewX,u=t.skewX,h=T,c!==u?w.push({i:h.push(E(h)+"skewX(",null,D)-2,x:rn(c,u)}):u&&h.push(E(h)+"skewX("+u+D),n=e.scaleX,a=e.scaleY,i=t.scaleX,r=t.scaleY,s=T,o=w,n!==i||a!==r?(l=s.push(E(s)+"scale(",null,",",null,")"),o.push({i:l-4,x:rn(n,i)},{i:l-2,x:rn(a,r)})):1===i&&1===r||s.push(E(s)+"scale("+i+","+r+")"),e=t=null,function(e){for(var t,n=-1,a=w.length;++n<a;)T[(t=w[n]).i]=t.x(e);return T.join("")}}}var bn=_n(function(e){return"none"===e?vn:(dn||(dn=document.createElement("DIV"),fn=document.documentElement,pn=document.defaultView),dn.style.transform=e,e=pn.getComputedStyle(fn.appendChild(dn),null).getPropertyValue("transform"),fn.removeChild(dn),yn(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),Sn=_n(function(e){return null==e?vn:((mn=mn||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",e),(e=mn.transform.baseVal.consolidate())?yn((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):vn)},", ",")",")"),Tn=Math.SQRT2;function wn(e){return((e=Math.exp(e))+1/e)/2}function Pn(e,t){var s,n,a,o,l,i,c=e[0],u=e[1],h=e[2],r=t[0],d=t[1],f=t[2],p=r-c,m=d-u,g=p*p+m*m;return(i=g<1e-12?(l=Math.log(f/h)/Tn,function(e){return[c+e*p,u+e*m,h*Math.exp(Tn*e*l)]}):(s=Math.sqrt(g),n=(f*f-h*h+4*g)/(2*h*2*s),a=(f*f-h*h-4*g)/(2*f*2*s),o=Math.log(Math.sqrt(n*n+1)-n),l=(Math.log(Math.sqrt(a*a+1)-a)-o)/Tn,function(e){var t,n,a=e*l,i=wn(o),r=h/(2*s)*(i*(t=Tn*a+o,((t=Math.exp(2*t))-1)/(t+1))-(n=o,((n=Math.exp(n))-1/n)/2));return[c+r*p,u+r*m,h*i/wn(Tn*a+o)]})).duration=1e3*l,i}function xn(s){return function(t,e){var n=s((t=mt(t)).h,(e=mt(e)).h),a=Qt(t.s,e.s),i=Qt(t.l,e.l),r=Qt(t.opacity,e.opacity);return function(e){return t.h=n(e),t.s=a(e),t.l=i(e),t.opacity=r(e),t+""}}}var Cn=xn(Kt),Dn=xn(Qt);function En(s){return function(t,e){var n=s((t=Lt(t)).h,(e=Lt(e)).h),a=Qt(t.c,e.c),i=Qt(t.l,e.l),r=Qt(t.opacity,e.opacity);return function(e){return t.h=n(e),t.c=a(e),t.l=i(e),t.opacity=r(e),t+""}}}var An=En(Kt),kn=En(Qt);function In(o){return function e(s){function t(t,e){var n=o((t=Ut(t)).h,(e=Ut(e)).h),a=Qt(t.s,e.s),i=Qt(t.l,e.l),r=Qt(t.opacity,e.opacity);return function(e){return t.h=n(e),t.s=a(e),t.l=i(Math.pow(e,s)),t.opacity=r(e),t+""}}return s=+s,t.gamma=e,t}(1)}var Mn,$n,Ln=In(Kt),On=In(Qt),Rn=0,Nn=0,Fn=0,Bn=1e3,Vn=0,jn=0,Un=0,Hn="object"==typeof performance&&performance.now?performance:Date,Gn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Yn(){return jn||(Gn(qn),jn=Hn.now()+Un)}function qn(){jn=0}function zn(){this._call=this._time=this._next=null}function Wn(e,t,n){var a=new zn;return a.restart(e,t,n),a}function Kn(){Yn(),++Rn;for(var e,t=Mn;t;)0<=(e=jn-t._time)&&t._call.call(null,e),t=t._next;--Rn}function Xn(){jn=(Vn=Hn.now())+Un,Rn=Nn=0;try{Kn()}finally{Rn=0,function(){for(var e,t,n=Mn,a=1/0;n;)n=n._call?(a>n._time&&(a=n._time),(e=n)._next):(t=n._next,n._next=null,e?e._next=t:Mn=t);$n=e,Jn(a)}(),jn=0}}function Qn(){var e=Hn.now(),t=e-Vn;Bn<t&&(Un-=t,Vn=e)}function Jn(e){Rn||(Nn=Nn&&clearTimeout(Nn),24<e-jn?(e<1/0&&(Nn=setTimeout(Xn,e-Hn.now()-Un)),Fn=Fn&&clearInterval(Fn)):(Fn||(Vn=Hn.now(),Fn=setInterval(Qn,Bn)),Rn=1,Gn(Xn)))}function Zn(t,n,e){var a=new zn;return n=null==n?0:+n,a.restart(function(e){a.stop(),t(e+n)},n,e),a}zn.prototype=Wn.prototype={constructor:zn,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Yn():+n)+(null==t?0:+t),this._next||$n===this||($n?$n._next=this:Mn=this,$n=this),this._call=e,this._time=n,Jn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jn())}};var ea=j("start","end","interrupt"),ta=[],na=0,aa=1,ia=2,ra=3,sa=4,oa=5,la=6;function ca(e,t,n,a,i,r){var s,o,l,c,u,h=e.__transition;if(h){if(n in h)return}else e.__transition={};function d(e){var t,n,a,i;if(l.state!==aa)return p();for(t in u)if((i=u[t]).name===l.name){if(i.state===ra)return Zn(d);i.state===sa?(i.state=la,i.timer.stop(),i.on.call("interrupt",s,s.__data__,i.index,i.group),delete u[t]):+t<o&&(i.state=la,i.timer.stop(),delete u[t])}if(Zn(function(){l.state===ra&&(l.state=sa,l.timer.restart(f,l.delay,l.time),f(e))}),l.state=ia,l.on.call("start",s,s.__data__,l.index,l.group),l.state===ia){for(l.state=ra,c=new Array(a=l.tween.length),t=0,n=-1;t<a;++t)(i=l.tween[t].value.call(s,s.__data__,l.index,l.group))&&(c[++n]=i);c.length=n+1}}function f(e){for(var t=e<l.duration?l.ease.call(null,e/l.duration):(l.timer.restart(p),l.state=oa,1),n=-1,a=c.length;++n<a;)c[n].call(null,t);l.state===oa&&(l.on.call("end",s,s.__data__,l.index,l.group),p())}function p(){for(var e in l.state=la,l.timer.stop(),delete u[o],u)return;delete s.__transition}s=e,o=n,l={name:t,index:a,group:i,on:ea,tween:ta,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:na},((u=s.__transition)[o]=l).timer=Wn(function(e){l.state=aa,l.timer.restart(d,l.delay,l.time),l.delay<=e&&d(e-l.delay)},0,l.time)}function ua(e,t){var n=da(e,t);if(n.state>na)throw new Error("too late; already scheduled");return n}function ha(e,t){var n=da(e,t);if(n.state>ia)throw new Error("too late; already started");return n}function da(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function fa(e,t){var n,a,i,r=e.__transition,s=!0;if(r){for(i in t=null==t?null:t+"",r)(n=r[i]).name===t?(a=n.state>ia&&n.state<oa,n.state=la,n.timer.stop(),a&&n.on.call("interrupt",e,e.__data__,n.index,n.group),delete r[i]):s=!1;s&&delete e.__transition}}function pa(e,t,n){var a=e._id;return e.each(function(){var e=ha(this,a);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return da(e,a).value[t]}}function ma(e,t){var n;return("number"==typeof t?rn:t instanceof ot?Jt:(n=ot(t))?(t=n,Jt):cn)(e,t)}var ga=De.prototype.constructor,va=0;function ya(e,t,n,a){this._groups=e,this._parents=t,this._name=n,this._id=a}function _a(e){return De().transition(e)}function ba(){return++va}var Sa=De.prototype;function Ta(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function wa(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}ya.prototype=_a.prototype={constructor:ya,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Y(e));for(var a=this._groups,i=a.length,r=new Array(i),s=0;s<i;++s)for(var o,l,c=a[s],u=c.length,h=r[s]=new Array(u),d=0;d<u;++d)(o=c[d])&&(l=e.call(o,o.__data__,d,c))&&("__data__"in o&&(l.__data__=o.__data__),h[d]=l,ca(h[d],t,n,d,h,da(o,n)));return new ya(r,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=z(e));for(var a=this._groups,i=a.length,r=[],s=[],o=0;o<i;++o)for(var l,c=a[o],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,f=e.call(l,l.__data__,h,c),p=da(l,n),m=0,g=f.length;m<g;++m)(d=f[m])&&ca(d,t,n,m,f,p);r.push(f),s.push(l)}return new ya(r,s,t,n)},filter:function(e){"function"!=typeof e&&(e=Q(e));for(var t=this._groups,n=t.length,a=new Array(n),i=0;i<n;++i)for(var r,s=t[i],o=s.length,l=a[i]=[],c=0;c<o;++c)(r=s[c])&&e.call(r,r.__data__,c,s)&&l.push(r);return new ya(a,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,a=t.length,i=n.length,r=Math.min(a,i),s=new Array(a),o=0;o<r;++o)for(var l,c=t[o],u=n[o],h=c.length,d=s[o]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;o<a;++o)s[o]=t[o];return new ya(s,this._parents,this._name,this._id)},selection:function(){return new ga(this._groups,this._parents)},transition:function(){for(var e,t=this._name,n=this._id,a=ba(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o,l=i[s],c=l.length,u=0;u<c;++u){(o=l[u])&&ca(o,t,a,u,l,{time:(e=da(o,n)).time+e.delay+e.duration,delay:0,duration:e.duration,ease:e.ease})}return new ya(i,this._parents,t,a)},call:Sa.call,nodes:Sa.nodes,node:Sa.node,size:Sa.size,empty:Sa.empty,each:Sa.each,on:function(e,t){var n,a,i,r,s,o,l=this._id;return arguments.length<2?da(this.node(),l).on.on(e):this.each((n=l,i=t,o=((a=e)+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return 0<=t&&(e=e.slice(0,t)),!e||"start"===e})?ua:ha,function(){var e=o(this,n),t=e.on;t!==r&&(s=(r=t).copy()).on(a,i),e.on=s}))},attr:function(e,t){var n=U(e),a="transform"===n?Sn:ma;return this.attrTween(e,"function"==typeof t?(n.local?function(n,a,i){var r,s,o;return function(){var e,t=i(this);if(null!=t)return(e=this.getAttributeNS(n.space,n.local))===t?null:e===r&&t===s?o:o=a(r=e,s=t);this.removeAttributeNS(n.space,n.local)}}:function(n,a,i){var r,s,o;return function(){var e,t=i(this);if(null!=t)return(e=this.getAttribute(n))===t?null:e===r&&t===s?o:o=a(r=e,s=t);this.removeAttribute(n)}})(n,a,pa(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(t,n,a){var i,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===a?null:e===i?r:r=n(i=e,a)}}:function(t,n,a){var i,r;return function(){var e=this.getAttribute(t);return e===a?null:e===i?r:r=n(i=e,a)}})(n,a,t+""))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var a=U(e);return this.tween(n,(a.local?function(a,e){function t(){var t=this,n=e.apply(t,arguments);return n&&function(e){t.setAttributeNS(a.space,a.local,n(e))}}return t._value=e,t}:function(a,e){function t(){var t=this,n=e.apply(t,arguments);return n&&function(e){t.setAttribute(a,n(e))}}return t._value=e,t})(a,t))},style:function(e,t,n){var a,i,r,s,o,l,c,u,h,d,f,p,m,g,v,y,_,b="transform"==(e+="")?bn:ma;return null==t?this.styleTween(e,(m=e,g=b,function(){var e=ie(this,m),t=(this.style.removeProperty(m),ie(this,m));return e===t?null:e===v&&t===y?_:_=g(v=e,y=t)})).on("end.style."+e,(p=e,function(){this.style.removeProperty(p)})):this.styleTween(e,"function"==typeof t?(c=b,u=pa(this,"style."+(l=e),t),function(){var e=ie(this,l),t=u(this);return null==t&&(this.style.removeProperty(l),t=ie(this,l)),e===t?null:e===h&&t===d?f:f=c(h=e,d=t)}):(a=e,i=b,r=t+"",function(){var e=ie(this,a);return e===r?null:e===s?o:o=i(s=e,r)}),n)},styleTween:function(e,t,n){var a,i,r,s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==t)return this.tween(s,null);if("function"!=typeof t)throw new Error;return this.tween(s,(a=e,r=null==n?"":n,o._value=i=t,o));function o(){var t=this,n=i.apply(t,arguments);return n&&function(e){t.style.setProperty(a,n(e),r)}}},text:function(e){return this.tween("text","function"==typeof e?(n=pa(this,"text",e),function(){var e=n(this);this.textContent=null==e?"":e}):(t=null==e?"":e+"",function(){this.textContent=t}));var t,n},remove:function(){return this.on("end.remove",(n=this._id,function(){var e,t=this.parentNode;for(e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}));var n},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var a,i=da(this.node(),n).tween,r=0,s=i.length;r<s;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((null==t?function(i,r){var s,o;return function(){var e=ha(this,i),t=e.tween;if(t!==s)for(var n=0,a=(o=s=t).length;n<a;++n)if(o[n].name===r){(o=o.slice()).splice(n,1);break}e.tween=o}}:function(r,s,o){var l,c;if("function"!=typeof o)throw new Error;return function(){var e=ha(this,r),t=e.tween;if(t!==l){c=(l=t).slice();for(var n={name:s,value:o},a=0,i=c.length;a<i;++a)if(c[a].name===s){c[a]=n;break}a===i&&c.push(n)}e.tween=c}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){ua(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){ua(this,e).delay=t}})(t,e)):da(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){ha(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){ha(this,e).duration=t}})(t,e)):da(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){ha(this,e).ease=t}}(t,e)):da(this.node(),t).ease}};var Pa=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),xa=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),Ca=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),Da=Math.PI,Ea=Da/2;function Aa(e){return(1-Math.cos(Da*e))/2}function ka(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function Ia(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var Ma=7.5625;function $a(e){return(e=+e)<4/11?Ma*e*e:e<8/11?Ma*(e-=6/11)*e+.75:e<10/11?Ma*(e-=9/11)*e+.9375:Ma*(e-=21/22)*e+63/64}var La=function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n}(1.70158),Oa=function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(1.70158),Ra=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),Na=2*Math.PI,Fa=function t(n,a){var i=Math.asin(1/(n=Math.max(1,n)))*(a/=Na);function e(e){return n*Math.pow(2,10*--e)*Math.sin((i-e)/a)}return e.amplitude=function(e){return t(e,a*Na)},e.period=function(e){return t(n,e)},e}(1,.3),Ba=function t(n,a){var i=Math.asin(1/(n=Math.max(1,n)))*(a/=Na);function e(e){return 1-n*Math.pow(2,-10*(e=+e))*Math.sin((e+i)/a)}return e.amplitude=function(e){return t(e,a*Na)},e.period=function(e){return t(n,e)},e}(1,.3),Va=function t(n,a){var i=Math.asin(1/(n=Math.max(1,n)))*(a/=Na);function e(e){return((e=2*e-1)<0?n*Math.pow(2,10*e)*Math.sin((i-e)/a):2-n*Math.pow(2,-10*e)*Math.sin((i+e)/a))/2}return e.amplitude=function(e){return t(e,a*Na)},e.period=function(e){return t(n,e)},e}(1,.3),ja={time:null,delay:0,duration:250,ease:wa};De.prototype.interrupt=function(e){return this.each(function(){fa(this,e)})},De.prototype.transition=function(e){var t,n;e=e instanceof ya?(t=e._id,e._name):(t=ba(),(n=ja).time=Yn(),null==e?null:e+"");for(var a=this._groups,i=a.length,r=0;r<i;++r)for(var s,o=a[r],l=o.length,c=0;c<l;++c)(s=o[c])&&ca(s,e,t,c,o,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return ja.time=Yn(),ja;return n}(s,t));return new ya(a,this._parents,e,t)};var Ua=[null];function Ha(e){return function(){return e}}function Ga(e,t,n){this.target=e,this.type=t,this.selection=n}function Ya(){V.event.stopImmediatePropagation()}function qa(){V.event.preventDefault(),V.event.stopImmediatePropagation()}var za={name:"drag"},Wa={name:"space"},Ka={name:"handle"},Xa={name:"center"},Qa={name:"x",handles:["e","w"].map(ri),input:function(e,t){return e&&[[e[0],t[0][1]],[e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Ja={name:"y",handles:["n","s"].map(ri),input:function(e,t){return e&&[[t[0][0],e[0]],[t[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Za={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(ri),input:function(e){return e},output:function(e){return e}},ei={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ti={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ni={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ai={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ii={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ri(e){return{type:e}}function si(){return!V.event.button}function oi(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function li(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function ci(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function ui(O){var R,t=oi,N=si,n=j(i,"start","brush","end"),a=6;function i(e){var t=e.property("__brush",o).selectAll(".overlay").data([ri("overlay")]);t.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ei.overlay).merge(t).each(function(){var e=li(this).extent;Ee(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),e.selectAll(".selection").data([ri("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ei.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var n=e.selectAll(".handle").data(O.handles,function(e){return e.type});n.exit().remove(),n.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return ei[e.type]}),e.each(F).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",s)}function F(){var e=Ee(this),t=li(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-a/2:t[0][0]-a/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-a/2:t[0][1]-a/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+a:a}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+a:a})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function B(e,t){return e.__brush.emitter||new r(e,t)}function r(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function s(){if(V.event.touches){if(V.event.changedTouches.length<V.event.touches.length)return qa()}else if(R)return;var t,n,a,i,r,s,o,l,c,u,h,d,f,p,m,g,v,y,_,e,b,S,T,w,P,x,C,D,E,A,k,I;function M(){var e=Le(p);!x||d||f||(Math.abs(e[0]-D[0])>Math.abs(e[1]-D[1])?f=!0:d=!0),D=e,h=!0,qa(),$()}function $(){var e;switch(c=D[0]-C[0],u=D[1]-C[1],g){case Wa:case za:v&&(c=Math.max(S-t,Math.min(w-r,c)),n=t+c,s=r+c),y&&(u=Math.max(T-a,Math.min(P-o,u)),i=a+u,l=o+u);break;case Ka:v<0?(c=Math.max(S-t,Math.min(w-t,c)),n=t+c,s=r):0<v&&(c=Math.max(S-r,Math.min(w-r,c)),n=t,s=r+c),y<0?(u=Math.max(T-a,Math.min(P-a,u)),i=a+u,l=o):0<y&&(u=Math.max(T-o,Math.min(P-o,u)),i=a,l=o+u);break;case Xa:v&&(n=Math.max(S,Math.min(w,t-c*v)),s=Math.max(S,Math.min(w,r+c*v))),y&&(i=Math.max(T,Math.min(P,a-u*y)),l=Math.max(T,Math.min(P,o+u*y)))}s<n&&(v*=-1,e=t,t=r,r=e,e=n,n=s,s=e,m in ti&&k.attr("cursor",ei[m=ti[m]])),l<i&&(y*=-1,e=a,a=o,o=e,e=i,i=l,l=e,m in ni&&k.attr("cursor",ei[m=ni[m]])),_.selection&&(b=_.selection),d&&(n=b[0][0],s=b[1][0]),f&&(i=b[0][1],l=b[1][1]),b[0][0]===n&&b[0][1]===i&&b[1][0]===s&&b[1][1]===l||(_.selection=[[n,i],[s,l]],F.call(p),E.brush())}function L(){if(Ya(),V.event.touches){if(V.event.touches.length)return;R&&clearTimeout(R),R=setTimeout(function(){R=null},500),A.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Be(V.event.view,h),I.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);A.attr("pointer-events","all"),k.attr("cursor",ei.overlay),_.selection&&(b=_.selection),ci(b)&&(_.selection=null,F.call(p)),E.end()}N.apply(this,arguments)&&(p=this,m=V.event.target.__data__.type,g="selection"===(V.event.metaKey?m="overlay":m)?za:V.event.altKey?Xa:Ka,v=O===Ja?null:ai[m],y=O===Qa?null:ii[m],e=(_=li(p)).extent,b=_.selection,S=e[0][0],T=e[0][1],w=e[1][0],P=e[1][1],x=v&&y&&V.event.shiftKey,C=Le(p),D=C,E=B(p,arguments).beforestart(),"overlay"===m?_.selection=b=[[t=O===Ja?S:C[0],a=O===Qa?T:C[1]],[r=O===Ja?w:t,o=O===Qa?P:a]]:(t=b[0][0],a=b[0][1],r=b[1][0],o=b[1][1]),n=t,i=a,s=r,l=o,A=Ee(p).attr("pointer-events","none"),k=A.selectAll(".overlay").attr("cursor",ei[m]),V.event.touches?A.on("touchmove.brush",M,!0).on("touchend.brush touchcancel.brush",L,!0):(I=Ee(V.event.view).on("keydown.brush",function(){switch(V.event.keyCode){case 16:x=v&&y;break;case 18:g===Ka&&(v&&(r=s-c*v,t=n+c*v),y&&(o=l-u*y,a=i+u*y),g=Xa,$());break;case 32:g!==Ka&&g!==Xa||(v<0?r=s-c:0<v&&(t=n-c),y<0?o=l-u:0<y&&(a=i-u),g=Wa,k.attr("cursor",ei.selection),$());break;default:return}qa()},!0).on("keyup.brush",function(){switch(V.event.keyCode){case 16:x&&(d=f=x=!1,$());break;case 18:g===Xa&&(v<0?r=s:0<v&&(t=n),y<0?o=l:0<y&&(a=i),g=Ka,$());break;case 32:g===Wa&&(g=V.event.altKey?(v&&(r=s-c*v,t=n+c*v),y&&(o=l-u*y,a=i+u*y),Xa):(v<0?r=s:0<v&&(t=n),y<0?o=l:0<y&&(a=i),Ka),k.attr("cursor",ei[m]),$());break;default:return}qa()},!0).on("mousemove.brush",M,!0).on("mouseup.brush",L,!0),Fe(V.event.view)),Ya(),fa(p),F.call(p),E.start())}function o(){var e=this.__brush||{selection:null};return e.extent=t.apply(this,arguments),e.dim=O,e}return i.move=function(e,o){e.selection?e.on("start.brush",function(){B(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){B(this,arguments).end()}).tween("brush",function(){var t=this,n=t.__brush,a=B(t,arguments),e=n.selection,i=O.input("function"==typeof o?o.apply(this,arguments):o,n.extent),r=un(e,i);function s(e){n.selection=1===e&&ci(i)?null:r(e),F.call(t),a.brush()}return e&&i?s:s(1)}):e.each(function(){var e=arguments,t=this.__brush,n=O.input("function"==typeof o?o.apply(this,e):o,t.extent),a=B(this,e).beforestart();fa(this),t.selection=null==n||ci(n)?null:n,F.call(this),a.start().brush().end()})},r.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){we(new Ga(i,e,O.output(this.state.selection)),n.apply,n,[e,this.that,this.args])}},i.extent=function(e){return arguments.length?(t="function"==typeof e?e:Ha([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),i):t},i.filter=function(e){return arguments.length?(N="function"==typeof e?e:Ha(!!e),i):N},i.handleSize=function(e){return arguments.length?(a=+e,i):a},i.on=function(){var e=n.on.apply(n,arguments);return e===n?i:e},i}var hi=Math.cos,di=Math.sin,fi=Math.PI,pi=fi/2,mi=2*fi,gi=Math.max,vi=Array.prototype.slice;function yi(e){return function(){return e}}var _i=Math.PI,bi=2*_i,Si=bi-1e-6;function Ti(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function wi(){return new Ti}function Pi(e){return e.source}function xi(e){return e.target}function Ci(e){return e.radius}function Di(e){return e.startAngle}function Ei(e){return e.endAngle}function Ai(){}function ki(e,t){var n=new Ai;if(e instanceof Ai)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var a,i=-1,r=e.length;if(null==t)for(;++i<r;)n.set(i,e[i]);else for(;++i<r;)n.set(t(a=e[i],i,e),a)}else if(e)for(var s in e)n.set(s,e[s]);return n}function Ii(){return{}}function Mi(e,t,n){e[t]=n}function $i(){return ki()}function Li(e,t,n){e.set(t,n)}function Oi(){}Ti.prototype=wi.prototype={constructor:Ti,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,a){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+a)},bezierCurveTo:function(e,t,n,a,i,r){this._+="C"+ +e+","+ +t+","+ +n+","+ +a+","+(this._x1=+i)+","+(this._y1=+r)},arcTo:function(e,t,n,a,i){e=+e,t=+t,n=+n,a=+a,i=+i;var r,s,o,l,c,u,h,d,f,p=this._x1,m=this._y1,g=n-e,v=a-t,y=p-e,_=m-t,b=y*y+_*_;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=e)+","+(this._y1=t):1e-6<b&&(1e-6<Math.abs(_*g-v*y)&&i?(o=g*g+v*v,l=(r=n-p)*r+(s=a-m)*s,c=Math.sqrt(o),u=Math.sqrt(b),d=(h=i*Math.tan((_i-Math.acos((o+b-l)/(2*c*u)))/2))/u,f=h/c,1e-6<Math.abs(d-1)&&(this._+="L"+(e+d*y)+","+(t+d*_)),this._+="A"+i+","+i+",0,0,"+ +(y*s<_*r)+","+(this._x1=e+f*g)+","+(this._y1=t+f*v)):this._+="L"+(this._x1=e)+","+(this._y1=t))},arc:function(e,t,n,a,i,r){e=+e,t=+t;var s=(n=+n)*Math.cos(a),o=n*Math.sin(a),l=e+s,c=t+o,u=1^r,h=r?a-i:i-a;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(1e-6<Math.abs(this._x1-l)||1e-6<Math.abs(this._y1-c))&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%bi+bi),Si<h?this._+="A"+n+","+n+",0,1,"+u+","+(e-s)+","+(t-o)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):1e-6<h&&(this._+="A"+n+","+n+",0,"+ +(_i<=h)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,a){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +a+"h"+-n+"Z"},toString:function(){return this._}},Ai.prototype=ki.prototype={constructor:Ai,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e,t=[];for(e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var e,t=[];for(e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var e,t=[];for(e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var e,t=0;for(e in this)"$"===e[0]&&++t;return t},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var Ri=ki.prototype;function Ni(e,t){var n=new Oi;if(e instanceof Oi)e.each(function(e){n.add(e)});else if(e){var a=-1,i=e.length;if(null==t)for(;++a<i;)n.add(e[a]);else for(;++a<i;)n.add(t(e[a],a,e))}return n}Oi.prototype=Ni.prototype={constructor:Oi,has:Ri.has,add:function(e){return this["$"+(e+="")]=e,this},remove:Ri.remove,clear:Ri.clear,values:Ri.keys,size:Ri.size,empty:Ri.empty,each:Ri.each};var Fi=Array.prototype.slice;function Bi(e,t){return e-t}function Vi(e){return function(){return e}}function ji(e,t){for(var n,a=-1,i=t.length;++a<i;)if(n=function(e,t){for(var n=t[0],a=t[1],i=-1,r=0,s=e.length,o=s-1;r<s;o=r++){var l=e[r],c=l[0],u=l[1],h=e[o],d=h[0],f=h[1];if(function(e,t,n){var a,i,r,s;return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])&&(i=e[a=+(e[0]===t[0])],r=n[a],s=t[a],i<=r&&r<=s||s<=r&&r<=i)}(l,h,t))return 0;a<u!=a<f&&n<(d-c)*(a-u)/(f-u)+c&&(i=-i)}return i}(e,t[a]))return n;return 0}function Ui(){}var Hi=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Gi(){var d=1,f=1,r=_,s=t;function a(t){var e,n,a,i=r(t);return(i=Array.isArray(i)?i.slice().sort(Bi):(i=C(n=(e=l(t))[0],a=e[1],i),x(Math.floor(n/i)*i,Math.floor(a/i)*i,i))).map(function(e){return o(t,e)})}function o(t,n){var i=[],a=[];return function(e,t,o){var l,n,a,i,c=new Array,u=new Array,h=l=-1,r=e[0]>=t;for(Hi[r<<1].forEach(s);++h<d-1;)n=r,r=e[h+1]>=t,Hi[n|r<<1].forEach(s);for(Hi[r<<0].forEach(s);++l<f-1;){for(h=-1,r=e[l*d+d]>=t,a=e[l*d]>=t,Hi[r<<1|a<<2].forEach(s);++h<d-1;)n=r,r=e[l*d+d+h+1]>=t,i=a,a=e[l*d+h+1]>=t,Hi[n|r<<1|a<<2|i<<3].forEach(s);Hi[r|a<<3].forEach(s)}for(h=-1,a=e[l*d]>=t,Hi[a<<2].forEach(s);++h<d-1;)i=a,a=e[l*d+h+1]>=t,Hi[a<<2|i<<3].forEach(s);function s(e){var t,n,a=[e[0][0]+h,e[0][1]+l],i=[e[1][0]+h,e[1][1]+l],r=p(a),s=p(i);(t=u[r])?(n=c[s])?(delete u[t.end],delete c[n.start],t===n?(t.ring.push(i),o(t.ring)):c[t.start]=u[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete u[t.end],t.ring.push(i),u[t.end=s]=t):(t=c[s])?(n=u[r])?(delete c[t.start],delete u[n.end],t===n?(t.ring.push(i),o(t.ring)):c[n.start]=u[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete c[t.start],t.ring.unshift(a),c[t.start=r]=t):c[r]=u[s]={start:r,end:s,ring:[a,i]}}Hi[a<<3].forEach(s)}(t,n,function(e){s(e,t,n),0<function(e){for(var t=0,n=e.length,a=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)a+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return a}(e)?i.push([e]):a.push(e)}),a.forEach(function(e){for(var t,n=0,a=i.length;n<a;++n)if(-1!==ji((t=i[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:n,coordinates:i}}function p(e){return 2*e[0]+e[1]*(d+1)*4}function t(e,o,l){e.forEach(function(e){var t,n=e[0],a=e[1],i=0|n,r=0|a,s=o[r*d+i];0<n&&n<d&&i===n&&(t=o[r*d+i-1],e[0]=n+(l-t)/(s-t)-.5),0<a&&a<f&&r===a&&(t=o[(r-1)*d+i],e[1]=a+(l-t)/(s-t)-.5)})}return a.contour=o,a.size=function(e){if(!arguments.length)return[d,f];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(0<t&&0<n))throw new Error("invalid size");return d=t,f=n,a},a.thresholds=function(e){return arguments.length?(r="function"==typeof e?e:Array.isArray(e)?Vi(Fi.call(e)):Vi(e),a):r},a.smooth=function(e){return arguments.length?(s=e?t:Ui,a):s===t},a}function Yi(e,t,n){for(var a=e.width,i=e.height,r=1+(n<<1),s=0;s<i;++s)for(var o=0,l=0;o<a+n;++o)o<a&&(l+=e.data[o+s*a]),n<=o&&(r<=o&&(l-=e.data[o-r+s*a]),t.data[o-n+s*a]=l/Math.min(o+1,a-1+r-o,r))}function qi(e,t,n){for(var a=e.width,i=e.height,r=1+(n<<1),s=0;s<a;++s)for(var o=0,l=0;o<i+n;++o)o<i&&(l+=e.data[s+o*a]),n<=o&&(r<=o&&(l-=e.data[s+(o-r)*a]),t.data[s+(o-n)*a]=l/Math.min(o+1,i-1+r-o,r))}function zi(e){return e[0]}function Wi(e){return e[1]}function Ki(){return 1}var Xi={},Qi={};function Ji(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function Zi(r){var t=new RegExp('["'+r+"\n\r]"),h=r.charCodeAt(0);function n(a,e){var t,n=[],i=a.length,r=0,s=0,o=i<=0,l=!1;function c(){if(o)return Qi;if(l)return l=!1,Xi;var e,t,n=r;if(34===a.charCodeAt(n)){for(;r++<i&&34!==a.charCodeAt(r)||34===a.charCodeAt(++r););return(e=r)>=i?o=!0:10===(t=a.charCodeAt(r++))?l=!0:13===t&&(l=!0,10===a.charCodeAt(r)&&++r),a.slice(n+1,e-1).replace(/""/g,'"')}for(;r<i;){if(10===(t=a.charCodeAt(e=r++)))l=!0;else if(13===t)l=!0,10===a.charCodeAt(r)&&++r;else if(t!==h)continue;return a.slice(n,e)}return o=!0,a.slice(n,i)}for(10===a.charCodeAt(i-1)&&--i,13===a.charCodeAt(i-1)&&--i;(t=c())!==Qi;){for(var u=[];t!==Xi&&t!==Qi;)u.push(t),t=c();e&&null==(u=e(u,s++))||n.push(u)}return n}function a(e){return e.map(s).join(r)}function s(e){return null==e?"":t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,r){var s,o,t=n(e,function(e,t){return s?s(e,t-1):(o=e,void(s=r?(a=r,i=Ji(n=e),function(e,t){return a(i(e),t,n)}):Ji(e)));var n,a,i});return t.columns=o||[],t},parseRows:n,format:function(e,n){return null==n&&(t=e,a=Object.create(null),i=[],t.forEach(function(e){for(var t in e)t in a||i.push(a[t]=t)}),n=i),[n.map(s).join(r)].concat(e.map(function(t){return n.map(function(e){return s(t[e])}).join(r)})).join("\n");var t,a,i},formatRows:function(e){return e.map(a).join("\n")}}}var er=Zi(","),tr=er.parse,nr=er.parseRows,ar=er.format,ir=er.formatRows,rr=Zi("\t"),sr=rr.parse,or=rr.parseRows,lr=rr.format,cr=rr.formatRows;function ur(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function hr(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function dr(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function fr(e,t){return fetch(e,t).then(dr)}function pr(a){return function(e,t,n){return 2===arguments.length&&"function"==typeof t&&(n=t,t=void 0),fr(e,t).then(function(e){return a(e,n)})}}var mr=pr(tr),gr=pr(sr);function vr(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.json()}function yr(n){return function(e,t){return fr(e,t).then(function(e){return(new DOMParser).parseFromString(e,n)})}}var _r=yr("application/xml"),br=yr("text/html"),Sr=yr("image/svg+xml");function Tr(e){return function(){return e}}function wr(){return 1e-6*(Math.random()-.5)}function Pr(e,t,n,a){if(isNaN(t)||isNaN(n))return e;var i,r,s,o,l,c,u,h,d,f=e._root,p={data:a},m=e._x0,g=e._y0,v=e._x1,y=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((c=t>=(r=(m+v)/2))?m=r:v=r,(u=n>=(s=(g+y)/2))?g=s:y=s,!(f=(i=f)[h=u<<1|c]))return i[h]=p,e;if(o=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===o&&n===l)return p.next=f,i?i[h]=p:e._root=p,e;for(;i=i?i[h]=new Array(4):e._root=new Array(4),(c=t>=(r=(m+v)/2))?m=r:v=r,(u=n>=(s=(g+y)/2))?g=s:y=s,(h=u<<1|c)==(d=(s<=l)<<1|r<=o););return i[d]=f,i[h]=p,e}function xr(e,t,n,a,i){this.node=e,this.x0=t,this.y0=n,this.x1=a,this.y1=i}function Cr(e){return e[0]}function Dr(e){return e[1]}function Er(e,t,n){var a=new Ar(null==t?Cr:t,null==n?Dr:n,NaN,NaN,NaN,NaN);return null==e?a:a.addAll(e)}function Ar(e,t,n,a,i,r){this._x=e,this._y=t,this._x0=n,this._y0=a,this._x1=i,this._y1=r,this._root=void 0}function kr(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ir=Er.prototype=Ar.prototype;function Mr(e){return e.x+e.vx}function $r(e){return e.y+e.vy}function Lr(e){return e.index}function Or(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Rr(e){return e.x}function Nr(e){return e.y}Ir.copy=function(){var e,t,n=new Ar(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root;if(!a)return n;if(!a.length)return n._root=kr(a),n;for(e=[{source:a,target:n._root=new Array(4)}];a=e.pop();)for(var i=0;i<4;++i)(t=a.source[i])&&(t.length?e.push({source:t,target:a.target[i]=new Array(4)}):a.target[i]=kr(t));return n},Ir.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Pr(this.cover(t,n),t,n,e)},Ir.addAll=function(e){for(var t,n,a,i=e.length,r=new Array(i),s=new Array(i),o=1/0,l=1/0,c=-1/0,u=-1/0,h=0;h<i;++h)isNaN(n=+this._x.call(null,t=e[h]))||isNaN(a=+this._y.call(null,t))||((r[h]=n)<o&&(o=n),c<n&&(c=n),(s[h]=a)<l&&(l=a),u<a&&(u=a));for(c<o&&(o=this._x0,c=this._x1),u<l&&(l=this._y0,u=this._y1),this.cover(o,l).cover(c,u),h=0;h<i;++h)Pr(this,r[h],s[h],e[h]);return this},Ir.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,a=this._y0,i=this._x1,r=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,r=(a=Math.floor(t))+1;else{if(!(e<n||i<e||t<a||r<t))return this;var s,o,l=i-n,c=this._root;switch(o=(t<(a+r)/2)<<1|e<(n+i)/2){case 0:for(;(s=new Array(4))[o]=c,c=s,r=a+(l*=2),e>(i=n+l)||r<t;);break;case 1:for(;(s=new Array(4))[o]=c,c=s,r=a+(l*=2),(n=i-l)>e||r<t;);break;case 2:for(;(s=new Array(4))[o]=c,c=s,a=r-(l*=2),e>(i=n+l)||t<a;);break;case 3:for(;(s=new Array(4))[o]=c,c=s,a=r-(l*=2),(n=i-l)>e||t<a;);}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=a,this._x1=i,this._y1=r,this},Ir.data=function(){var t=[];return this.visit(function(e){if(!e.length)for(;t.push(e.data),e=e.next;);}),t},Ir.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ir.find=function(e,t,n){var a,i,r,s,o,l,c,u,h,d,f,p,m,g=this._x0,v=this._y0,y=this._x1,_=this._y1,b=[],S=this._root;for(S&&b.push(new xr(S,g,v,y,_)),null==n?n=1/0:(g=e-n,v=t-n,y=e+n,_=t+n,n*=n);o=b.pop();){!(S=o.node)||(a=o.x0)>y||(i=o.y0)>_||(r=o.x1)<g||(s=o.y1)<v||(S.length?(c=(a+r)/2,u=(i+s)/2,b.push(new xr(S[3],c,u,r,s),new xr(S[2],a,u,c,s),new xr(S[1],c,i,r,u),new xr(S[0],a,i,c,u)),(l=(u<=t)<<1|c<=e)&&(o=b[b.length-1],b[b.length-1]=b[b.length-1-l],b[b.length-1-l]=o)):(f=(h=e-this._x.call(null,S.data))*h+(d=t-this._y.call(null,S.data))*d)<n&&(g=e-(p=Math.sqrt(n=f)),v=t-p,y=e+p,_=t+p,m=S.data))}return m},Ir.remove=function(e){if(isNaN(r=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e)))return this;var t,n,a,i,r,s,o,l,c,u,h,d,f=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!f)return this;if(f.length)for(;;){if((c=r>=(o=(p+g)/2))?p=o:g=o,(u=s>=(l=(m+v)/2))?m=l:v=l,!(f=(t=f)[h=u<<1|c]))return this;if(!f.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,d=h)}for(;f.data!==e;)if(!(f=(a=f).next))return this;return(i=f.next)&&delete f.next,a?i?a.next=i:delete a.next:t?(i?t[h]=i:delete t[h],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[d]=f:this._root=f)):this._root=i,this},Ir.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Ir.root=function(){return this._root},Ir.size=function(){var t=0;return this.visit(function(e){if(!e.length)for(;++t,e=e.next;);}),t},Ir.visit=function(e){var t,n,a,i,r,s,o,l,c=[],u=this._root;for(u&&c.push(new xr(u,this._x0,this._y0,this._x1,this._y1));t=c.pop();){!e(u=t.node,a=t.x0,i=t.y0,r=t.x1,s=t.y1)&&u.length&&(o=(a+r)/2,l=(i+s)/2,(n=u[3])&&c.push(new xr(n,o,l,r,s)),(n=u[2])&&c.push(new xr(n,a,l,o,s)),(n=u[1])&&c.push(new xr(n,o,i,r,l)),(n=u[0])&&c.push(new xr(n,a,i,o,l)))}return this},Ir.visitAfter=function(e){var t,n=[],a=[];for(this._root&&n.push(new xr(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i,r,s,o,l,c,u,h=t.node;h.length&&(r=t.x0,s=t.y0,c=(r+(o=t.x1))/2,u=(s+(l=t.y1))/2,(i=h[0])&&n.push(new xr(i,r,s,c,u)),(i=h[1])&&n.push(new xr(i,c,s,o,u)),(i=h[2])&&n.push(new xr(i,r,u,c,l)),(i=h[3])&&n.push(new xr(i,c,u,o,l))),a.push(t)}for(;t=a.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},Ir.x=function(e){return arguments.length?(this._x=e,this):this._x},Ir.y=function(e){return arguments.length?(this._y=e,this):this._y};var Fr=Math.PI*(3-Math.sqrt(5));function Br(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[1<a.length?a[0]+a.slice(2):a,+e.slice(n+1)]}function Vr(e){return(e=Br(Math.abs(e)))?e[1]:NaN}var jr,Ur=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hr(e){return new Gr(e)}function Gr(e){if(!(t=Ur.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}function Yr(e,t){var n=Br(e,t);if(!n)return e+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}Hr.prototype=Gr.prototype,Gr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var qr={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Yr(100*e,t)},r:Yr,s:function(e,t){var n=Br(e,t);if(!n)return e+"";var a=n[0],i=n[1],r=i-(jr=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=a.length;return r===s?a:s<r?a+new Array(r-s+1).join("0"):0<r?a.slice(0,r)+"."+a.slice(r):"0."+new Array(1-r).join("0")+Br(e,Math.max(0,t+r-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function zr(e){return e}var Wr,Kr=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Xr(e){var o,l,t,T=e.grouping&&e.thousands?(o=e.grouping,l=e.thousands,function(e,t){for(var n=e.length,a=[],i=0,r=o[0],s=0;0<n&&0<r&&(t<s+r+1&&(r=Math.max(1,t-s)),a.push(e.substring(n-=r,n+r)),!((s+=r+1)>t));)r=o[i=(i+1)%o.length];return a.reverse().join(l)}):zr,a=e.currency,w=e.decimal,P=e.numerals?(t=e.numerals,function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}):zr,i=e.percent||"%";function s(e){var c=(e=Hr(e)).fill,u=e.align,h=e.sign,t=e.symbol,d=e.zero,f=e.width,p=e.comma,m=e.precision,g=e.trim,v=e.type;"n"===v?(p=!0,v="g"):qr[v]||(null==m&&(m=12),g=!0,v="g"),(d||"0"===c&&"="===u)&&(d=!0,c="0",u="=");var y="$"===t?a[0]:"#"===t&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===t?a[1]:/[%p]/.test(v)?i:"",b=qr[v],S=/[defgprs%]/.test(v);function n(e){var t,n,a,i=y,r=_;if("c"===v)r=b(e)+r,e="";else{var s=(e=+e)<0;if(e=b(Math.abs(e),m),g&&(e=function(e){e:for(var t,n=e.length,a=1,i=-1;a<n;++a)switch(e[a]){case".":i=t=a;break;case"0":0===i&&(i=a),t=a;break;default:if(0<i){if(!+e[a])break e;i=0}}return 0<i?e.slice(0,i)+e.slice(t+1):e}(e)),s&&0==+e&&(s=!1),i=(s?"("===h?h:"-":"-"===h||"("===h?"":h)+i,r=("s"===v?Kr[8+jr/3]:"")+r+(s&&"("===h?")":""),S)for(t=-1,n=e.length;++t<n;)if((a=e.charCodeAt(t))<48||57<a){r=(46===a?w+e.slice(t+1):e.slice(t))+r,e=e.slice(0,t);break}}p&&!d&&(e=T(e,1/0));var o=i.length+e.length+r.length,l=o<f?new Array(f-o+1).join(c):"";switch(p&&d&&(e=T(l+e,l.length?f-r.length:1/0),l=""),u){case"<":e=i+e+r+l;break;case"=":e=i+l+e+r;break;case"^":e=l.slice(0,o=l.length>>1)+i+e+r+l.slice(o);break;default:e=l+i+e+r}return P(e)}return m=null==m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),n.toString=function(){return e+""},n}return{format:s,formatPrefix:function(e,t){var n=s(((e=Hr(e)).type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(Vr(t)/3))),i=Math.pow(10,-a),r=Kr[8+a/3];return function(e){return n(i*e)+r}}}}function Qr(e){return Wr=Xr(e),V.format=Wr.format,V.formatPrefix=Wr.formatPrefix,Wr}function Jr(e){return Math.max(0,-Vr(Math.abs(e)))}function Zr(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Vr(t)/3)))-Vr(Math.abs(e)))}function es(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Vr(t)-Vr(e))+1}function ts(){return new ns}function ns(){this.reset()}Qr({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),ns.prototype={constructor:ns,reset:function(){this.s=this.t=0},add:function(e){is(as,e,this.t),is(this,as.s,this.s),this.s?this.t+=as.t:this.s=as.t},valueOf:function(){return this.s}};var as=new ns;function is(e,t,n){var a=e.s=t+n,i=a-t,r=a-i;e.t=t-r+(n-i)}var rs=1e-6,ss=Math.PI,os=ss/2,ls=ss/4,cs=2*ss,us=180/ss,hs=ss/180,ds=Math.abs,fs=Math.atan,ps=Math.atan2,ms=Math.cos,gs=Math.ceil,vs=Math.exp,ys=Math.log,_s=Math.pow,bs=Math.sin,Ss=Math.sign||function(e){return 0<e?1:e<0?-1:0},Ts=Math.sqrt,ws=Math.tan;function Ps(e){return 1<e?0:e<-1?ss:Math.acos(e)}function xs(e){return 1<e?os:e<-1?-os:Math.asin(e)}function Cs(e){return(e=bs(e/2))*e}function Ds(){}function Es(e,t){e&&ks.hasOwnProperty(e.type)&&ks[e.type](e,t)}var As={Feature:function(e,t){Es(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,a=-1,i=n.length;++a<i;)Es(n[a].geometry,t)}},ks={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)e=n[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){Is(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)Is(n[a],t,0)},Polygon:function(e,t){Ms(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)Ms(n[a],t)},GeometryCollection:function(e,t){for(var n=e.geometries,a=-1,i=n.length;++a<i;)Es(n[a],t)}};function Is(e,t,n){var a,i=-1,r=e.length-n;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function Ms(e,t){var n=-1,a=e.length;for(t.polygonStart();++n<a;)Is(e[n],t,1);t.polygonEnd()}function $s(e,t){e&&As.hasOwnProperty(e.type)?As[e.type](e,t):Es(e,t)}var Ls,Os,Rs,Ns,Fs,Bs=ts(),Vs=ts(),js={point:Ds,lineStart:Ds,lineEnd:Ds,polygonStart:function(){Bs.reset(),js.lineStart=Us,js.lineEnd=Hs},polygonEnd:function(){var e=+Bs;Vs.add(e<0?cs+e:e),this.lineStart=this.lineEnd=this.point=Ds},sphere:function(){Vs.add(cs)}};function Us(){js.point=Gs}function Hs(){Ys(Ls,Os)}function Gs(e,t){js.point=Ys,Ls=e,Os=t,Rs=e*=hs,Ns=ms(t=(t*=hs)/2+ls),Fs=bs(t)}function Ys(e,t){var n=(e*=hs)-Rs,a=0<=n?1:-1,i=a*n,r=ms(t=(t*=hs)/2+ls),s=bs(t),o=Fs*s,l=Ns*r+o*ms(i),c=o*a*bs(i);Bs.add(ps(c,l)),Rs=e,Ns=r,Fs=s}function qs(e){return[ps(e[1],e[0]),xs(e[2])]}function zs(e){var t=e[0],n=e[1],a=ms(n);return[a*ms(t),a*bs(t),bs(n)]}function Ws(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ks(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Xs(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Qs(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Js(e){var t=Ts(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Zs,eo,to,no,ao,io,ro,so,oo,lo,co,uo,ho,fo,po,mo,go,vo,yo,_o,bo,So,To,wo,Po,xo,Co=ts(),Do={point:Eo,lineStart:ko,lineEnd:Io,polygonStart:function(){Do.point=Mo,Do.lineStart=$o,Do.lineEnd=Lo,Co.reset(),js.polygonStart()},polygonEnd:function(){js.polygonEnd(),Do.point=Eo,Do.lineStart=ko,Do.lineEnd=Io,Bs<0?(Zs=-(to=180),eo=-(no=90)):rs<Co?no=90:Co<-rs&&(eo=-90),lo[0]=Zs,lo[1]=to}};function Eo(e,t){oo.push(lo=[Zs=e,to=e]),t<eo&&(eo=t),no<t&&(no=t)}function Ao(e,t){var n,a,i,r,s,o,l,c=zs([e*hs,t*hs]);so?(n=Ks(so,c),Js(a=Ks([n[1],-n[0],0],n)),a=qs(a),s=0<(r=e-ao)?1:-1,o=a[0]*us*s,(l=180<ds(r))^(s*ao<o&&o<s*e)?(i=a[1]*us)>no&&(no=i):l^(s*ao<(o=(o+360)%360-180)&&o<s*e)?(i=-a[1]*us)<eo&&(eo=i):(t<eo&&(eo=t),no<t&&(no=t)),l?e<ao?Oo(Zs,e)>Oo(Zs,to)&&(to=e):Oo(e,to)>Oo(Zs,to)&&(Zs=e):Zs<=to?(e<Zs&&(Zs=e),to<e&&(to=e)):ao<e?Oo(Zs,e)>Oo(Zs,to)&&(to=e):Oo(e,to)>Oo(Zs,to)&&(Zs=e)):oo.push(lo=[Zs=e,to=e]),t<eo&&(eo=t),no<t&&(no=t),so=c,ao=e}function ko(){Do.point=Ao}function Io(){lo[0]=Zs,lo[1]=to,Do.point=Eo,so=null}function Mo(e,t){var n;so?(n=e-ao,Co.add(180<ds(n)?n+(0<n?360:-360):n)):(io=e,ro=t),js.point(e,t),Ao(e,t)}function $o(){js.lineStart()}function Lo(){Mo(io,ro),js.lineEnd(),ds(Co)>rs&&(Zs=-(to=180)),lo[0]=Zs,lo[1]=to,so=null}function Oo(e,t){return(t-=e)<0?t+360:t}function Ro(e,t){return e[0]-t[0]}function No(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var Fo={sphere:Ds,point:Bo,lineStart:jo,lineEnd:Go,polygonStart:function(){Fo.lineStart=Yo,Fo.lineEnd=qo},polygonEnd:function(){Fo.lineStart=jo,Fo.lineEnd=Go}};function Bo(e,t){e*=hs;var n=ms(t*=hs);Vo(n*ms(e),n*bs(e),bs(t))}function Vo(e,t,n){ho+=(e-ho)/++co,fo+=(t-fo)/co,po+=(n-po)/co}function jo(){Fo.point=Uo}function Uo(e,t){e*=hs;var n=ms(t*=hs);wo=n*ms(e),Po=n*bs(e),xo=bs(t),Fo.point=Ho,Vo(wo,Po,xo)}function Ho(e,t){e*=hs;var n=ms(t*=hs),a=n*ms(e),i=n*bs(e),r=bs(t),s=ps(Ts((s=Po*r-xo*i)*s+(s=xo*a-wo*r)*s+(s=wo*i-Po*a)*s),wo*a+Po*i+xo*r);uo+=s,mo+=s*(wo+(wo=a)),go+=s*(Po+(Po=i)),vo+=s*(xo+(xo=r)),Vo(wo,Po,xo)}function Go(){Fo.point=Bo}function Yo(){Fo.point=zo}function qo(){Wo(So,To),Fo.point=Bo}function zo(e,t){So=e,To=t,e*=hs,t*=hs,Fo.point=Wo;var n=ms(t);wo=n*ms(e),Po=n*bs(e),xo=bs(t),Vo(wo,Po,xo)}function Wo(e,t){e*=hs;var n=ms(t*=hs),a=n*ms(e),i=n*bs(e),r=bs(t),s=Po*r-xo*i,o=xo*a-wo*r,l=wo*i-Po*a,c=Ts(s*s+o*o+l*l),u=xs(c),h=c&&-u/c;yo+=h*s,_o+=h*o,bo+=h*l,uo+=u,mo+=u*(wo+(wo=a)),go+=u*(Po+(Po=i)),vo+=u*(xo+(xo=r)),Vo(wo,Po,xo)}function Ko(e){return function(){return e}}function Xo(n,a){function e(e,t){return e=n(e,t),a(e[0],e[1])}return n.invert&&a.invert&&(e.invert=function(e,t){return(e=a.invert(e,t))&&n.invert(e[0],e[1])}),e}function Qo(e,t){return[ss<e?e-cs:e<-ss?e+cs:e,t]}function Jo(e,t,n){return(e%=cs)?t||n?Xo(el(e),tl(t,n)):el(e):t||n?tl(t,n):Qo}function Zo(n){return function(e,t){return[(e+=n)>ss?e-cs:e<-ss?e+cs:e,t]}}function el(e){var t=Zo(e);return t.invert=Zo(-e),t}function tl(e,t){var o=ms(e),l=bs(e),c=ms(t),u=bs(t);function n(e,t){var n=ms(t),a=ms(e)*n,i=bs(e)*n,r=bs(t),s=r*o+a*l;return[ps(i*c-s*u,a*o-r*l),xs(s*c+i*u)]}return n.invert=function(e,t){var n=ms(t),a=ms(e)*n,i=bs(e)*n,r=bs(t),s=r*c-i*u;return[ps(i*c+r*u,a*o+s*l),xs(s*o-a*l)]},n}function nl(t){function e(e){return(e=t(e[0]*hs,e[1]*hs))[0]*=us,e[1]*=us,e}return t=Jo(t[0]*hs,t[1]*hs,2<t.length?t[2]*hs:0),e.invert=function(e){return(e=t.invert(e[0]*hs,e[1]*hs))[0]*=us,e[1]*=us,e},e}function al(e,t,n,a,i,r){if(n){var s=ms(t),o=bs(t),l=a*n;null==i?(i=t+a*cs,r=t-l/2):(i=il(s,i),r=il(s,r),(0<a?i<r:r<i)&&(i+=a*cs));for(var c,u=i;0<a?r<u:u<r;u-=l)c=qs([s,-o*ms(u),-o*bs(u)]),e.point(c[0],c[1])}}function il(e,t){(t=zs(t))[0]-=e,Js(t);var n=Ps(-t[1]);return((-t[2]<0?-n:n)+cs-rs)%cs}function rl(){var n,t=[];return{point:function(e,t){n.push([e,t])},lineStart:function(){t.push(n=[])},lineEnd:Ds,rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function sl(e,t){return ds(e[0]-t[0])<rs&&ds(e[1]-t[1])<rs}function ol(e,t,n,a){this.x=e,this.z=t,this.o=n,this.e=a,this.v=!1,this.n=this.p=null}function ll(e,t,n,a,r){var s,i,o=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,a=e[0],i=e[t];if(sl(a,i)){for(r.lineStart(),s=0;s<t;++s)r.point((a=e[s])[0],a[1]);r.lineEnd()}else o.push(n=new ol(a,e,null,!0)),l.push(n.o=new ol(a,null,n,!1)),o.push(n=new ol(i,e,null,!1)),l.push(n.o=new ol(i,null,n,!0))}}),o.length){for(l.sort(t),cl(o),cl(l),s=0,i=l.length;s<i;++s)l[s].e=n=!n;for(var c,u,h=o[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(s=0,i=c.length;s<i;++s)r.point((u=c[s])[0],u[1]);else a(d.x,d.n.x,1,r);d=d.n}else{if(f)for(c=d.p.z,s=c.length-1;0<=s;--s)r.point((u=c[s])[0],u[1]);else a(d.x,d.p.x,-1,r);d=d.p}c=(d=d.o).z,f=!f}while(!d.v);r.lineEnd()}}}function cl(e){if(t=e.length){for(var t,n,a=0,i=e[0];++a<t;)i.n=n=e[a],n.p=i,i=n;i.n=n=e[0],n.p=i}}Qo.invert=Qo;var ul=ts();function hl(e,t){var n=t[0],a=t[1],i=bs(a),r=[bs(n),-ms(n),0],s=0,o=0;ul.reset(),1===i?a=os+rs:-1===i&&(a=-os-rs);for(var l=0,c=e.length;l<c;++l)if(h=(u=e[l]).length)for(var u,h,d=u[h-1],f=d[0],p=d[1]/2+ls,m=bs(p),g=ms(p),v=0;v<h;++v,f=T,m=P,g=x,d=S){var y,_,b,S=u[v],T=S[0],w=S[1]/2+ls,P=bs(w),x=ms(w),C=T-f,D=0<=C?1:-1,E=D*C,A=ss<E,k=m*P;ul.add(ps(k*D*bs(E),g*x+k*ms(E))),s+=A?C+D*cs:C,A^n<=f^n<=T&&(Js(y=Ks(zs(d),zs(S))),Js(_=Ks(r,y)),((b=(A^0<=C?-1:1)*xs(_[2]))<a||a===b&&(y[0]||y[1]))&&(o+=A^0<=C?1:-1))}return(s<-rs||s<rs&&ul<-rs)^1&o}function dl(g,v,y,_){return function(o){var l,c,u,n=v(o),h=rl(),d=v(h),f=!1,t={point:a,lineStart:i,lineEnd:r,polygonStart:function(){t.point=p,t.lineStart=s,t.lineEnd=m,c=[],l=[]},polygonEnd:function(){t.point=a,t.lineStart=i,t.lineEnd=r,c=D(c);var e=hl(l,_);c.length?(f||(o.polygonStart(),f=!0),ll(c,pl,e,y,o)):e&&(f||(o.polygonStart(),f=!0),o.lineStart(),y(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),c=l=null},sphere:function(){o.polygonStart(),o.lineStart(),y(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function a(e,t){g(e,t)&&o.point(e,t)}function e(e,t){n.point(e,t)}function i(){t.point=e,n.lineStart()}function r(){t.point=a,n.lineEnd()}function p(e,t){u.push([e,t]),d.point(e,t)}function s(){d.lineStart(),u=[]}function m(){p(u[0][0],u[0][1]),d.lineEnd();var e,t,n,a,i=d.clean(),r=h.result(),s=r.length;if(u.pop(),l.push(u),u=null,s)if(1&i){if(0<(t=(n=r[0]).length-1)){for(f||(o.polygonStart(),f=!0),o.lineStart(),e=0;e<t;++e)o.point((a=n[e])[0],a[1]);o.lineEnd()}}else 1<s&&2&i&&r.push(r.pop().concat(r.shift())),c.push(r.filter(fl))}return t}}function fl(e){return 1<e.length}function pl(e,t){return((e=e.x)[0]<0?e[1]-os-rs:os-e[1])-((t=t.x)[0]<0?t[1]-os-rs:os-t[1])}var ml=dl(function(){return 1},function(h){var d,f=NaN,p=NaN,m=NaN;return{lineStart:function(){h.lineStart(),d=1},point:function(e,t){var n,a,i,r,s,o,l,c=0<e?ss:-ss,u=ds(e-f);ds(u-ss)<rs?(h.point(f,p=0<(p+t)/2?os:-os),h.point(m,p),h.lineEnd(),h.lineStart(),h.point(c,p),h.point(e,p),d=0):m!==c&&ss<=u&&(ds(f-m)<rs&&(f-=m*rs),ds(e-c)<rs&&(e-=c*rs),a=p,r=t,l=bs((n=f)-(i=e)),p=ds(l)>rs?fs((bs(a)*(o=ms(r))*bs(i)-bs(r)*(s=ms(a))*bs(n))/(s*o*l)):(a+r)/2,h.point(m,p),h.lineEnd(),h.lineStart(),h.point(c,p),d=0),h.point(f=e,p=t),m=c},lineEnd:function(){h.lineEnd(),f=p=NaN},clean:function(){return 2-d}}},function(e,t,n,a){var i,r;null==e?(r=n*os,a.point(-ss,r),a.point(0,r),a.point(ss,r),a.point(ss,0),a.point(ss,-r),a.point(0,-r),a.point(-ss,-r),a.point(-ss,0),a.point(-ss,r)):ds(e[0]-t[0])>rs?(r=n*(i=e[0]<t[0]?ss:-ss)/2,a.point(-i,r),a.point(0,r),a.point(i,r)):a.point(t[0],t[1])},[-ss,-os]);function gl(i){var C=ms(i),r=6*hs,f=0<C,p=ds(C)>rs;function m(e,t){return ms(e)*ms(t)>C}function g(e,t,n){var a=[1,0,0],i=Ks(zs(e),zs(t)),r=Ws(i,i),s=i[0],o=r-s*s;if(!o)return!n&&e;var l=C*r/o,c=-C*s/o,u=Ks(a,i),h=Qs(a,l);Xs(h,Qs(i,c));var d=u,f=Ws(h,d),p=Ws(d,d),m=f*f-p*(Ws(h,h)-1);if(!(m<0)){var g=Ts(m),v=Qs(d,(-f-g)/p);if(Xs(v,h),v=qs(v),!n)return v;var y,_=e[0],b=t[0],S=e[1],T=t[1];b<_&&(y=_,_=b,b=y);var w=b-_,P=ds(w-ss)<rs;if(!P&&T<S&&(y=S,S=T,T=y),P||w<rs?P?0<S+T^v[1]<(ds(v[0]-_)<rs?S:T):S<=v[1]&&v[1]<=T:ss<w^(_<=v[0]&&v[0]<=b)){var x=Qs(d,(-f+g)/p);return Xs(x,h),[v,qs(x)]}}}function v(e,t){var n=f?i:ss-i,a=0;return e<-n?a|=1:n<e&&(a|=2),t<-n?a|=4:n<t&&(a|=8),a}return dl(m,function(o){var l,c,u,h,d;return{lineStart:function(){h=u=!1,d=1},point:function(e,t){var n,a,i=[e,t],r=m(e,t),s=f?r?0:v(e,t):r?v(e+(e<0?ss:-ss),t):0;!l&&(h=u=r)&&o.lineStart(),r===u||(n=g(l,i))&&!sl(l,n)&&!sl(i,n)||(i[0]+=rs,i[1]+=rs,r=m(i[0],i[1])),r!==u?(d=0,r?(o.lineStart(),n=g(i,l),o.point(n[0],n[1])):(n=g(l,i),o.point(n[0],n[1]),o.lineEnd()),l=n):p&&l&&f^r&&(s&c||!(a=g(i,l,!0))||(d=0,f?(o.lineStart(),o.point(a[0][0],a[0][1]),o.point(a[1][0],a[1][1]),o.lineEnd()):(o.point(a[1][0],a[1][1]),o.lineEnd(),o.lineStart(),o.point(a[0][0],a[0][1])))),!r||l&&sl(l,i)||o.point(i[0],i[1]),l=i,u=r,c=s},lineEnd:function(){u&&o.lineEnd(),l=null},clean:function(){return d|(h&&u)<<1}}},function(e,t,n,a){al(a,i,r,n,e,t)},f?[0,-i]:[-ss,i-ss])}var vl=1e9,yl=-vl;function _l(v,y,_,b){function S(e,t){return v<=e&&e<=_&&y<=t&&t<=b}function T(e,t,n,a){var i=0,r=0;if(null==e||(i=s(e,n))!==(r=s(t,n))||o(e,t)<0^0<n)for(;a.point(0===i||3===i?v:_,1<i?b:y),(i=(i+n+4)%4)!==r;);else a.point(t[0],t[1])}function s(e,t){return ds(e[0]-v)<rs?0<t?0:3:ds(e[0]-_)<rs?0<t?2:1:ds(e[1]-y)<rs?0<t?1:0:0<t?3:2}function w(e,t){return o(e.x,t.x)}function o(e,t){var n=s(e,1),a=s(t,1);return n!==a?n-a:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var i,h,r,s,o,l,c,u,d,f,p,m=a,e=rl(),t={point:n,lineStart:function(){t.point=g,h&&h.push(r=[]),d=!(f=!0),c=u=NaN},lineEnd:function(){i&&(g(s,o),l&&d&&e.rejoin(),i.push(e.result())),t.point=n,d&&m.lineEnd()},polygonStart:function(){m=e,i=[],h=[],p=!0},polygonEnd:function(){var e=function(){for(var e=0,t=0,n=h.length;t<n;++t)for(var a,i,r=h[t],s=1,o=r.length,l=r[0],c=l[0],u=l[1];s<o;++s)a=c,i=u,c=(l=r[s])[0],u=l[1],i<=b?b<u&&(u-i)*(v-a)<(c-a)*(b-i)&&++e:u<=b&&(c-a)*(b-i)<(u-i)*(v-a)&&--e;return e}(),t=p&&e,n=(i=D(i)).length;(t||n)&&(a.polygonStart(),t&&(a.lineStart(),T(null,null,1,a),a.lineEnd()),n&&ll(i,w,e,T,a),a.polygonEnd()),m=a,i=h=r=null}};function n(e,t){S(e,t)&&m.point(e,t)}function g(e,t){var n,a,i=S(e,t);h&&r.push([e,t]),f?(s=e,o=t,f=!1,(l=i)&&(m.lineStart(),m.point(e,t))):i&&d?m.point(e,t):!function(e,t){var n=e[0],a=e[1],i=0,r=1,s=t[0]-n,o=t[1]-a,l=v-n;if(s||!(0<l)){if(l/=s,s<0){if(l<i)return;l<r&&(r=l)}else if(0<s){if(r<l)return;i<l&&(i=l)}if(l=_-n,s||!(l<0)){if(l/=s,s<0){if(r<l)return;i<l&&(i=l)}else if(0<s){if(l<i)return;l<r&&(r=l)}if(l=y-a,o||!(0<l)){if(l/=o,o<0){if(l<i)return;l<r&&(r=l)}else if(0<o){if(r<l)return;i<l&&(i=l)}if(l=b-a,o||!(l<0)){if(l/=o,o<0){if(r<l)return;i<l&&(i=l)}else if(0<o){if(l<i)return;l<r&&(r=l)}return 0<i&&(e[0]=n+i*s,e[1]=a+i*o),r<1&&(t[0]=n+r*s,t[1]=a+r*o),1}}}}}(n=[c=Math.max(yl,Math.min(vl,c)),u=Math.max(yl,Math.min(vl,u))],a=[e=Math.max(yl,Math.min(vl,e)),t=Math.max(yl,Math.min(vl,t))])?i&&(m.lineStart(),m.point(e,t),p=!1):(d||(m.lineStart(),m.point(n[0],n[1])),m.point(a[0],a[1]),i||m.lineEnd(),p=!1),c=e,u=t,d=i}return t}}var bl,Sl,Tl,wl=ts(),Pl={sphere:Ds,point:Ds,lineStart:function(){Pl.point=Cl,Pl.lineEnd=xl},lineEnd:Ds,polygonStart:Ds,polygonEnd:Ds};function xl(){Pl.point=Pl.lineEnd=Ds}function Cl(e,t){bl=e*=hs,Sl=bs(t*=hs),Tl=ms(t),Pl.point=Dl}function Dl(e,t){e*=hs;var n=bs(t*=hs),a=ms(t),i=ds(e-bl),r=ms(i),s=a*bs(i),o=Tl*n-Sl*a*r,l=Sl*n+Tl*a*r;wl.add(ps(Ts(s*s+o*o),l)),bl=e,Sl=n,Tl=a}function El(e){return wl.reset(),$s(e,Pl),+wl}var Al=[null,null],kl={type:"LineString",coordinates:Al};function Il(e,t){return Al[0]=e,Al[1]=t,El(kl)}var Ml={Feature:function(e,t){return Ll(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,a=-1,i=n.length;++a<i;)if(Ll(n[a].geometry,t))return!0;return!1}},$l={Sphere:function(){return!0},Point:function(e,t){return Ol(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)if(Ol(n[a],t))return!0;return!1},LineString:function(e,t){return Rl(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)if(Rl(n[a],t))return!0;return!1},Polygon:function(e,t){return Nl(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)if(Nl(n[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,a=-1,i=n.length;++a<i;)if(Ll(n[a],t))return!0;return!1}};function Ll(e,t){return!(!e||!$l.hasOwnProperty(e.type))&&$l[e.type](e,t)}function Ol(e,t){return 0===Il(e,t)}function Rl(e,t){var n=Il(e[0],e[1]);return Il(e[0],t)+Il(t,e[1])<=n+rs}function Nl(e,t){return!!hl(e.map(Fl),Bl(t))}function Fl(e){return(e=e.map(Bl)).pop(),e}function Bl(e){return[e[0]*hs,e[1]*hs]}function Vl(e,t,n){var a=x(e,t-rs,n).concat(t);return function(t){return a.map(function(e){return[t,e]})}}function jl(e,t,n){var a=x(e,t-rs,n).concat(t);return function(t){return a.map(function(e){return[e,t]})}}function Ul(){var t,n,a,i,r,s,o,l,c,u,h,d,f=10,p=f,m=90,g=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:e()}}function e(){return x(gs(i/m)*m,a,m).map(h).concat(x(gs(l/g)*g,o,g).map(d)).concat(x(gs(n/f)*f,t,f).filter(function(e){return ds(e%m)>rs}).map(c)).concat(x(gs(s/p)*p,r,p).filter(function(e){return ds(e%g)>rs}).map(u))}return y.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(d(o).slice(1),h(a).reverse().slice(1),d(l).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(i=+e[0][0],a=+e[1][0],l=+e[0][1],o=+e[1][1],a<i&&(e=i,i=a,a=e),o<l&&(e=l,l=o,o=e),y.precision(v)):[[i,l],[a,o]]},y.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],s=+e[0][1],r=+e[1][1],t<n&&(e=n,n=t,t=e),r<s&&(e=s,s=r,r=e),y.precision(v)):[[n,s],[t,r]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(m=+e[0],g=+e[1],y):[m,g]},y.stepMinor=function(e){return arguments.length?(f=+e[0],p=+e[1],y):[f,p]},y.precision=function(e){return arguments.length?(v=+e,c=Vl(s,r,90),u=jl(n,t,v),h=Vl(l,o,90),d=jl(i,a,v),y):v},y.extentMajor([[-180,-90+rs],[180,90-rs]]).extentMinor([[-180,-80-rs],[180,80+rs]])}function Hl(e){return e}var Gl,Yl,ql,zl,Wl=ts(),Kl=ts(),Xl={point:Ds,lineStart:Ds,lineEnd:Ds,polygonStart:function(){Xl.lineStart=Ql,Xl.lineEnd=ec},polygonEnd:function(){Xl.lineStart=Xl.lineEnd=Xl.point=Ds,Wl.add(ds(Kl)),Kl.reset()},result:function(){var e=Wl/2;return Wl.reset(),e}};function Ql(){Xl.point=Jl}function Jl(e,t){Xl.point=Zl,Gl=ql=e,Yl=zl=t}function Zl(e,t){Kl.add(zl*e-ql*t),ql=e,zl=t}function ec(){Zl(Gl,Yl)}var tc,nc,ac,ic,rc=1/0,sc=rc,oc=-rc,lc=oc,cc={point:function(e,t){e<rc&&(rc=e),oc<e&&(oc=e),t<sc&&(sc=t),lc<t&&(lc=t)},lineStart:Ds,lineEnd:Ds,polygonStart:Ds,polygonEnd:Ds,result:function(){var e=[[rc,sc],[oc,lc]];return oc=lc=-(sc=rc=1/0),e}},uc=0,hc=0,dc=0,fc=0,pc=0,mc=0,gc=0,vc=0,yc=0,_c={point:bc,lineStart:Sc,lineEnd:Pc,polygonStart:function(){_c.lineStart=xc,_c.lineEnd=Cc},polygonEnd:function(){_c.point=bc,_c.lineStart=Sc,_c.lineEnd=Pc},result:function(){var e=yc?[gc/yc,vc/yc]:mc?[fc/mc,pc/mc]:dc?[uc/dc,hc/dc]:[NaN,NaN];return uc=hc=dc=fc=pc=mc=gc=vc=yc=0,e}};function bc(e,t){uc+=e,hc+=t,++dc}function Sc(){_c.point=Tc}function Tc(e,t){_c.point=wc,bc(ac=e,ic=t)}function wc(e,t){var n=e-ac,a=t-ic,i=Ts(n*n+a*a);fc+=i*(ac+e)/2,pc+=i*(ic+t)/2,mc+=i,bc(ac=e,ic=t)}function Pc(){_c.point=bc}function xc(){_c.point=Dc}function Cc(){Ec(tc,nc)}function Dc(e,t){_c.point=Ec,bc(tc=ac=e,nc=ic=t)}function Ec(e,t){var n=e-ac,a=t-ic,i=Ts(n*n+a*a);fc+=i*(ac+e)/2,pc+=i*(ic+t)/2,mc+=i,gc+=(i=ic*e-ac*t)*(ac+e),vc+=i*(ic+t),yc+=3*i,bc(ac=e,ic=t)}function Ac(e){this._context=e}Ac.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,cs)}},result:Ds};var kc,Ic,Mc,$c,Lc,Oc=ts(),Rc={point:Ds,lineStart:function(){Rc.point=Nc},lineEnd:function(){kc&&Fc(Ic,Mc),Rc.point=Ds},polygonStart:function(){kc=!0},polygonEnd:function(){kc=null},result:function(){var e=+Oc;return Oc.reset(),e}};function Nc(e,t){Rc.point=Fc,Ic=$c=e,Mc=Lc=t}function Fc(e,t){$c-=e,Lc-=t,Oc.add(Ts($c*$c+Lc*Lc)),$c=e,Lc=t}function Bc(){this._string=[]}function Vc(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function jc(a){return function(e){var t,n=new Uc;for(t in a)n[t]=a[t];return n.stream=e,n}}function Uc(){}function Hc(e,t,n){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=a&&e.clipExtent(null),$s(n,e.stream(cc)),t(cc.result()),null!=a&&e.clipExtent(a),e}function Gc(s,o,e){return Hc(s,function(e){var t=o[1][0]-o[0][0],n=o[1][1]-o[0][1],a=Math.min(t/(e[1][0]-e[0][0]),n/(e[1][1]-e[0][1])),i=+o[0][0]+(t-a*(e[1][0]+e[0][0]))/2,r=+o[0][1]+(n-a*(e[1][1]+e[0][1]))/2;s.scale(150*a).translate([i,r])},e)}function Yc(e,t,n){return Gc(e,[[0,0],t],n)}function qc(r,s,e){return Hc(r,function(e){var t=+s,n=t/(e[1][0]-e[0][0]),a=(t-n*(e[1][0]+e[0][0]))/2,i=-n*e[0][1];r.scale(150*n).translate([a,i])},e)}function zc(r,s,e){return Hc(r,function(e){var t=+s,n=t/(e[1][1]-e[0][1]),a=-n*e[0][0],i=(t-n*(e[1][1]+e[0][1]))/2;r.scale(150*n).translate([a,i])},e)}Bc.prototype={_radius:4.5,_circle:Vc(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Vc(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},Uc.prototype={constructor:Uc,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Wc=16,Kc=ms(30*hs);function Xc(e,t){return+t?(A=e,k=t,function(i){var n,a,r,s,o,l,c,u,h,d,f,p,m={point:e,lineStart:t,lineEnd:v,polygonStart:function(){i.polygonStart(),m.lineStart=y},polygonEnd:function(){i.polygonEnd(),m.lineStart=t}};function e(e,t){e=A(e,t),i.point(e[0],e[1])}function t(){u=NaN,m.point=g,i.lineStart()}function g(e,t){var n=zs([e,t]),a=A(e,t);I(u,h,c,d,f,p,u=a[0],h=a[1],c=e,d=n[0],f=n[1],p=n[2],Wc,i),i.point(u,h)}function v(){m.point=e,i.lineEnd()}function y(){t(),m.point=_,m.lineEnd=b}function _(e,t){g(n=e,t),a=u,r=h,s=d,o=f,l=p,m.point=g}function b(){I(u,h,c,d,f,p,a,r,n,s,o,l,Wc,i),m.lineEnd=v,v()}return m}):(n=e,jc({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}));var n,A,k;function I(e,t,n,a,i,r,s,o,l,c,u,h,d,f){var p,m,g,v,y,_,b,S,T,w,P,x,C=s-e,D=o-t,E=C*C+D*D;4*k<E&&d--&&(g=r+h,y=xs(g/=v=Ts((p=a+c)*p+(m=i+u)*m+g*g)),_=ds(ds(g)-1)<rs||ds(n-l)<rs?(n+l)/2:ps(m,p),S=(b=A(_,y))[0],T=b[1],(k<(x=D*(w=S-e)-C*(P=T-t))*x/E||.3<ds((C*w+D*P)/E-.5)||a*c+i*u+r*h<Kc)&&(I(e,t,n,a,i,r,S,T,_,p/=v,m/=v,g,d,f),f.point(S,T),I(S,T,_,p,m,g,s,o,l,c,u,h,d,f)))}}var Qc=jc({point:function(e,t){this.stream.point(e*hs,t*hs)}});function Jc(e,n,a,t){var i=ms(t),r=bs(t),s=i*e,o=r*e,l=i/e,c=r/e,u=(r*a-i*n)/e,h=(r*n+i*a)/e;function d(e,t){return[s*e-o*t+n,a-o*e-s*t]}return d.invert=function(e,t){return[l*e-c*t+u,h-c*e-l*t]},d}function Zc(e){return eu(function(){return e})()}function eu(e){var n,i,t,a,r,s,o,l,c,u,h=150,d=480,f=250,p=0,m=0,g=0,v=0,y=0,_=0,b=null,S=ml,T=null,w=Hl,P=.5;function x(e){return l(e[0]*hs,e[1]*hs)}function C(e){return(e=l.invert(e[0],e[1]))&&[e[0]*us,e[1]*us]}function D(){var e=Jc(h,0,0,_).apply(null,n(p,m)),t=(_?Jc:function(n,a,i){function e(e,t){return[a+n*e,i-n*t]}return e.invert=function(e,t){return[(e-a)/n,(i-t)/n]},e})(h,d-e[0],f-e[1],_);return i=Jo(g,v,y),o=Xo(n,t),l=Xo(i,o),s=Xc(o,P),E()}function E(){return c=u=null,x}return x.stream=function(e){return c&&u===e?c:c=Qc((a=i,jc({point:function(e,t){var n=a(e,t);return this.stream.point(n[0],n[1])}})(S(s(w(u=e))))));var a},x.preclip=function(e){return arguments.length?(S=e,b=void 0,E()):S},x.postclip=function(e){return arguments.length?(w=e,T=t=a=r=null,E()):w},x.clipAngle=function(e){return arguments.length?(S=+e?gl(b=e*hs):(b=null,ml),E()):b*us},x.clipExtent=function(e){return arguments.length?(w=null==e?(T=t=a=r=null,Hl):_l(T=+e[0][0],t=+e[0][1],a=+e[1][0],r=+e[1][1]),E()):null==T?null:[[T,t],[a,r]]},x.scale=function(e){return arguments.length?(h=+e,D()):h},x.translate=function(e){return arguments.length?(d=+e[0],f=+e[1],D()):[d,f]},x.center=function(e){return arguments.length?(p=e[0]%360*hs,m=e[1]%360*hs,D()):[p*us,m*us]},x.rotate=function(e){return arguments.length?(g=e[0]%360*hs,v=e[1]%360*hs,y=2<e.length?e[2]%360*hs:0,D()):[g*us,v*us,y*us]},x.angle=function(e){return arguments.length?(_=e%360*hs,D()):_*us},x.precision=function(e){return arguments.length?(s=Xc(o,P=e*e),E()):Ts(P)},x.fitExtent=function(e,t){return Gc(x,e,t)},x.fitSize=function(e,t){return Yc(x,e,t)},x.fitWidth=function(e,t){return qc(x,e,t)},x.fitHeight=function(e,t){return zc(x,e,t)},function(){return n=e.apply(this,arguments),x.invert=n.invert&&C,D()}}function tu(e){var t=0,n=ss/3,a=eu(e),i=a(t,n);return i.parallels=function(e){return arguments.length?a(t=e[0]*hs,n=e[1]*hs):[t*us,n*us]},i}function nu(e,t){var n,a=bs(e),i=(a+bs(t))/2;if(ds(i)<rs)return n=ms(e),r.invert=function(e,t){return[e/n,xs(t*n)]},r;function r(e,t){return[e*n,bs(t)/n]}var s=1+a*(2*i-a),o=Ts(s)/i;function l(e,t){var n=Ts(s-2*i*bs(t))/i;return[n*bs(e*=i),o-n*ms(e)]}return l.invert=function(e,t){var n=o-t;return[ps(e,ds(n))/i*Ss(n),xs((s-(e*e+n*n)*i*i)/(2*i))]},l}function au(){return tu(nu).scale(155.424).center([0,33.6442])}function iu(){return au().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ru(r){return function(e,t){var n=ms(e),a=ms(t),i=r(n*a);return[i*a*bs(e),i*bs(t)]}}function su(s){return function(e,t){var n=Ts(e*e+t*t),a=s(n),i=bs(a),r=ms(a);return[ps(e*i,n*r),xs(n&&t*i/n)]}}var ou=ru(function(e){return Ts(2/(1+e))});ou.invert=su(function(e){return 2*xs(e/2)});var lu=ru(function(e){return(e=Ps(e))&&e/bs(e)});function cu(e,t){return[e,ys(ws((os+t)/2))]}function uu(n){var a,i,r,s=Zc(n),t=s.center,o=s.scale,l=s.translate,c=s.clipExtent,u=null;function h(){var e=ss*o(),t=s(nl(s.rotate()).invert([0,0]));return c(null==u?[[t[0]-e,t[1]-e],[t[0]+e,t[1]+e]]:n===cu?[[Math.max(t[0]-e,u),a],[Math.min(t[0]+e,i),r]]:[[u,Math.max(t[1]-e,a)],[i,Math.min(t[1]+e,r)]])}return s.scale=function(e){return arguments.length?(o(e),h()):o()},s.translate=function(e){return arguments.length?(l(e),h()):l()},s.center=function(e){return arguments.length?(t(e),h()):t()},s.clipExtent=function(e){return arguments.length?(null==e?u=a=i=r=null:(u=+e[0][0],a=+e[0][1],i=+e[1][0],r=+e[1][1]),h()):null==u?null:[[u,a],[i,r]]},h()}function hu(e){return ws((os+e)/2)}function du(e,t){var n=ms(e),i=e===t?bs(e):ys(n/ms(t))/ys(hu(t)/hu(e)),r=n*_s(hu(e),i)/i;if(!i)return cu;function a(e,t){0<r?t<-os+rs&&(t=-os+rs):os-rs<t&&(t=os-rs);var n=r/_s(hu(t),i);return[n*bs(i*e),r-n*ms(i*e)]}return a.invert=function(e,t){var n=r-t,a=Ss(i)*Ts(e*e+n*n);return[ps(e,ds(n))/i*Ss(n),2*fs(_s(r/a,1/i))-os]},a}function fu(e,t){return[e,t]}function pu(e,t){var n=ms(e),i=e===t?bs(e):(n-ms(t))/(t-e),r=n/i+e;if(ds(i)<rs)return fu;function a(e,t){var n=r-t,a=i*e;return[n*bs(a),r-n*ms(a)]}return a.invert=function(e,t){var n=r-t;return[ps(e,ds(n))/i*Ss(n),r-Ss(i)*Ts(e*e+n*n)]},a}lu.invert=su(function(e){return e}),cu.invert=function(e,t){return[e,2*fs(vs(t))-os]},fu.invert=fu;var mu=1.340264,gu=-.081106,vu=893e-6,yu=.003796,_u=Ts(3)/2;function bu(e,t){var n=xs(_u*bs(t)),a=n*n,i=a*a*a;return[e*ms(n)/(_u*(mu+3*gu*a+i*(7*vu+9*yu*a))),n*(mu+gu*a+i*(vu+yu*a))]}function Su(e,t){var n=ms(t),a=ms(e)*n;return[n*bs(e)/a,bs(t)/a]}function Tu(n,a,i,r){return 1===n&&1===a&&0===i&&0===r?Hl:jc({point:function(e,t){this.stream.point(e*n+i,t*a+r)}})}function wu(e,t){var n=t*t,a=n*n;return[e*(.8707-.131979*n+a*(a*(.003971*n-.001529*a)-.013791)),t*(1.007226+n*(.015085+a*(.028874*n-.044475-.005916*a)))]}function Pu(e,t){return[ms(t)*bs(e),bs(t)]}function xu(e,t){var n=ms(t),a=1+ms(e)*n;return[n*bs(e)/a,bs(t)/a]}function Cu(e,t){return[ys(ws((os+t)/2)),-e]}function Du(e,t){return e.parent===t.parent?1:2}function Eu(e,t){return e+t.x}function Au(e,t){return Math.max(e,t.y)}function ku(e){var t=0,n=e.children,a=n&&n.length;if(a)for(;0<=--a;)t+=n[a].value;else t=1;e.value=t}function Iu(e,t){var n,a,i,r,s,o=new Ou(e),l=+e.value&&(o.value=e.value),c=[o];for(null==t&&(t=Mu);n=c.pop();)if(l&&(n.value=+n.data.value),(i=t(n.data))&&(s=i.length))for(n.children=new Array(s),r=s-1;0<=r;--r)c.push(a=n.children[r]=new Ou(i[r])),a.parent=n,a.depth=n.depth+1;return o.eachBefore(Lu)}function Mu(e){return e.children}function $u(e){e.data=e.data.data}function Lu(e){for(var t=0;e.height=t,(e=e.parent)&&e.height<++t;);}function Ou(e){this.data=e,this.depth=this.height=0,this.parent=null}bu.invert=function(e,t){for(var n,a=t,i=a*a,r=i*i*i,s=0;s<12&&(r=(i=(a-=n=(a*(mu+gu*i+r*(vu+yu*i))-t)/(mu+3*gu*i+r*(7*vu+9*yu*i)))*a)*i*i,!(ds(n)<1e-12));++s);return[_u*e*(mu+3*gu*i+r*(7*vu+9*yu*i))/ms(a),xs(bs(a)/_u)]},Su.invert=su(fs),wu.invert=function(e,t){var n,a=t,i=25;do{var r=a*a,s=r*r;a-=n=(a*(1.007226+r*(.015085+s*(.028874*r-.044475-.005916*s)))-t)/(1.007226+r*(.045255+s*(.259866*r-.311325-.005916*11*s)))}while(ds(n)>rs&&0<--i);return[e/(.8707+(r=a*a)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),a]},Pu.invert=su(xs),xu.invert=su(function(e){return 2*fs(e)}),Cu.invert=function(e,t){return[-t,2*fs(vs(e))-os]},Ou.prototype=Iu.prototype={constructor:Ou,count:function(){return this.eachAfter(ku)},each:function(e){var t,n,a,i,r,s=[this];do{for(t=s.reverse(),s=[];r=t.pop();)if(e(r),n=r.children)for(a=0,i=n.length;a<i;++a)s.push(n[a])}while(s.length);return this},eachAfter:function(e){for(var t,n,a,i=this,r=[i],s=[];i=r.pop();)if(s.push(i),t=i.children)for(n=0,a=t.length;n<a;++n)r.push(t[n]);for(;i=s.pop();)e(i);return this},eachBefore:function(e){for(var t,n,a,i=[this];a=i.pop();)if(e(a),t=a.children)for(n=t.length-1;0<=n;--n)i.push(t[n]);return this},sum:function(i){return this.eachAfter(function(e){for(var t=+i(e.data)||0,n=e.children,a=n&&n.length;0<=--a;)t+=n[a].value;e.value=t})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),a=t.ancestors(),i=null;for(e=n.pop(),t=a.pop();e===t;)i=e,e=n.pop(),t=a.pop();return i}(t,e),a=[t];t!==n;)t=t.parent,a.push(t);for(var i=a.length;e!==n;)a.splice(i,0,e),e=e.parent;return a},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n},copy:function(){return Iu(this).eachBefore($u)}};var Ru=Array.prototype.slice;function Nu(e){for(var t,n,a=0,i=(e=function(e){for(var t,n,a=e.length;a;)n=Math.random()*a--|0,t=e[a],e[a]=e[n],e[n]=t;return e}(Ru.call(e))).length,r=[];a<i;)t=e[a],n&&Bu(n,t)?++a:(n=function(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return ju(e[0],e[1]);case 3:return Uu(e[0],e[1],e[2])}var t}(r=function(e,t){var n,a;if(Vu(t,e))return[t];for(n=0;n<e.length;++n)if(Fu(t,e[n])&&Vu(ju(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(a=n+1;a<e.length;++a)if(Fu(ju(e[n],e[a]),t)&&Fu(ju(e[n],t),e[a])&&Fu(ju(e[a],t),e[n])&&Vu(Uu(e[n],e[a],t),e))return[e[n],e[a],t];throw new Error}(r,t)),a=0);return n}function Fu(e,t){var n=e.r-t.r,a=t.x-e.x,i=t.y-e.y;return n<0||n*n<a*a+i*i}function Bu(e,t){var n=e.r-t.r+1e-6,a=t.x-e.x,i=t.y-e.y;return 0<n&&a*a+i*i<n*n}function Vu(e,t){for(var n=0;n<t.length;++n)if(!Bu(e,t[n]))return;return 1}function ju(e,t){var n=e.x,a=e.y,i=e.r,r=t.x,s=t.y,o=t.r,l=r-n,c=s-a,u=o-i,h=Math.sqrt(l*l+c*c);return{x:(n+r+l/h*u)/2,y:(a+s+c/h*u)/2,r:(h+i+o)/2}}function Uu(e,t,n){var a=e.x,i=e.y,r=e.r,s=t.x,o=t.y,l=t.r,c=n.x,u=n.y,h=n.r,d=a-s,f=a-c,p=i-o,m=i-u,g=l-r,v=h-r,y=a*a+i*i-r*r,_=y-s*s-o*o+l*l,b=y-c*c-u*u+h*h,S=f*p-d*m,T=(p*b-m*_)/(2*S)-a,w=(m*g-p*v)/S,P=(f*_-d*b)/(2*S)-i,x=(d*v-f*g)/S,C=w*w+x*x-1,D=2*(r+T*w+P*x),E=T*T+P*P-r*r,A=-(C?(D+Math.sqrt(D*D-4*C*E))/(2*C):E/D);return{x:a+T+w*A,y:i+P+x*A,r:A}}function Hu(e,t,n){var a,i,r,s,o=e.x-t.x,l=e.y-t.y,c=o*o+l*l;c?(i=t.r+n.r,i*=i,s=e.r+n.r,i>(s*=s)?(a=(c+s-i)/(2*c),r=Math.sqrt(Math.max(0,s/c-a*a)),n.x=e.x-a*o-r*l,n.y=e.y-a*l+r*o):(a=(c+i-s)/(2*c),r=Math.sqrt(Math.max(0,i/c-a*a)),n.x=t.x+a*o-r*l,n.y=t.y+a*l+r*o)):(n.x=t.x+n.r,n.y=t.y)}function Gu(e,t){var n=e.r+t.r-1e-6,a=t.x-e.x,i=t.y-e.y;return 0<n&&a*a+i*i<n*n}function Yu(e){var t=e._,n=e.next._,a=t.r+n.r,i=(t.x*n.r+n.x*t.r)/a,r=(t.y*n.r+n.y*t.r)/a;return i*i+r*r}function qu(e){this._=e,this.next=null,this.previous=null}function zu(e){if(!(i=e.length))return 0;var t,n,a,i,r,s,o,l,c,u,h;if((t=e[0]).x=0,t.y=0,!(1<i))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(2<i))return t.r+n.r;Hu(n,t,a=e[2]),t=new qu(t),n=new qu(n),a=new qu(a),((t.next=a.previous=n).next=t.previous=a).next=n.previous=t;e:for(o=3;o<i;++o){Hu(t._,n._,a=e[o]),a=new qu(a),l=n.next,c=t.previous,u=n._.r,h=t._.r;do{if(u<=h){if(Gu(l._,a._)){n=l,(t.next=n).previous=t,--o;continue e}u+=l._.r,l=l.next}else{if(Gu(c._,a._)){((t=c).next=n).previous=t,--o;continue e}h+=c._.r,c=c.previous}}while(l!==c.next);for(a.previous=t,a.next=n,t.next=n.previous=n=a,r=Yu(t);(a=a.next)!==n;)(s=Yu(a))<r&&(t=a,r=s);n=t.next}for(t=[n._],a=n;(a=a.next)!==n;)t.push(a._);for(a=Nu(t),o=0;o<i;++o)(t=e[o]).x-=a.x,t.y-=a.y;return a.r}function Wu(e){if("function"!=typeof e)throw new Error;return e}function Ku(){return 0}function Xu(e){return function(){return e}}function Qu(e){return Math.sqrt(e.value)}function Ju(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Zu(s,o){return function(e){if(t=e.children){var t,n,a,i=t.length,r=s(e)*o||0;if(r)for(n=0;n<i;++n)t[n].r+=r;if(a=zu(t),r)for(n=0;n<i;++n)t[n].r-=r;e.r=a+r}}}function eh(n){return function(e){var t=e.parent;e.r*=n,t&&(e.x=t.x+n*e.x,e.y=t.y+n*e.y)}}function th(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function nh(e,t,n,a,i){for(var r,s=e.children,o=-1,l=s.length,c=e.value&&(a-t)/e.value;++o<l;)(r=s[o]).y0=n,r.y1=i,r.x0=t,r.x1=t+=r.value*c}var ah={depth:-1},ih={};function rh(e){return e.id}function sh(e){return e.parentId}function oh(e,t){return e.parent===t.parent?1:2}function lh(e){var t=e.children;return t?t[0]:e.t}function ch(e){var t=e.children;return t?t[t.length-1]:e.t}function uh(e,t){this._=e,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function hh(e,t,n,a,i){for(var r,s=e.children,o=-1,l=s.length,c=e.value&&(i-n)/e.value;++o<l;)(r=s[o]).x0=t,r.x1=a,r.y0=n,r.y1=n+=r.value*c}uh.prototype=Object.create(Ou.prototype);var dh=(1+Math.sqrt(5))/2;function fh(e,t,n,a,i,r){for(var s,o,l,c,u,h,d,f,p,m,g,v=[],y=t.children,_=0,b=0,S=y.length,T=t.value;_<S;){for(l=i-n,c=r-a;!(u=y[b++].value)&&b<S;);for(g=(h=d=u)*u*(m=Math.max(c/l,l/c)/(T*e)),p=Math.max(d/g,g/h);b<S;++b){if(u+=o=y[b].value,o<h&&(h=o),d<o&&(d=o),g=u*u*m,(f=Math.max(d/g,g/h))>p){u-=o;break}p=f}v.push(s={value:u,dice:l<c,children:y.slice(_,b)}),s.dice?nh(s,n,a,i,T?a+=c*u/T:r):hh(s,n,a,T?n+=l*u/T:i,r),T-=u,_=b}return v}var ph=function t(r){function e(e,t,n,a,i){fh(r,e,t,n,a,i)}return e.ratio=function(e){return t(1<(e=+e)?e:1)},e}(dh),mh=function t(f){function e(e,t,n,a,i){if((r=e._squarify)&&r.ratio===f)for(var r,s,o,l,c,u=-1,h=r.length,d=e.value;++u<h;){for(o=(s=r[u]).children,l=s.value=0,c=o.length;l<c;++l)s.value+=o[l].value;s.dice?nh(s,t,n,a,n+=(i-n)*s.value/d):hh(s,t,n,t+=(a-t)*s.value/d,i),d-=s.value}else e._squarify=r=fh(f,e,t,n,a,i),r.ratio=f}return e.ratio=function(e){return t(1<(e=+e)?e:1)},e}(dh);function gh(e,t){return e[0]-t[0]||e[1]-t[1]}function vh(e){for(var t,n,a,i=e.length,r=[0,1],s=2,o=2;o<i;++o){for(;1<s&&(t=e[r[s-2]],n=e[r[s-1]],a=e[o],(n[0]-t[0])*(a[1]-t[1])-(n[1]-t[1])*(a[0]-t[0])<=0);)--s;r[s++]=o}return r.slice(0,s)}function yh(){return Math.random()}var _h=function e(n){function t(e,t){return e=null==e?0:+e,t=null==t?1:+t,1===arguments.length?(t=e,e=0):t-=e,function(){return n()*t+e}}return t.source=e,t}(yh),bh=function e(r){function t(t,n){var a,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var e;if(null!=a)e=a,a=null;else for(;a=2*r()-1,e=2*r()-1,!(i=a*a+e*e)||1<i;);return t+n*e*Math.sqrt(-2*Math.log(i)/i)}}return t.source=e,t}(yh),Sh=function e(t){function n(){var e=bh.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}(yh),Th=function e(a){function t(n){return function(){for(var e=0,t=0;t<n;++t)e+=a();return e}}return t.source=e,t}(yh),wh=function e(n){function t(e){var t=Th.source(n)(e);return function(){return t()/e}}return t.source=e,t}(yh),Ph=function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}(yh),xh=Array.prototype,Ch=xh.map,Dh=xh.slice,Eh={name:"implicit"};function Ah(a){var r=ki(),s=[],i=Eh;function o(e){var t=e+"",n=r.get(t);if(!n){if(i!==Eh)return i;r.set(t,n=s.push(e))}return a[(n-1)%a.length]}return a=null==a?[]:Dh.call(a),o.domain=function(e){if(!arguments.length)return s.slice();s=[],r=ki();for(var t,n,a=-1,i=e.length;++a<i;)r.has(n=(t=e[a])+"")||r.set(n,s.push(t));return o},o.range=function(e){return arguments.length?(a=Dh.call(e),o):a.slice()},o.unknown=function(e){return arguments.length?(i=e,o):i},o.copy=function(){return Ah().domain(s).range(a).unknown(i)},o}function kh(){var r,s,e=Ah().unknown(void 0),o=e.domain,l=e.range,c=[0,1],u=!1,h=0,d=0,f=.5;function t(){var e=o().length,t=c[1]<c[0],n=c[+t],a=c[1-t];r=(a-n)/Math.max(1,e-h+2*d),u&&(r=Math.floor(r)),n+=(a-n-r*(e-h))*f,s=r*(1-h),u&&(n=Math.round(n),s=Math.round(s));var i=x(e).map(function(e){return n+r*e});return l(t?i.reverse():i)}return delete e.unknown,e.domain=function(e){return arguments.length?(o(e),t()):o()},e.range=function(e){return arguments.length?(c=[+e[0],+e[1]],t()):c.slice()},e.rangeRound=function(e){return c=[+e[0],+e[1]],u=!0,t()},e.bandwidth=function(){return s},e.step=function(){return r},e.round=function(e){return arguments.length?(u=!!e,t()):u},e.padding=function(e){return arguments.length?(h=d=Math.max(0,Math.min(1,e)),t()):h},e.paddingInner=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),t()):h},e.paddingOuter=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),t()):d},e.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),t()):f},e.copy=function(){return kh().domain(o()).range(c).round(u).paddingInner(h).paddingOuter(d).align(f)},t()}function Ih(e){return function(){return e}}function Mh(e){return+e}var $h=[0,1];function Lh(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:Ih(n)}function Oh(e,t,n,a){var i=e[0],r=e[1],s=t[0],o=t[1],s=r<i?(i=n(r,i),a(o,s)):(i=n(i,r),a(s,o));return function(e){return s(i(e))}}function Rh(n,e,t,a){var i=Math.min(n.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=t(n[o],n[o+1]),s[o]=a(e[o],e[o+1]);return function(e){var t=m(n,e,1,i)-1;return s[t](r[t](e))}}function Nh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function Fh(t,n){var a,r,s,o=$h,l=$h,c=un,u=!1;function i(){return a=2<Math.min(o.length,l.length)?Rh:Oh,r=s=null,e}function e(e){return(r=r||a(o,l,u?(i=t,function(t,n){var a=i(t=+t,n=+n);return function(e){return e<=t?0:n<=e?1:a(e)}}):t,c))(+e);var i}return e.invert=function(e){return(s=s||a(l,o,Lh,u?(i=n,function(t,n){var a=i(t=+t,n=+n);return function(e){return e<=0?t:1<=e?n:a(e)}}):n))(+e);var i},e.domain=function(e){return arguments.length?(o=Ch.call(e,Mh),i()):o.slice()},e.range=function(e){return arguments.length?(l=Dh.call(e),i()):l.slice()},e.rangeRound=function(e){return l=Dh.call(e),c=hn,i()},e.clamp=function(e){return arguments.length?(u=!!e,i()):u},e.interpolate=function(e){return arguments.length?(c=e,i()):c},i()}function Bh(o){var l=o.domain;return o.ticks=function(e){var t=l();return v(t[0],t[t.length-1],null==e?10:e)},o.tickFormat=function(o,e){return function(e,t){var n,a=e[0],i=e[e.length-1],r=C(a,i,null==o?10:o);switch((t=Hr(null==t?",f":t)).type){case"s":var s=Math.max(Math.abs(a),Math.abs(i));return null!=t.precision||isNaN(n=Zr(r,s))||(t.precision=n),V.formatPrefix(t,s);case"":case"e":case"g":case"p":case"r":null!=t.precision||isNaN(n=es(r,Math.max(Math.abs(a),Math.abs(i))))||(t.precision=n-("e"===t.type));break;case"f":case"%":null!=t.precision||isNaN(n=Jr(r))||(t.precision=n-2*("%"===t.type))}return V.format(t)}(l(),e)},o.nice=function(e){null==e&&(e=10);var t,n=l(),a=0,i=n.length-1,r=n[a],s=n[i];return s<r&&(t=r,r=s,s=t,t=a,a=i,i=t),0<(t=y(r,s,e))?t=y(r=Math.floor(r/t)*t,s=Math.ceil(s/t)*t,e):t<0&&(t=y(r=Math.ceil(r*t)/t,s=Math.floor(s*t)/t,e)),0<t?(n[a]=Math.floor(r/t)*t,n[i]=Math.ceil(s/t)*t,l(n)):t<0&&(n[a]=Math.ceil(r*t)/t,n[i]=Math.floor(s*t)/t,l(n)),o},o}function Vh(e,t){var n,a=0,i=(e=e.slice()).length-1,r=e[a],s=e[i];return s<r&&(n=a,a=i,i=n,n=r,r=s,s=n),e[a]=t.floor(r),e[i]=t.ceil(s),e}function jh(t,n){return(n=Math.log(n/t))?function(e){return Math.log(e/t)/n}:Ih(n)}function Uh(t,n){return t<0?function(e){return-Math.pow(-n,e)*Math.pow(-t,1-e)}:function(e){return Math.pow(n,e)*Math.pow(t,1-e)}}function Hh(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Gh(t){return 10===t?Hh:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Yh(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function qh(t){return function(e){return-t(-e)}}function zh(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function Wh(){var a=1,e=Fh(function(t,n){return(n=zh(n,a)-(t=zh(t,a)))?function(e){return(zh(e,a)-t)/n}:Ih(n)},function(t,n){return n=zh(n,a)-(t=zh(t,a)),function(e){return zh(t+n*e,1/a)}}),t=e.domain;return e.exponent=function(e){return arguments.length?(a=+e,t(t())):a},e.copy=function(){return Nh(e,Wh().exponent(a))},Bh(e)}var Kh=new Date,Xh=new Date;function Qh(r,s,n,a){function o(e){return r(e=new Date(+e)),e}return(o.floor=o).ceil=function(e){return r(e=new Date(e-1)),s(e,1),r(e),e},o.round=function(e){var t=o(e),n=o.ceil(e);return e-t<n-e?t:n},o.offset=function(e,t){return s(e=new Date(+e),null==t?1:Math.floor(t)),e},o.range=function(e,t,n){var a,i=[];if(e=o.ceil(e),n=null==n?1:Math.floor(n),!(e<t&&0<n))return i;for(;i.push(a=new Date(+e)),s(e,n),r(e),a<e&&e<t;);return i},o.filter=function(n){return Qh(function(e){if(e<=e)for(;r(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(t<0)for(;++t<=0;)for(;s(e,-1),!n(e););else for(;0<=--t;)for(;s(e,1),!n(e););})},n&&(o.count=function(e,t){return Kh.setTime(+e),Xh.setTime(+t),r(Kh),r(Xh),Math.floor(n(Kh,Xh))},o.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?o.filter(a?function(e){return a(e)%t==0}:function(e){return o.count(0,e)%t==0}):o:null}),o}var Jh=Qh(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Jh.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?Qh(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):Jh:null};var Zh=Jh.range,ed=Qh(function(e){e.setTime(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),td=ed.range,nd=Qh(function(e){e.setTime(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),ad=nd.range,id=Qh(function(e){var t=6e4*e.getTimezoneOffset()%36e5;t<0&&(t+=36e5),e.setTime(36e5*Math.floor((e-t)/36e5)+t)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),rd=id.range,sd=Qh(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),od=sd.range;function ld(t){return Qh(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}var cd=ld(0),ud=ld(1),hd=ld(2),dd=ld(3),fd=ld(4),pd=ld(5),md=ld(6),gd=cd.range,vd=ud.range,yd=hd.range,_d=dd.range,bd=fd.range,Sd=pd.range,Td=md.range,wd=Qh(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),Pd=wd.range,xd=Qh(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});xd.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Qh(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)}):null};var Cd=xd.range,Dd=Qh(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),Ed=Dd.range,Ad=Qh(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),kd=Ad.range,Id=Qh(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),Md=Id.range;function $d(t){return Qh(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var Ld=$d(0),Od=$d(1),Rd=$d(2),Nd=$d(3),Fd=$d(4),Bd=$d(5),Vd=$d(6),jd=Ld.range,Ud=Od.range,Hd=Rd.range,Gd=Nd.range,Yd=Fd.range,qd=Bd.range,zd=Vd.range,Wd=Qh(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),Kd=Wd.range,Xd=Qh(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Xd.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Qh(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null};var Qd=Xd.range;function Jd(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Zd(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ef(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function tf(e){var a=e.dateTime,i=e.date,r=e.time,t=e.periods,n=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=uf(t),u=hf(t),h=uf(n),d=hf(n),f=uf(s),p=hf(s),m=uf(o),g=hf(o),v=uf(l),y=hf(l),_={a:function(e){return s[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:If,e:If,f:Rf,H:Mf,I:$f,j:Lf,L:Of,m:Nf,M:Ff,p:function(e){return t[+(12<=e.getHours())]},Q:dp,s:fp,S:Bf,u:Vf,U:jf,V:Uf,w:Hf,W:Gf,x:null,X:null,y:Yf,Y:qf,Z:zf,"%":hp},b={a:function(e){return s[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:Wf,e:Wf,f:Zf,H:Kf,I:Xf,j:Qf,L:Jf,m:ep,M:tp,p:function(e){return t[+(12<=e.getUTCHours())]},Q:dp,s:fp,S:np,u:ap,U:ip,V:rp,w:sp,W:op,x:null,X:null,y:lp,Y:cp,Z:up,"%":hp},S={a:function(e,t,n){var a=f.exec(t.slice(n));return a?(e.w=p[a[0].toLowerCase()],n+a[0].length):-1},A:function(e,t,n){var a=h.exec(t.slice(n));return a?(e.w=d[a[0].toLowerCase()],n+a[0].length):-1},b:function(e,t,n){var a=v.exec(t.slice(n));return a?(e.m=y[a[0].toLowerCase()],n+a[0].length):-1},B:function(e,t,n){var a=m.exec(t.slice(n));return a?(e.m=g[a[0].toLowerCase()],n+a[0].length):-1},c:function(e,t,n){return P(e,a,t,n)},d:Sf,e:Sf,f:Df,H:wf,I:wf,j:Tf,L:Cf,m:bf,M:Pf,p:function(e,t,n){var a=c.exec(t.slice(n));return a?(e.p=u[a[0].toLowerCase()],n+a[0].length):-1},Q:Af,s:kf,S:xf,u:ff,U:pf,V:mf,w:df,W:gf,x:function(e,t,n){return P(e,i,t,n)},X:function(e,t,n){return P(e,r,t,n)},y:yf,Y:vf,Z:_f,"%":Ef};function T(l,c){return function(e){var t,n,a,i=[],r=-1,s=0,o=l.length;for(e instanceof Date||(e=new Date(+e));++r<o;)37===l.charCodeAt(r)&&(i.push(l.slice(s,r)),null!=(n=af[t=l.charAt(++r)])?t=l.charAt(++r):n="e"===t?" ":"0",(a=c[t])&&(t=a(e,n)),i.push(t),s=r+1);return i.push(l.slice(s,r)),i.join("")}}function w(i,r){return function(e){var t,n,a=ef(1900);if(P(a,i,e+="",0)!=e.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||53<a.V)return null;"w"in a||(a.w=1),"Z"in a?(t=4<(n=(t=Zd(ef(a.y))).getUTCDay())||0===n?Od.ceil(t):Od(t),t=Id.offset(t,7*(a.V-1)),a.y=t.getUTCFullYear(),a.m=t.getUTCMonth(),a.d=t.getUTCDate()+(a.w+6)%7):(t=4<(n=(t=r(ef(a.y))).getDay())||0===n?ud.ceil(t):ud(t),t=sd.offset(t,7*(a.V-1)),a.y=t.getFullYear(),a.m=t.getMonth(),a.d=t.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),n="Z"in a?Zd(ef(a.y)).getUTCDay():r(ef(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(n+5)%7:a.w+7*a.U-(n+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Zd(a)):r(a)}}function P(e,t,n,a){for(var i,r,s=0,o=t.length,l=n.length;s<o;){if(l<=a)return-1;if(37===(i=t.charCodeAt(s++))){if(i=t.charAt(s++),!(r=S[i in af?t.charAt(s++):i])||(a=r(e,n,a))<0)return-1}else if(i!=n.charCodeAt(a++))return-1}return a}return _.x=T(i,_),_.X=T(r,_),_.c=T(a,_),b.x=T(i,b),b.X=T(r,b),b.c=T(a,b),{format:function(e){var t=T(e+="",_);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",Jd);return t.toString=function(){return e},t},utcFormat:function(e){var t=T(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e,Zd);return t.toString=function(){return e},t}}}var nf,af={"-":"",_:" ",0:"0"},rf=/^\s*\d+/,sf=/^%/,of=/[\\^$*+?|[\]().{}]/g;function lf(e,t,n){var a=e<0?"-":"",i=(a?-e:e)+"",r=i.length;return a+(r<n?new Array(n-r+1).join(t)+i:i)}function cf(e){return e.replace(of,"\\$&")}function uf(e){return new RegExp("^(?:"+e.map(cf).join("|")+")","i")}function hf(e){for(var t={},n=-1,a=e.length;++n<a;)t[e[n].toLowerCase()]=n;return t}function df(e,t,n){var a=rf.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function ff(e,t,n){var a=rf.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function pf(e,t,n){var a=rf.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function mf(e,t,n){var a=rf.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function gf(e,t,n){var a=rf.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function vf(e,t,n){var a=rf.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function yf(e,t,n){var a=rf.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(68<+a[0]?1900:2e3),n+a[0].length):-1}function _f(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function bf(e,t,n){var a=rf.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function Sf(e,t,n){var a=rf.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function Tf(e,t,n){var a=rf.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function wf(e,t,n){var a=rf.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function Pf(e,t,n){var a=rf.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function xf(e,t,n){var a=rf.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function Cf(e,t,n){var a=rf.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function Df(e,t,n){var a=rf.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function Ef(e,t,n){var a=sf.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function Af(e,t,n){var a=rf.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function kf(e,t,n){var a=rf.exec(t.slice(n));return a?(e.Q=1e3*a[0],n+a[0].length):-1}function If(e,t){return lf(e.getDate(),t,2)}function Mf(e,t){return lf(e.getHours(),t,2)}function $f(e,t){return lf(e.getHours()%12||12,t,2)}function Lf(e,t){return lf(1+sd.count(xd(e),e),t,3)}function Of(e,t){return lf(e.getMilliseconds(),t,3)}function Rf(e,t){return Of(e,t)+"000"}function Nf(e,t){return lf(e.getMonth()+1,t,2)}function Ff(e,t){return lf(e.getMinutes(),t,2)}function Bf(e,t){return lf(e.getSeconds(),t,2)}function Vf(e){var t=e.getDay();return 0===t?7:t}function jf(e,t){return lf(cd.count(xd(e),e),t,2)}function Uf(e,t){var n=e.getDay();return e=4<=n||0===n?fd(e):fd.ceil(e),lf(fd.count(xd(e),e)+(4===xd(e).getDay()),t,2)}function Hf(e){return e.getDay()}function Gf(e,t){return lf(ud.count(xd(e),e),t,2)}function Yf(e,t){return lf(e.getFullYear()%100,t,2)}function qf(e,t){return lf(e.getFullYear()%1e4,t,4)}function zf(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+lf(t/60|0,"0",2)+lf(t%60,"0",2)}function Wf(e,t){return lf(e.getUTCDate(),t,2)}function Kf(e,t){return lf(e.getUTCHours(),t,2)}function Xf(e,t){return lf(e.getUTCHours()%12||12,t,2)}function Qf(e,t){return lf(1+Id.count(Xd(e),e),t,3)}function Jf(e,t){return lf(e.getUTCMilliseconds(),t,3)}function Zf(e,t){return Jf(e,t)+"000"}function ep(e,t){return lf(e.getUTCMonth()+1,t,2)}function tp(e,t){return lf(e.getUTCMinutes(),t,2)}function np(e,t){return lf(e.getUTCSeconds(),t,2)}function ap(e){var t=e.getUTCDay();return 0===t?7:t}function ip(e,t){return lf(Ld.count(Xd(e),e),t,2)}function rp(e,t){var n=e.getUTCDay();return e=4<=n||0===n?Fd(e):Fd.ceil(e),lf(Fd.count(Xd(e),e)+(4===Xd(e).getUTCDay()),t,2)}function sp(e){return e.getUTCDay()}function op(e,t){return lf(Od.count(Xd(e),e),t,2)}function lp(e,t){return lf(e.getUTCFullYear()%100,t,2)}function cp(e,t){return lf(e.getUTCFullYear()%1e4,t,4)}function up(){return"+0000"}function hp(){return"%"}function dp(e){return+e}function fp(e){return Math.floor(e/1e3)}function pp(e){return nf=tf(e),V.timeFormat=nf.format,V.timeParse=nf.parse,V.utcFormat=nf.utcFormat,V.utcParse=nf.utcParse,nf}pp({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var mp=Date.prototype.toISOString?function(e){return e.toISOString()}:V.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),gp=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:V.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),vp=1e3,yp=60*vp,_p=60*yp,bp=24*_p,Sp=7*bp,Tp=30*bp,wp=365*bp;function Pp(e){return new Date(e)}function xp(e){return e instanceof Date?+e:+new Date(+e)}function Cp(s,t,n,a,i,r,o,l,c){var u=Fh(Lh,rn),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),_=c("%B"),b=c("%Y"),S=[[o,1,vp],[o,5,5*vp],[o,15,15*vp],[o,30,30*vp],[r,1,yp],[r,5,5*yp],[r,15,15*yp],[r,30,30*yp],[i,1,_p],[i,3,3*_p],[i,6,6*_p],[i,12,12*_p],[a,1,bp],[a,2,2*bp],[n,1,Sp],[t,1,Tp],[t,3,3*Tp],[s,1,wp]];function T(e){return(o(e)<e?f:r(e)<e?p:i(e)<e?m:a(e)<e?g:t(e)<e?n(e)<e?v:y:s(e)<e?_:b)(e)}function w(e,t,n,a){var i,r;return null==e&&(e=10),"number"==typeof e&&(i=Math.abs(n-t)/e,e=(r=P(function(e){return e[2]}).right(S,i))===S.length?(a=C(t/wp,n/wp,e),s):r?(a=(r=S[i/S[r-1][2]<S[r][2]/i?r-1:r])[1],r[0]):(a=Math.max(C(t,n,e),1),l)),null==a?e:e.every(a)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?d(Ch.call(e,xp)):d().map(Pp)},u.ticks=function(e,t){var n,a=d(),i=a[0],r=a[a.length-1],s=r<i;return s&&(n=i,i=r,r=n),n=(n=w(e,i,r,t))?n.range(i,r+1):[],s?n.reverse():n},u.tickFormat=function(e,t){return null==t?T:c(t)},u.nice=function(e,t){var n=d();return(e=w(e,n[0],n[n.length-1],t))?d(Vh(n,e)):u},u.copy=function(){return Nh(u,Cp(s,t,n,a,i,r,o,l,c))},u}function Dp(e){for(var t=e.length/6|0,n=new Array(t),a=0;a<t;)n[a]="#"+e.slice(6*a,6*++a);return n}var Ep=Dp("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ap=Dp("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),kp=Dp("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ip=Dp("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Mp=Dp("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),$p=Dp("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Lp=Dp("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Op=Dp("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Rp=Dp("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Np(e){return en(e[e.length-1])}var Fp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Dp),Bp=Np(Fp),Vp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Dp),jp=Np(Vp),Up=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Dp),Hp=Np(Up),Gp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Dp),Yp=Np(Gp),qp=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Dp),zp=Np(qp),Wp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Dp),Kp=Np(Wp),Xp=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Dp),Qp=Np(Xp),Jp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Dp),Zp=Np(Jp),em=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Dp),tm=Np(em),nm=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Dp),am=Np(nm),im=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Dp),rm=Np(im),sm=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Dp),om=Np(sm),lm=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Dp),cm=Np(lm),um=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Dp),hm=Np(um),dm=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Dp),fm=Np(dm),pm=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Dp),mm=Np(pm),gm=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Dp),vm=Np(gm),ym=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Dp),_m=Np(ym),bm=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Dp),Sm=Np(bm),Tm=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Dp),wm=Np(Tm),Pm=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Dp),xm=Np(Pm),Cm=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Dp),Dm=Np(Cm),Em=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Dp),Am=Np(Em),km=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Dp),Im=Np(km),Mm=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Dp),$m=Np(Mm),Lm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Dp),Om=Np(Lm),Rm=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Dp),Nm=Np(Rm),Fm=On(Ut(300,.5,0),Ut(-240,.5,1)),Bm=On(Ut(-100,.75,.35),Ut(80,1.5,.8)),Vm=On(Ut(260,.75,.35),Ut(80,1.5,.8)),jm=Ut(),Um=ht(),Hm=Math.PI/3,Gm=2*Math.PI/3;function Ym(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}var qm=Ym(Dp("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),zm=Ym(Dp("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Wm=Ym(Dp("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Km=Ym(Dp("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Xm(e){return function(){return e}}var Qm=Math.abs,Jm=Math.atan2,Zm=Math.cos,eg=Math.max,tg=Math.min,ng=Math.sin,ag=Math.sqrt,ig=1e-12,rg=Math.PI,sg=rg/2,og=2*rg;function lg(e){return 1<=e?sg:e<=-1?-sg:Math.asin(e)}function cg(e){return e.innerRadius}function ug(e){return e.outerRadius}function hg(e){return e.startAngle}function dg(e){return e.endAngle}function fg(e){return e&&e.padAngle}function pg(e,t,n,a,i,r,s){var o=e-n,l=t-a,c=(s?r:-r)/ag(o*o+l*l),u=c*l,h=-c*o,d=e+u,f=t+h,p=n+u,m=a+h,g=(d+p)/2,v=(f+m)/2,y=p-d,_=m-f,b=y*y+_*_,S=i-r,T=d*m-p*f,w=(_<0?-1:1)*ag(eg(0,S*S*b-T*T)),P=(T*_-y*w)/b,x=(-T*y-_*w)/b,C=(T*_+y*w)/b,D=(-T*y+_*w)/b,E=P-g,A=x-v,k=C-g,I=D-v;return k*k+I*I<E*E+A*A&&(P=C,x=D),{cx:P,cy:x,x01:-u,y01:-h,x11:P*(i/S-1),y11:x*(i/S-1)}}function mg(e){this._context=e}function gg(e){return new mg(e)}function vg(e){return e[0]}function yg(e){return e[1]}function _g(){var s=vg,o=yg,l=Xm(!0),c=null,u=gg,h=null;function t(e){var t,n,a,i=e.length,r=!1;for(null==c&&(h=u(a=wi())),t=0;t<=i;++t)!(t<i&&l(n=e[t],t,e))===r&&((r=!r)?h.lineStart():h.lineEnd()),r&&h.point(+s(n,t,e),+o(n,t,e));if(a)return h=null,a+""||null}return t.x=function(e){return arguments.length?(s="function"==typeof e?e:Xm(+e),t):s},t.y=function(e){return arguments.length?(o="function"==typeof e?e:Xm(+e),t):o},t.defined=function(e){return arguments.length?(l="function"==typeof e?e:Xm(!!e),t):l},t.curve=function(e){return arguments.length?(u=e,null!=c&&(h=u(c)),t):u},t.context=function(e){return arguments.length?(null==e?c=h=null:h=u(c=e),t):c},t}function bg(){var u=vg,h=null,d=Xm(0),f=yg,p=Xm(!0),m=null,g=gg,v=null;function t(e){var t,n,a,i,r,s=e.length,o=!1,l=new Array(s),c=new Array(s);for(null==m&&(v=g(r=wi())),t=0;t<=s;++t){if(!(t<s&&p(i=e[t],t,e))===o)if(o=!o)n=t,v.areaStart(),v.lineStart();else{for(v.lineEnd(),v.lineStart(),a=t-1;n<=a;--a)v.point(l[a],c[a]);v.lineEnd(),v.areaEnd()}o&&(l[t]=+u(i,t,e),c[t]=+d(i,t,e),v.point(h?+h(i,t,e):l[t],f?+f(i,t,e):c[t]))}if(r)return v=null,r+""||null}function e(){return _g().defined(p).curve(g).context(m)}return t.x=function(e){return arguments.length?(u="function"==typeof e?e:Xm(+e),h=null,t):u},t.x0=function(e){return arguments.length?(u="function"==typeof e?e:Xm(+e),t):u},t.x1=function(e){return arguments.length?(h=null==e?null:"function"==typeof e?e:Xm(+e),t):h},t.y=function(e){return arguments.length?(d="function"==typeof e?e:Xm(+e),f=null,t):d},t.y0=function(e){return arguments.length?(d="function"==typeof e?e:Xm(+e),t):d},t.y1=function(e){return arguments.length?(f=null==e?null:"function"==typeof e?e:Xm(+e),t):f},t.lineX0=t.lineY0=function(){return e().x(u).y(d)},t.lineY1=function(){return e().x(u).y(f)},t.lineX1=function(){return e().x(h).y(d)},t.defined=function(e){return arguments.length?(p="function"==typeof e?e:Xm(!!e),t):p},t.curve=function(e){return arguments.length?(g=e,null!=m&&(v=g(m)),t):g},t.context=function(e){return arguments.length?(null==e?m=v=null:v=g(m=e),t):m},t}function Sg(e,t){return t<e?-1:e<t?1:e<=t?0:NaN}function Tg(e){return e}mg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var wg=xg(gg);function Pg(e){this._curve=e}function xg(t){function e(e){return new Pg(t(e))}return e._curve=t,e}function Cg(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(xg(e)):t()._curve},e}function Dg(){return Cg(_g().curve(wg))}function Eg(){var e=bg().curve(wg),t=e.curve,n=e.lineX0,a=e.lineX1,i=e.lineY0,r=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return Cg(n())},delete e.lineX0,e.lineEndAngle=function(){return Cg(a())},delete e.lineX1,e.lineInnerRadius=function(){return Cg(i())},delete e.lineY0,e.lineOuterRadius=function(){return Cg(r())},delete e.lineY1,e.curve=function(e){return arguments.length?t(xg(e)):t()._curve},e}function Ag(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}Pg.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var kg=Array.prototype.slice;function Ig(e){return e.source}function Mg(e){return e.target}function $g(i){var r=Ig,s=Mg,o=vg,l=yg,c=null;function t(){var e,t=kg.call(arguments),n=r.apply(this,t),a=s.apply(this,t);if(c=c||(e=wi()),i(c,+o.apply(this,(t[0]=n,t)),+l.apply(this,t),+o.apply(this,(t[0]=a,t)),+l.apply(this,t)),e)return c=null,e+""||null}return t.source=function(e){return arguments.length?(r=e,t):r},t.target=function(e){return arguments.length?(s=e,t):s},t.x=function(e){return arguments.length?(o="function"==typeof e?e:Xm(+e),t):o},t.y=function(e){return arguments.length?(l="function"==typeof e?e:Xm(+e),t):l},t.context=function(e){return arguments.length?(c=null==e?null:e,t):c},t}function Lg(e,t,n,a,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+a)/2,n,t,i,a,i)}function Og(e,t,n,a,i){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+i)/2,a,n,a,i)}function Rg(e,t,n,a,i){var r=Ag(t,n),s=Ag(t,n=(n+i)/2),o=Ag(a,n),l=Ag(a,i);e.moveTo(r[0],r[1]),e.bezierCurveTo(s[0],s[1],o[0],o[1],l[0],l[1])}var Ng={draw:function(e,t){var n=Math.sqrt(t/rg);e.moveTo(n,0),e.arc(0,0,n,0,og)}},Fg={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Bg=Math.sqrt(1/3),Vg=2*Bg,jg={draw:function(e,t){var n=Math.sqrt(t/Vg),a=n*Bg;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},Ug=Math.sin(rg/10)/Math.sin(7*rg/10),Hg=Math.sin(og/10)*Ug,Gg=-Math.cos(og/10)*Ug,Yg={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),a=Hg*n,i=Gg*n;e.moveTo(0,-n),e.lineTo(a,i);for(var r=1;r<5;++r){var s=og*r/5,o=Math.cos(s),l=Math.sin(s);e.lineTo(l*n,-o*n),e.lineTo(o*a-l*i,l*a+o*i)}e.closePath()}},qg={draw:function(e,t){var n=Math.sqrt(t),a=-n/2;e.rect(a,a,n,n)}},zg=Math.sqrt(3),Wg={draw:function(e,t){var n=-Math.sqrt(t/(3*zg));e.moveTo(0,2*n),e.lineTo(-zg*n,-n),e.lineTo(zg*n,-n),e.closePath()}},Kg=Math.sqrt(3)/2,Xg=1/Math.sqrt(12),Qg=3*(Xg/2+1),Jg={draw:function(e,t){var n=Math.sqrt(t/Qg),a=n/2,i=n*Xg,r=a,s=n*Xg+n,o=-r,l=s;e.moveTo(a,i),e.lineTo(r,s),e.lineTo(o,l),e.lineTo(-.5*a-Kg*i,Kg*a+-.5*i),e.lineTo(-.5*r-Kg*s,Kg*r+-.5*s),e.lineTo(-.5*o-Kg*l,Kg*o+-.5*l),e.lineTo(-.5*a+Kg*i,-.5*i-Kg*a),e.lineTo(-.5*r+Kg*s,-.5*s-Kg*r),e.lineTo(-.5*o+Kg*l,-.5*l-Kg*o),e.closePath()}},Zg=[Ng,Fg,jg,qg,Yg,Wg,Jg];function ev(){}function tv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function nv(e){this._context=e}function av(e){this._context=e}function iv(e){this._context=e}function rv(e,t){this._basis=new nv(e),this._beta=t}nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tv(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},av.prototype={areaStart:ev,areaEnd:ev,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:tv(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},iv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:tv(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},rv.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(0<n)for(var a,i=e[0],r=t[0],s=e[n]-i,o=t[n]-r,l=-1;++l<=n;)a=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+a*s),this._beta*t[l]+(1-this._beta)*(r+a*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var sv=function t(n){function e(e){return 1===n?new nv(e):new rv(e,n)}return e.beta=function(e){return t(+e)},e}(.85);function ov(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function lv(e,t){this._context=e,this._k=(1-t)/6}lv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ov(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ov(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var cv=function t(n){function e(e){return new lv(e,n)}return e.tension=function(e){return t(+e)},e}(0);function uv(e,t){this._context=e,this._k=(1-t)/6}uv.prototype={areaStart:ev,areaEnd:ev,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ov(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var hv=function t(n){function e(e){return new uv(e,n)}return e.tension=function(e){return t(+e)},e}(0);function dv(e,t){this._context=e,this._k=(1-t)/6}dv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ov(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var fv=function t(n){function e(e){return new dv(e,n)}return e.tension=function(e){return t(+e)},e}(0);function pv(e,t,n){var a,i,r,s,o=e._x1,l=e._y1,c=e._x2,u=e._y2;e._l01_a>ig&&(a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,i=3*e._l01_a*(e._l01_a+e._l12_a),o=(o*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/i,l=(l*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/i),e._l23_a>ig&&(r=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,s=3*e._l23_a*(e._l23_a+e._l12_a),c=(c*r+e._x1*e._l23_2a-t*e._l12_2a)/s,u=(u*r+e._y1*e._l23_2a-n*e._l12_2a)/s),e._context.bezierCurveTo(o,l,c,u,e._x2,e._y2)}function mv(e,t){this._context=e,this._alpha=t}mv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n,a;switch(e=+e,t=+t,this._point&&(n=this._x2-e,a=this._y2-t,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+a*a,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:pv(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var gv=function t(n){function e(e){return n?new mv(e,n):new lv(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);function vv(e,t){this._context=e,this._alpha=t}vv.prototype={areaStart:ev,areaEnd:ev,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){var n,a;switch(e=+e,t=+t,this._point&&(n=this._x2-e,a=this._y2-t,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+a*a,this._alpha))),this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pv(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var yv=function t(n){function e(e){return n?new vv(e,n):new uv(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);function _v(e,t){this._context=e,this._alpha=t}_v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n,a;switch(e=+e,t=+t,this._point&&(n=this._x2-e,a=this._y2-t,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+a*a,this._alpha))),this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pv(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var bv=function t(n){function e(e){return n?new _v(e,n):new dv(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);function Sv(e){this._context=e}function Tv(e){return e<0?-1:1}function wv(e,t,n){var a=e._x1-e._x0,i=t-e._x1,r=(e._y1-e._y0)/(a||i<0&&-0),s=(n-e._y1)/(i||a<0&&-0),o=(r*i+s*a)/(a+i);return(Tv(r)+Tv(s))*Math.min(Math.abs(r),Math.abs(s),.5*Math.abs(o))||0}function Pv(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function xv(e,t,n){var a=e._x0,i=e._y0,r=e._x1,s=e._y1,o=(r-a)/3;e._context.bezierCurveTo(a+o,i+o*t,r-o,s-o*n,r,s)}function Cv(e){this._context=e}function Dv(e){this._context=new Ev(e)}function Ev(e){this._context=e}function Av(e){this._context=e}function kv(e){var t,n,a=e.length-1,i=new Array(a),r=new Array(a),s=new Array(a);for(r[i[0]=0]=2,s[0]=e[0]+2*e[1],t=1;t<a-1;++t)i[t]=1,r[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[a-1]=2,r[a-1]=7,s[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)n=i[t]/r[t-1],r[t]-=n,s[t]-=n*s[t-1];for(i[a-1]=s[a-1]/r[a-1],t=a-2;0<=t;--t)i[t]=(s[t]-i[t+1])/r[t];for(r[a-1]=(e[a]+i[a-1])/2,t=0;t<a-1;++t)r[t]=2*e[t+1]-i[t+1];return[i,r]}function Iv(e,t){this._context=e,this._t=t}function Mv(e,t){if(1<(i=e.length))for(var n,a,i,r=1,s=e[t[0]],o=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function $v(e){for(var t=e.length,n=new Array(t);0<=--t;)n[t]=t;return n}function Lv(e,t){return e[t]}function Ov(e){var n=e.map(Rv);return $v(e).sort(function(e,t){return n[e]-n[t]})}function Rv(e){for(var t,n=0,a=-1,i=e.length;++a<i;)(t=+e[a][1])&&(n+=t);return n}function Nv(e){return function(){return e}}function Fv(e){return e[0]}function Bv(e){return e[1]}function Vv(){this._=null}function jv(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Uv(e,t){var n=t,a=t.R,i=n.U;i?i.L===n?i.L=a:i.R=a:e._=a,a.U=i,n.U=a,n.R=a.L,n.R&&(n.R.U=n),a.L=n}function Hv(e,t){var n=t,a=t.L,i=n.U;i?i.L===n?i.L=a:i.R=a:e._=a,a.U=i,n.U=a,n.L=a.R,n.L&&(n.L.U=n),a.R=n}function Gv(e){for(;e.L;)e=e.L;return e}function Yv(e,t,n,a){var i=[null,null],r=cy.push(i)-1;return i.left=e,i.right=t,n&&zv(i,e,t,n),a&&zv(i,t,e,a),oy[e.index].halfedges.push(r),oy[t.index].halfedges.push(r),i}function qv(e,t,n){var a=[t,n];return a.left=e,a}function zv(e,t,n,a){e[0]||e[1]?e.left===n?e[1]=a:e[0]=a:(e[0]=a,e.left=t,e.right=n)}function Wv(e,t){return t[+(t.left!==e.site)]}Sv.prototype={areaStart:ev,areaEnd:ev,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Cv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xv(this,this._t0,Pv(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,xv(this,Pv(this,n=wv(this,e,t)),n);break;default:xv(this,this._t0,n=wv(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Dv.prototype=Object.create(Cv.prototype)).point=function(e,t){Cv.prototype.point.call(this,t,e)},Ev.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,i,r){this._context.bezierCurveTo(t,e,a,n,r,i)}},Av.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var a=kv(e),i=kv(t),r=0,s=1;s<n;++r,++s)this._context.bezierCurveTo(a[0][r],i[0][r],a[1][r],i[1][r],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Iv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:var n;this._t<=0?(this._context.lineTo(this._x,t),this._context.lineTo(e,t)):(n=this._x*(1-this._t)+e*this._t,this._context.lineTo(n,this._y),this._context.lineTo(n,t))}this._x=e,this._y=t}},Vv.prototype={constructor:Vv,insert:function(e,t){var n,a,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else n=this._?(e=Gv(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(a=n.U).L?(i=a.R)&&i.C?(n.C=i.C=!1,a.C=!0,e=a):(e===n.R&&(Uv(this,n),n=(e=n).U),n.C=!1,a.C=!0,Hv(this,a)):(i=a.L)&&i.C?(n.C=i.C=!1,a.C=!0,e=a):(e===n.L&&(Hv(this,n),n=(e=n).U),n.C=!1,a.C=!0,Uv(this,a)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,a=e.U,i=e.L,r=e.R,s=i?r?Gv(r):i:r;if(a?a.L===e?a.L=s:a.R=s:this._=s,i&&r?(n=s.C,s.C=e.C,((s.L=i).U=s)!==r?(a=s.U,s.U=e.U,e=s.R,a.L=e,(s.R=r).U=s):(s.U=a,e=(a=s).R)):(n=e.C,e=s),e&&(e.U=a),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===a.L){if((t=a.R).C&&(t.C=!1,a.C=!0,Uv(this,a),t=a.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Hv(this,t),t=a.R),t.C=a.C,a.C=t.R.C=!1,Uv(this,a),e=this._;break}}else if((t=a.L).C&&(t.C=!1,a.C=!0,Hv(this,a),t=a.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Uv(this,t),t=a.L),t.C=a.C,a.C=t.L.C=!1,Hv(this,a),e=this._;break}t.C=!0,a=(e=a).U}while(!e.C);e&&(e.C=!1)}}};var Kv,Xv=[];function Qv(){jv(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jv(e){var t=e.P,n=e.N;if(t&&n){var a=t.site,i=e.site,r=n.site;if(a!==r){var s=i[0],o=i[1],l=a[0]-s,c=a[1]-o,u=r[0]-s,h=r[1]-o,d=2*(l*h-c*u);if(!(-hy<=d)){var f=l*l+c*c,p=u*u+h*h,m=(h*f-c*p)/d,g=(l*p-u*f)/d,v=Xv.pop()||new Qv;v.arc=e,v.site=i,v.x=m+s,v.y=(v.cy=g+o)+Math.sqrt(m*m+g*g),e.circle=v;for(var y=null,_=ly._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}ly.insert(y,v),y||(Kv=v)}}}}function Zv(e){var t=e.circle;t&&(t.P||(Kv=t.N),ly.remove(t),Xv.push(t),jv(t),e.circle=null)}var ey=[];function ty(){jv(this),this.edge=this.site=this.circle=null}function ny(e){var t=ey.pop()||new ty;return t.site=e,t}function ay(e){Zv(e),sy.remove(e),ey.push(e),jv(e)}function iy(e){for(var t,n,a,i,r=e[0],s=e[1],o=sy._;o;)if((a=ry(o,s)-r)>uy)o=o.L;else{if(!((i=r-function(e,t){var n=e.N;if(n)return ry(n,t);var a=e.site;return a[1]===t?a[0]:1/0}(o,s))>uy)){-uy<a?(t=o.P,n=o):-uy<i?n=(t=o).N:t=n=o;break}if(!o.R){t=o;break}o=o.R}oy[e.index]={site:e,halfedges:[]};var l,c,u,h,d,f,p,m,g,v,y,_,b=ny(e);if(sy.insert(t,b),t||n){if(t===n)return Zv(t),n=ny(t.site),sy.insert(b,n),b.edge=n.edge=Yv(t.site,b.site),Jv(t),Jv(n),0;n?(Zv(t),Zv(n),c=(l=t.site)[0],u=l[1],h=e[0]-c,d=e[1]-u,p=(f=n.site)[0]-c,_=[((m=f[1]-u)*(v=h*h+d*d)-d*(y=p*p+m*m))/(g=2*(h*m-d*p))+c,(h*y-p*v)/g+u],zv(n.edge,l,f,_),b.edge=Yv(l,e,null,_),n.edge=Yv(e,f,null,_),Jv(t),Jv(n)):b.edge=Yv(t.site,b.site)}}function ry(e,t){var n=e.site,a=n[0],i=n[1],r=i-t;if(!r)return a;var s=e.P;if(!s)return-1/0;var o=(n=s.site)[0],l=n[1],c=l-t;if(!c)return o;var u=o-a,h=1/r-1/c,d=u/c;return h?(-d+Math.sqrt(d*d-2*h*(u*u/(-2*c)-l+c/2+i-r/2)))/h+a:(a+o)/2}var sy,oy,ly,cy,uy=1e-6,hy=1e-12;function dy(e,t){return t[1]-e[1]||t[0]-e[0]}function fy(e,t){var n,a,i,r,s,o,l,c=e.sort(dy).pop();for(cy=[],oy=new Array(e.length),sy=new Vv,ly=new Vv;;)if(i=Kv,c&&(!i||c[1]<i.y||c[1]===i.y&&c[0]<i.x))c[0]===n&&c[1]===a||(iy(c),n=c[0],a=c[1]),c=e.pop();else{if(!i)break;!function(e){var t=e.circle,n=t.x,a=t.cy,i=[n,a],r=e.P,s=e.N,o=[e];ay(e);for(var l=r;l.circle&&Math.abs(n-l.circle.x)<uy&&Math.abs(a-l.circle.cy)<uy;)r=l.P,o.unshift(l),ay(l),l=r;o.unshift(l),Zv(l);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<uy&&Math.abs(a-c.circle.cy)<uy;)s=c.N,o.push(c),ay(c),c=s;o.push(c),Zv(c);for(var u=o.length,h=1;h<u;++h)c=o[h],l=o[h-1],zv(c.edge,l.site,c.site,i);l=o[0],(c=o[u-1]).edge=Yv(l.site,c.site,null,i),Jv(l),Jv(c)}(i.arc)}(function(){for(var e,t,n,a,i,r,s,o,l=0,c=oy.length;l<c;++l)if((e=oy[l])&&(n=(t=e.halfedges).length)){for(var u=new Array(n),h=new Array(n),d=0;d<n;++d)u[d]=d,h[d]=(a=e,i=cy[t[d]],o=s=r=void 0,r=a.site,s=i.left,o=i.right,r===o&&(o=s,s=r),o?Math.atan2(o[1]-s[1],o[0]-s[0]):(o=r===s?(s=i[1],i[0]):(s=i[0],i[1]),Math.atan2(s[0]-o[0],o[1]-s[1])));for(u.sort(function(e,t){return h[t]-h[e]}),d=0;d<n;++d)h[d]=t[u[d]];for(d=0;d<n;++d)t[d]=h[d]}})(),t&&(function(e,t,n,a){for(var i,r=cy.length;r--;)(function(e,t,n,a,i){var r=e[1];if(r)return 1;var s,o,l=e[0],c=e.left,u=e.right,h=c[0],d=c[1],f=u[0],p=u[1],m=(h+f)/2,g=(d+p)/2;if(p===d){if(m<t||a<=m)return;if(f<h){if(l){if(l[1]>=i)return}else l=[m,n];r=[m,i]}else{if(l){if(l[1]<n)return}else l=[m,i];r=[m,n]}}else if(o=g-(s=(h-f)/(p-d))*m,s<-1||1<s)if(f<h){if(l){if(l[1]>=i)return}else l=[(n-o)/s,n];r=[(i-o)/s,i]}else{if(l){if(l[1]<n)return}else l=[(i-o)/s,i];r=[(n-o)/s,n]}else if(d<p){if(l){if(l[0]>=a)return}else l=[t,s*t+o];r=[a,s*a+o]}else{if(l){if(l[0]<t)return}else l=[a,s*a+o];r=[t,s*t+o]}return e[0]=l,e[1]=r,1})(i=cy[r],e,t,n,a)&&function(e,t,n,a,i){var r=e[0],s=e[1],o=r[0],l=r[1],c=0,u=1,h=s[0]-o,d=s[1]-l,f=t-o;if(h||!(0<f)){if(f/=h,h<0){if(f<c)return;f<u&&(u=f)}else if(0<h){if(u<f)return;c<f&&(c=f)}if(f=a-o,h||!(f<0)){if(f/=h,h<0){if(u<f)return;c<f&&(c=f)}else if(0<h){if(f<c)return;f<u&&(u=f)}if(f=n-l,d||!(0<f)){if(f/=d,d<0){if(f<c)return;f<u&&(u=f)}else if(0<d){if(u<f)return;c<f&&(c=f)}if(f=i-l,d||!(f<0)){if(f/=d,d<0){if(u<f)return;c<f&&(c=f)}else if(0<d){if(f<c)return;f<u&&(u=f)}return!(0<c||u<1)||(0<c&&(e[0]=[o+c*h,l+c*d]),u<1&&(e[1]=[o+u*h,l+u*d]),1)}}}}}(i,e,t,n,a)&&(Math.abs(i[0][0]-i[1][0])>uy||Math.abs(i[0][1]-i[1][1])>uy)||delete cy[r]}(r=+t[0][0],s=+t[0][1],o=+t[1][0],l=+t[1][1]),function(e,t,n,a){var i,r,s,o,l,c,u,h,d,f,p,m,g,v=oy.length,y=!0;for(D=0;D<v;++D)if(i=oy[D]){for(r=i.site,s=(o=i.halfedges).length;s--;)cy[o[s]]||o.splice(s,1);for(s=0,l=o.length;s<l;)m=i,f=(d=(g=cy[o[s]])[+(g.left===m.site)])[0],p=d[1],u=(c=Wv(i,cy[o[++s%l]]))[0],h=c[1],(Math.abs(f-u)>uy||Math.abs(p-h)>uy)&&(o.splice(s,0,cy.push(qv(r,d,Math.abs(f-e)<uy&&uy<a-p?[e,Math.abs(u-e)<uy?h:a]:Math.abs(p-a)<uy&&uy<n-f?[Math.abs(h-a)<uy?u:n,a]:Math.abs(f-n)<uy&&uy<p-t?[n,Math.abs(u-n)<uy?h:t]:Math.abs(p-t)<uy&&uy<f-e?[Math.abs(h-t)<uy?u:e,t]:null))-1),++l);l&&(y=!1)}if(y){for(var _,b,S,T,w,P,x,C=1/0,D=0,y=null;D<v;++D)(i=oy[D])&&(S=(_=(r=i.site)[0]-e)*_+(b=r[1]-t)*b)<C&&(C=S,y=i);y&&(T=[e,t],w=[e,a],P=[n,a],x=[n,t],y.halfedges.push(cy.push(qv(r=y.site,T,w))-1,cy.push(qv(r,w,P))-1,cy.push(qv(r,P,x))-1,cy.push(qv(r,x,T))-1))}for(D=0;D<v;++D)(i=oy[D])&&(i.halfedges.length||delete oy[D])}(r,s,o,l)),this.edges=cy,this.cells=oy,sy=ly=cy=oy=null}function py(e){return function(){return e}}function my(e,t,n){this.target=e,this.type=t,this.transform=n}function gy(e,t,n){this.k=e,this.x=t,this.y=n}fy.prototype={constructor:fy,polygons:function(){var n=this.edges;return this.cells.map(function(t){var e=t.halfedges.map(function(e){return Wv(t,n[e])});return e.data=t.site.data,e})},triangles:function(){var c=[],u=this.edges;return this.cells.forEach(function(e,t){if(a=(n=e.halfedges).length)for(var n,a,i,r=e.site,s=-1,o=u[n[a-1]],l=o.left===r?o.right:o.left;++s<a;)i=l,l=(o=u[n[s]]).left===r?o.right:o.left,i&&l&&t<i.index&&t<l.index&&(r[0]-l[0])*(i[1]-r[1])-(r[0]-i[0])*(l[1]-r[1])<0&&c.push([r.data,i.data,l.data])}),c},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(s,o,e){for(var t,l,c=this,u=c._found||0,n=c.cells.length;!(l=c.cells[u]);)if(++u>=n)return null;for(var a=s-l.site[0],i=o-l.site[1],h=a*a+i*i;l=c.cells[t=u],u=null,l.halfedges.forEach(function(e){var t,n,a,i=c.edges[e],r=i.left;!(r!==l.site&&r||(r=i.right))||(a=(t=s-r[0])*t+(n=o-r[1])*n)<h&&(h=a,u=r.index)}),null!==u;);return c._found=t,null==e||h<=e*e?l.site:null}},gy.prototype={constructor:gy,scale:function(e){return 1===e?this:new gy(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new gy(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vy=new gy(1,0,0);function yy(e){return e.__zoom||vy}function _y(){V.event.stopImmediatePropagation()}function by(){V.event.preventDefault(),V.event.stopImmediatePropagation()}function Sy(){return!V.event.button}function Ty(){var e,t=this,n=t instanceof SVGElement?(e=(t=t.ownerSVGElement||t).width.baseVal.value,t.height.baseVal.value):(e=t.clientWidth,t.clientHeight);return[[0,0],[e,n]]}function wy(){return this.__zoom||vy}function Py(){return-V.event.deltaY*(V.event.deltaMode?120:1)/500}function xy(){return"ontouchstart"in this}function Cy(e,t,n){var a=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(a<i?(a+i)/2:Math.min(0,a)||Math.max(0,i),r<s?(r+s)/2:Math.min(0,r)||Math.max(0,s))}yy.prototype=gy.prototype,V.version="5.7.0",V.bisect=m,V.bisectRight=m,V.bisectLeft=t,V.ascending=o,V.bisector=P,V.cross=function(e,t,n){var a,i,r,s,o=e.length,l=t.length,c=new Array(o*l);for(null==n&&(n=u),a=r=0;a<o;++a)for(s=e[a],i=0;i<l;++i,++r)c[r]=n(s,t[i]);return c},V.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},V.deviation=i,V.extent=l,V.histogram=function(){var d=g,f=l,p=_;function t(e){for(var t,n=e.length,a=new Array(n),i=0;i<n;++i)a[i]=d(e[i],i,e);var r=f(a),s=r[0],o=r[1],l=p(a,s,o);Array.isArray(l)||(l=C(s,o,l),l=x(Math.ceil(s/l)*l,o,l));for(var c=l.length;l[0]<=s;)l.shift(),--c;for(;l[c-1]>o;)l.pop(),--c;var u,h=new Array(c+1);for(i=0;i<=c;++i)(u=h[i]=[]).x0=0<i?l[i-1]:s,u.x1=i<c?l[i]:o;for(i=0;i<n;++i)s<=(t=a[i])&&t<=o&&h[m(l,t,0,c)].push(e[i]);return h}return t.value=function(e){return arguments.length?(d="function"==typeof e?e:h(e),t):d},t.domain=function(e){return arguments.length?(f="function"==typeof e?e:h([e[0],e[1]]),t):f},t.thresholds=function(e){return arguments.length?(p="function"==typeof e?e:Array.isArray(e)?h(r.call(e)):h(e),t):p},t},V.thresholdFreedmanDiaconis=function(e,t,n){return e=s.call(e,c).sort(o),Math.ceil((n-t)/(2*(b(e,.75)-b(e,.25))*Math.pow(e.length,-1/3)))},V.thresholdScott=function(e,t,n){return Math.ceil((n-t)/(3.5*i(e)*Math.pow(e.length,-1/3)))},V.thresholdSturges=_,V.max=S,V.mean=function(e,t){var n,a=e.length,i=a,r=-1,s=0;if(null==t)for(;++r<a;)isNaN(n=c(e[r]))?--i:s+=n;else for(;++r<a;)isNaN(n=c(t(e[r],r,e)))?--i:s+=n;if(i)return s/i},V.median=function(e,t){var n,a=e.length,i=-1,r=[];if(null==t)for(;++i<a;)isNaN(n=c(e[i]))||r.push(n);else for(;++i<a;)isNaN(n=c(t(e[i],i,e)))||r.push(n);return b(r.sort(o),.5)},V.merge=D,V.min=T,V.pairs=function(e,t){null==t&&(t=u);for(var n=0,a=e.length-1,i=e[0],r=new Array(a<0?0:a);n<a;)r[n]=t(i,i=e[++n]);return r},V.permute=function(e,t){for(var n=t.length,a=new Array(n);n--;)a[n]=e[t[n]];return a},V.quantile=b,V.range=x,V.scan=function(e,t){if(n=e.length){var n,a,i=0,r=0,s=e[r];for(null==t&&(t=o);++i<n;)(t(a=e[i],s)<0||0!==t(s,s))&&(s=a,r=i);return 0===t(s,s)?r:void 0}},V.shuffle=function(e,t,n){for(var a,i,r=(null==n?e.length:n)-(t=null==t?0:+t);r;)i=Math.random()*r--|0,a=e[r+t],e[r+t]=e[i+t],e[i+t]=a;return e},V.sum=function(e,t){var n,a=e.length,i=-1,r=0;if(null==t)for(;++i<a;)(n=+e[i])&&(r+=n);else for(;++i<a;)(n=+t(e[i],i,e))&&(r+=n);return r},V.ticks=v,V.tickIncrement=y,V.tickStep=C,V.transpose=w,V.variance=a,V.zip=function(){return w(arguments)},V.axisTop=function(e){return L(1,e)},V.axisRight=function(e){return L(2,e)},V.axisBottom=function(e){return L(3,e)},V.axisLeft=function(e){return L(4,e)},V.brush=function(){return ui(Za)},V.brushX=function(){return ui(Qa)},V.brushY=function(){return ui(Ja)},V.brushSelection=function(e){var t=e.__brush;return t?t.dim.output(t.selection):null},V.chord=function(){var S=0,T=null,w=null,P=null;function t(a){for(var e,t,n,i,r=a.length,s=[],o=x(r),l=[],c=[],u=c.groups=new Array(r),h=new Array(r*r),d=0,f=-1;++f<r;){for(e=0,i=-1;++i<r;)e+=a[f][i];s.push(e),l.push(x(r)),d+=e}for(T&&o.sort(function(e,t){return T(s[e],s[t])}),w&&l.forEach(function(e,n){e.sort(function(e,t){return w(a[n][e],a[n][t])})}),n=(d=gi(0,mi-S*r)/d)?S:mi/r,e=0,f=-1;++f<r;){for(t=e,i=-1;++i<r;){var p=o[f],m=l[p][i],g=a[p][m],v=e,y=e+=g*d;h[m*r+p]={index:p,subindex:m,startAngle:v,endAngle:y,value:g}}u[p]={index:p,startAngle:t,endAngle:e,value:s[p]},e+=n}for(f=-1;++f<r;)for(i=f-1;++i<r;){var _=h[i*r+f],b=h[f*r+i];(_.value||b.value)&&c.push(_.value<b.value?{source:b,target:_}:{source:_,target:b})}return P?c.sort(P):c}return t.padAngle=function(e){return arguments.length?(S=gi(0,e),t):S},t.sortGroups=function(e){return arguments.length?(T=e,t):T},t.sortSubgroups=function(e){return arguments.length?(w=e,t):w},t.sortChords=function(e){return arguments.length?(null==e?P=null:(P=function(e,t){return n(e.source.value+e.target.value,t.source.value+t.target.value)})._=n=e,t):P&&P._;var n},t},V.ribbon=function(){var d=Pi,f=xi,p=Ci,m=Di,g=Ei,v=null;function t(){var e,t=vi.call(arguments),n=d.apply(this,t),a=f.apply(this,t),i=+p.apply(this,(t[0]=n,t)),r=m.apply(this,t)-pi,s=g.apply(this,t)-pi,o=i*hi(r),l=i*di(r),c=+p.apply(this,(t[0]=a,t)),u=m.apply(this,t)-pi,h=g.apply(this,t)-pi;if((v=v||(e=wi())).moveTo(o,l),v.arc(0,0,i,r,s),r==u&&s==h||(v.quadraticCurveTo(0,0,c*hi(u),c*di(u)),v.arc(0,0,c,u,h)),v.quadraticCurveTo(0,0,o,l),v.closePath(),e)return v=null,e+""||null}return t.radius=function(e){return arguments.length?(p="function"==typeof e?e:yi(+e),t):p},t.startAngle=function(e){return arguments.length?(m="function"==typeof e?e:yi(+e),t):m},t.endAngle=function(e){return arguments.length?(g="function"==typeof e?e:yi(+e),t):g},t.source=function(e){return arguments.length?(d=e,t):d},t.target=function(e){return arguments.length?(f=e,t):f},t.context=function(e){return arguments.length?(v=null==e?null:e,t):v},t},V.nest=function(){var d,f,t,p=[],s=[];function m(e,n,a,i){if(n>=p.length)return null!=d&&e.sort(d),null!=f?f(e):e;for(var t,r,s,o=-1,l=e.length,c=p[n++],u=ki(),h=a();++o<l;)(s=u.get(t=c(r=e[o])+""))?s.push(r):u.set(t,[r]);return u.each(function(e,t){i(h,t,m(e,n,a,i))}),h}return t={object:function(e){return m(e,0,Ii,Mi)},map:function(e){return m(e,0,$i,Li)},entries:function(e){return function n(e,a){if(++a>p.length)return e;var i,r=s[a-1];return null!=f&&a>=p.length?i=e.entries():(i=[],e.each(function(e,t){i.push({key:t,values:n(e,a)})})),null!=r?i.sort(function(e,t){return r(e.key,t.key)}):i}(m(e,0,$i,Li),0)},key:function(e){return p.push(e),t},sortKeys:function(e){return s[p.length-1]=e,t},sortValues:function(e){return d=e,t},rollup:function(e){return f=e,t}}},V.set=Ni,V.map=ki,V.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},V.values=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},V.entries=function(e){var t,n=[];for(t in e)n.push({key:t,value:e[t]});return n},V.color=ot,V.rgb=ht,V.hsl=mt,V.lab=Dt,V.hcl=Lt,V.lch=function(e,t,n,a){return 1===arguments.length?$t(e):new Ot(n,t,e,null==a?1:a)},V.gray=function(e,t){return new Et(e,0,0,null==t?1:t)},V.cubehelix=Ut,V.contours=Gi,V.contourDensity=function(){var o=zi,l=Wi,c=Ki,a=960,i=500,r=20,u=2,h=3*r,d=a+2*h>>u,f=i+2*h>>u,p=Vi(20);function t(e){var s=new Float32Array(d*f),t=new Float32Array(d*f);e.forEach(function(e,t,n){var a=+o(e,t,n)+h>>u,i=+l(e,t,n)+h>>u,r=+c(e,t,n);0<=a&&a<d&&0<=i&&i<f&&(s[a+i*d]+=r)}),Yi({width:d,height:f,data:s},{width:d,height:f,data:t},r>>u),qi({width:d,height:f,data:t},{width:d,height:f,data:s},r>>u),Yi({width:d,height:f,data:s},{width:d,height:f,data:t},r>>u),qi({width:d,height:f,data:t},{width:d,height:f,data:s},r>>u),Yi({width:d,height:f,data:s},{width:d,height:f,data:t},r>>u),qi({width:d,height:f,data:t},{width:d,height:f,data:s},r>>u);var n,a=p(s);return Array.isArray(a)||(a=C(0,n=S(s),a),(a=x(0,Math.floor(n/a)*a,a)).shift()),Gi().thresholds(a).size([d,f])(s).map(m)}function m(e){return e.value*=Math.pow(2,-2*u),e.coordinates.forEach(n),e}function n(e){e.forEach(s)}function s(e){e.forEach(g)}function g(e){e[0]=e[0]*Math.pow(2,u)-h,e[1]=e[1]*Math.pow(2,u)-h}function v(){return d=a+2*(h=3*r)>>u,f=i+2*h>>u,t}return t.x=function(e){return arguments.length?(o="function"==typeof e?e:Vi(+e),t):o},t.y=function(e){return arguments.length?(l="function"==typeof e?e:Vi(+e),t):l},t.weight=function(e){return arguments.length?(c="function"==typeof e?e:Vi(+e),t):c},t.size=function(e){if(!arguments.length)return[a,i];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(0<=t||0<=t))throw new Error("invalid size");return a=t,i=n,v()},t.cellSize=function(e){if(!arguments.length)return 1<<u;if(!(1<=(e=+e)))throw new Error("invalid cell size");return u=Math.floor(Math.log(e)/Math.LN2),v()},t.thresholds=function(e){return arguments.length?(p="function"==typeof e?e:Array.isArray(e)?Vi(Fi.call(e)):Vi(e),t):p},t.bandwidth=function(e){if(!arguments.length)return Math.sqrt(r*(r+1));if(!(0<=(e=+e)))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*e*e+1)-1)/2),v()},t},V.dispatch=j,V.drag=function(){var n,a,i,r,s=Ue,o=He,t=Ge,l=Ye,p={},m=j("start","drag","end"),g=0,c=0;function v(e){e.on("mousedown.drag",u).filter(l).on("touchstart.drag",f).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var e;r||!s.apply(this,arguments)||(e=b("mouse",o.apply(this,arguments),Le,this,arguments))&&(Ee(V.event.view).on("mousemove.drag",h,!0).on("mouseup.drag",d,!0),Fe(V.event.view),Re(),i=!1,n=V.event.clientX,a=V.event.clientY,e("start"))}function h(){var e,t;Ne(),i||(e=V.event.clientX-n,t=V.event.clientY-a,i=c<e*e+t*t),p.mouse("drag")}function d(){Ee(V.event.view).on("mousemove.drag mouseup.drag",null),Be(V.event.view,i),Ne(),p.mouse("end")}function f(){if(s.apply(this,arguments))for(var e,t=V.event.changedTouches,n=o.apply(this,arguments),a=t.length,i=0;i<a;++i)(e=b(t[i].identifier,n,Oe,this,arguments))&&(Re(),e("start"))}function y(){for(var e,t=V.event.changedTouches,n=t.length,a=0;a<n;++a)(e=p[t[a].identifier])&&(Ne(),e("drag"))}function _(){var e,t,n=V.event.changedTouches,a=n.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),e=0;e<a;++e)(t=p[n[e].identifier])&&(Re(),t("end"))}function b(i,r,s,o,l){var c,u,h,d=s(r,i),f=m.copy();if(we(new je(v,"beforestart",c,i,g,d[0],d[1],0,0,f),function(){return null!=(V.event.subject=c=t.apply(o,l))&&(u=c.x-d[0]||0,h=c.y-d[1]||0,!0)}))return function e(t){var n,a=d;switch(t){case"start":p[i]=e,n=g++;break;case"end":delete p[i],--g;case"drag":d=s(r,i),n=g}we(new je(v,t,c,i,n,d[0]+u,d[1]+h,d[0]-a[0],d[1]-a[1],f),f.apply,f,[t,o,l])}}return v.filter=function(e){return arguments.length?(s="function"==typeof e?e:Ve(!!e),v):s},v.container=function(e){return arguments.length?(o="function"==typeof e?e:Ve(e),v):o},v.subject=function(e){return arguments.length?(t="function"==typeof e?e:Ve(e),v):t},v.touchable=function(e){return arguments.length?(l="function"==typeof e?e:Ve(!!e),v):l},v.on=function(){var e=m.on.apply(m,arguments);return e===m?v:e},v.clickDistance=function(e){return arguments.length?(c=(e=+e)*e,v):Math.sqrt(c)},v},V.dragDisable=Fe,V.dragEnable=Be,V.dsvFormat=Zi,V.csvParse=tr,V.csvParseRows=nr,V.csvFormat=ar,V.csvFormatRows=ir,V.tsvParse=sr,V.tsvParseRows=or,V.tsvFormat=lr,V.tsvFormatRows=cr,V.easeLinear=function(e){return+e},V.easeQuad=Ta,V.easeQuadIn=function(e){return e*e},V.easeQuadOut=function(e){return e*(2-e)},V.easeQuadInOut=Ta,V.easeCubic=wa,V.easeCubicIn=function(e){return e*e*e},V.easeCubicOut=function(e){return--e*e*e+1},V.easeCubicInOut=wa,V.easePoly=Ca,V.easePolyIn=Pa,V.easePolyOut=xa,V.easePolyInOut=Ca,V.easeSin=Aa,V.easeSinIn=function(e){return 1-Math.cos(e*Ea)},V.easeSinOut=function(e){return Math.sin(e*Ea)},V.easeSinInOut=Aa,V.easeExp=ka,V.easeExpIn=function(e){return Math.pow(2,10*e-10)},V.easeExpOut=function(e){return 1-Math.pow(2,-10*e)},V.easeExpInOut=ka,V.easeCircle=Ia,V.easeCircleIn=function(e){return 1-Math.sqrt(1-e*e)},V.easeCircleOut=function(e){return Math.sqrt(1- --e*e)},V.easeCircleInOut=Ia,V.easeBounce=$a,V.easeBounceIn=function(e){return 1-$a(1-e)},V.easeBounceOut=$a,V.easeBounceInOut=function(e){return((e*=2)<=1?1-$a(1-e):$a(e-1)+1)/2},V.easeBack=Ra,V.easeBackIn=La,V.easeBackOut=Oa,V.easeBackInOut=Ra,V.easeElastic=Ba,V.easeElasticIn=Fa,V.easeElasticOut=Ba,V.easeElasticInOut=Va,V.blob=function(e,t){return fetch(e,t).then(ur)},V.buffer=function(e,t){return fetch(e,t).then(hr)},V.dsv=function(e,t,n,a){3===arguments.length&&"function"==typeof n&&(a=n,n=void 0);var i=Zi(e);return fr(t,n).then(function(e){return i.parse(e,a)})},V.csv=mr,V.tsv=gr,V.image=function(i,r){return new Promise(function(e,t){var n,a=new Image;for(n in r)a[n]=r[n];a.onerror=t,a.onload=function(){e(a)},a.src=i})},V.json=function(e,t){return fetch(e,t).then(vr)},V.text=fr,V.xml=_r,V.html=br,V.svg=Sr,V.forceCenter=function(r,s){var o;function t(){for(var e,t=o.length,n=0,a=0,i=0;i<t;++i)n+=(e=o[i]).x,a+=e.y;for(n=n/t-r,a=a/t-s,i=0;i<t;++i)(e=o[i]).x-=n,e.y-=a}return null==r&&(r=0),null==s&&(s=0),t.initialize=function(e){o=e},t.x=function(e){return arguments.length?(r=+e,t):r},t.y=function(e){return arguments.length?(s=+e,t):s},t},V.forceCollide=function(a){var r,s,g=1,o=1;function t(){for(var e,t,h,d,f,p,m,n=r.length,a=0;a<o;++a)for(t=Er(r,Mr,$r).visitAfter(l),e=0;e<n;++e)h=r[e],p=s[h.index],m=p*p,d=h.x+h.vx,f=h.y+h.vy,t.visit(i);function i(e,t,n,a,i){var r,s,o,l=e.data,c=e.r,u=p+c;if(!l)return d+u<t||a<d-u||f+u<n||i<f-u;l.index>h.index&&((o=(r=d-l.x-l.vx)*r+(s=f-l.y-l.vy)*s)<u*u&&(0===r&&(o+=(r=wr())*r),0===s&&(o+=(s=wr())*s),o=(u-(o=Math.sqrt(o)))/o*g,h.vx+=(r*=o)*(u=(c*=c)/(m+c)),h.vy+=(s*=o)*u,l.vx-=r*(u=1-u),l.vy-=s*u))}}function l(e){if(e.data)return e.r=s[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function n(){if(r){var e,t,n=r.length;for(s=new Array(n),e=0;e<n;++e)t=r[e],s[t.index]=+a(t,e,r)}}return"function"!=typeof a&&(a=Tr(null==a?1:+a)),t.initialize=function(e){r=e,n()},t.iterations=function(e){return arguments.length?(o=+e,t):o},t.strength=function(e){return arguments.length?(g=+e,t):g},t.radius=function(e){return arguments.length?(a="function"==typeof e?e:Tr(+e),n(),t):a},t},V.forceLink=function(h){var d,f,r,s,p,o=Lr,n=function(e){return 1/Math.min(s[e.source.index],s[e.target.index])},a=Tr(30),m=1;function t(e){for(var t=0,n=h.length;t<m;++t)for(var a,i,r,s,o,l,c,u=0;u<n;++u)i=(a=h[u]).source,s=(r=a.target).x+r.vx-i.x-i.vx||wr(),o=r.y+r.vy-i.y-i.vy||wr(),s*=l=((l=Math.sqrt(s*s+o*o))-f[u])/l*e*d[u],o*=l,r.vx-=s*(c=p[u]),r.vy-=o*c,i.vx+=s*(c=1-c),i.vy+=o*c}function i(){if(r){var e,t=r.length,n=h.length,a=ki(r,o),i=0;for(s=new Array(t);i<n;++i)(e=h[i]).index=i,"object"!=typeof e.source&&(e.source=Or(a,e.source)),"object"!=typeof e.target&&(e.target=Or(a,e.target)),s[e.source.index]=(s[e.source.index]||0)+1,s[e.target.index]=(s[e.target.index]||0)+1;for(i=0,p=new Array(n);i<n;++i)e=h[i],p[i]=s[e.source.index]/(s[e.source.index]+s[e.target.index]);d=new Array(n),l(),f=new Array(n),c()}}function l(){if(r)for(var e=0,t=h.length;e<t;++e)d[e]=+n(h[e],e,h)}function c(){if(r)for(var e=0,t=h.length;e<t;++e)f[e]=+a(h[e],e,h)}return null==h&&(h=[]),t.initialize=function(e){r=e,i()},t.links=function(e){return arguments.length?(h=e,i(),t):h},t.id=function(e){return arguments.length?(o=e,t):o},t.iterations=function(e){return arguments.length?(m=+e,t):m},t.strength=function(e){return arguments.length?(n="function"==typeof e?e:Tr(+e),l(),t):n},t.distance=function(e){return arguments.length?(a="function"==typeof e?e:Tr(+e),c(),t):a},t},V.forceManyBody=function(){var i,l,c,u,a=Tr(-30),h=1,d=1/0,f=.81;function t(e){var t,n=i.length,a=Er(i,Rr,Nr).visitAfter(r);for(c=e,t=0;t<n;++t)l=i[t],a.visit(s)}function n(){if(i){var e,t,n=i.length;for(u=new Array(n),e=0;e<n;++e)t=i[e],u[t.index]=+a(t,e,i)}}function r(e){var t,n,a,i,r,s=0,o=0;if(e.length){for(a=i=r=0;r<4;++r)(t=e[r])&&(n=Math.abs(t.value))&&(s+=t.value,o+=n,a+=n*t.x,i+=n*t.y);e.x=a/o,e.y=i/o}else for((t=e).x=t.data.x,t.y=t.data.y;s+=u[t.data.index],t=t.next;);e.value=s}function s(e,t,n,a){if(!e.value)return!0;var i=e.x-l.x,r=e.y-l.y,s=a-t,o=i*i+r*r;if(s*s/f<o)return o<d&&(0===i&&(o+=(i=wr())*i),0===r&&(o+=(r=wr())*r),o<h&&(o=Math.sqrt(h*o)),l.vx+=i*e.value*c/o,l.vy+=r*e.value*c/o),!0;if(!(e.length||d<=o))for(e.data===l&&!e.next||(0===i&&(o+=(i=wr())*i),0===r&&(o+=(r=wr())*r),o<h&&(o=Math.sqrt(h*o)));e.data!==l&&(s=u[e.data.index]*c/o,l.vx+=i*s,l.vy+=r*s),e=e.next;);}return t.initialize=function(e){i=e,n()},t.strength=function(e){return arguments.length?(a="function"==typeof e?e:Tr(+e),n(),t):a},t.distanceMin=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t.distanceMax=function(e){return arguments.length?(d=e*e,t):Math.sqrt(d)},t.theta=function(e){return arguments.length?(f=e*e,t):Math.sqrt(f)},t},V.forceRadial=function(n,l,c){var u,h,d,a=Tr(.1);function t(e){for(var t=0,n=u.length;t<n;++t){var a=u[t],i=a.x-l||1e-6,r=a.y-c||1e-6,s=Math.sqrt(i*i+r*r),o=(d[t]-s)*h[t]*e/s;a.vx+=i*o,a.vy+=r*o}}function i(){if(u){var e,t=u.length;for(h=new Array(t),d=new Array(t),e=0;e<t;++e)d[e]=+n(u[e],e,u),h[e]=isNaN(d[e])?0:+a(u[e],e,u)}}return"function"!=typeof n&&(n=Tr(+n)),null==l&&(l=0),null==c&&(c=0),t.initialize=function(e){u=e,i()},t.strength=function(e){return arguments.length?(a="function"==typeof e?e:Tr(+e),i(),t):a},t.radius=function(e){return arguments.length?(n="function"==typeof e?e:Tr(+e),i(),t):n},t.x=function(e){return arguments.length?(l=+e,t):l},t.y=function(e){return arguments.length?(c=+e,t):c},t},V.forceSimulation=function(u){var n,a=1,t=.001,i=1-Math.pow(t,1/300),r=0,s=.6,o=ki(),e=Wn(c),l=j("tick","end");function c(){h(),l.call("tick",n),a<t&&(e.stop(),l.call("end",n))}function h(){var e,t,n=u.length;for(a+=(r-a)*i,o.each(function(e){e(a)}),e=0;e<n;++e)null==(t=u[e]).fx?t.x+=t.vx*=s:(t.x=t.fx,t.vx=0),null==t.fy?t.y+=t.vy*=s:(t.y=t.fy,t.vy=0)}function d(){for(var e,t,n,a=0,i=u.length;a<i;++a){(e=u[a]).index=a,(isNaN(e.x)||isNaN(e.y))&&(t=10*Math.sqrt(a),n=a*Fr,e.x=t*Math.cos(n),e.y=t*Math.sin(n)),(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function f(e){return e.initialize&&e.initialize(u),e}return null==u&&(u=[]),d(),n={tick:h,restart:function(){return e.restart(c),n},stop:function(){return e.stop(),n},nodes:function(e){return arguments.length?(u=e,d(),o.each(f),n):u},alpha:function(e){return arguments.length?(a=+e,n):a},alphaMin:function(e){return arguments.length?(t=+e,n):t},alphaDecay:function(e){return arguments.length?(i=+e,n):+i},alphaTarget:function(e){return arguments.length?(r=+e,n):r},velocityDecay:function(e){return arguments.length?(s=1-e,n):1-s},force:function(e,t){return 1<arguments.length?(null==t?o.remove(e):o.set(e,f(t)),n):o.get(e)},find:function(e,t,n){var a,i,r,s,o,l=0,c=u.length;for(null==n?n=1/0:n*=n,l=0;l<c;++l)(r=(a=e-(s=u[l]).x)*a+(i=t-s.y)*i)<n&&(o=s,n=r);return o},on:function(e,t){return 1<arguments.length?(l.on(e,t),n):l.on(e)}}},V.forceX=function(n){var i,r,s,a=Tr(.1);function t(e){for(var t,n=0,a=i.length;n<a;++n)(t=i[n]).vx+=(s[n]-t.x)*r[n]*e}function o(){if(i){var e,t=i.length;for(r=new Array(t),s=new Array(t),e=0;e<t;++e)r[e]=isNaN(s[e]=+n(i[e],e,i))?0:+a(i[e],e,i)}}return"function"!=typeof n&&(n=Tr(null==n?0:+n)),t.initialize=function(e){i=e,o()},t.strength=function(e){return arguments.length?(a="function"==typeof e?e:Tr(+e),o(),t):a},t.x=function(e){return arguments.length?(n="function"==typeof e?e:Tr(+e),o(),t):n},t},V.forceY=function(n){var i,r,s,a=Tr(.1);function t(e){for(var t,n=0,a=i.length;n<a;++n)(t=i[n]).vy+=(s[n]-t.y)*r[n]*e}function o(){if(i){var e,t=i.length;for(r=new Array(t),s=new Array(t),e=0;e<t;++e)r[e]=isNaN(s[e]=+n(i[e],e,i))?0:+a(i[e],e,i)}}return"function"!=typeof n&&(n=Tr(null==n?0:+n)),t.initialize=function(e){i=e,o()},t.strength=function(e){return arguments.length?(a="function"==typeof e?e:Tr(+e),o(),t):a},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Tr(+e),o(),t):n},t},V.formatDefaultLocale=Qr,V.formatLocale=Xr,V.formatSpecifier=Hr,V.precisionFixed=Jr,V.precisionPrefix=Zr,V.precisionRound=es,V.geoArea=function(e){return Vs.reset(),$s(e,js),2*Vs},V.geoBounds=function(e){var t,n,a,i,r,s,o;if(no=to=-(Zs=eo=1/0),oo=[],$s(e,Do),n=oo.length){for(oo.sort(Ro),t=1,r=[a=oo[0]];t<n;++t)No(a,(i=oo[t])[0])||No(a,i[1])?(Oo(a[0],i[1])>Oo(a[0],a[1])&&(a[1]=i[1]),Oo(i[0],a[1])>Oo(a[0],a[1])&&(a[0]=i[0])):r.push(a=i);for(s=-1/0,t=0,a=r[n=r.length-1];t<=n;a=i,++t)i=r[t],(o=Oo(a[1],i[0]))>s&&(s=o,Zs=i[0],to=a[1])}return oo=lo=null,Zs===1/0||eo===1/0?[[NaN,NaN],[NaN,NaN]]:[[Zs,eo],[to,no]]},V.geoCentroid=function(e){co=uo=ho=fo=po=mo=go=vo=yo=_o=bo=0,$s(e,Fo);var t=yo,n=_o,a=bo,i=t*t+n*n+a*a;return i<1e-12&&(t=mo,n=go,a=vo,uo<rs&&(t=ho,n=fo,a=po),(i=t*t+n*n+a*a)<1e-12)?[NaN,NaN]:[ps(n,t)*us,xs(a/Ts(i))*us]},V.geoCircle=function(){var a,i,r=Ko([0,0]),s=Ko(90),o=Ko(6),l={point:function(e,t){a.push(e=i(e,t)),e[0]*=us,e[1]*=us}};function t(){var e=r.apply(this,arguments),t=s.apply(this,arguments)*hs,n=o.apply(this,arguments)*hs;return a=[],i=Jo(-e[0]*hs,-e[1]*hs,0).invert,al(l,t,n,1),e={type:"Polygon",coordinates:[a]},a=i=null,e}return t.center=function(e){return arguments.length?(r="function"==typeof e?e:Ko([+e[0],+e[1]]),t):r},t.radius=function(e){return arguments.length?(s="function"==typeof e?e:Ko(+e),t):s},t.precision=function(e){return arguments.length?(o="function"==typeof e?e:Ko(+e),t):o},t},V.geoClipAntimeridian=ml,V.geoClipCircle=gl,V.geoClipExtent=function(){var t,n,a,i=0,r=0,s=960,o=500;return a={stream:function(e){return t&&n===e?t:t=_l(i,r,s,o)(n=e)},extent:function(e){return arguments.length?(i=+e[0][0],r=+e[0][1],s=+e[1][0],o=+e[1][1],t=n=null,a):[[i,r],[s,o]]}}},V.geoClipRectangle=_l,V.geoContains=function(e,t){return(e&&Ml.hasOwnProperty(e.type)?Ml[e.type]:Ll)(e,t)},V.geoDistance=Il,V.geoGraticule=Ul,V.geoGraticule10=function(){return Ul()()},V.geoInterpolate=function(e,t){var n=e[0]*hs,a=e[1]*hs,i=t[0]*hs,r=t[1]*hs,s=ms(a),o=bs(a),l=ms(r),c=bs(r),u=s*ms(n),h=s*bs(n),d=l*ms(i),f=l*bs(i),p=2*xs(Ts(Cs(r-a)+s*l*Cs(i-n))),m=bs(p),g=p?function(e){var t=bs(e*=p)/m,n=bs(p-e)/m,a=n*u+t*d,i=n*h+t*f,r=n*o+t*c;return[ps(i,a)*us,ps(r,Ts(a*a+i*i))*us]}:function(){return[n*us,a*us]};return g.distance=p,g},V.geoLength=El,V.geoPath=function(t,n){var a,i,r=4.5;function s(e){return e&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),$s(e,a(i))),i.result()}return s.area=function(e){return $s(e,a(Xl)),Xl.result()},s.measure=function(e){return $s(e,a(Rc)),Rc.result()},s.bounds=function(e){return $s(e,a(cc)),cc.result()},s.centroid=function(e){return $s(e,a(_c)),_c.result()},s.projection=function(e){return arguments.length?(a=null==e?(t=null,Hl):(t=e).stream,s):t},s.context=function(e){return arguments.length?(i=null==e?(n=null,new Bc):new Ac(n=e),"function"!=typeof r&&i.pointRadius(r),s):n},s.pointRadius=function(e){return arguments.length?(r="function"==typeof e?e:(i.pointRadius(+e),+e),s):r},s.projection(t).context(n)},V.geoAlbers=iu,V.geoAlbersUsa=function(){var t,n,i,r,s,a,o=iu(),l=au().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=au().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){a=[e,t]}};function h(e){var t=e[0],n=e[1];return a=null,i.point(t,n),a||(r.point(t,n),a)||(s.point(t,n),a)}function d(){return t=n=null,h}return h.invert=function(e){var t=o.scale(),n=o.translate(),a=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(.12<=i&&i<.234&&-.425<=a&&a<-.214?l:.166<=i&&i<.234&&-.214<=a&&a<-.115?c:o).invert(e)},h.stream=function(e){return t&&n===e?t:(a=[o.stream(n=e),l.stream(e),c.stream(e)],i=a.length,t={point:function(e,t){for(var n=-1;++n<i;)a[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)a[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)a[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)a[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)a[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)a[e].polygonEnd()}});var a,i},h.precision=function(e){return arguments.length?(o.precision(e),l.precision(e),c.precision(e),d()):o.precision()},h.scale=function(e){return arguments.length?(o.scale(e),l.scale(.35*e),c.scale(e),h.translate(o.translate())):o.scale()},h.translate=function(e){if(!arguments.length)return o.translate();var t=o.scale(),n=+e[0],a=+e[1];return i=o.translate(e).clipExtent([[n-.455*t,a-.238*t],[n+.455*t,a+.238*t]]).stream(u),r=l.translate([n-.307*t,a+.201*t]).clipExtent([[n-.425*t+rs,a+.12*t+rs],[n-.214*t-rs,a+.234*t-rs]]).stream(u),s=c.translate([n-.205*t,a+.212*t]).clipExtent([[n-.214*t+rs,a+.166*t+rs],[n-.115*t-rs,a+.234*t-rs]]).stream(u),d()},h.fitExtent=function(e,t){return Gc(h,e,t)},h.fitSize=function(e,t){return Yc(h,e,t)},h.fitWidth=function(e,t){return qc(h,e,t)},h.fitHeight=function(e,t){return zc(h,e,t)},h.scale(1070)},V.geoAzimuthalEqualArea=function(){return Zc(ou).scale(124.75).clipAngle(179.999)},V.geoAzimuthalEqualAreaRaw=ou,V.geoAzimuthalEquidistant=function(){return Zc(lu).scale(79.4188).clipAngle(179.999)},V.geoAzimuthalEquidistantRaw=lu,V.geoConicConformal=function(){return tu(du).scale(109.5).parallels([30,30])},V.geoConicConformalRaw=du,V.geoConicEqualArea=au,V.geoConicEqualAreaRaw=nu,V.geoConicEquidistant=function(){return tu(pu).scale(131.154).center([0,13.9389])},V.geoConicEquidistantRaw=pu,V.geoEqualEarth=function(){return Zc(bu).scale(177.158)},V.geoEqualEarthRaw=bu,V.geoEquirectangular=function(){return Zc(fu).scale(152.63)},V.geoEquirectangularRaw=fu,V.geoGnomonic=function(){return Zc(Su).scale(144.049).clipAngle(60)},V.geoGnomonicRaw=Su,V.geoIdentity=function(){var t,n,a,i,r,s,o=1,l=0,c=0,u=1,h=1,d=Hl,f=null,p=Hl;function m(){return i=r=null,s}return s={stream:function(e){return i&&r===e?i:i=d(p(r=e))},postclip:function(e){return arguments.length?(p=e,f=t=n=a=null,m()):p},clipExtent:function(e){return arguments.length?(p=null==e?(f=t=n=a=null,Hl):_l(f=+e[0][0],t=+e[0][1],n=+e[1][0],a=+e[1][1]),m()):null==f?null:[[f,t],[n,a]]},scale:function(e){return arguments.length?(d=Tu((o=+e)*u,o*h,l,c),m()):o},translate:function(e){return arguments.length?(d=Tu(o*u,o*h,l=+e[0],c=+e[1]),m()):[l,c]},reflectX:function(e){return arguments.length?(d=Tu(o*(u=e?-1:1),o*h,l,c),m()):u<0},reflectY:function(e){return arguments.length?(d=Tu(o*u,o*(h=e?-1:1),l,c),m()):h<0},fitExtent:function(e,t){return Gc(s,e,t)},fitSize:function(e,t){return Yc(s,e,t)},fitWidth:function(e,t){return qc(s,e,t)},fitHeight:function(e,t){return zc(s,e,t)}}},V.geoProjection=Zc,V.geoProjectionMutator=eu,V.geoMercator=function(){return uu(cu).scale(961/cs)},V.geoMercatorRaw=cu,V.geoNaturalEarth1=function(){return Zc(wu).scale(175.295)},V.geoNaturalEarth1Raw=wu,V.geoOrthographic=function(){return Zc(Pu).scale(249.5).clipAngle(90+rs)},V.geoOrthographicRaw=Pu,V.geoStereographic=function(){return Zc(xu).scale(250).clipAngle(142)},V.geoStereographicRaw=xu,V.geoTransverseMercator=function(){var e=uu(Cu),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)},V.geoTransverseMercatorRaw=Cu,V.geoRotation=nl,V.geoStream=$s,V.geoTransform=function(e){return{stream:jc(e)}},V.cluster=function(){var o=Du,l=1,c=1,u=!1;function t(t){var a,i=0;t.eachAfter(function(e){var t,n=e.children;n?(e.x=(t=n).reduce(Eu,0)/t.length,e.y=1+n.reduce(Au,0)):(e.x=a?i+=o(e,a):0,e.y=0,a=e)});var e=function(e){for(var t;t=e.children;)e=t[0];return e}(t),n=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(t),r=e.x-o(e,n)/2,s=n.x+o(n,e)/2;return t.eachAfter(u?function(e){e.x=(e.x-t.x)*l,e.y=(t.y-e.y)*c}:function(e){e.x=(e.x-r)/(s-r)*l,e.y=(1-(t.y?e.y/t.y:1))*c})}return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(u=!1,l=+e[0],c=+e[1],t):u?null:[l,c]},t.nodeSize=function(e){return arguments.length?(u=!0,l=+e[0],c=+e[1],t):u?[l,c]:null},t},V.hierarchy=Iu,V.pack=function(){var t=null,n=1,a=1,i=Ku;function r(e){return e.x=n/2,e.y=a/2,t?e.eachBefore(Ju(t)).eachAfter(Zu(i,.5)).eachBefore(eh(1)):e.eachBefore(Ju(Qu)).eachAfter(Zu(Ku,1)).eachAfter(Zu(i,e.r/Math.min(n,a))).eachBefore(eh(Math.min(n,a)/(2*e.r))),e}return r.radius=function(e){return arguments.length?(t=null==e?null:Wu(e),r):t},r.size=function(e){return arguments.length?(n=+e[0],a=+e[1],r):[n,a]},r.padding=function(e){return arguments.length?(i="function"==typeof e?e:Xu(+e),r):i},r},V.packSiblings=function(e){return zu(e),e},V.packEnclose=Nu,V.partition=function(){var n=1,a=1,o=0,i=!1;function t(e){var r,s,t=e.height+1;return e.x0=e.y0=o,e.x1=n,e.y1=a/t,e.eachBefore((r=a,s=t,function(e){e.children&&nh(e,e.x0,r*(e.depth+1)/s,e.x1,r*(e.depth+2)/s);var t=e.x0,n=e.y0,a=e.x1-o,i=e.y1-o;a<t&&(t=a=(t+a)/2),i<n&&(n=i=(n+i)/2),e.x0=t,e.y0=n,e.x1=a,e.y1=i})),i&&e.eachBefore(th),e}return t.round=function(e){return arguments.length?(i=!!e,t):i},t.size=function(e){return arguments.length?(n=+e[0],a=+e[1],t):[n,a]},t.padding=function(e){return arguments.length?(o=+e,t):o},t},V.stratify=function(){var h=rh,d=sh;function t(e){for(var t,n,a,i,r,s,o=e.length,l=new Array(o),c={},u=0;u<o;++u)t=e[u],i=l[u]=new Ou(t),null!=(r=h(t,u,e))&&(r+="")&&(c[s="$"+(i.id=r)]=s in c?ih:i);for(u=0;u<o;++u)if(i=l[u],null!=(r=d(e[u],u,e))&&(r+="")){if(!(a=c["$"+r]))throw new Error("missing: "+r);if(a===ih)throw new Error("ambiguous: "+r);a.children?a.children.push(i):a.children=[i],i.parent=a}else{if(n)throw new Error("multiple roots");n=i}if(!n)throw new Error("no root");if(n.parent=ah,n.eachBefore(function(e){e.depth=e.parent.depth+1,--o}).eachBefore(Lu),n.parent=null,0<o)throw new Error("cycle");return n}return t.id=function(e){return arguments.length?(h=Wu(e),t):h},t.parentId=function(e){return arguments.length?(d=Wu(e),t):d},t},V.tree=function(){var _=oh,c=1,u=1,h=null;function t(o){var t,n,a,e,i,r,s,l=function(){for(var e,t,n,a,i,r=new uh(o,0),s=[r];e=s.pop();)if(n=e._.children)for(e.children=new Array(i=n.length),a=i-1;0<=a;--a)s.push(t=e.children[a]=new uh(n[a],a)),t.parent=e;return(r.parent=new uh(null,0)).children=[r],r}();return l.eachAfter(d),l.parent.m=-l.z,l.eachBefore(f),h?o.eachBefore(p):((a=n=t=o).eachBefore(function(e){e.x<t.x&&(t=e),e.x>n.x&&(n=e),e.depth>a.depth&&(a=e)}),e=t===n?1:_(t,n)/2,i=e-t.x,r=c/(n.x+e+i),s=u/(a.depth||1),o.eachBefore(function(e){e.x=(e.x+i)*r,e.y=e.depth*s})),o}function d(r){var e,t=r.children,n=r.parent.children,y=r.i?n[r.i-1]:null;t?(function(){for(var e,t=0,n=0,a=r.children,i=a.length;0<=--i;)(e=a[i]).z+=t,e.m+=t,t+=e.s+(n+=e.c)}(),e=(t[0].z+t[t.length-1].z)/2,y?(r.z=y.z+_(r._,y._),r.m=r.z-e):r.z=e):y&&(r.z=y.z+_(r._,y._)),r.parent.A=function(e,t){if(y){for(var n,a=e,i=e,r=y,s=a.parent.children[0],o=a.m,l=i.m,c=r.m,u=s.m;r=ch(r),a=lh(a),r&&a;)s=lh(s),(i=ch(i)).a=e,0<(n=r.z+c-a.z-o+_(r._,a._))&&(g=e,v=t,h=(m=r).a.parent===g.parent?m.a:v,p=void 0,p=(f=n)/((d=e).i-h.i),d.c-=p,d.s+=f,h.c+=p,d.z+=f,d.m+=f,o+=n,l+=n),c+=r.m,o+=a.m,u+=s.m,l+=i.m;r&&!ch(i)&&(i.t=r,i.m+=c-l),a&&!lh(s)&&(s.t=a,s.m+=o-u,t=e)}var h,d,f,p,m,g,v;return t}(r,r.parent.A||n[0])}function f(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function p(e){e.x*=c,e.y=e.depth*u}return t.separation=function(e){return arguments.length?(_=e,t):_},t.size=function(e){return arguments.length?(h=!1,c=+e[0],u=+e[1],t):h?null:[c,u]},t.nodeSize=function(e){return arguments.length?(h=!0,c=+e[0],u=+e[1],t):h?[c,u]:null},t},V.treemap=function(){var s=ph,t=!1,n=1,a=1,o=[0],l=Ku,c=Ku,u=Ku,h=Ku,d=Ku;function i(e){return e.x0=e.y0=0,e.x1=n,e.y1=a,e.eachBefore(r),o=[0],t&&e.eachBefore(th),e}function r(e){var t=o[e.depth],n=e.x0+t,a=e.y0+t,i=e.x1-t,r=e.y1-t;i<n&&(n=i=(n+i)/2),r<a&&(a=r=(a+r)/2),e.x0=n,e.y0=a,e.x1=i,e.y1=r,e.children&&(t=o[e.depth+1]=l(e)/2,n+=d(e)-t,a+=c(e)-t,(i-=u(e)-t)<n&&(n=i=(n+i)/2),(r-=h(e)-t)<a&&(a=r=(a+r)/2),s(e,n,a,i,r))}return i.round=function(e){return arguments.length?(t=!!e,i):t},i.size=function(e){return arguments.length?(n=+e[0],a=+e[1],i):[n,a]},i.tile=function(e){return arguments.length?(s=Wu(e),i):s},i.padding=function(e){return arguments.length?i.paddingInner(e).paddingOuter(e):i.paddingInner()},i.paddingInner=function(e){return arguments.length?(l="function"==typeof e?e:Xu(+e),i):l},i.paddingOuter=function(e){return arguments.length?i.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):i.paddingTop()},i.paddingTop=function(e){return arguments.length?(c="function"==typeof e?e:Xu(+e),i):c},i.paddingRight=function(e){return arguments.length?(u="function"==typeof e?e:Xu(+e),i):u},i.paddingBottom=function(e){return arguments.length?(h="function"==typeof e?e:Xu(+e),i):h},i.paddingLeft=function(e){return arguments.length?(d="function"==typeof e?e:Xu(+e),i):d},i},V.treemapBinary=function(e,t,n,a,i){var r,s,y=e.children,o=y.length,_=new Array(o+1);for(_[0]=s=r=0;r<o;++r)_[r+1]=s+=y[r].value;!function e(t,n,a,i,r,s,o){if(n-1<=t){var l=y[t];return l.x0=i,l.y0=r,l.x1=s,l.y1=o,0}for(var c=_[t],u=a/2+c,h=t+1,d=n-1;h<d;){var f=h+d>>>1;_[f]<u?h=1+f:d=f}u-_[h-1]<_[h]-u&&t+1<h&&--h;var p,m,g=_[h]-c,v=a-g;o-r<s-i?(e(t,h,g,i,r,p=(i*v+s*g)/a,o),e(h,n,v,p,r,s,o)):(e(t,h,g,i,r,s,m=(r*v+o*g)/a),e(h,n,v,i,m,s,o))}(0,o,e.value,t,n,a,i)},V.treemapDice=nh,V.treemapSlice=hh,V.treemapSliceDice=function(e,t,n,a,i){(1&e.depth?hh:nh)(e,t,n,a,i)},V.treemapSquarify=ph,V.treemapResquarify=mh,V.interpolate=un,V.interpolateArray=nn,V.interpolateBasis=Yt,V.interpolateBasisClosed=qt,V.interpolateDate=an,V.interpolateDiscrete=function(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}},V.interpolateHue=function(e,t){var n=Kt(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},V.interpolateNumber=rn,V.interpolateObject=sn,V.interpolateRound=hn,V.interpolateString=cn,V.interpolateTransformCss=bn,V.interpolateTransformSvg=Sn,V.interpolateZoom=Pn,V.interpolateRgb=Jt,V.interpolateRgbBasis=en,V.interpolateRgbBasisClosed=tn,V.interpolateHsl=Cn,V.interpolateHslLong=Dn,V.interpolateLab=function(t,e){var n=Qt((t=Dt(t)).l,(e=Dt(e)).l),a=Qt(t.a,e.a),i=Qt(t.b,e.b),r=Qt(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=a(e),t.b=i(e),t.opacity=r(e),t+""}},V.interpolateHcl=An,V.interpolateHclLong=kn,V.interpolateCubehelix=Ln,V.interpolateCubehelixLong=On,V.piecewise=function(e,t){for(var n=0,a=t.length-1,i=t[0],r=new Array(a<0?0:a);n<a;)r[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(a-1,Math.floor(e*=a)));return r[t](e-t)}},V.quantize=function(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e(a/(t-1));return n},V.path=wi,V.polygonArea=function(e){for(var t,n=-1,a=e.length,i=e[a-1],r=0;++n<a;)t=i,i=e[n],r+=t[1]*i[0]-t[0]*i[1];return r/2},V.polygonCentroid=function(e){for(var t,n,a=-1,i=e.length,r=0,s=0,o=e[i-1],l=0;++a<i;)t=o,o=e[a],l+=n=t[0]*o[1]-o[0]*t[1],r+=(t[0]+o[0])*n,s+=(t[1]+o[1])*n;return[r/(l*=3),s/l]},V.polygonHull=function(e){if((t=e.length)<3)return null;for(var t,n=new Array(t),a=new Array(t),i=0;i<t;++i)n[i]=[+e[i][0],+e[i][1],i];for(n.sort(gh),i=0;i<t;++i)a[i]=[n[i][0],-n[i][1]];var r=vh(n),s=vh(a),o=s[0]===r[0],l=s[s.length-1]===r[r.length-1],c=[];for(i=r.length-1;0<=i;--i)c.push(e[n[r[i]][2]]);for(i=+o;i<s.length-l;++i)c.push(e[n[s[i]][2]]);return c},V.polygonContains=function(e,t){for(var n,a,i=e.length,r=e[i-1],s=t[0],o=t[1],l=r[0],c=r[1],u=!1,h=0;h<i;++h)n=(r=e[h])[0],(a=r[1])>o!=o<c&&s<(l-n)*(o-a)/(c-a)+n&&(u=!u),l=n,c=a;return u},V.polygonLength=function(e){for(var t,n,a=-1,i=e.length,r=e[i-1],s=r[0],o=r[1],l=0;++a<i;)t=s,n=o,t-=s=(r=e[a])[0],n-=o=r[1],l+=Math.sqrt(t*t+n*n);return l},V.quadtree=Er,V.randomUniform=_h,V.randomNormal=bh,V.randomLogNormal=Sh,V.randomBates=wh,V.randomIrwinHall=Th,V.randomExponential=Ph,V.scaleBand=kh,V.scalePoint=function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(n())},t}(kh().paddingInner(1))},V.scaleIdentity=function e(){var t=[0,1];function n(e){return+e}return(n.invert=n).domain=n.range=function(e){return arguments.length?(t=Ch.call(e,Mh),n):t.slice()},n.copy=function(){return e().domain(t)},Bh(n)},V.scaleLinear=function e(){var t=Fh(Lh,rn);return t.copy=function(){return Nh(t,e())},Bh(t)},V.scaleLog=function e(){var t=Fh(jh,Uh).domain([1,10]),d=t.domain,f=10,p=Yh(10),m=Gh(10);function n(){return p=Yh(f),m=Gh(f),d()[0]<0&&(p=qh(p),m=qh(m)),t}return t.base=function(e){return arguments.length?(f=+e,n()):f},t.domain=function(e){return arguments.length?(d(e),n()):d()},t.ticks=function(e){var t,n=d(),a=n[0],i=n[n.length-1];(t=i<a)&&(l=a,a=i,i=l);var r,s,o,l=p(a),c=p(i),u=null==e?10:+e,h=[];if(!(f%1)&&c-l<u){if(l=Math.round(l)-1,c=Math.round(c)+1,0<a){for(;l<c;++l)for(s=1,r=m(l);s<f;++s)if(!((o=r*s)<a)){if(i<o)break;h.push(o)}}else for(;l<c;++l)for(s=f-1,r=m(l);1<=s;--s)if(!((o=r*s)<a)){if(i<o)break;h.push(o)}}else h=v(l,c,Math.min(c-l,u)).map(m);return t?h.reverse():h},t.tickFormat=function(e,n){if(null==n&&(n=10===f?".0e":","),"function"!=typeof n&&(n=V.format(n)),e===1/0)return n;null==e&&(e=10);var a=Math.max(1,f*e/t.ticks().length);return function(e){var t=e/m(Math.round(p(e)));return t*f<f-.5&&(t*=f),t<=a?n(e):""}},t.nice=function(){return d(Vh(d(),{floor:function(e){return m(Math.floor(p(e)))},ceil:function(e){return m(Math.ceil(p(e)))}}))},t.copy=function(){return Nh(t,e().base(f))},t},V.scaleOrdinal=Ah,V.scaleImplicit=Eh,V.scalePow=Wh,V.scaleSqrt=function(){return Wh().exponent(.5)},V.scaleQuantile=function e(){var i=[],n=[],a=[];function r(){var e=0,t=Math.max(1,n.length);for(a=new Array(t-1);++e<t;)a[e-1]=b(i,e/t);return s}function s(e){if(!isNaN(e=+e))return n[m(a,e)]}return s.invertExtent=function(e){var t=n.indexOf(e);return t<0?[NaN,NaN]:[0<t?a[t-1]:i[0],t<a.length?a[t]:i[i.length-1]]},s.domain=function(e){if(!arguments.length)return i.slice();i=[];for(var t,n=0,a=e.length;n<a;++n)null==(t=e[n])||isNaN(t=+t)||i.push(t);return i.sort(o),r()},s.range=function(e){return arguments.length?(n=Dh.call(e),r()):n.slice()},s.quantiles=function(){return a.slice()},s.copy=function(){return e().domain(i).range(n)},s},V.scaleQuantize=function e(){var n=0,a=1,i=1,r=[.5],s=[0,1];function t(e){if(e<=e)return s[m(r,e,0,i)]}function o(){var e=-1;for(r=new Array(i);++e<i;)r[e]=((e+1)*a-(e-i)*n)/(i+1);return t}return t.domain=function(e){return arguments.length?(n=+e[0],a=+e[1],o()):[n,a]},t.range=function(e){return arguments.length?(i=(s=Dh.call(e)).length-1,o()):s.slice()},t.invertExtent=function(e){var t=s.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,r[0]]:i<=t?[r[i-1],a]:[r[t-1],r[t]]},t.copy=function(){return e().domain([n,a]).range(s)},Bh(t)},V.scaleThreshold=function e(){var n=[.5],a=[0,1],t=1;function i(e){if(e<=e)return a[m(n,e,0,t)]}return i.domain=function(e){return arguments.length?(n=Dh.call(e),t=Math.min(n.length,a.length-1),i):n.slice()},i.range=function(e){return arguments.length?(a=Dh.call(e),t=Math.min(n.length,a.length-1),i):a.slice()},i.invertExtent=function(e){var t=a.indexOf(e);return[n[t-1],n[t]]},i.copy=function(){return e().domain(n).range(a)},i},V.scaleTime=function(){return Cp(xd,wd,cd,sd,id,nd,ed,Jh,V.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},V.scaleUtc=function(){return Cp(Xd,Wd,Ld,Id,Ad,Dd,ed,Jh,V.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},V.scaleSequential=function e(n){var a=0,t=1,i=1,r=!1;function s(e){var t=(e-a)*i;return n(r?Math.max(0,Math.min(1,t)):t)}return s.domain=function(e){return arguments.length?(a=+e[0],t=+e[1],i=a===t?0:1/(t-a),s):[a,t]},s.clamp=function(e){return arguments.length?(r=!!e,s):r},s.interpolator=function(e){return arguments.length?(n=e,s):n},s.copy=function(){return e(n).domain([a,t]).clamp(r)},Bh(s)},V.scaleDiverging=function e(n){var t=0,a=.5,i=1,r=1,s=1,o=!1;function l(e){var t=.5+((e=+e)-a)*(e<a?r:s);return n(o?Math.max(0,Math.min(1,t)):t)}return l.domain=function(e){return arguments.length?(t=+e[0],a=+e[1],i=+e[2],r=t===a?0:.5/(a-t),s=a===i?0:.5/(i-a),l):[t,a,i]},l.clamp=function(e){return arguments.length?(o=!!e,l):o},l.interpolator=function(e){return arguments.length?(n=e,l):n},l.copy=function(){return e(n).domain([t,a,i]).clamp(o)},Bh(l)},V.schemeCategory10=Ep,V.schemeAccent=Ap,V.schemeDark2=kp,V.schemePaired=Ip,V.schemePastel1=Mp,V.schemePastel2=$p,V.schemeSet1=Lp,V.schemeSet2=Op,V.schemeSet3=Rp,V.interpolateBrBG=Bp,V.schemeBrBG=Fp,V.interpolatePRGn=jp,V.schemePRGn=Vp,V.interpolatePiYG=Hp,V.schemePiYG=Up,V.interpolatePuOr=Yp,V.schemePuOr=Gp,V.interpolateRdBu=zp,V.schemeRdBu=qp,V.interpolateRdGy=Kp,V.schemeRdGy=Wp,V.interpolateRdYlBu=Qp,V.schemeRdYlBu=Xp,V.interpolateRdYlGn=Zp,V.schemeRdYlGn=Jp,V.interpolateSpectral=tm,V.schemeSpectral=em,V.interpolateBuGn=am,V.schemeBuGn=nm,V.interpolateBuPu=rm,V.schemeBuPu=im,V.interpolateGnBu=om,V.schemeGnBu=sm,V.interpolateOrRd=cm,V.schemeOrRd=lm,V.interpolatePuBuGn=hm,V.schemePuBuGn=um,V.interpolatePuBu=fm,V.schemePuBu=dm,V.interpolatePuRd=mm,V.schemePuRd=pm,V.interpolateRdPu=vm,V.schemeRdPu=gm,V.interpolateYlGnBu=_m,V.schemeYlGnBu=ym,V.interpolateYlGn=Sm,V.schemeYlGn=bm,V.interpolateYlOrBr=wm,V.schemeYlOrBr=Tm,V.interpolateYlOrRd=xm,V.schemeYlOrRd=Pm,V.interpolateBlues=Dm,V.schemeBlues=Cm,V.interpolateGreens=Am,V.schemeGreens=Em,V.interpolateGreys=Im,V.schemeGreys=km,V.interpolatePurples=$m,V.schemePurples=Mm,V.interpolateReds=Om,V.schemeReds=Lm,V.interpolateOranges=Nm,V.schemeOranges=Rm,V.interpolateCubehelixDefault=Fm,V.interpolateRainbow=function(e){(e<0||1<e)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return jm.h=360*e-100,jm.s=1.5-1.5*t,jm.l=.8-.9*t,jm+""},V.interpolateWarm=Bm,V.interpolateCool=Vm,V.interpolateSinebow=function(e){var t;return e=(.5-e)*Math.PI,Um.r=255*(t=Math.sin(e))*t,Um.g=255*(t=Math.sin(e+Hm))*t,Um.b=255*(t=Math.sin(e+Gm))*t,Um+""},V.interpolateViridis=qm,V.interpolateMagma=zm,V.interpolateInferno=Wm,V.interpolatePlasma=Km,V.create=function(e){return Ee(H(e).call(document.documentElement))},V.creator=H,V.local=ke,V.matcher=Q,V.mouse=Le,V.namespace=U,V.namespaces=B,V.clientPoint=$e,V.select=Ee,V.selectAll=function(e){return"string"==typeof e?new Ce([document.querySelectorAll(e)],[document.documentElement]):new Ce([null==e?[]:e],xe)},V.selection=De,V.selector=Y,V.selectorAll=z,V.style=ie,V.touch=Oe,V.touches=function(e,t){null==t&&(t=Me().touches);for(var n=0,a=t?t.length:0,i=new Array(a);n<a;++n)i[n]=$e(e,t[n]);return i},V.window=ae,V.customEvent=we,V.arc=function(){var G=cg,Y=ug,q=Xm(0),z=null,W=hg,K=dg,X=fg,Q=null;function t(){var e,t,n,a,i,r,s,o,l,c,u,h,d,f,p,m,g,v,y,_,b,S,T,w,P,x,C,D,E,A,k,I,M,$,L,O,R,N,F=+G.apply(this,arguments),B=+Y.apply(this,arguments),V=W.apply(this,arguments)-sg,j=K.apply(this,arguments)-sg,U=Qm(j-V),H=V<j;if(Q=Q||(e=wi()),B<F&&(t=B,B=F,F=t),ig<B?og-ig<U?(Q.moveTo(B*Zm(V),B*ng(V)),Q.arc(0,0,B,V,j,!H),ig<F&&(Q.moveTo(F*Zm(j),F*ng(j)),Q.arc(0,0,F,j,V,H))):(o=r=V,l=s=j,u=c=U,h=X.apply(this,arguments)/2,d=ig<h&&(z?+z.apply(this,arguments):ag(F*F+B*B)),M=I=f=tg(Qm(B-F)/2,+q.apply(this,arguments)),ig<d&&(p=lg(d/F*ng(h)),m=lg(d/B*ng(h)),(c-=2*p)>ig?(o+=p*=H?1:-1,l-=p):(c=0,o=l=(V+j)/2),(u-=2*m)>ig?(r+=m*=H?1:-1,s-=m):(u=0,r=s=(V+j)/2)),g=B*Zm(r),v=B*ng(r),y=F*Zm(l),_=F*ng(l),ig<f&&(b=B*Zm(s),S=B*ng(s),T=F*Zm(o),w=F*ng(o),U<rg&&(P=ig<c?[g+(N=((O=y-b)*(v-S)-(R=_-S)*(g-b))/(R*($=T-g)-O*(L=w-v)))*$,v+N*L]:[y,_],A=1/ng((1<(n=((x=g-P[0])*(D=b-P[0])+(C=v-P[1])*(E=S-P[1]))/(ag(x*x+C*C)*ag(D*D+E*E)))?0:n<-1?rg:Math.acos(n))/2),k=ag(P[0]*P[0]+P[1]*P[1]),I=tg(f,(F-k)/(A-1)),M=tg(f,(B-k)/(1+A)))),ig<u?ig<M?(a=pg(T,w,g,v,B,M,H),i=pg(b,S,y,_,B,M,H),Q.moveTo(a.cx+a.x01,a.cy+a.y01),M<f?Q.arc(a.cx,a.cy,M,Jm(a.y01,a.x01),Jm(i.y01,i.x01),!H):(Q.arc(a.cx,a.cy,M,Jm(a.y01,a.x01),Jm(a.y11,a.x11),!H),Q.arc(0,0,B,Jm(a.cy+a.y11,a.cx+a.x11),Jm(i.cy+i.y11,i.cx+i.x11),!H),Q.arc(i.cx,i.cy,M,Jm(i.y11,i.x11),Jm(i.y01,i.x01),!H))):(Q.moveTo(g,v),Q.arc(0,0,B,r,s,!H)):Q.moveTo(g,v),ig<F&&ig<c?ig<I?(a=pg(y,_,b,S,F,-I,H),i=pg(g,v,T,w,F,-I,H),Q.lineTo(a.cx+a.x01,a.cy+a.y01),I<f?Q.arc(a.cx,a.cy,I,Jm(a.y01,a.x01),Jm(i.y01,i.x01),!H):(Q.arc(a.cx,a.cy,I,Jm(a.y01,a.x01),Jm(a.y11,a.x11),!H),Q.arc(0,0,F,Jm(a.cy+a.y11,a.cx+a.x11),Jm(i.cy+i.y11,i.cx+i.x11),H),Q.arc(i.cx,i.cy,I,Jm(i.y11,i.x11),Jm(i.y01,i.x01),!H))):Q.arc(0,0,F,l,o,H):Q.lineTo(y,_)):Q.moveTo(0,0),Q.closePath(),e)return Q=null,e+""||null}return t.centroid=function(){var e=(+G.apply(this,arguments)+ +Y.apply(this,arguments))/2,t=(+W.apply(this,arguments)+ +K.apply(this,arguments))/2-rg/2;return[Zm(t)*e,ng(t)*e]},t.innerRadius=function(e){return arguments.length?(G="function"==typeof e?e:Xm(+e),t):G},t.outerRadius=function(e){return arguments.length?(Y="function"==typeof e?e:Xm(+e),t):Y},t.cornerRadius=function(e){return arguments.length?(q="function"==typeof e?e:Xm(+e),t):q},t.padRadius=function(e){return arguments.length?(z=null==e?null:"function"==typeof e?e:Xm(+e),t):z},t.startAngle=function(e){return arguments.length?(W="function"==typeof e?e:Xm(+e),t):W},t.endAngle=function(e){return arguments.length?(K="function"==typeof e?e:Xm(+e),t):K},t.padAngle=function(e){return arguments.length?(X="function"==typeof e?e:Xm(+e),t):X},t.context=function(e){return arguments.length?(Q=null==e?null:e,t):Q},t},V.area=bg,V.line=_g,V.pie=function(){var p=Tg,m=Sg,g=null,v=Xm(0),y=Xm(og),_=Xm(0);function t(n){for(var e,t,a,i,r=n.length,s=0,o=new Array(r),l=new Array(r),c=+v.apply(this,arguments),u=Math.min(og,Math.max(-og,y.apply(this,arguments)-c)),h=Math.min(Math.abs(u)/r,_.apply(this,arguments)),d=h*(u<0?-1:1),f=0;f<r;++f)0<(i=l[o[f]=f]=+p(n[f],f,n))&&(s+=i);for(null!=m?o.sort(function(e,t){return m(l[e],l[t])}):null!=g&&o.sort(function(e,t){return g(n[e],n[t])}),f=0,t=s?(u-r*d)/s:0;f<r;++f,c=a)e=o[f],a=c+(0<(i=l[e])?i*t:0)+d,l[e]={data:n[e],index:f,value:i,startAngle:c,endAngle:a,padAngle:h};return l}return t.value=function(e){return arguments.length?(p="function"==typeof e?e:Xm(+e),t):p},t.sortValues=function(e){return arguments.length?(m=e,g=null,t):m},t.sort=function(e){return arguments.length?(g=e,m=null,t):g},t.startAngle=function(e){return arguments.length?(v="function"==typeof e?e:Xm(+e),t):v},t.endAngle=function(e){return arguments.length?(y="function"==typeof e?e:Xm(+e),t):y},t.padAngle=function(e){return arguments.length?(_="function"==typeof e?e:Xm(+e),t):_},t},V.areaRadial=Eg,V.radialArea=Eg,V.lineRadial=Dg,V.radialLine=Dg,V.pointRadial=Ag,V.linkHorizontal=function(){return $g(Lg)},V.linkVertical=function(){return $g(Og)},V.linkRadial=function(){var e=$g(Rg);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e},V.symbol=function(){var t=Xm(Ng),n=Xm(64),a=null;function i(){var e;if(a=a||(e=wi()),t.apply(this,arguments).draw(a,+n.apply(this,arguments)),e)return a=null,e+""||null}return i.type=function(e){return arguments.length?(t="function"==typeof e?e:Xm(e),i):t},i.size=function(e){return arguments.length?(n="function"==typeof e?e:Xm(+e),i):n},i.context=function(e){return arguments.length?(a=null==e?null:e,i):a},i},V.symbols=Zg,V.symbolCircle=Ng,V.symbolCross=Fg,V.symbolDiamond=jg,V.symbolSquare=qg,V.symbolStar=Yg,V.symbolTriangle=Wg,V.symbolWye=Jg,V.curveBasisClosed=function(e){return new av(e)},V.curveBasisOpen=function(e){return new iv(e)},V.curveBasis=function(e){return new nv(e)},V.curveBundle=sv,V.curveCardinalClosed=hv,V.curveCardinalOpen=fv,V.curveCardinal=cv,V.curveCatmullRomClosed=yv,V.curveCatmullRomOpen=bv,V.curveCatmullRom=gv,V.curveLinearClosed=function(e){return new Sv(e)},V.curveLinear=gg,V.curveMonotoneX=function(e){return new Cv(e)},V.curveMonotoneY=function(e){return new Dv(e)},V.curveNatural=function(e){return new Av(e)},V.curveStep=function(e){return new Iv(e,.5)},V.curveStepAfter=function(e){return new Iv(e,1)},V.curveStepBefore=function(e){return new Iv(e,0)},V.stack=function(){var h=Xm([]),d=$v,f=Mv,p=Lv;function t(e){for(var t,n=h.apply(this,arguments),a=e.length,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o,l=n[s],c=r[s]=new Array(a),u=0;u<a;++u)c[u]=o=[0,+p(e[u],l,u,e)],o.data=e[u];c.key=l}for(s=0,t=d(r);s<i;++s)r[t[s]].index=s;return f(r,t),r}return t.keys=function(e){return arguments.length?(h="function"==typeof e?e:Xm(kg.call(e)),t):h},t.value=function(e){return arguments.length?(p="function"==typeof e?e:Xm(+e),t):p},t.order=function(e){return arguments.length?(d=null==e?$v:"function"==typeof e?e:Xm(kg.call(e)),t):d},t.offset=function(e){return arguments.length?(f=null==e?Mv:e,t):f},t},V.stackOffsetExpand=function(e,t){if(0<(a=e.length)){for(var n,a,i,r=0,s=e[0].length;r<s;++r){for(i=n=0;n<a;++n)i+=e[n][r][1]||0;if(i)for(n=0;n<a;++n)e[n][r][1]/=i}Mv(e,t)}},V.stackOffsetDiverging=function(e,t){if(1<(o=e.length))for(var n,a,i,r,s,o,l=0,c=e[t[0]].length;l<c;++l)for(n=r=s=0;n<o;++n)0<=(i=(a=e[t[n]][l])[1]-a[0])?(a[0]=r,a[1]=r+=i):i<0?(a[1]=s,a[0]=s+=i):a[0]=r},V.stackOffsetNone=Mv,V.stackOffsetSilhouette=function(e,t){if(0<(n=e.length)){for(var n,a=0,i=e[t[0]],r=i.length;a<r;++a){for(var s=0,o=0;s<n;++s)o+=e[s][a][1]||0;i[a][1]+=i[a][0]=-o/2}Mv(e,t)}},V.stackOffsetWiggle=function(e,t){if(0<(i=e.length)&&0<(a=(n=e[t[0]]).length)){for(var n,a,i,r=0,s=1;s<a;++s){for(var o=0,l=0,c=0;o<i;++o){for(var u=e[t[o]],h=u[s][1]||0,d=(h-(u[s-1][1]||0))/2,f=0;f<o;++f){var p=e[t[f]];d+=(p[s][1]||0)-(p[s-1][1]||0)}l+=h,c+=d*h}n[s-1][1]+=n[s-1][0]=r,l&&(r-=c/l)}n[s-1][1]+=n[s-1][0]=r,Mv(e,t)}},V.stackOrderAscending=Ov,V.stackOrderDescending=function(e){return Ov(e).reverse()},V.stackOrderInsideOut=function(e){for(var t,n=e.length,a=e.map(Rv),i=$v(e).sort(function(e,t){return a[t]-a[e]}),r=0,s=0,o=[],l=[],c=0;c<n;++c)t=i[c],r<s?(r+=a[t],o.push(t)):(s+=a[t],l.push(t));return l.reverse().concat(o)},V.stackOrderNone=$v,V.stackOrderReverse=function(e){return $v(e).reverse()},V.timeInterval=Qh,V.timeMillisecond=Jh,V.timeMilliseconds=Zh,V.utcMillisecond=Jh,V.utcMilliseconds=Zh,V.timeSecond=ed,V.timeSeconds=td,V.utcSecond=ed,V.utcSeconds=td,V.timeMinute=nd,V.timeMinutes=ad,V.timeHour=id,V.timeHours=rd,V.timeDay=sd,V.timeDays=od,V.timeWeek=cd,V.timeWeeks=gd,V.timeSunday=cd,V.timeSundays=gd,V.timeMonday=ud,V.timeMondays=vd,V.timeTuesday=hd,V.timeTuesdays=yd,V.timeWednesday=dd,V.timeWednesdays=_d,V.timeThursday=fd,V.timeThursdays=bd,V.timeFriday=pd,V.timeFridays=Sd,V.timeSaturday=md,V.timeSaturdays=Td,V.timeMonth=wd,V.timeMonths=Pd,V.timeYear=xd,V.timeYears=Cd,V.utcMinute=Dd,V.utcMinutes=Ed,V.utcHour=Ad,V.utcHours=kd,V.utcDay=Id,V.utcDays=Md,V.utcWeek=Ld,V.utcWeeks=jd,V.utcSunday=Ld,V.utcSundays=jd,V.utcMonday=Od,V.utcMondays=Ud,V.utcTuesday=Rd,V.utcTuesdays=Hd,V.utcWednesday=Nd,V.utcWednesdays=Gd,V.utcThursday=Fd,V.utcThursdays=Yd,V.utcFriday=Bd,V.utcFridays=qd,V.utcSaturday=Vd,V.utcSaturdays=zd,V.utcMonth=Wd,V.utcMonths=Kd,V.utcYear=Xd,V.utcYears=Qd,V.timeFormatDefaultLocale=pp,V.timeFormatLocale=tf,V.isoFormat=mp,V.isoParse=gp,V.now=Yn,V.timer=Wn,V.timerFlush=Kn,V.timeout=Zn,V.interval=function(n,a,i){var r=new zn,s=a;return null==a?r.restart(n,a,i):(a=+a,i=null==i?Yn():+i,r.restart(function e(t){t+=s,r.restart(e,s+=a,i),n(t)},a,i)),r},V.transition=_a,V.active=function(e,t){var n,a,i=e.__transition;if(i)for(a in t=null==t?null:t+"",i)if((n=i[a]).state>aa&&n.name===t)return new ya([[e]],Ua,t,+a);return null},V.interrupt=fa,V.voronoi=function(){var i=Fv,r=Bv,t=null;function n(a){return new fy(a.map(function(e,t){var n=[Math.round(i(e,t,a)/uy)*uy,Math.round(r(e,t,a)/uy)*uy];return n.index=t,n.data=e,n}),t)}return n.polygons=function(e){return n(e).polygons()},n.links=function(e){return n(e).links()},n.triangles=function(e){return n(e).triangles()},n.x=function(e){return arguments.length?(i="function"==typeof e?e:Nv(+e),n):i},n.y=function(e){return arguments.length?(r="function"==typeof e?e:Nv(+e),n):r},n.extent=function(e){return arguments.length?(t=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],n):t&&[[t[0][0],t[0][1]],[t[1][0],t[1][1]]]},n.size=function(e){return arguments.length?(t=null==e?null:[[0,0],[+e[0],+e[1]]],n):t&&[t[1][0]-t[0][0],t[1][1]-t[0][1]]},n},V.zoom=function(){var f,r,o=Sy,u=Ty,p=Cy,i=Py,t=xy,s=[0,1/0],m=[[-1/0,-1/0],[1/0,1/0]],l=250,h=Pn,c=[],n=j("start","zoom","end"),d=500,g=150,v=0;function y(e){e.property("__zoom",wy).on("wheel.zoom",a).on("mousedown.zoom",x).on("dblclick.zoom",C).filter(t).on("touchstart.zoom",D).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(e,t){return(t=Math.max(s[0],Math.min(s[1],t)))===e.k?e:new gy(t,e.x,e.y)}function b(e,t,n){var a=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return a===e.x&&i===e.y?e:new gy(e.k,a,i)}function S(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function T(e,l,c){e.on("start.zoom",function(){w(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).end()}).tween("zoom",function(){var e=arguments,a=w(this,e),t=u.apply(this,e),i=c||S(t),r=Math.max(t[1][0]-t[0][0],t[1][1]-t[0][1]),n=this.__zoom,s="function"==typeof l?l.apply(this,e):l,o=h(n.invert(i).concat(r/n.k),s.invert(i).concat(r/s.k));return function(e){var t,n;e=1===e?s:(t=o(e),new gy(n=r/t[2],i[0]-t[0]*n,i[1]-t[1]*n)),a.zoom(null,e)}})}function w(e,t){for(var n,a=0,i=c.length;a<i;++a)if((n=c[a]).that===e)return n;return new P(e,t)}function P(e,t){this.that=e,this.args=t,this.index=-1,this.active=0,this.extent=u.apply(e,t)}function a(){if(o.apply(this,arguments)){var e=w(this,arguments),t=this.__zoom,n=Math.max(s[0],Math.min(s[1],t.k*Math.pow(2,i.apply(this,arguments)))),a=Le(this);if(e.wheel)e.mouse[0][0]===a[0]&&e.mouse[0][1]===a[1]||(e.mouse[1]=t.invert(e.mouse[0]=a)),clearTimeout(e.wheel);else{if(t.k===n)return;e.mouse=[a,t.invert(a)],fa(this),e.start()}by(),e.wheel=setTimeout(function(){e.wheel=null,e.end()},g),e.zoom("mouse",p(b(_(t,n),e.mouse[0],e.mouse[1]),e.extent,m))}}function x(){var n,e,t,a,i;!r&&o.apply(this,arguments)&&(n=w(this,arguments),e=Ee(V.event.view).on("mousemove.zoom",function(){var e,t;by(),n.moved||(e=V.event.clientX-a,t=V.event.clientY-i,n.moved=v<e*e+t*t),n.zoom("mouse",p(b(n.that.__zoom,n.mouse[0]=Le(n.that),n.mouse[1]),n.extent,m))},!0).on("mouseup.zoom",function(){e.on("mousemove.zoom mouseup.zoom",null),Be(V.event.view,n.moved),by(),n.end()},!0),t=Le(this),a=V.event.clientX,i=V.event.clientY,Fe(V.event.view),_y(),n.mouse=[t,this.__zoom.invert(t)],fa(this),n.start())}function C(){var e,t,n,a,i;o.apply(this,arguments)&&(e=this.__zoom,t=Le(this),n=e.invert(t),a=e.k*(V.event.shiftKey?.5:2),i=p(b(_(e,a),t,n),u.apply(this,arguments),m),by(),0<l?Ee(this).transition().duration(l).call(T,i,t):Ee(this).call(y.transform,i))}function D(){if(o.apply(this,arguments)){var e,t,n,a,i=w(this,arguments),r=V.event.changedTouches,s=r.length;for(_y(),t=0;t<s;++t)a=[a=Oe(this,r,(n=r[t]).identifier),this.__zoom.invert(a),n.identifier],i.touch0?i.touch1||(i.touch1=a):(i.touch0=a,e=!0);if(f&&(f=clearTimeout(f),!i.touch1))return i.end(),void((a=Ee(this).on("dblclick.zoom"))&&a.apply(this,arguments));e&&(f=setTimeout(function(){f=null},d),fa(this),i.start())}}function E(){var e,t=w(this,arguments),n=V.event.changedTouches,a=n.length;for(by(),f=f&&clearTimeout(f),e=0;e<a;++e)h=Oe(this,n,(u=n[e]).identifier),t.touch0&&t.touch0[2]===u.identifier?t.touch0[0]=h:t.touch1&&t.touch1[2]===u.identifier&&(t.touch1[0]=h);if(u=t.that.__zoom,t.touch1)var i=t.touch0[0],r=t.touch0[1],s=t.touch1[0],o=t.touch1[1],l=(l=s[0]-i[0])*l+(l=s[1]-i[1])*l,c=(c=o[0]-r[0])*c+(c=o[1]-r[1])*c,u=_(u,Math.sqrt(l/c)),h=[(i[0]+s[0])/2,(i[1]+s[1])/2],d=[(r[0]+o[0])/2,(r[1]+o[1])/2];else{if(!t.touch0)return;h=t.touch0[0],d=t.touch0[1]}t.zoom("touch",p(b(u,h,d),t.extent,m))}function A(){var e,t,n=w(this,arguments),a=V.event.changedTouches,i=a.length;for(_y(),r&&clearTimeout(r),r=setTimeout(function(){r=null},d),e=0;e<i;++e)t=a[e],n.touch0&&n.touch0[2]===t.identifier?delete n.touch0:n.touch1&&n.touch1[2]===t.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}return y.transform=function(e,t){var n=e.selection?e.selection():e;n.property("__zoom",wy),e!==n?T(e,t):n.interrupt().each(function(){w(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},y.scaleBy=function(e,t){y.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)})},y.scaleTo=function(e,r){y.transform(e,function(){var e=u.apply(this,arguments),t=this.__zoom,n=S(e),a=t.invert(n),i="function"==typeof r?r.apply(this,arguments):r;return p(b(_(t,i),n,a),e,m)})},y.translateBy=function(e,t,n){y.transform(e,function(){return p(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),u.apply(this,arguments),m)})},y.translateTo=function(e,a,i){y.transform(e,function(){var e=u.apply(this,arguments),t=this.__zoom,n=S(e);return p(vy.translate(n[0],n[1]).scale(t.k).translate("function"==typeof a?-a.apply(this,arguments):-a,"function"==typeof i?-i.apply(this,arguments):-i),e,m)})},P.prototype={start:function(){return 1==++this.active&&(this.index=c.push(this)-1,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(c.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){we(new my(y,e,this.that.__zoom),n.apply,n,[e,this.that,this.args])}},y.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:py(+e),y):i},y.filter=function(e){return arguments.length?(o="function"==typeof e?e:py(!!e),y):o},y.touchable=function(e){return arguments.length?(t="function"==typeof e?e:py(!!e),y):t},y.extent=function(e){return arguments.length?(u="function"==typeof e?e:py([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),y):u},y.scaleExtent=function(e){return arguments.length?(s[0]=+e[0],s[1]=+e[1],y):[s[0],s[1]]},y.translateExtent=function(e){return arguments.length?(m[0][0]=+e[0][0],m[1][0]=+e[1][0],m[0][1]=+e[0][1],m[1][1]=+e[1][1],y):[[m[0][0],m[0][1]],[m[1][0],m[1][1]]]},y.constrain=function(e){return arguments.length?(p=e,y):p},y.duration=function(e){return arguments.length?(l=+e,y):l},y.interpolate=function(e){return arguments.length?(h=e,y):h},y.on=function(){var e=n.on.apply(n,arguments);return e===n?y:e},y.clickDistance=function(e){return arguments.length?(v=(e=+e)*e,y):Math.sqrt(v)},y},V.zoomTransform=yy,V.zoomIdentity=vy,Object.defineProperty(V,"__esModule",{value:!0})}),Object.defineProperty(Array.prototype,"find",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),a=n.length>>>0,i=arguments[1],r=0;r<a;r++)if(r in n&&(t=n[r],e.call(i,t,r,n)))return t}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},writable:!0,configurable:!0}),Object.values||(Object.values=function(t){return Object.keys(t).map(function(e){return t[e]})}),Object.entries||(Object.entries=function(t){return Object.keys(t).map(function(e){return[e,t[e]]})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0==a)return!1;var i,r,s=0|t,o=Math.max(0<=s?s:a-Math.abs(s),0);for(;o<a;){if((i=n[o])===(r=e)||"number"==typeof i&&"number"==typeof r&&isNaN(i)&&isNaN(r))return!0;o++}return!1}}),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(void 0!==t?t:" "),this.length>=e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function n(){var a=isNaN(arguments[0])?1:Number(arguments[0]);return a?Array.prototype.reduce.call(this,function(e,t){return Array.isArray(t)?e.push.apply(e,n.call(t,a-1)):e.push(t),e},[]):Array.prototype.slice.call(this)},writable:!0}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(void 0!==t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),function(){var a="undefined"!=typeof exports&&exports||"undefined"!=typeof define&&{}||this;function l(e){if(!((t=e)instanceof HTMLElement||t instanceof SVGElement))throw new Error("an HTMLElement or SVGElement is required; got "+e);var t}function e(e,t){l(e);function s(){0===o&&t()}var n=e.querySelectorAll("image"),o=n.length;s();for(var a=0;a<n.length;a++)!function(e){var t,n,a,i,r=e.getAttributeNS("http://www.w3.org/1999/xlink","href");r&&(t=r.value)&&0==t.lastIndexOf("http",0)&&-1==t.lastIndexOf(window.location.host)?console.warn("Cannot render embedded images linking to external hosts: "+r.value):(n=document.createElement("canvas"),a=n.getContext("2d"),(i=new Image).crossOrigin="anonymous",(r=r||e.getAttribute("href"))?(i.src=r,i.onload=function(){n.width=i.width,n.height=i.height,a.drawImage(i,0,0),e.setAttributeNS("http://www.w3.org/1999/xlink","href",n.toDataURL("image/png")),o--,s()},i.onerror=function(){console.log("Could not load "+r),o--,s()}):(o--,s()))}(n[a])}function v(e,t,n){var a=e.viewBox&&e.viewBox.baseVal&&e.viewBox.baseVal[n]||null!==t.getAttribute(n)&&!t.getAttribute(n).match(/%$/)&&parseInt(t.getAttribute(n))||e.getBoundingClientRect()[n]||parseInt(t.style[n])||parseInt(window.getComputedStyle(e).getPropertyValue(n));return null==a||isNaN(parseFloat(a))?0:a}function i(e,t){var n;navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(function(e){for(var t=window.atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),i=new Uint8Array(a),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([a],{type:n})}(t),e):"download"in(n=document.createElement("a"))?(console.log("download supported"),n.download=e,n.target="_blank",n.href=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)):window.open(t,"_blank","menubar=no,toolbar=no,status=no")}a.svgAsDataUri=function(f,p,m){l(f),(p=p||{}).scale=p.scale||1,p.responsive=p.responsive||!1;var g="http://www.w3.org/2000/xmlns/";e(f,function(){var e=document.createElement("div"),t=f.cloneNode(!0);if("svg"==f.tagName)a=p.width||v(f,t,"width"),i=p.height||v(f,t,"height");else{if(!f.getBBox)return void console.error("Attempted to render non-SVG element",f);var n=f.getBBox(),a=n.x+n.width,i=n.y+n.height;t.setAttribute("transform",t.getAttribute("transform").replace(/translate\(.*?\)/,"")),(h=document.createElementNS("http://www.w3.org/2000/svg","svg")).appendChild(t),t=h}t.setAttribute("version","1.1"),t.getAttribute("xmlns")||t.setAttributeNS(g,"xmlns","http://www.w3.org/2000/svg"),t.getAttribute("xmlns:xlink")||t.setAttributeNS(g,"xmlns:xlink","http://www.w3.org/1999/xlink"),p.responsive?(t.removeAttribute("width"),t.removeAttribute("height"),t.setAttribute("preserveAspectRatio","xMinYMin meet")):(t.setAttribute("width",a*p.scale),t.setAttribute("height",i*p.scale)),t.setAttribute("viewBox",[p.left||0,p.top||0,a,i].join(" "));for(var r=t.querySelectorAll("foreignObject > *"),s=0;s<r.length;s++)r[s].getAttribute("xmlns")||r[s].setAttributeNS(g,"xmlns","http://www.w3.org/1999/xhtml");e.appendChild(t);var o=function(e,t,n){for(var a="",i=document.styleSheets,r=0;r<i.length;r++){try{var s=i[r].cssRules}catch(e){console.warn("Stylesheet could not be loaded: "+i[r].href);continue}if(null!=s)for(var o,l=0;l<s.length;l++,o=null){var c,u=s[l];if(void 0!==u.style){try{c=u.selectorText}catch(e){console.warn('The following CSS rule has an invalid selector: "'+u+'"',e)}try{c&&(o=e.querySelector(c))}catch(e){console.warn('Invalid CSS selector "'+c+'"',e)}o?a+=(t?t(u.selectorText):u.selectorText)+" { "+(n?n(u.style.cssText):u.style.cssText)+" }\n":u.cssText.match(/^@font-face/)&&(a+=u.cssText+"\n")}}}return a}(f,p.selectorRemap,p.modifyStyle),l=document.createElement("style");l.setAttribute("type","text/css"),l.innerHTML="<![CDATA[\n"+o+"\n]]>";var c=document.createElement("defs");c.appendChild(l),t.insertBefore(c,t.firstChild);var u,h='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>'+e.innerHTML,d="data:image/svg+xml;base64,"+window.btoa((u=h,u=(u=encodeURIComponent(u)).replace(/%([0-9A-F]{2})/g,function(e,t){var n=String.fromCharCode("0x"+t);return"%"===n?"%25":n}),decodeURIComponent(u)));m&&m(d)})},a.svgAsPngUri=function(e,i,r){l(e),(i=i||{}).encoderType=i.encoderType||"image/png",i.encoderOptions=i.encoderOptions||1,a.svgAsDataUri(e,i,function(e){var a=new Image;a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height;var t=e.getContext("2d");i&&i.backgroundColor&&(t.fillStyle=i.backgroundColor,t.fillRect(0,0,e.width,e.height)),t.drawImage(a,0,0);var n;document.createElement("a");try{n=e.toDataURL(i.encoderType,i.encoderOptions)}catch(e){if("undefined"!=typeof SecurityError&&e instanceof SecurityError||"SecurityError"==e.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw e}r(n)},a.onerror=function(){console.error("There was an error loading the data URI as an image on the following SVG\n",window.atob(e.slice(26)),"\n","Open the following link to see browser's diagnosis\n",e)},a.src=e})},a.saveSvg=function(e,t,n){l(e),n=n||{},a.svgAsDataUri(e,n,function(e){i(t,e)})},a.saveSvgAsPng=function(e,t,n){l(e),n=n||{},a.svgAsPngUri(e,n,function(e){i(t,e)})},"undefined"!=typeof define&&define(function(){return a})}(),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof module&&module.exports?module.exports=t(require("angular")):t(e.angular)}(this,function(o){"use strict";var e=o.module("rzModule",[]).factory("RzSliderOptions",function(){var t={floor:0,ceil:null,step:1,precision:0,minRange:null,maxRange:null,pushRange:!1,minLimit:null,maxLimit:null,id:null,translate:null,getLegend:null,stepsArray:null,bindIndexForStepsArray:!1,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,showSelectionBarEnd:!1,showSelectionBarFromValue:null,hidePointerLabels:!1,hideLimitLabels:!1,autoHideLimitLabels:!0,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksArray:null,ticksTooltip:null,ticksValuesTooltip:null,vertical:!1,getSelectionBarColor:null,getTickColor:null,getPointerColor:null,keyboardSupport:!0,scale:1,enforceStep:!0,enforceRange:!1,noSwitching:!1,onlyBindHandles:!1,onStart:null,onChange:null,onEnd:null,rightToLeft:!1,boundPointerLabels:!0,mergeRangeLabelsIfSame:!1,customTemplateScope:null,logScale:!1,customValueToPosition:null,customPositionToValue:null},n={},e={options:function(e){o.extend(n,e)},getOptions:function(e){return o.extend({},t,n,e)}};return e}).factory("rzThrottle",["$timeout",function(d){return function(n,a,i){var r,s,o,l=Date.now||function(){return(new Date).getTime()},c=null,u=0;i=i||{};function h(){u=l(),c=null,o=n.apply(r,s),r=s=null}return function(){var e=l(),t=a-(e-u);return r=this,s=arguments,t<=0?(d.cancel(c),c=null,u=e,o=n.apply(r,s),r=s=null):c||!1===i.trailing||(c=d(h,t)),o}}}]).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function(a,s,t,e,n,r){function i(e,t){this.scope=e,this.lowValue=0,this.highValue=0,this.sliderElem=t,this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.dragging={active:!1,value:0,difference:0,position:0,lowLimit:0,highLimit:0},this.positionProperty="left",this.dimensionProperty="width",this.handleHalfDim=0,this.maxPos=0,this.precision=0,this.step=1,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.intermediateTicks=!1,this.initHasRun=!1,this.firstKeyDown=!1,this.internalChange=!1,this.cmbLabelShown=!1,this.currentFocusElement=null,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()}return i.prototype={init:function(){function e(){i.calcViewDimensions()}var n,a,i=this;this.applyOptions(),this.syncLowValue(),this.range&&this.syncHighValue(),this.initElemHandles(),this.manageElementsStyle(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.addAccessibility(),this.updateCeilLab(),this.updateFloorLab(),this.initHandles(),this.manageEventsBindings(),this.scope.$on("reCalcViewDimensions",e),o.element(t).on("resize",e),this.initHasRun=!0,n=r(function(){i.onLowHandleChange()},i.options.interval),a=r(function(){i.onHighHandleChange()},i.options.interval),this.scope.$on("rzSliderForceRender",function(){i.resetLabelsValue(),n(),i.range&&a(),i.resetSlider()}),this.scope.$watch("rzSliderOptions()",function(e,t){e!==t&&(i.applyOptions(),i.syncLowValue(),i.range&&i.syncHighValue(),i.resetSlider())},!0),this.scope.$watch("rzSliderModel",function(e,t){i.internalChange||e!==t&&n()}),this.scope.$watch("rzSliderHigh",function(e,t){i.internalChange||e!==t&&(null!=e&&a(),(i.range&&null==e||!i.range&&null!=e)&&(i.applyOptions(),i.resetSlider()))}),this.scope.$on("$destroy",function(){i.unbindEvents(),o.element(t).off("resize",e),i.currentFocusElement=null})},findStepIndex:function(e){for(var t=0,n=0;n<this.options.stepsArray.length;n++){var a=this.options.stepsArray[n];if(a===e){t=n;break}if(o.isDate(a)){if(a.getTime()===e.getTime()){t=n;break}}else if(o.isObject(a)&&(o.isDate(a.value)&&a.value.getTime()===e.getTime()||a.value===e)){t=n;break}}return t},syncLowValue:function(){!this.options.stepsArray||this.options.bindIndexForStepsArray?this.lowValue=this.scope.rzSliderModel:this.lowValue=this.findStepIndex(this.scope.rzSliderModel)},syncHighValue:function(){!this.options.stepsArray||this.options.bindIndexForStepsArray?this.highValue=this.scope.rzSliderHigh:this.highValue=this.findStepIndex(this.scope.rzSliderHigh)},getStepValue:function(e){var t=this.options.stepsArray[e];return!o.isDate(t)&&o.isObject(t)?t.value:t},applyLowValue:function(){!this.options.stepsArray||this.options.bindIndexForStepsArray?this.scope.rzSliderModel=this.lowValue:this.scope.rzSliderModel=this.getStepValue(this.lowValue)},applyHighValue:function(){!this.options.stepsArray||this.options.bindIndexForStepsArray?this.scope.rzSliderHigh=this.highValue:this.scope.rzSliderHigh=this.getStepValue(this.highValue)},onLowHandleChange:function(){this.syncLowValue(),this.range&&this.syncHighValue(),this.setMinAndMax(),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCmbLabel()},onHighHandleChange:function(){this.syncLowValue(),this.syncHighValue(),this.setMinAndMax(),this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel(),this.updateAriaAttributes()},applyOptions:function(){var e=this.scope.rzSliderOptions?this.scope.rzSliderOptions():{};this.options=n.getOptions(e),this.options.step<=0&&(this.options.step=1),this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.options.draggableRange=this.range&&this.options.draggableRange,this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly,this.options.draggableRangeOnly&&(this.options.draggableRange=!0),this.options.showTicks=this.options.showTicks||this.options.showTicksValues||!!this.options.ticksArray,this.scope.showTicks=this.options.showTicks,(o.isNumber(this.options.showTicks)||this.options.ticksArray)&&(this.intermediateTicks=!0),this.options.showSelectionBar=this.options.showSelectionBar||this.options.showSelectionBarEnd||null!==this.options.showSelectionBarFromValue,this.options.stepsArray?this.parseStepsArray():(this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(e){return String(e)},this.getLegend=this.options.getLegend),this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height"),this.options.customTemplateScope&&(this.scope.custom=this.options.customTemplateScope)},parseStepsArray:function(){this.options.floor=0,this.options.ceil=this.options.stepsArray.length-1,this.options.step=1,this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(e){return this.options.bindIndexForStepsArray?this.getStepValue(e):e},this.getLegend=function(e){var t=this.options.stepsArray[e];return o.isObject(t)?t.legend:null}},resetSlider:function(){this.manageElementsStyle(),this.addAccessibility(),this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.unbindEvents(),this.manageEventsBindings(),this.setDisabledState(),this.calcViewDimensions(),this.refocusPointerIfNeeded()},refocusPointerIfNeeded:function(){this.currentFocusElement&&(this.onPointerFocus(this.currentFocusElement.pointer,this.currentFocusElement.ref),this.focusElement(this.currentFocusElement.pointer))},initElemHandles:function(){o.forEach(this.sliderElem.children(),function(e,t){var n=o.element(e);switch(t){case 0:this.fullBar=n;break;case 1:this.selBar=n;break;case 2:this.minH=n;break;case 3:this.maxH=n;break;case 4:this.flrLab=n;break;case 5:this.ceilLab=n;break;case 6:this.minLab=n;break;case 7:this.maxLab=n;break;case 8:this.cmbLab=n;break;case 9:this.ticks=n}},this),this.selBar.rzsp=0,this.minH.rzsp=0,this.maxH.rzsp=0,this.flrLab.rzsp=0,this.ceilLab.rzsp=0,this.minLab.rzsp=0,this.maxLab.rzsp=0,this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",""):this.maxH.css("display","none"),this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels);var e=this.options.showTicksValues&&!this.intermediateTicks;this.alwaysHide(this.minLab,e||this.options.hidePointerLabels),this.alwaysHide(this.maxLab,e||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.cmbLab,e||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar),this.options.vertical&&this.sliderElem.addClass("rz-vertical"),this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable"),this.intermediateTicks&&this.options.showTicksValues&&this.ticks.addClass("rz-ticks-values-under")},alwaysHide:function(e,t){(e.rzAlwaysHide=t)?this.hideEl(e):this.showEl(e)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToPosition(this.lowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(e,t,n,a){a=void 0===a||a;var i="",r=!1,s=t.hasClass("no-label-injection"),i=a?(this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(e=this.getStepValue(e)),String(this.customTrFn(e,this.options.id,n))):String(e);(void 0===t.rzsv||t.rzsv.length!==i.length||0<t.rzsv.length&&0===t.rzsd)&&(r=!0,t.rzsv=i),s||t.html(i),this.scope[n+"Label"]=i,r&&this.getDimension(t)},setMinAndMax:function(){if(this.step=+this.options.step,this.precision=+this.options.precision,this.minValue=this.options.floor,this.options.logScale&&0===this.minValue)throw Error("Can't use floor=0 with logarithmic scale");this.options.enforceStep&&(this.lowValue=this.roundStep(this.lowValue),this.range&&(this.highValue=this.roundStep(this.highValue))),null!=this.options.ceil?this.maxValue=this.options.ceil:this.maxValue=this.options.ceil=this.range?this.highValue:this.lowValue,this.options.enforceRange&&(this.lowValue=this.sanitizeValue(this.lowValue),this.range&&(this.highValue=this.sanitizeValue(this.highValue))),this.applyLowValue(),this.range&&this.applyHighValue(),this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider"),this.updateAriaAttributes(),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.minH.attr("tabindex",""):this.minH.attr("tabindex","0"),this.options.vertical&&this.minH.attr("aria-orientation","vertical"),this.range&&(this.maxH.attr("role","slider"),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.maxH.attr("tabindex",""):this.maxH.attr("tabindex","0"),this.options.vertical&&this.maxH.attr("aria-orientation","vertical"))},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel,this.options.id,"model"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue}),this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh,this.options.id,"high"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var e,t=this.getDimension(this.minH);this.handleHalfDim=t/2,this.barDimension=this.getDimension(this.fullBar),this.maxPos=this.barDimension-t,this.getDimension(this.sliderElem),this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty],this.initHasRun&&(this.updateFloorLab(),this.updateCeilLab(),this.initHandles(),e=this,a(function(){e.updateTicksScale()}))},updateTicksScale:function(){var e,i,r;this.options.showTicks&&(e=this.options.ticksArray||this.getTicksArray(),i=this.options.vertical?"translateY":"translateX",(r=this).options.rightToLeft&&e.reverse(),this.scope.ticks=e.map(function(e){var t=r.valueToPosition(e);r.options.vertical&&(t=r.maxPos-t);var n,a={selected:r.isTickSelected(e),style:{transform:i+"("+t+"px)"}};return a.selected&&r.options.getSelectionBarColor&&(a.style["background-color"]=r.getSelectionBarColor()),!a.selected&&r.options.getTickColor&&(a.style["background-color"]=r.getTickColor(e)),r.options.ticksTooltip&&(a.tooltip=r.options.ticksTooltip(e),a.tooltipPlacement=r.options.vertical?"right":"top"),r.options.showTicksValues&&(a.value=r.getDisplayValue(e,"tick-value"),r.options.ticksValuesTooltip&&(a.valueTooltip=r.options.ticksValuesTooltip(e),a.valueTooltipPlacement=r.options.vertical?"right":"top")),r.getLegend&&(n=r.getLegend(e,r.options.id))&&(a.legend=n),a}))},getTicksArray:function(){var e=this.step,t=[];this.intermediateTicks&&(e=this.options.showTicks);for(var n=this.minValue;n<=this.maxValue;n+=e)t.push(n);return t},isTickSelected:function(e){if(!this.range)if(null!==this.options.showSelectionBarFromValue){var t=this.options.showSelectionBarFromValue;if(this.lowValue>t&&t<=e&&e<=this.lowValue)return!0;if(this.lowValue<t&&e<=t&&e>=this.lowValue)return!0}else if(this.options.showSelectionBarEnd){if(e>=this.lowValue)return!0}else if(this.options.showSelectionBar&&e<=this.lowValue)return!0;return!!(this.range&&e>=this.lowValue&&e<=this.highValue)},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab,"floor"),this.getDimension(this.flrLab);var e=this.options.rightToLeft?this.barDimension-this.flrLab.rzsd:0;this.setPosition(this.flrLab,e)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab,"ceil"),this.getDimension(this.ceilLab);var e=this.options.rightToLeft?0:this.barDimension-this.ceilLab.rzsd;this.setPosition(this.ceilLab,e)},updateHandles:function(e,t){"lowValue"===e?this.updateLowHandle(t):this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()},getHandleLabelPos:function(e,t){var n=this[e].rzsd,a=t-n/2+this.handleHalfDim,i=this.barDimension-n;return this.options.boundPointerLabels?this.options.rightToLeft&&"minLab"===e||!this.options.rightToLeft&&"maxLab"===e?Math.min(a,i):Math.min(Math.max(a,0),i):a},updateLowHandle:function(e){var t;this.setPosition(this.minH,e),this.translateFn(this.lowValue,this.minLab,"model"),this.setPosition(this.minLab,this.getHandleLabelPos("minLab",e)),this.options.getPointerColor&&(t=this.getPointerColor("min"),this.scope.minPointerStyle={backgroundColor:t}),this.options.autoHideLimitLabels&&this.shFloorCeil()},updateHighHandle:function(e){var t;this.setPosition(this.maxH,e),this.translateFn(this.highValue,this.maxLab,"high"),this.setPosition(this.maxLab,this.getHandleLabelPos("maxLab",e)),this.options.getPointerColor&&(t=this.getPointerColor("max"),this.scope.maxPointerStyle={backgroundColor:t}),this.options.autoHideLimitLabels&&this.shFloorCeil()},shFloorCeil:function(){var e,t,n,a,i,r,s,o,l,c,u,h,d,f,p,m,g,v,y,_;this.options.hidePointerLabels||(t=e=!1,n=this.options.rightToLeft,a=this.flrLab.rzsp,i=this.flrLab.rzsd,r=this.minLab.rzsp,s=this.minLab.rzsd,o=this.maxLab.rzsp,l=this.maxLab.rzsd,c=this.cmbLab.rzsp,u=this.cmbLab.rzsd,h=this.ceilLab.rzsp,d=this.handleHalfDim,p=n?r-s<=h+d+10:h-d-10<=r+s,m=n?o-l<=h+10:h-10<=o+l,g=n?a-i-d<=c:c<=a+i+d,v=n?c-u<=h+10:h-10<=c+u,(f=n?a-i-5<=r+s:r<=a+i+5)?(e=!0,this.hideEl(this.flrLab)):(e=!1,this.showEl(this.flrLab)),p?(t=!0,this.hideEl(this.ceilLab)):(t=!1,this.showEl(this.ceilLab)),this.range&&(y=this.cmbLabelShown?v:m,_=this.cmbLabelShown?g:f,y?this.hideEl(this.ceilLab):t||this.showEl(this.ceilLab),_?this.hideEl(this.flrLab):e||this.showEl(this.flrLab)))},updateSelectionBar:function(){var e,t,n,a=0,i=0,r=this.options.rightToLeft?!this.options.showSelectionBarEnd:this.options.showSelectionBarEnd,s=this.options.rightToLeft?this.maxH.rzsp+this.handleHalfDim:this.minH.rzsp+this.handleHalfDim;a=this.range?(i=Math.abs(this.maxH.rzsp-this.minH.rzsp),s):null!==this.options.showSelectionBarFromValue?(e=this.options.showSelectionBarFromValue,t=this.valueToPosition(e),(this.options.rightToLeft?this.lowValue<=e:this.lowValue>e)?(i=this.minH.rzsp-t,t+this.handleHalfDim):(i=t-this.minH.rzsp,this.minH.rzsp+this.handleHalfDim)):r?(i=Math.abs(this.maxPos-this.minH.rzsp)+this.handleHalfDim,this.minH.rzsp+this.handleHalfDim):(i=Math.abs(this.maxH.rzsp-this.minH.rzsp)+this.handleHalfDim,0),this.setDimension(this.selBar,i),this.setPosition(this.selBar,a),this.options.getSelectionBarColor&&(n=this.getSelectionBarColor(),this.scope.barStyle={backgroundColor:n})},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},getPointerColor:function(e){return"max"===e?this.options.getPointerColor(this.scope.rzSliderHigh,e):this.options.getPointerColor(this.scope.rzSliderModel,e)},getTickColor:function(e){return this.options.getTickColor(e)},updateCmbLabel:function(){var e,t,n,a;(this.options.rightToLeft?this.minLab.rzsp-this.minLab.rzsd-10<=this.maxLab.rzsp:this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp)?(e=this.getDisplayValue(this.lowValue,"model"),t=this.getDisplayValue(this.highValue,"high"),n="",n=this.options.mergeRangeLabelsIfSame&&e===t?e:this.options.rightToLeft?t+" - "+e:e+" - "+t,this.translateFn(n,this.cmbLab,"cmb",!1),a=this.options.boundPointerLabels?Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd):this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,this.setPosition(this.cmbLab,a),this.cmbLabelShown=!0,this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)):(this.cmbLabelShown=!1,this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab))},getDisplayValue:function(e,t){return this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(e=this.getStepValue(e)),this.customTrFn(e,this.options.id,t)},roundStep:function(e,t){var n=t||this.step,a=parseFloat((e-this.minValue)/n).toPrecision(12),a=Math.round(+a)*n;return+(this.minValue+a).toFixed(this.precision)},hideEl:function(e){return e.css({visibility:"hidden"})},showEl:function(e){return e.rzAlwaysHide?e:e.css({visibility:"visible"})},setPosition:function(e,t){e.rzsp=t;var n={};return n[this.positionProperty]=t+"px",e.css(n),t},getDimension:function(e){var t=e[0].getBoundingClientRect();return this.options.vertical?e.rzsd=(t.bottom-t.top)*this.options.scale:e.rzsd=(t.right-t.left)*this.options.scale,e.rzsd},setDimension:function(e,t){e.rzsd=t;var n={};return n[this.dimensionProperty]=t+"px",e.css(n),t},sanitizeValue:function(e){return Math.min(Math.max(e,this.minValue),this.maxValue)},valueToPosition:function(e){var t=this.linearValueToPosition;this.options.customValueToPosition?t=this.options.customValueToPosition:this.options.logScale&&(t=this.logValueToPosition);var n=t(e=this.sanitizeValue(e),this.minValue,this.maxValue)||0;return this.options.rightToLeft&&(n=1-n),n*this.maxPos},linearValueToPosition:function(e,t,n){return(e-t)/(n-t)},logValueToPosition:function(e,t,n){return((e=Math.log(e))-(t=Math.log(t)))/((n=Math.log(n))-t)},positionToValue:function(e){var t=e/this.maxPos;this.options.rightToLeft&&(t=1-t);var n=this.linearPositionToValue;return this.options.customPositionToValue?n=this.options.customPositionToValue:this.options.logScale&&(n=this.logPositionToValue),n(t,this.minValue,this.maxValue)||0},linearPositionToValue:function(e,t,n){return e*(n-t)+t},logPositionToValue:function(e,t,n){t=Math.log(t);var a=e*((n=Math.log(n))-t)+t;return Math.exp(a)},getEventXY:function(e){var t=this.options.vertical?"clientY":"clientX";return void 0!==e[t]?e[t]:void 0===e.originalEvent?e.touches[0][t]:e.originalEvent.touches[0][t]},getEventPosition:function(e){var t=this.sliderElem.rzsp;return(this.options.vertical?-this.getEventXY(e)+t:this.getEventXY(e)-t)*this.options.scale-this.handleHalfDim},getEventNames:function(e){var t={moveEvent:"",endEvent:""};return e.touches||void 0!==e.originalEvent&&e.originalEvent.touches?(t.moveEvent="touchmove",t.endEvent="touchend"):(t.moveEvent="mousemove",t.endEvent="mouseup"),t},getNearestHandle:function(e){if(!this.range)return this.minH;var t=this.getEventPosition(e),n=Math.abs(t-this.minH.rzsp),a=Math.abs(t-this.maxH.rzsp);return n<a?this.minH:a<n?this.maxH:this.options.rightToLeft?t>this.minH.rzsp?this.minH:this.maxH:t<this.minH.rzsp?this.minH:this.maxH},focusElement:function(e){e[0].focus()},bindEvents:function(){var e,t,n=this.options.draggableRange?(e="rzSliderDrag",t=this.onDragStart,this.onDragMove):(e="lowValue",t=this.onStart,this.onMove);this.options.onlyBindHandles||(this.selBar.on("mousedown",o.bind(this,t,null,e)),this.selBar.on("mousedown",o.bind(this,n,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("mousedown",o.bind(this,t,null,e)),this.maxH.on("mousedown",o.bind(this,t,null,e))):(this.minH.on("mousedown",o.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("mousedown",o.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("mousedown",o.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",o.bind(this,this.onMove,this.fullBar)),this.ticks.on("mousedown",o.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",o.bind(this,this.onTickClick,this.ticks)))),this.options.onlyBindHandles||(this.selBar.on("touchstart",o.bind(this,t,null,e)),this.selBar.on("touchstart",o.bind(this,n,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("touchstart",o.bind(this,t,null,e)),this.maxH.on("touchstart",o.bind(this,t,null,e))):(this.minH.on("touchstart",o.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("touchstart",o.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("touchstart",o.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",o.bind(this,this.onMove,this.fullBar)),this.ticks.on("touchstart",o.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",o.bind(this,this.onTickClick,this.ticks)))),this.options.keyboardSupport&&(this.minH.on("focus",o.bind(this,this.onPointerFocus,this.minH,"lowValue")),this.range&&this.maxH.on("focus",o.bind(this,this.onPointerFocus,this.maxH,"highValue")))},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(e,t,n){var a,i,r=this.getEventNames(n);n.stopPropagation(),n.preventDefault(),this.calcViewDimensions(),e?this.tracking=t:(e=this.getNearestHandle(n),this.tracking=e===this.minH?"lowValue":"highValue"),e.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(e),a=o.bind(this,this.dragging.active?this.onDragMove:this.onMove,e),i=o.bind(this,this.onEnd,a),s.on(r.moveEvent,a),s.one(r.endEvent,i),this.callOnStart()},onMove:function(e,t,n){var a=this.getEventPosition(t),i=this.options.rightToLeft?this.minValue:this.maxValue,r=this.options.rightToLeft?this.maxValue:this.minValue,s=a<=0?r:a>=this.maxPos?i:(s=this.positionToValue(a),n&&o.isNumber(this.options.showTicks)?this.roundStep(s,this.options.showTicks):this.roundStep(s));this.positionTrackingHandle(s)},onEnd:function(e,t){var n=this.getEventNames(t).moveEvent;this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1,s.off(n,e),this.callOnEnd()},onTickClick:function(e,t){this.onMove(e,t,!0)},onPointerFocus:function(e,t){this.tracking=t,e.one("blur",o.bind(this,this.onPointerBlur,e)),e.on("keydown",o.bind(this,this.onKeyboardEvent)),e.on("keyup",o.bind(this,this.onKeyUp)),this.firstKeyDown=!0,e.addClass("rz-active"),this.currentFocusElement={pointer:e,ref:t}},onKeyUp:function(){this.firstKeyDown=!0,this.callOnEnd()},onPointerBlur:function(e){e.off("keydown"),e.off("keyup"),this.tracking="",e.removeClass("rz-active"),this.currentFocusElement=null},getKeyActions:function(e){var t=e+this.step,n=e-this.step,a={UP:t,DOWN:n,LEFT:n,RIGHT:t,PAGEUP:e+this.valueRange/10,PAGEDOWN:e-this.valueRange/10,HOME:this.minValue,END:this.maxValue};return this.options.rightToLeft&&(a.LEFT=t,a.RIGHT=n,this.options.vertical&&(a.UP=n,a.DOWN=t)),a},onKeyboardEvent:function(e){var i,t=this[this.tracking],n=e.keyCode||e.which,r=this.getKeyActions(t)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[n]];null!=r&&""!==this.tracking&&(e.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.callOnStart()),i=this,a(function(){var e,t,n,a=i.roundStep(i.sanitizeValue(r));i.options.draggableRangeOnly?(n=i.highValue-i.lowValue,"lowValue"===i.tracking?(t=(e=a)+n)>i.maxValue&&(e=(t=i.maxValue)-n):(e=(t=a)-n)<i.minValue&&(t=(e=i.minValue)+n),i.positionTrackingBar(e,t)):i.positionTrackingHandle(a)}))},onDragStart:function(e,t,n){var a=this.getEventPosition(n);this.dragging={active:!0,value:this.positionToValue(a),difference:this.highValue-this.lowValue,lowLimit:this.options.rightToLeft?this.minH.rzsp-a:a-this.minH.rzsp,highLimit:this.options.rightToLeft?a-this.maxH.rzsp:this.maxH.rzsp-a},this.onStart(e,t,n)},getValue:function(e,t,n,a){var i=this.options.rightToLeft,r="min"===e?n?a?i?this.minValue:this.maxValue-this.dragging.difference:i?this.maxValue-this.dragging.difference:this.minValue:i?this.positionToValue(t+this.dragging.lowLimit):this.positionToValue(t-this.dragging.lowLimit):n?a?i?this.minValue+this.dragging.difference:this.maxValue:i?this.maxValue:this.minValue+this.dragging.difference:i?this.positionToValue(t+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(t-this.dragging.lowLimit)+this.dragging.difference;return this.roundStep(r)},onDragMove:function(e,t){var n,a,i,r,s,o=this.getEventPosition(t),l=this.options.rightToLeft?(i=this.dragging.lowLimit,r=this.dragging.highLimit,s=this.maxH,this.minH):(i=this.dragging.highLimit,r=this.dragging.lowLimit,s=this.minH,this.maxH),c=o<=r,u=o>=this.maxPos-i;if(c){if(0===s.rzsp)return;n=this.getValue("min",o,!0,!1),a=this.getValue("max",o,!0,!1)}else if(u){if(l.rzsp===this.maxPos)return;a=this.getValue("max",o,!0,!0),n=this.getValue("min",o,!0,!0)}else n=this.getValue("min",o,!1),a=this.getValue("max",o,!1);this.positionTrackingBar(n,a)},positionTrackingBar:function(e,t){null!=this.options.minLimit&&e<this.options.minLimit&&(t=(e=this.options.minLimit)+this.dragging.difference),null!=this.options.maxLimit&&t>this.options.maxLimit&&(e=(t=this.options.maxLimit)-this.dragging.difference),this.lowValue=e,this.highValue=t,this.applyLowValue(),this.range&&this.applyHighValue(),this.applyModel(),this.updateHandles("lowValue",this.valueToPosition(e)),this.updateHandles("highValue",this.valueToPosition(t))},positionTrackingHandle:function(e){var t=!1;e=this.applyMinMaxLimit(e),this.range&&(this.options.pushRange?(e=this.applyPushRange(e),t=!0):(this.options.noSwitching&&("lowValue"===this.tracking&&e>this.highValue?e=this.applyMinMaxRange(this.highValue):"highValue"===this.tracking&&e<this.lowValue&&(e=this.applyMinMaxRange(this.lowValue))),e=this.applyMinMaxRange(e),"lowValue"===this.tracking&&e>this.highValue?(this.lowValue=this.highValue,this.applyLowValue(),this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="highValue",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH),t=!0):"highValue"===this.tracking&&e<this.lowValue&&(this.highValue=this.lowValue,this.applyHighValue(),this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="lowValue",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH),t=!0))),this[this.tracking]!==e&&(this[this.tracking]=e,"lowValue"===this.tracking?this.applyLowValue():this.applyHighValue(),this.updateHandles(this.tracking,this.valueToPosition(e)),this.updateAriaAttributes(),t=!0),t&&this.applyModel()},applyMinMaxLimit:function(e){return null!=this.options.minLimit&&e<this.options.minLimit?this.options.minLimit:null!=this.options.maxLimit&&e>this.options.maxLimit?this.options.maxLimit:e},applyMinMaxRange:function(e){var t="lowValue"===this.tracking?this.highValue:this.lowValue,n=Math.abs(e-t);return null!=this.options.minRange&&n<this.options.minRange?"lowValue"===this.tracking?this.highValue-this.options.minRange:this.lowValue+this.options.minRange:null!=this.options.maxRange&&n>this.options.maxRange?"lowValue"===this.tracking?this.highValue-this.options.maxRange:this.lowValue+this.options.maxRange:e},applyPushRange:function(e){var t="lowValue"===this.tracking?this.highValue-e:e-this.lowValue,n=null!==this.options.minRange?this.options.minRange:this.options.step;return t<n&&("lowValue"===this.tracking?(this.highValue=Math.min(e+n,this.maxValue),e=this.highValue-n,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=Math.max(e-n,this.minValue),e=this.lowValue+n,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()),e},applyModel:function(){this.internalChange=!0,this.scope.$apply(),this.callOnChange(),this.internalChange=!1},callOnStart:function(){var e,t;this.options.onStart&&(t="lowValue"===(e=this).tracking?"min":"max",this.scope.$evalAsync(function(){e.options.onStart(e.options.id,e.scope.rzSliderModel,e.scope.rzSliderHigh,t)}))},callOnChange:function(){var e,t;this.options.onChange&&(t="lowValue"===(e=this).tracking?"min":"max",this.scope.$evalAsync(function(){e.options.onChange(e.options.id,e.scope.rzSliderModel,e.scope.rzSliderHigh,t)}))},callOnEnd:function(){var e,t;this.options.onEnd&&(t="lowValue"===(e=this).tracking?"min":"max",this.scope.$evalAsync(function(){e.options.onEnd(e.options.id,e.scope.rzSliderModel,e.scope.rzSliderHigh,t)})),this.scope.$emit("slideEnded")}},i}]).directive("rzslider",["RzSlider",function(n){return{restrict:"AE",replace:!0,scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"&?",rzSliderTplUrl:"@"},templateUrl:function(e,t){return t.rzSliderTplUrl||"rzSliderTpl.html"},link:function(e,t){e.slider=new n(e,t)}}}]);return e.run(["$templateCache",function(e){e.put("rzSliderTpl.html",'<div class=rzslider><span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle></span></span> <span class="rz-pointer rz-pointer-min" ng-style=minPointerStyle></span> <span class="rz-pointer rz-pointer-max" ng-style=maxPointerStyle></span> <span class="rz-bubble rz-limit rz-floor"></span> <span class="rz-bubble rz-limit rz-ceil"></span> <span class=rz-bubble></span> <span class=rz-bubble></span> <span class=rz-bubble></span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=rz-tick ng-class="{\'rz-selected\': t.selected}" ng-style=t.style ng-attr-uib-tooltip="{{ t.tooltip }}" ng-attr-tooltip-placement={{t.tooltipPlacement}} ng-attr-tooltip-append-to-body="{{ t.tooltip ? true : undefined}}"><span ng-if="t.value != null" class=rz-tick-value ng-attr-uib-tooltip="{{ t.valueTooltip }}" ng-attr-tooltip-placement={{t.valueTooltipPlacement}}>{{ t.value }}</span> <span ng-if="t.legend != null" class=rz-tick-legend>{{ t.legend }}</span></li></ul></div>')}]),e.name}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],t):(e=e||self).videojs=t(e.window,e.document)}(this,function(y,h){y=y&&y.hasOwnProperty("default")?y.default:y,h=h&&h.hasOwnProperty("default")?h.default:h;var d="7.6.6",l=[],f=function t(n){function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i("log",r,t)}var i,s,o,r="info";return s=n,i=function(e,t,n){var a,i=o.levels[t],r=new RegExp("^("+i+")$");"log"!==e&&n.unshift(e.toUpperCase()+":"),n.unshift(s+":"),l&&l.push([].concat(n)),y.console&&((a=y.console[e])||"debug"!==e||(a=y.console.info||y.console.log),a&&i&&r.test(e)&&a[Array.isArray(n)?"apply":"call"](y.console,n))},(o=a).createLogger=function(e){return t(n+": "+e)},a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},a.level=function(e){if("string"==typeof e){if(!a.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},(a.history=function(){return l?[].concat(l):[]}).filter=function(t){return(l||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},a.history.clear=function(){l&&(l.length=0)},a.history.disable=function(){null!==l&&(l.length=0,l=null)},a.history.enable=function(){null===l&&(l=[])},a.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("error",r,t)},a.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("warn",r,t)},a.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("debug",r,t)},a}("VIDEOJS"),p=f.createLogger,t=Object.prototype.toString,i=function(e){return s(e)?Object.keys(e):[]};function r(t,n){i(t).forEach(function(e){return n(t[e],e)})}function m(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];return Object.assign?Object.assign.apply(Object,[n].concat(t)):(t.forEach(function(e){e&&r(e,function(e,t){n[t]=e})}),n)}function s(e){return!!e&&"object"==typeof e}function o(e){return s(e)&&"[object Object]"===t.call(e)&&e.constructor===Object}function a(e,t){if(!e||!t)return"";if("function"!=typeof y.getComputedStyle)return"";var n=y.getComputedStyle(e);return n?n.getPropertyValue(t)||n[t]:""}function c(e){return"string"==typeof e&&/\S/.test(e)}function n(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function u(){return h===y.document}function g(e){return s(e)&&1===e.nodeType}function v(){try{return y.parent!==y.self}catch(e){return!0}}function e(a){return function(e,t){if(!c(e))return h[a](null);c(t)&&(t=h.querySelector(t));var n=g(t)?t:h;return n[a]&&n[a](e)}}function _(e,n,t,a){void 0===e&&(e="div"),void 0===n&&(n={}),void 0===t&&(t={});var i=h.createElement(e);return Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(f.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+t+"."),i.setAttribute(e,t)):"textContent"===e?b(i,t):i[e]=t}),Object.getOwnPropertyNames(t).forEach(function(e){i.setAttribute(e,t[e])}),a&&B(i,a),i}function b(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function S(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function T(e,t){return n(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function w(e,t){return e.classList?e.classList.add(t):T(e,t)||(e.className=(e.className+" "+t).trim()),e}function P(e,t){return e.classList?e.classList.remove(t):(n(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function x(e,t,n){var a=T(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!a),n!==a)return(n?w:P)(e,t),e}function C(n,a){Object.getOwnPropertyNames(a).forEach(function(e){var t=a[e];null==t||!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})}function D(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var n=e.attributes,a=n.length-1;0<=a;a--){var i=n[a].name,r=n[a].value;"boolean"!=typeof e[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(r=null!==r),t[i]=r}return t}function E(e,t){return e.getAttribute(t)}function A(e,t,n){e.setAttribute(t,n)}function k(e,t){e.removeAttribute(t)}function I(){h.body.focus(),h.onselectstart=function(){return!1}}function M(){h.onselectstart=function(){return!0}}function $(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat(a(e,"height"))),n.width||(n.width=parseFloat(a(e,"width"))),n}}function L(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=h.documentElement,a=h.body,i=n.clientLeft||a.clientLeft||0,r=y.pageXOffset||a.scrollLeft,s=t.left+r-i,o=n.clientTop||a.clientTop||0,l=y.pageYOffset||a.scrollTop,c=t.top+l-o;return{left:Math.round(s),top:Math.round(c)}}function O(e,t){var n={},a=L(e),i=e.offsetWidth,r=e.offsetHeight,s=a.top,o=a.left,l=t.pageY,c=t.pageX;return t.changedTouches&&(c=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(s-l+r)/r)),n.x=Math.max(0,Math.min(1,(c-o)/i)),n}function R(e){return s(e)&&3===e.nodeType}function N(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function F(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),g(e)||R(e)?e:"string"==typeof e&&/\S/.test(e)?h.createTextNode(e):void 0}).filter(function(e){return e})}function B(t,e){return F(e).forEach(function(e){return t.appendChild(e)}),t}function V(e,t){return B(N(e),t)}function j(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var U,H=e("querySelector"),G=e("querySelectorAll"),Y=Object.freeze({isReal:u,isEl:g,isInFrame:v,createEl:_,textContent:b,prependTo:S,hasClass:T,addClass:w,removeClass:P,toggleClass:x,setAttributes:C,getAttributes:D,getAttribute:E,setAttribute:A,removeAttribute:k,blockTextSelection:I,unblockTextSelection:M,getBoundingClientRect:$,findPosition:L,getPointerPosition:O,isTextNode:R,emptyEl:N,normalizeContent:F,appendContent:B,insertContent:V,isSingleLeftClick:j,$:H,$$:G}),q=!1,z=function(){if(u()&&!1!==U.options.autoSetup){var e=Array.prototype.slice.call(h.getElementsByTagName("video")),t=Array.prototype.slice.call(h.getElementsByTagName("audio")),n=Array.prototype.slice.call(h.getElementsByTagName("video-js")),a=e.concat(t,n);if(a&&0<a.length)for(var i=0,r=a.length;i<r;i++){var s=a[i];if(!s||!s.getAttribute){W(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&U(s)}else q||W(1)}};function W(e,t){t&&(U=t),y.setTimeout(z,e)}function K(){q=!0,y.removeEventListener("load",K)}function X(e){var t=h.createElement("style");return t.className=e,t}function Q(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}u()&&("complete"===h.readyState?K():y.addEventListener("load",K));var J,Z,ee=3;function te(){return ee++}function ne(){this.vdata="vdata"+Math.floor(y.performance&&y.performance.now()||Date.now()),this.data={}}y.WeakMap||((Z=ne.prototype).set=function(e,t){var n=e[this.vdata]||te();return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},Z.get=function(e){var t=e[this.vdata];if(t)return this.data[t];f("We have no data for this element",e)},Z.has=function(e){return e[this.vdata]in this.data},Z.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},J=ne);var ae=new(y.WeakMap?WeakMap:J);function ie(e,t){var n;ae.has(e)&&(0===(n=ae.get(e)).handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&ae.delete(e))}function re(t,n,e,a){e.forEach(function(e){t(n,e,a)})}function se(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var a,i,r,s=e||y.event;for(a in e={},s)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&("returnValue"===a&&s.preventDefault||(e[a]=s[a]));e.target||(e.target=e.srcElement||h),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){s.preventDefault&&s.preventDefault(),e.returnValue=!1,s.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),e.cancelBubble=!0,s.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX&&(i=h.documentElement,r=h.body,e.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var oe=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){oe=!0}});y.addEventListener("test",null,e),y.removeEventListener("test",null,e)}catch(e){}}();var le=["touchstart","touchmove"];function ce(s,e,t){if(Array.isArray(e))return re(ce,s,e,t);ae.has(s)||ae.set(s,{});var n,o=ae.get(s);o.handlers||(o.handlers={}),o.handlers[e]||(o.handlers[e]=[]),t.guid||(t.guid=te()),o.handlers[e].push(t),o.dispatcher||(o.disabled=!1,o.dispatcher=function(e,t){if(!o.disabled){e=se(e);var n=o.handlers[e.type];if(n)for(var a=n.slice(0),i=0,r=a.length;i<r&&!e.isImmediatePropagationStopped();i++)try{a[i].call(s,e,t)}catch(e){f.error(e)}}}),1===o.handlers[e].length&&(s.addEventListener?(n=!1,oe&&-1<le.indexOf(e)&&(n={passive:!0}),s.addEventListener(e,o.dispatcher,n)):s.attachEvent&&s.attachEvent("on"+e,o.dispatcher))}function ue(e,t,n){if(ae.has(e)){var a=ae.get(e);if(a.handlers){if(Array.isArray(t))return re(ue,e,t,n);function i(e,t){a.handlers[t]=[],ie(e,t)}if(void 0!==t){var r=a.handlers[t];if(r)if(n){if(n.guid)for(var s=0;s<r.length;s++)r[s].guid===n.guid&&r.splice(s--,1);ie(e,t)}else i(e,t)}else for(var o in a.handlers)Object.prototype.hasOwnProperty.call(a.handlers||{},o)&&i(e,o)}}}function he(e,t,n){var a,i=ae.has(e)?ae.get(e):{},r=e.parentNode||e.ownerDocument;return"string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=se(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles?he.call(null,r,t,n):!r&&!t.defaultPrevented&&t.target&&t.target[t.type]&&(ae.has(t.target)||ae.set(t.target,{}),a=ae.get(t.target),t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)),!t.defaultPrevented}function de(e,t,n){if(Array.isArray(t))return re(de,e,t,n);function a(){ue(e,t,a),n.apply(this,arguments)}a.guid=n.guid=n.guid||te(),ce(e,t,a)}function fe(e,t,n){function a(){ue(e,t,a),n.apply(this,arguments)}a.guid=n.guid=n.guid||te(),ce(e,t,a)}function pe(e,t,n){t.guid||(t.guid=te());var a=t.bind(e);return a.guid=n?n+"_"+t.guid:t.guid,a}function me(t,n){var a=y.performance.now();return function(){var e=y.performance.now();n<=e-a&&(t.apply(void 0,arguments),a=e)}}function ge(){}var ve,ye=Object.freeze({fixEvent:se,on:ce,off:ue,trigger:he,one:de,any:fe});function _e(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&e.length}function be(e){if(!e.nodeName&&!xe(e))throw new Error("Invalid target; must be a DOM node or evented object.")}function Se(e){if(!_e(e))throw new Error("Invalid event type; must be a non-empty string or array.")}function Te(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")}function we(e,t){var n,a,i=t.length<3||t[0]===e||t[0]===e.eventBusEl_,r=i?(n=e.eventBusEl_,3<=t.length&&t.shift(),a=t[0],t[1]):(n=t[0],a=t[1],t[2]);return be(n),Se(a),Te(r),{isTargetingSelf:i,target:n,type:a,listener:pe(e,r)}}function Pe(e,t,n,a){be(e),e.nodeName?ye[t](e,n,a):e[t](n,a)}ge.prototype.allowedEvents_={},ge.prototype.addEventListener=ge.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},ce(this,e,t),this.addEventListener=n},ge.prototype.removeEventListener=ge.prototype.off=function(e,t){ue(this,e,t)},ge.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},de(this,e,t),this.addEventListener=n},ge.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},fe(this,e,t),this.addEventListener=n},ge.prototype.dispatchEvent=ge.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=se(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),he(this,e)},ge.prototype.queueTrigger=function(e){var t=this;ve=ve||new Map;var n=e.type||e,a=ve.get(this);a||(a=new Map,ve.set(this,a));var i=a.get(n);a.delete(n),y.clearTimeout(i);var r=y.setTimeout(function(){0===a.size&&(a=null,ve.delete(t)),t.trigger(e)},0);a.set(n,r)};var xe=function(t){return t instanceof ge||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},Ce={on:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=we(this,n),r=i.isTargetingSelf,s=i.target,o=i.type,l=i.listener;function c(){return e.off(s,o,l)}function u(){return e.off("dispose",c)}Pe(s,"on",o,l),r||(c.guid=l.guid,u.guid=l.guid,Pe(this,"on","dispose",c),Pe(s,"on","dispose",u))},one:function(){for(var a=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=we(this,t),r=i.isTargetingSelf,s=i.target,o=i.type,l=i.listener;function c(){a.off(s,o,c);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];l.apply(null,t)}r?Pe(s,"one",o,l):(c.guid=l.guid,Pe(s,"one",o,c))},any:function(){for(var a=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=we(this,t),r=i.isTargetingSelf,s=i.target,o=i.type,l=i.listener;function c(){a.off(s,o,c);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];l.apply(null,t)}r?Pe(s,"any",o,l):(c.guid=l.guid,Pe(s,"any",o,c))},off:function(e,t,n){var a,i;!e||_e(e)?ue(this.eventBusEl_,e,t):(i=t,be(a=e),Se(i),Te(n),n=pe(this,n),this.off("dispose",n),a.nodeName?(ue(a,i,n),ue(a,"dispose",n)):xe(a)&&(a.off(i,n),a.off("dispose",n)))},trigger:function(e,t){return he(this.eventBusEl_,e,t)}};function De(e,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=_("span",{className:"vjs-event-bus"});return m(e,Ce),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),y.setTimeout(function(){e.eventBusEl_=null},0)}),e}var Ee={state:{},setState:function(e){var n,a=this;return"function"==typeof e&&(e=e()),r(e,function(e,t){a.state[t]!==e&&((n=n||{})[t]={from:a.state[t],to:e}),a.state[t]=e}),n&&xe(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function Ae(e,t){return m(e,Ee),e.state=m({},e.state,t),"function"==typeof e.handleStateChanged&&xe(e)&&e.on("statechanged",e.handleStateChanged),e}function ke(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})}function Ie(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function Me(){for(var n={},e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.forEach(function(e){e&&r(e,function(e,t){o(e)?(o(n[t])||(n[t]={}),n[t]=Me(n[t],e)):n[t]=e})}),n}var $e,Le=(($e=Oe.prototype).dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ae.has(this.el_)&&ae.delete(this.el_),this.el_=null),this.player_=null},$e.player=function(){return this.player_},$e.options=function(e){return e&&(this.options_=Me(this.options_,e)),this.options_},$e.el=function(){return this.el_},$e.createEl=function(e,t,n){return _(e,t,n)},$e.localize=function(e,a,t){void 0===t&&(t=e);var n=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),r=i&&i[n],s=n&&n.split("-")[0],o=i&&i[s],l=t;return r&&r[e]?l=r[e]:o&&o[e]&&(l=o[e]),a&&(l=l.replace(/\{(\d+)\}/g,function(e,t){var n=a[t-1];return void 0===n?e:n})),l},$e.contentEl=function(){return this.contentEl_||this.el_},$e.id=function(){return this.id_},$e.name=function(){return this.name_},$e.children=function(){return this.children_},$e.getChildById=function(e){return this.childIndex_[e]},$e.getChild=function(e){if(e)return this.childNameIndex_[e]},$e.addChild=function(e,t,n){var a,i,r;if(void 0===t&&(t={}),void 0===n&&(n=this.children_.length),"string"==typeof e){i=Ie(e);var s=t.componentClass||i;t.name=i;var o=Oe.getComponent(s);if(!o)throw new Error("Component "+s+" does not exist");if("function"!=typeof o)return null;a=new o(this.player_||this,t)}else a=e;return a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(n,0,a),a.parentComponent_=this,"function"==typeof a.id&&(this.childIndex_[a.id()]=a),(i=i||a.name&&Ie(a.name()))&&(this.childNameIndex_[i]=a,this.childNameIndex_[ke(i)]=a),"function"==typeof a.el&&a.el()&&(r=this.contentEl().children[n]||null,this.contentEl().insertBefore(a.el(),r)),a},$e.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t,n=!1,a=this.children_.length-1;0<=a;a--)if(this.children_[a]===e){n=!0,this.children_.splice(a,1);break}n&&(e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Ie(e.name())]=null,this.childNameIndex_[ke(e.name())]=null,(t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el()))}},$e.initChildren=function(){var e,i,n,r=this,a=this.options_.children;a&&(i=this.options_,n=Oe.getComponent("Tech"),(e=Array.isArray(a)?a:Object.keys(a)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t,n="string"==typeof e?a[t=e]||r.options_[t]||{}:(t=e.name,e);return{name:t,opts:n}}).filter(function(e){var t=Oe.getComponent(e.opts.componentClass||Ie(e.name));return t&&!n.isTech(t)}).forEach(function(e){var t,n=e.name,a=e.opts;void 0!==i[n]&&(a=i[n]),!1!==a&&(!0===a&&(a={}),a.playerOptions=r.options_.playerOptions,(t=r.addChild(n,a))&&(r[n]=t))}))},$e.buildCSSClass=function(){return""},$e.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},$e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},$e.$=function(e,t){return H(e,t||this.contentEl())},$e.$$=function(e,t){return G(e,t||this.contentEl())},$e.hasClass=function(e){return T(this.el_,e)},$e.addClass=function(e){w(this.el_,e)},$e.removeClass=function(e){P(this.el_,e)},$e.toggleClass=function(e,t){x(this.el_,e,t)},$e.show=function(){this.removeClass("vjs-hidden")},$e.hide=function(){this.addClass("vjs-hidden")},$e.lockShowing=function(){this.addClass("vjs-lock-showing")},$e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},$e.getAttribute=function(e){return E(this.el_,e)},$e.setAttribute=function(e,t){A(this.el_,e,t)},$e.removeAttribute=function(e){k(this.el_,e)},$e.width=function(e,t){return this.dimension("width",e,t)},$e.height=function(e,t){return this.dimension("height",e,t)},$e.dimensions=function(e,t){this.width(e,!0),this.height(t)},$e.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var a=this.el_.style[e],i=a.indexOf("px");return-1!==i?parseInt(a.slice(0,i),10):parseInt(this.el_["offset"+Ie(e)],10)},$e.currentDimension=function(e){var t,n=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");return n=a(this.el_,e),0!==(n=parseFloat(n))&&!isNaN(n)||(t="offset"+Ie(e),n=this.el_[t]),n},$e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},$e.currentWidth=function(){return this.currentDimension("width")},$e.currentHeight=function(){return this.currentDimension("height")},$e.focus=function(){this.el_.focus()},$e.blur=function(){this.el_.blur()},$e.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},$e.handleKeyPress=function(e){this.handleKeyDown(e)},$e.emitTapEvents=function(){var a,t=0,i=null;function e(){a=!1}this.on("touchstart",function(e){1===e.touches.length&&(i={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=y.performance.now(),a=!0)}),this.on("touchmove",function(e){var t,n;1<e.touches.length?a=!1:i&&(t=e.touches[0].pageX-i.pageX,n=e.touches[0].pageY-i.pageY,10<Math.sqrt(t*t+n*n)&&(a=!1))}),this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(i=null)===a&&y.performance.now()-t<200&&(e.preventDefault(),this.trigger("tap"))})},$e.enableTouchActivity=function(){function e(e){n(),this.clearInterval(t)}var t,n;this.player()&&this.player().reportUserActivity&&(n=pe(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){n(),this.clearInterval(t),t=this.setInterval(n,250)}),this.on("touchmove",n),this.on("touchend",e),this.on("touchcancel",e))},$e.setTimeout=function(e,t){var n,a=this;return e=pe(this,e),this.clearTimersOnDispose_(),n=y.setTimeout(function(){a.setTimeoutIds_.has(n)&&a.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n},$e.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),y.clearTimeout(e)),e},$e.setInterval=function(e,t){e=pe(this,e),this.clearTimersOnDispose_();var n=y.setInterval(e,t);return this.setIntervalIds_.add(n),n},$e.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),y.clearInterval(e)),e},$e.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=pe(this,e),t=y.requestAnimationFrame(function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},$e.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),y.cancelAnimationFrame(e)),e):this.clearTimeout(e)},$e.clearTimersOnDispose_=function(){var a=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var t=e[0],n=e[1];a[t].forEach(a[n],a)}),a.clearingTimersOnDispose_=!1}))},Oe.registerComponent=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var n=Oe.getComponent("Tech"),a=n&&n.isTech(t),i=Oe===t||Oe.prototype.isPrototypeOf(t.prototype);if(a||!i)throw new Error('Illegal component, "'+e+'"; '+(a?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");e=Ie(e),Oe.components_||(Oe.components_={});var r=Oe.getComponent("Player");if("Player"===e&&r&&r.players){var s=r.players,o=Object.keys(s);if(s&&0<o.length&&o.map(function(e){return s[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Oe.components_[e]=t,Oe.components_[ke(e)]=t},Oe.getComponent=function(e){if(e&&Oe.components_)return Oe.components_[e]},Oe);function Oe(e,t,n){var a,i,r;function s(){this.set_={}}!e&&this.play?this.player_=e=this:this.player_=e,this.parentComponent_=null,this.options_=Me({},this.options_),t=this.options_=Me(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(a=e&&e.id&&e.id()||"no_player",this.id_=a+"_component_"+te()),this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&De(this,{eventBusKey:this.el_?"el_":null}),Ae(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},y.Set||((r=s.prototype).has=function(e){return e in this.set_},r.delete=function(e){var t=this.has(e);return delete this.set_[e],t},r.add=function(e){return this.set_[e]=1,this},r.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},i=s),this.setTimeoutIds_=new(y.Set?Set:i),this.setIntervalIds_=new(y.Set?Set:i),this.rafIds_=new(y.Set?Set:i),(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}function Re(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t,n){return(Fe=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&Ne(i,n.prototype),i}).apply(null,arguments)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Le.prototype.supportsRaf_="function"==typeof y.requestAnimationFrame&&"function"==typeof y.cancelAnimationFrame,Le.registerComponent("Component",Le);var Ve,je,Ue,He,Ge=y.navigator&&y.navigator.userAgent||"",Ye=/AppleWebKit\/([\d.]+)/i.exec(Ge),qe=Ye?parseFloat(Ye.pop()):null,ze=/iPad/i.test(Ge),We=/iPhone/i.test(Ge)&&!ze,Ke=/iPod/i.test(Ge),Xe=We||ze||Ke,Qe=(Ve=Ge.match(/OS (\d+)_/i))&&Ve[1]?Ve[1]:null,Je=/Android/i.test(Ge),Ze=function(){var e=Ge.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),et=Je&&Ze<5&&qe<537,tt=/Firefox/i.test(Ge),nt=/Edge/i.test(Ge),at=!nt&&(/Chrome/i.test(Ge)||/CriOS/i.test(Ge)),it=(je=Ge.match(/(Chrome|CriOS)\/(\d+)/))&&je[2]?parseFloat(je[2]):null,rt=(!(He=(Ue=/MSIE\s(\d+)\.\d/.exec(Ge))&&parseFloat(Ue[1]))&&/Trident\/7.0/i.test(Ge)&&/rv:11.0/.test(Ge)&&(He=11),He),st=/Safari/i.test(Ge)&&!at&&!Je&&!nt,ot=(st||Xe)&&!at,lt=/Windows/i.test(Ge),ct=u()&&("ontouchstart"in y||y.navigator.maxTouchPoints||y.DocumentTouch&&y.document instanceof y.DocumentTouch),ut=Object.freeze({IS_IPAD:ze,IS_IPHONE:We,IS_IPOD:Ke,IS_IOS:Xe,IOS_VERSION:Qe,IS_ANDROID:Je,ANDROID_VERSION:Ze,IS_NATIVE_ANDROID:et,IS_FIREFOX:tt,IS_EDGE:nt,IS_CHROME:at,CHROME_VERSION:it,IE_VERSION:rt,IS_SAFARI:st,IS_ANY_SAFARI:ot,IS_WINDOWS:lt,TOUCH_ENABLED:ct});function ht(t,e,n,a){return function(e){if("number"!=typeof a||a<0||e<a)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+a+") is non-numeric or out of bounds (0-"+e+").")}(n.length-1),n[a][e]}function dt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:ht.bind(null,"start",0,e),end:ht.bind(null,"end",1,e)}}function ft(e,t){return Array.isArray(e)?dt(e):void 0===e||void 0===t?dt():dt([[e,t]])}function pt(e,t){var n,a,i=0;if(!t)return 0;e&&e.length||(e=ft(0,0));for(var r=0;r<e.length;r++)n=e.start(r),t<(a=e.end(r))&&(a=t),i+=a-n;return i/t}for(var mt,gt={prefixed:!0},vt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],yt=vt[0],_t=0;_t<vt.length;_t++)if(vt[_t][1]in h){mt=vt[_t];break}if(mt){for(var bt=0;bt<mt.length;bt++)gt[yt[bt]]=mt[bt];gt.prefixed=mt[0]!==yt[0]}function St(e){if(e instanceof St)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:s(e)&&("number"==typeof e.code&&(this.code=e.code),m(this,e)),this.message||(this.message=St.defaultMessages[this.code]||"")}St.prototype.code=0,St.prototype.message="",St.prototype.status=null,St.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],St.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Tt=0;Tt<St.errorTypes.length;Tt++)St[St.errorTypes[Tt]]=Tt,St.prototype[St.errorTypes[Tt]]=Tt;function wt(e){return null!=e&&"function"==typeof e.then}function Pt(e){wt(e)&&e.then(null,function(e){})}function xt(a){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,n){return a[t]&&(e[t]=a[t]),e},{cues:a.cues&&Array.prototype.map.call(a.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}function Ct(e,t){return e(t={exports:{}},t.exports),t.exports}var Dt=Ct(function(e,t){function n(e){var t;if(!e||"object"!=typeof e||(t=e.which||e.keyCode||e.charCode)&&(e=t),"number"==typeof e)return o[e];var n,a=String(e);return(n=i[a.toLowerCase()])?n:(n=r[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n,a=e.which||e.keyCode||e.charCode;if(null==a)return!1;if("string"==typeof t){if(n=i[t.toLowerCase()])return n===a;if(n=r[t.toLowerCase()])return n===a}else if("number"==typeof t)return t===a;return!1}};for(var i=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"Ã¢â¡Â§":16,"Ã¢ÅÂ¥":18,"Ã¢ÅÆ":17,"Ã¢ÅË":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91},a=97;a<123;a++)i[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)i[a-48]=a;for(a=1;a<13;a++)i["f"+a]=a+111;for(a=0;a<10;a++)i["numpad "+a]=a+96;var s,o=t.names=t.title={};for(a in i)o[i[a]]=a;for(s in r)i[s]=r[s]}),Et=(Dt.code,Dt.codes,Dt.aliases,Dt.names,Dt.title,"vjs-modal-dialog"),At=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=_("div",{className:Et+"-content"},{role:"document"}),n.descEl_=_("p",{className:Et+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),b(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}Re(e,a);var t=e.prototype;return t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,a.prototype.dispose.call(this)},t.buildCSSClass=function(){return Et+" vjs-hidden "+a.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.open=function(){var e;this.opened_||(e=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)},t.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.close=function(){var e;this.opened_&&(e=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose())},t.closeable=function(e){var t,n,a;return"boolean"==typeof e&&(t=this.closeable_=!!e,n=this.getChild("closeButton"),t&&!n&&(a=this.contentEl_,this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=a,this.on(n,"close",this.close)),!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())),this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,a=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),V(t,e),this.trigger("modalfill"),a?n.insertBefore(t,a):n.appendChild(t);var i=this.getChild("closeButton");i&&n.appendChild(i.el_)},t.empty=function(){this.trigger("beforemodalempty"),N(this.contentEl()),this.trigger("modalempty")},t.content=function(e){return void 0!==e&&(this.content_=e),this.content_},t.conditionalFocus_=function(){var e=h.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(e){if(e.stopPropagation(),Dt.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(Dt.isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),a=this.el_.querySelector(":focus"),i=0;i<n.length;i++)if(a===n[i]){t=i;break}h.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},t.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof y.HTMLAnchorElement||e instanceof y.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof y.HTMLInputElement||e instanceof y.HTMLSelectElement||e instanceof y.HTMLTextAreaElement||e instanceof y.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof y.HTMLIFrameElement||e instanceof y.HTMLObjectElement||e instanceof y.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},e}(Le);At.prototype.options_={pauseOnOpen:!0,temporary:!0},Le.registerComponent("ModalDialog",At);var kt,It=function(a){function e(e){var t;void 0===e&&(e=[]),(t=a.call(this)||this).tracks_=[],Object.defineProperty(Be(t),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<e.length;n++)t.addTrack(e[n]);return t}Re(e,a);var t=e.prototype;return t.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this}))},t.removeTrack=function(e){for(var t,n=0,a=this.length;n<a;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},t.getTrackById=function(e){for(var t=null,n=0,a=this.length;n<a;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}(ge);for(kt in It.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},It.prototype.allowedEvents_)It.prototype["on"+kt]=null;function Mt(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)}function $t(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)}function Lt(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=h.createElement("a");n.href=e;var a,i=""===n.host&&"file:"!==n.protocol;i&&((a=h.createElement("div")).innerHTML='<a href="'+e+'"></a>',n=a.firstChild,a.setAttribute("style","display:none; position:absolute;"),h.body.appendChild(a));for(var r={},s=0;s<t.length;s++)r[t[s]]=n[t[s]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=y.location.protocol),i&&h.body.removeChild(a),r}function Ot(e){var t;return e.match(/^https?:\/\//)||((t=h.createElement("div")).innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href),e}function Rt(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""}function Nt(e){var t=y.location,n=Lt(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host}var Ft,Bt,Vt,jt=function(a){function e(e){var t;void 0===e&&(e=[]);for(var n=e.length-1;0<=n;n--)if(e[n].enabled){Mt(e,e[n]);break}return(t=a.call(this,e)||this).changing_=!1,t}Re(e,a);var t=e.prototype;return t.addTrack=function(e){var t=this;e.enabled&&Mt(this,e),a.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){t.changing_||(t.changing_=!0,Mt(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},t.removeTrack=function(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},e}(It),Ut=function(a){function e(e){var t;void 0===e&&(e=[]);for(var n=e.length-1;0<=n;n--)if(e[n].selected){$t(e,e[n]);break}return(t=a.call(this,e)||this).changing_=!1,Object.defineProperty(Be(t),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),t}Re(e,a);var t=e.prototype;return t.addTrack=function(e){var t=this;e.selected&&$t(this,e),a.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){t.changing_||(t.changing_=!0,$t(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},t.removeTrack=function(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},e}(It),Ht=function(n){function e(){return n.apply(this,arguments)||this}Re(e,n);var t=e.prototype;return t.addTrack=function(e){var t=this;n.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return t.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return t.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(e){n.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(It),Gt=((Vt=nn.prototype).addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},Vt.getTrackElementByTrack_=function(e){for(var t,n=0,a=this.trackElements_.length;n<a;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},Vt.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},nn),Yt=((Bt=tn.prototype).setCues_=function(e){var t=this.length||0,n=0,a=e.length;function i(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}if(this.cues_=e,this.length_=e.length,t<a)for(n=t;n<a;n++)i.call(this,n)},Bt.getCueById=function(e){for(var t=null,n=0,a=this.length;n<a;n++){var i=this[n];if(i.id===e){t=i;break}}return t},tn),qt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},zt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Wt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Kt={disabled:"disabled",hidden:"hidden",showing:"showing"},Xt=(Re(en,Ft=ge),en),Qt=Object.freeze({parseUrl:Lt,getAbsoluteURL:Ot,getFileExtension:Rt,isCrossOrigin:Nt}),Jt=function(e){var t=Zt.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},Zt=Object.prototype.toString;function en(e){var t;void 0===e&&(e={}),t=Ft.call(this)||this;var n,a={id:e.id||"vjs_track_"+te(),kind:e.kind||"",label:e.label||"",language:e.language||""};for(n in a)!function(e){Object.defineProperty(Be(t),e,{get:function(){return a[e]},set:function(){}})}(n);return t}function tn(e){tn.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}function nn(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}function an(e){var t=yn.call(e),n="[object Arguments]"===t;return n||"[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===yn.call(e.callee)}var rn,sn,on,ln,cn,un,hn,dn,fn,pn,mn=Array.prototype.slice,gn=Object.prototype.toString,vn=Function.prototype.bind||function(t){var n=this;if("function"!=typeof n||"[object Function]"!==gn.call(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var a,i=mn.call(arguments,1),e=Math.max(0,n.length-i.length),r=[],s=0;s<e;s++)r.push("$"+s);function o(){}return a=Function("binder","return function ("+r.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof a){var e=n.apply(this,i.concat(mn.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(mn.call(arguments)))}),n.prototype&&(o.prototype=n.prototype,a.prototype=new o,o.prototype=null),a},yn=Object.prototype.toString;function _n(e){var t=e.constructor;return t&&t.prototype===e}Object.keys||(rn=Object.prototype.hasOwnProperty,sn=Object.prototype.toString,on=an,ln=Object.prototype.propertyIsEnumerable,cn=!ln.call({toString:null},"toString"),un=ln.call(function(){},"prototype"),hn=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dn={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},fn=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!dn["$"+e]&&rn.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{_n(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),pn=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===sn.call(e),a=on(e),i=t&&"[object String]"===sn.call(e),r=[];if(!t&&!n&&!a)throw new TypeError("Object.keys called on a non-object");var s=un&&n;if(i&&0<e.length&&!rn.call(e,0))for(var o=0;o<e.length;++o)r.push(String(o));if(a&&0<e.length)for(var l=0;l<e.length;++l)r.push(String(l));else for(var c in e)s&&"prototype"===c||!rn.call(e,c)||r.push(String(c));if(cn)for(var u=function(e){if("undefined"==typeof window||!fn)return _n(e);try{return _n(e)}catch(e){return!1}}(e),h=0;h<hn.length;++h)u&&"constructor"===hn[h]||!rn.call(e,hn[h])||r.push(hn[h]);return r});var bn=Array.prototype.slice,Sn=Object.keys,Tn=Sn?function(e){return Sn(e)}:pn,wn=Object.keys;function Pn(e,t,n){var a=2<arguments.length?n:{},i=xn(t);Cn&&(i=En.call(i,Object.getOwnPropertySymbols(t)));for(var r,s,o,l,c=0;c<i.length;c+=1)r=e,s=i[c],o=t[i[c]],l=a[i[c]],s in r&&("function"!=typeof l||"[object Function]"!==Dn.call(l)||!l())||(kn?An(r,s,{configurable:!0,enumerable:!1,value:o,writable:!0}):r[s]=o)}Tn.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return an(e)?wn(bn.call(e)):wn(e)}):Object.keys=Tn,Object.keys||Tn};var xn=Tn,Cn="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Dn=Object.prototype.toString,En=Array.prototype.concat,An=Object.defineProperty,kn=An&&function(){var e={};try{for(var t in An(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}();function In(e,t){if(1<arguments.length&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');var n="$ "+e;if(!(n in qn))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===qn[n]&&!t)throw new TypeError("intrinsic "+e+" exists, but is not available. Please file an issue!");return qn[n]}function Mn(e,t,n,a){var i=Xn[t];if("function"!=typeof i)throw new Kn("unknown record type: "+t);if(!i(e,a))throw new Wn(n+" must be a "+t)}function $n(e){return 0<=e?1:-1}function Ln(e){try{var t=ea.call(e);return ta.test(t)}catch(e){return}}function On(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(aa)return function(e){try{return!Ln(e)&&(ea.call(e),!0)}catch(e){return!1}}(e);if(Ln(e))return!1;var t=na.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}function Rn(e){return null===e||"function"!=typeof e&&"object"!=typeof e}function Nn(){var e=la.ToString(la.CheckObjectCoercible(this));return ca(ca(e,ua,""),ha,"")}function Fn(){return String.prototype.trim&&"Ã¢â¬â¹"==="Ã¢â¬â¹".trim()?String.prototype.trim:Nn}Pn.supportsDescriptors=!!kn;function Bn(e,t){var n;if((n=1<arguments.length?t:"[object Date]"===ia.call(e)?String:Number)!==String&&n!==Number)throw new TypeError("invalid [[DefaultValue]] hint supplied");for(var a,i=n===String?["toString","valueOf"]:["valueOf","toString"],r=0;r<i.length;++r)if(On(e[i[r]])&&Rn(a=e[i[r]]()))return a;throw new TypeError("No default value")}var Vn,jn=Pn,Un=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,Gn=Object.getPrototypeOf||function(e){return e.__proto__},Yn="undefined"==typeof Uint8Array?Vn:Gn(Uint8Array),qn={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?Vn:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?Vn:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":Hn?Gn([][Symbol.iterator]()):Vn,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":Vn,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":Vn,"$ %AsyncGenerator%":Vn,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":Vn,"$ %AsyncIteratorPrototype%":Vn,"$ %Atomics%":"undefined"==typeof Atomics?Vn:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?Vn:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?Vn:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?Vn:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?Vn:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?Vn:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?Vn:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":Vn,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":Vn,"$ %Int8Array%":"undefined"==typeof Int8Array?Vn:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?Vn:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?Vn:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?Vn:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?Vn:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?Vn:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":Hn?Gn(Gn([][Symbol.iterator]())):Vn,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?Vn:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&Hn?Gn((new Map)[Symbol.iterator]()):Vn,"$ %MapPrototype%":"undefined"==typeof Map?Vn:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?Vn:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?Vn:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?Vn:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?Vn:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?Vn:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?Vn:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?Vn:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?Vn:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?Vn:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&Hn?Gn((new Set)[Symbol.iterator]()):Vn,"$ %SetPrototype%":"undefined"==typeof Set?Vn:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?Vn:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?Vn:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":Hn?Gn(""[Symbol.iterator]()):Vn,"$ %StringPrototype%":String.prototype,"$ %Symbol%":Hn?Symbol:Vn,"$ %SymbolPrototype%":Hn?Symbol.prototype:Vn,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":Un,"$ %TypedArray%":Yn,"$ %TypedArrayPrototype%":Yn?Yn.prototype:Vn,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?Vn:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?Vn:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?Vn:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?Vn:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?Vn:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?Vn:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?Vn:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?Vn:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?Vn:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?Vn:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?Vn:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?Vn:WeakSet.prototype},zn=vn.call(Function.call,Object.prototype.hasOwnProperty),Wn=In("%TypeError%"),Kn=In("%SyntaxError%"),Xn={"Property Descriptor":function(e,t){if("Object"!==e.Type(t))return!1;var n,a={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(n in t)if(zn(t,n)&&!a[n])return!1;var i=zn(t,"[[Value]]"),r=zn(t,"[[Get]]")||zn(t,"[[Set]]");if(i&&r)throw new Wn("Property Descriptors may not be both accessor and data descriptors");return!0}},Qn=Number.isNaN||function(e){return e!=e},Jn=Number.isNaN||function(e){return e!=e},Zn=Number.isFinite||function(e){return"number"==typeof e&&!Jn(e)&&e!==1/0&&e!==-1/0},ea=Function.prototype.toString,ta=/^\s*class\b/,na=Object.prototype.toString,aa="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,ia=Object.prototype.toString,ra=In("%Object%"),sa=In("%TypeError%"),oa=In("%String%"),la={ToPrimitive:function(e,t){return Rn(e)?e:1<arguments.length?Bn(e,t):Bn(e)},ToBoolean:function(e){return!!e},ToNumber:function(e){return+e},ToInteger:function(e){var t=this.ToNumber(e);return Qn(t)?0:0!==t&&Zn(t)?$n(t)*Math.floor(Math.abs(t)):t},ToInt32:function(e){return this.ToNumber(e)>>0},ToUint32:function(e){return this.ToNumber(e)>>>0},ToUint16:function(e){var t,n=this.ToNumber(e);return Qn(n)||0===n||!Zn(n)?0:(t=$n(n)*Math.floor(Math.abs(n))%65536,Math.floor(0<=t?t:65536+t))},ToString:function(e){return oa(e)},ToObject:function(e){return this.CheckObjectCoercible(e),ra(e)},CheckObjectCoercible:function(e,t){if(null==e)throw new sa(t||"Cannot call method on "+e);return e},IsCallable:On,SameValue:function(e,t){return e===t?0!==e||1/e==1/t:Qn(e)&&Qn(t)},Type:function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0},IsPropertyDescriptor:function(e){if("Object"!==this.Type(e))return!1;var t,n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(t in e)if(zn(e,t)&&!n[t])return!1;var a=zn(e,"[[Value]]"),i=zn(e,"[[Get]]")||zn(e,"[[Set]]");if(a&&i)throw new sa("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(e){return void 0!==e&&(Mn(this,"Property Descriptor","Desc",e),!(!zn(e,"[[Get]]")&&!zn(e,"[[Set]]")))},IsDataDescriptor:function(e){return void 0!==e&&(Mn(this,"Property Descriptor","Desc",e),!(!zn(e,"[[Value]]")&&!zn(e,"[[Writable]]")))},IsGenericDescriptor:function(e){return void 0!==e&&(Mn(this,"Property Descriptor","Desc",e),!this.IsAccessorDescriptor(e)&&!this.IsDataDescriptor(e))},FromPropertyDescriptor:function(e){if(void 0===e)return e;if(Mn(this,"Property Descriptor","Desc",e),this.IsDataDescriptor(e))return{value:e["[[Value]]"],writable:!!e["[[Writable]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};if(this.IsAccessorDescriptor(e))return{get:e["[[Get]]"],set:e["[[Set]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};throw new sa("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(e){if("Object"!==this.Type(e))throw new sa("ToPropertyDescriptor requires an object");var t={};if(zn(e,"enumerable")&&(t["[[Enumerable]]"]=this.ToBoolean(e.enumerable)),zn(e,"configurable")&&(t["[[Configurable]]"]=this.ToBoolean(e.configurable)),zn(e,"value")&&(t["[[Value]]"]=e.value),zn(e,"writable")&&(t["[[Writable]]"]=this.ToBoolean(e.writable)),zn(e,"get")){var n=e.get;if(void 0!==n&&!this.IsCallable(n))throw new TypeError("getter must be a function");t["[[Get]]"]=n}if(zn(e,"set")){var a=e.set;if(void 0!==a&&!this.IsCallable(a))throw new sa("setter must be a function");t["[[Set]]"]=a}if((zn(t,"[[Get]]")||zn(t,"[[Set]]"))&&(zn(t,"[[Value]]")||zn(t,"[[Writable]]")))throw new sa("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},ca=vn.call(Function.call,String.prototype.replace),ua=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,ha=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,da=vn.call(Function.call,Fn());jn(da,{getPolyfill:Fn,implementation:Nn,shim:function(){var e=Fn();return jn(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}});var fa=da,pa=Object.prototype.toString,ma=Object.prototype.hasOwnProperty,ga=function(e){if(!e)return{};var r={};return function(e,t,n){if(!On(t))throw new TypeError("iterator must be a function");var a;3<=arguments.length&&(a=n),("[object Array]"===pa.call(e)?function(e,t,n){for(var a=0,i=e.length;a<i;a++)ma.call(e,a)&&(null==n?t(e[a],a,e):t.call(n,e[a],a,e))}:"string"==typeof e?function(e,t,n){for(var a=0,i=e.length;a<i;a++)null==n?t(e.charAt(a),a,e):t.call(n,e.charAt(a),a,e)}:function(e,t,n){for(var a in e)ma.call(e,a)&&(null==n?t(e[a],a,e):t.call(n,e[a],a,e))})(e,t,a)}(fa(e).split("\n"),function(e){var t,n=e.indexOf(":"),a=fa(e.slice(0,n)).toLowerCase(),i=fa(e.slice(n+1));void 0===r[a]?r[a]=i:(t=r[a],"[object Array]"!==Object.prototype.toString.call(t)?r[a]=[r[a],i]:r[a].push(i))}),r},va=function(){for(var e={},t=0;t<arguments.length;t++){var n,a=arguments[t];for(n in a)ya.call(a,n)&&(e[n]=a[n])}return e},ya=Object.prototype.hasOwnProperty,_a=Sa;function ba(e,t,n){var a=e;return Jt(t)?(n=t,"string"==typeof e&&(a={uri:e})):a=va(t,{uri:e}),a.callback=n,a}function Sa(e,t,n){return Ta(t=ba(e,t,n))}function Ta(a){if(void 0===a.callback)throw new Error("callback argument missing");function i(e,t,n){r||(r=!0,a.callback(e,t,n))}var r=!1;function t(e){return clearTimeout(o),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,i(e,m)}function e(){if(!s){var e;clearTimeout(o),e=a.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var t=m,n=null;return 0!==e?(t={body:function(){var e=void 0,e=l.response?l.response:l.responseText||function(){if("document"===l.responseType)return l.responseXML;var e=l.responseXML&&"parsererror"===l.responseXML.documentElement.nodeName;return""!==l.responseType||e?null:l.responseXML}();if(p)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:e,method:u,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(t.headers=ga(l.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),i(n,t,t.body)}}var n,s,o,l=a.xhr||null,c=(l=l||(a.cors||a.useXDR?new Sa.XDomainRequest:new Sa.XMLHttpRequest)).url=a.uri||a.url,u=l.method=a.method||"GET",h=a.body||a.data,d=l.headers=a.headers||{},f=!!a.sync,p=!1,m={body:void 0,headers:{},statusCode:0,method:u,url:c,rawRequest:l};if("json"in a&&!1!==a.json&&(p=!0,d.accept||d.Accept||(d.Accept="application/json"),"GET"!==u&&"HEAD"!==u&&(d["content-type"]||d["Content-Type"]||(d["Content-Type"]="application/json"),h=JSON.stringify(!0===a.json?h:a.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(e,0)},l.onload=e,l.onerror=t,l.onprogress=function(){},l.onabort=function(){s=!0},l.ontimeout=t,l.open(u,c,!f,a.username,a.password),f||(l.withCredentials=!!a.withCredentials),!f&&0<a.timeout&&(o=setTimeout(function(){var e;s||(s=!0,l.abort("timeout"),(e=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",t(e))},a.timeout)),l.setRequestHeader)for(n in d)d.hasOwnProperty(n)&&l.setRequestHeader(n,d[n]);else if(a.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(l.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(l),l.send(h||null),l}function wa(e,t){var n=new y.WebVTT.Parser(y,y.vttjs,y.WebVTT.StringDecoder()),a=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){a.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<a.length&&(y.console&&y.console.groupCollapsed&&y.console.groupCollapsed("Text Track parsing errors for "+t.src),a.forEach(function(e){return f.error(e)}),y.console&&y.console.groupEnd&&y.console.groupEnd()),n.flush()}Sa.XMLHttpRequest=y.XMLHttpRequest||function(){},Sa.XDomainRequest="withCredentials"in new Sa.XMLHttpRequest?Sa.XMLHttpRequest:y.XDomainRequest,function(e){for(var t=0;t<e.length;t++)!function(a){Sa["delete"===a?"del":a]=function(e,t,n){return(t=ba(e,t,n)).method=a.toUpperCase(),Ta(t)}}(e[t])}(["get","put","post","patch","head","delete"]);var Pa=function(c){function e(e){var t;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var n=Me(e,{kind:Wt[e.kind]||"subtitles",language:e.language||e.srclang||""}),a=Kt[n.mode]||"disabled",i=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(a="hidden"),(t=c.call(this,n)||this).tech_=n.tech,t.cues_=[],t.activeCues_=[];var r=new Yt(t.cues_),s=new Yt(t.activeCues_),o=!1,l=pe(Be(t),function(){this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1)});return"disabled"!==a&&t.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0),Object.defineProperties(Be(t),{default:{get:function(){return i},set:function(){}},mode:{get:function(){return a},set:function(e){var t=this;Kt[e]&&("disabled"!==(a=e)?this.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?r:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],n=0,a=this.cues.length;n<a;n++){var i=this.cues[n];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(var r=0;r<t.length;r++)-1===this.activeCues_.indexOf(t[r])&&(o=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),n.src?(t.src=n.src,function(e,a){var t={uri:e},n=Nt(e);n&&(t.cors=n),_a(t,pe(this,function(e,t,n){return e?f.error(e,t):(a.loaded_=!0,void("function"!=typeof y.WebVTT?a.tech_&&a.tech_.any(["vttjsloaded","vttjserror"],function(e){return"vttjserror"!==e.type?wa(n,a):void f.error("vttjs failed to load, stopping trying to process "+a.src)}):wa(n,a)))}))}(n.src,Be(t))):t.loaded_=!0,t}Re(e,c);var t=e.prototype;return t.addCue=function(e){var t=e;if(y.vttjs&&!(e instanceof y.vttjs.VTTCue)){for(var n in t=new y.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var a=this.tech_.textTracks(),i=0;i<a.length;i++)a[i]!==this&&a[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},e}(Xt);Pa.prototype.allowedEvents_={cuechange:"cuechange"};var xa,Ca,Da,Ea=(Re($a,Da=Xt),$a),Aa=(Re(Ma,Ca=Xt),Ma),ka=(Re(Ia,xa=ge),Ia);function Ia(e){var t,n;void 0===e&&(e={}),t=xa.call(this)||this;var a=new Pa(e);return t.kind=a.kind,t.src=a.src,t.srclang=a.language,t.label=a.label,t.default=a.default,Object.defineProperties(Be(t),{readyState:{get:function(){return n}},track:{get:function(){return a}}}),n=0,a.addEventListener("loadeddata",function(){n=2,t.trigger({type:"load",target:Be(t)})}),t}function Ma(e){void 0===e&&(e={});var t=Me(e,{kind:qt[e.kind]||""}),n=Ca.call(this,t)||this,a=!1;return Object.defineProperty(Be(n),"selected",{get:function(){return a},set:function(e){"boolean"==typeof e&&e!==a&&(a=e,this.trigger("selectedchange"))}}),t.selected&&(n.selected=t.selected),n}function $a(e){void 0===e&&(e={});var t=Me(e,{kind:zt[e.kind]||""}),n=Da.call(this,t)||this,a=!1;return Object.defineProperty(Be(n),"enabled",{get:function(){return a},set:function(e){"boolean"==typeof e&&e!==a&&(a=e,this.trigger("enabledchange"))}}),t.enabled&&(n.enabled=t.enabled),n.loaded_=!0,n}ka.prototype.allowedEvents_={load:"load"},ka.NONE=0,ka.LOADING=1,ka.LOADED=2,ka.ERROR=3;var La={audio:{ListClass:jt,TrackClass:Ea,capitalName:"Audio"},video:{ListClass:Ut,TrackClass:Aa,capitalName:"Video"},text:{ListClass:Ht,TrackClass:Pa,capitalName:"Text"}};Object.keys(La).forEach(function(e){La[e].getterName=e+"Tracks",La[e].privateName=e+"Tracks_"});var Oa={remoteText:{ListClass:Ht,TrackClass:Pa,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Gt,TrackClass:ka,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ra=Me(La,Oa);Oa.names=Object.keys(Oa),La.names=Object.keys(La),Ra.names=[].concat(Oa.names).concat(La.names);var Na=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Fa.prototype=e,new Fa};function Fa(){}function Ba(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Va(e){function t(e,t,n,a){return 3600*(0|e)+60*(0|t)+(0|n)+(0|a)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function ja(){this.values=Na(null)}function Ua(e,t,n,a){var i,r,s=a?e.split(a):[e];for(i in s){"string"!=typeof s[i]||2===(r=s[i].split(n)).length&&t(r[0],r[1])}}((Ba.prototype=Na(Error.prototype)).constructor=Ba).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},ja.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var a=0;a<n.length;++a)if(t===n[a]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var Ha={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"Ã¢â¬Å½","&rlm;":"Ã¢â¬Â","&nbsp;":"Ã "},Ga={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Ya={v:"title",lang:"lang"},qa={rt:"ruby"};function za(r,n){function t(e){return Ha[e]}for(var e,a=r.document.createElement("div"),i=a,s=[];null!==(e=function(){if(!n)return null;var e=n.match(/^([^<]*)(<[^>]*>?)?/),t=e[1]?e[1]:e[2];return n=n.substr(t.length),t}());)if("<"!==e[0])i.appendChild(r.document.createTextNode(function(e){for(;c=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(c[0],t);return e}(e)));else{if("/"===e[1]){s.length&&s[s.length-1]===e.substr(2).replace(">","")&&(s.pop(),i=i.parentNode);continue}var o,l=Va(e.substr(1,e.length-2));if(l){o=r.document.createProcessingInstruction("timestamp",l),i.appendChild(o);continue}var c=e.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!c)continue;if(!(o=function(e,t){var n=Ga[e];if(!n)return null;var a=r.document.createElement(n);a.localName=n;var i=Ya[e];return i&&t&&(a[i]=t.trim()),a}(c[1],c[3])))continue;if(qa[o.localName]&&qa[o.localName]!==i.localName)continue;c[2]&&(o.className=c[2].substr(1).replace("."," ")),s.push(c[1]),i.appendChild(o),i=o}return a}var Wa=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Ka(){}function Xa(e,t,n){Ka.call(this),this.cue=t,this.cueDiv=za(e,t.text);var a={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(a,this.cueDiv),this.div=e.document.createElement("div"),a={direction:function(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}for(r(t,e);n=function e(t){if(!t||!t.length)return null;var n=t.pop(),a=n.textContent||n.innerText;if(a){var i=a.match(/^.*(\n|\r)/);return i?i[t.length=0]:a}return"ruby"===n.tagName?e(t):n.childNodes?(r(t,n),e(t)):void 0}(t);)for(var a=0;a<n.length;a++)if(function(e){for(var t=0;t<Wa.length;t++){var n=Wa[t];if(e>=n[0]&&e<=n[1])return 1}}(n.charCodeAt(a)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(a),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"middle":i=t.position-t.size/2;break;case"end":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Qa(e){var t,n,a,i,r;e.div&&(n=e.div.offsetHeight,a=e.div.offsetWidth,i=e.div.offsetTop,r=(r=e.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects(),e=e.div.getBoundingClientRect(),t=r?Math.max(r[0]&&r[0].height||0,e.height/r.length):0),this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||a,this.lineHeight=void 0!==t?t:e.lineHeight}function Ja(){}Ka.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},Ka.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Xa.prototype=Na(Ka.prototype)).constructor=Xa,Qa.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Qa.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Qa.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Qa.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Qa.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Qa.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Qa.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Qa.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,a=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||a,height:e.height||t,bottom:e.bottom||a+(e.height||t),width:e.width||n}},Ja.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Ja.convertCueToDOMTree=function(e,t){return e&&t?za(e,t):null},Ja.processCues=function(a,i,e){if(!a||!i||!e)return null;for(;e.firstChild;)e.removeChild(e.firstChild);var r=a.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",e.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(i)){var s=[],o=Qa.getSimpleBoxPosition(r),l={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var e,t,n=0;n<i.length;n++)t=i[n],e=new Xa(a,t,l),r.appendChild(e.div),function(e,o,l){var t,n=new Qa(e),i=e.cue,a=function(){if("number"==typeof i.line&&(i.snapToLines||0<=i.line&&i.line<=100))return i.line;if(!i.track||!i.track.textTrackList||!i.track.textTrackList.mediaElement)return-1;for(var e=i.track,t=e.textTrackList,n=0,a=0;a<t.length&&t[a]!==e;a++)"showing"===t[a].mode&&n++;return-1*++n}(),r=[];if(i.snapToLines){switch(i.vertical){case"":r=["+y","-y"],t="height";break;case"rl":r=["+x","-x"],t="width";break;case"lr":r=["-x","+x"],t="width"}var s=n.lineHeight,c=s*Math.round(a),u=o[t]+s,h=r[0];Math.abs(c)>u&&(c=c<0?-1:1,c*=Math.ceil(u/s)*s),a<0&&(c+=""===i.vertical?o.height:o.width,r=r.reverse()),n.move(h,c)}else{var d=n.lineHeight/o.height*100;switch(i.lineAlign){case"middle":a-=d/2;break;case"end":a-=d}switch(i.vertical){case"":e.applyStyles({top:e.formatStyle(a,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(a,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(a,"%")})}r=["+y","-x","+x","-y"],n=new Qa(e)}var f=function(e,t){for(var n,a=new Qa(e),i=1,r=0;r<t.length;r++){for(;e.overlapsOppositeAxis(o,t[r])||e.within(o)&&e.overlapsAny(l);)e.move(t[r]);if(e.within(o))return e;var s=e.intersectPercentage(o);s<i&&(n=new Qa(e),i=s),e=new Qa(a)}return n||a}(n,r);e.move(f.toCSSCompatValues(o))}(e,o,s),t.displayState=e.div,s.push(Qa.getSimpleBoxPosition(e))}()}else for(var t=0;t<i.length;t++)r.appendChild(i[t].displayState)},(Ja.Parser=function(e,t,n){n||(n=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof Ba))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,n,r=this;function a(){for(var e=r.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,r.buffer=e.substr(t),n}e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;var i=(t=a()).match(/^WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Ba(Ba.Errors.BadSignature);r.state="HEADER"}for(var s=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(s?s=!1:t=a(),r.state){case"HEADER":/:/.test(t)?(n=t).match(/X-TIMESTAMP-MAP/)?Ua(n,function(e,t){var n,a;"X-TIMESTAMP-MAP"===e&&(n=t,a=new ja,Ua(n,function(e,t){switch(e){case"MPEGT":a.integer(e+"S",t);break;case"LOCA":a.set(e+"L",Va(t))}},/[^\d]:/,/,/),r.ontimestampmap&&r.ontimestampmap({MPEGTS:a.get("MPEGTS"),LOCAL:a.get("LOCAL")}))},/=/):Ua(n,function(e,t){var n,a,i;"Region"===e&&(n=t,i=new ja,Ua(n,function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var a=new ja;if(a.percent("x",n[0]),a.percent("y",n[1]),!a.has("x")||!a.has("y"))break;i.set(e+"X",a.get("x")),i.set(e+"Y",a.get("y"));break;case"scroll":i.alt(e,t,["up"])}},/=/,/\s/),i.has("id")&&((a=new(r.vttjs.VTTRegion||r.window.VTTRegion)).width=i.get("width",100),a.lines=i.get("lines",3),a.regionAnchorX=i.get("regionanchorX",0),a.regionAnchorY=i.get("regionanchorY",100),a.viewportAnchorX=i.get("viewportanchorX",0),a.viewportAnchorY=i.get("viewportanchorY",100),a.scroll=i.get("scroll",""),r.onregion&&r.onregion(a),r.regionList.push({id:i.get("id"),region:a})))},/:/):t||(r.state="ID");continue;case"NOTE":t||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(t)){r.state="NOTE";break}if(!t)continue;if(r.cue=new(r.vttjs.VTTCue||r.window.VTTCue)(0,0,""),r.state="CUE",-1===t.indexOf("--\x3e")){r.cue.id=t;continue}case"CUE":try{!function(t,e,r){var n,a,s,i=t;function o(){var e=Va(t);if(null===e)throw new Ba(Ba.Errors.BadTimeStamp,"Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){t=t.replace(/^\s+/,"")}if(l(),e.startTime=o(),l(),"--\x3e"!==t.substr(0,3))throw new Ba(Ba.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.substr(3),l(),e.endTime=o(),l(),n=t,a=e,s=new ja,Ua(n,function(e,t){switch(e){case"region":for(var n=r.length-1;0<=n;n--)if(r[n].id===t){s.set(e,r[n].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),i=a[0];s.integer(e,i),s.percent(e,i)&&s.set("snapToLines",!1),s.alt(e,i,["auto"]),2===a.length&&s.alt("lineAlign",a[1],["start","middle","end"]);break;case"position":a=t.split(","),s.percent(e,a[0]),2===a.length&&s.alt("positionAlign",a[1],["start","middle","end"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),a.region=s.get("region",null),a.vertical=s.get("vertical",""),a.line=s.get("line","auto"),a.lineAlign=s.get("lineAlign","start"),a.snapToLines=s.get("snapToLines",!0),a.size=s.get("size",100),a.align=s.get("align","middle"),a.position=s.get("position",{start:0,left:0,middle:50,end:100,right:100},a.align),a.positionAlign=s.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},a.align)}(t,r.cue,r.regionList)}catch(e){r.reportOrThrowError(e),r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var o=-1!==t.indexOf("--\x3e");if(!t||o&&(s=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=t;continue;case"BADCUE":t||(r.state="ID");continue}}}catch(e){r.reportOrThrowError(e),"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Ba(Ba.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var Za=Ja,ei={"":1,lr:1,rl:1},ti={start:1,middle:1,end:1,left:1,right:1};function ni(e){return"string"==typeof e&&!!ti[e.toLowerCase()]&&e.toLowerCase()}function ai(e,t,n){this.hasBeenReset=!1;var a="",i=!1,r=e,s=t,o=n,l=null,c="",u=!0,h="auto",d="start",f=50,p="middle",m=50,g="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return a},set:function(e){a=""+e}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(e){i=!!e}},startTime:{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");r=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(e){var t,n="string"==typeof(t=e)&&!!ei[t.toLowerCase()]&&t.toLowerCase();if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");c=n,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return u},set:function(e){u=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return d},set:function(e){var t=ni(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");d=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return f},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");f=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(e){var t=ni(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");p=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){var t=ni(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}ai.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var ii=ai,ri={"":!0,up:!0};function si(e){return"number"==typeof e&&0<=e&&e<=100}function oi(){var t=100,n=3,a=0,i=100,r=0,s=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!si(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return n},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");n=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!si(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!si(e))throw new Error("RegionAnchorY must be between 0 and 100.");a=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!si(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!si(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){var t,n="string"==typeof(t=e)&&!!ri[t.toLowerCase()]&&t.toLowerCase();if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");o=n}}})}var li=Ct(function(e){var t=e.exports={WebVTT:Za,VTTCue:ii,VTTRegion:oi};y.vttjs=t,y.WebVTT=t.WebVTT;var n=t.VTTCue,a=t.VTTRegion,i=y.VTTCue,r=y.VTTRegion;t.shim=function(){y.VTTCue=n,y.VTTRegion=a},t.restore=function(){y.VTTCue=i,y.VTTRegion=r},y.VTTCue||t.shim()});li.WebVTT,li.VTTCue,li.VTTRegion;var ci=function(t){function n(n,e){var a;return void 0===n&&(n={}),void 0===e&&(e=function(){}),n.reportTouchActivity=!1,(a=t.call(this,null,n,e)||this).hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),Ra.names.forEach(function(e){var t=Ra[e];n&&n[t.getterName]&&(a[t.privateName]=n[t.getterName])}),a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===n["native"+e+"Tracks"]&&(a["featuresNative"+e+"Tracks"]=!1)}),!1===n.nativeCaptions||!1===n.nativeTextTracks?a.featuresNativeTextTracks=!1:!0!==n.nativeCaptions&&!0!==n.nativeTextTracks||(a.featuresNativeTextTracks=!0),a.featuresNativeTextTracks||a.emulateTextTracks(),a.autoRemoteTextTracks_=new Ra.text.ListClass,a.initTrackListeners(),n.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}Re(n,t);var e=n.prototype;return e.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},e.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},e.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},e.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(pe(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},e.onDurationChange=function(e){this.duration_=this.duration()},e.buffered=function(){return ft(0,0)},e.bufferedPercent=function(){return pt(this.buffered(),this.duration_)},e.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},e.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},e.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},e.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.dispose=function(){this.clearTracks(La.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},e.clearTracks=function(e){var i=this;(e=[].concat(e)).forEach(function(e){for(var t=i[e+"Tracks"]()||[],n=t.length;n--;){var a=t[n];"text"===e&&i.removeRemoteTextTrack(a),t.removeTrack(a)}})},e.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},e.reset=function(){},e.error=function(e){return void 0!==e&&(this.error_=new St(e),this.trigger("error")),this.error_},e.played=function(){return this.hasStarted_?ft(0,0):ft()},e.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.initTrackListeners=function(){var i=this;La.names.forEach(function(e){function t(){i.trigger(e+"trackchange")}var n=La[e],a=i[n.getterName]();a.addEventListener("removetrack",t),a.addEventListener("addtrack",t),i.on("dispose",function(){a.removeEventListener("removetrack",t),a.removeEventListener("addtrack",t)})})},e.addWebVttScript_=function(){var e=this;if(!y.WebVTT)if(h.body.contains(this.el())){if(!this.options_["vtt.js"]&&o(li)&&0<Object.keys(li).length)return void this.trigger("vttjsloaded");var t=h.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),y.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},e.emulateTextTracks=function(){function t(e){return a.addTrack(e.track)}function n(e){return a.removeTrack(e.track)}var e=this,a=this.textTracks(),i=this.remoteTextTracks();function r(){return e.trigger("texttrackchange")}function s(){r();for(var e=0;e<a.length;e++){var t=a[e];t.removeEventListener("cuechange",r),"showing"===t.mode&&t.addEventListener("cuechange",r)}}i.on("addtrack",t),i.on("removetrack",n),this.addWebVttScript_(),s(),a.addEventListener("change",s),a.addEventListener("addtrack",s),a.addEventListener("removetrack",s),this.on("dispose",function(){i.off("addtrack",t),i.off("removetrack",n),a.removeEventListener("change",s),a.removeEventListener("addtrack",s),a.removeEventListener("removetrack",s);for(var e=0;e<a.length;e++)a[e].removeEventListener("cuechange",r)})},e.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,a,i){void 0===i&&(i={});var r=e.textTracks();i.kind=t,n&&(i.label=n),a&&(i.language=a),i.tech=e;var s=new Ra.text.TrackClass(i);return r.addTrack(s),s}(this,e,t,n)},e.createRemoteTextTrack=function(e){var t=Me(e,{tech:this});return new Oa.remoteTextEl.TrackClass(t)},e.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var a=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(f.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(a),this.remoteTextTracks().addTrack(a.track),!0!==t&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(a.track)}),a},e.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},e.getVideoPlaybackQuality=function(){return{}},e.requestPictureInPicture=function(){var e=this.options_.Promise||y.Promise;if(e)return e.reject()},e.setPoster=function(){},e.playsinline=function(){},e.setPlaysinline=function(){},e.overrideNativeAudioTracks=function(){},e.overrideNativeVideoTracks=function(){},e.canPlayType=function(){return""},n.canPlayType=function(){return""},n.canPlaySource=function(e,t){return n.canPlayType(e.type)},n.isTech=function(e){return e.prototype instanceof n||e instanceof n||e===n},n.registerTech=function(e,t){if(n.techs_||(n.techs_={}),!n.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!n.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!n.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Ie(e),n.techs_[e]=t,n.techs_[ke(e)]=t,"Tech"!==e&&n.defaultTechOrder_.push(e),t},n.getTech=function(e){if(e)return n.techs_&&n.techs_[e]?n.techs_[e]:(e=Ie(e),y&&y.videojs&&y.videojs[e]?(f.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),y.videojs[e]):void 0)},n}(Le);Ra.names.forEach(function(e){var t=Ra[e];ci.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),ci.prototype.featuresVolumeControl=!0,ci.prototype.featuresMuteControl=!0,ci.prototype.featuresFullscreenResize=!1,ci.prototype.featuresPlaybackRate=!1,ci.prototype.featuresProgressEvents=!1,ci.prototype.featuresSourceset=!1,ci.prototype.featuresTimeupdateEvents=!1,ci.prototype.featuresNativeTextTracks=!1,ci.withSourceHandlers=function(i){i.registerSourceHandler=function(e,t){var n=(n=i.sourceHandlers)||(i.sourceHandlers=[]);void 0===t&&(t=n.length),n.splice(t,0,e)},i.canPlayType=function(e){for(var t,n=i.sourceHandlers||[],a=0;a<n.length;a++)if(t=n[a].canPlayType(e))return t;return""},i.selectSourceHandler=function(e,t){for(var n=i.sourceHandlers||[],a=0;a<n.length;a++)if(n[a].canHandleSource(e,t))return n[a];return null},i.canPlaySource=function(e,t){var n=i.selectSourceHandler(e,t);return n?n.canHandleSource(e,t):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(e){var t=i.selectSourceHandler(e,this.options_);t||(i.nativeSourceHandler?t=i.nativeSourceHandler:f.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),t!==i.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=t.handleSource(e,this,this.options_),this.one("dispose",this.disposeSourceHandler)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Le.registerComponent("Tech",ci),ci.registerTech("Tech",ci),ci.defaultTechOrder_=[];var ui={},hi={},di={};function fi(e,t,n){e.setTimeout(function(){return function n(a,e,i,r,s,o){void 0===a&&(a={}),void 0===e&&(e=[]),void 0===s&&(s=[]),void 0===o&&(o=!1);var t=e[0],l=e.slice(1);if("string"==typeof t)n(a,ui[t],i,r,s,o);else if(t){var c=function(e,t){var n=hi[e.id()],a=null;if(null==n)return a=t(e),hi[e.id()]=[[t,a]],a;for(var i=0;i<n.length;i++){var r=n[i],s=r[0],o=r[1];s===t&&(a=o)}return null===a&&(a=t(e),n.push([t,a])),a}(r,t);if(!c.setSource)return s.push(c),n(a,l,i,r,s,o);c.setSource(m({},a),function(e,t){return e?n(a,l,i,r,s,o):(s.push(c),void n(t,a.type===t.type?l:ui[t.type],i,r,s,o))})}else l.length?n(a,l,i,r,s,o):o?i(a,s):n(a,ui["*"],i,r,s,!0)}(t,ui[t.type],n,e)},1)}function pi(e,t,n,a){void 0===a&&(a=null);var i="call"+Ie(n),r=e.reduce(yi(i),a),s=r===di,o=s?null:t[n](r);return function(e,t,n,a){for(var i=e.length-1;0<=i;i--){var r=e[i];r[t]&&r[t](a,n)}}(e,n,o,s),o}var mi={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1,volume:1},gi={setCurrentTime:1,setVolume:1},vi={play:1,pause:1};function yi(n){return function(e,t){return e===di?di:t[n]?t[n](e):e}}function _i(e){void 0===e&&(e="");var t=Rt(e);return bi[t.toLowerCase()]||""}var bi={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};function Si(e){var t;return e.type||(t=_i(e.src))&&(e.type=t),e}var Ti,wi=(Re(Pi,Ti=Le),Pi);function Pi(e,t,n){var a=Me({createEl:!1},t),i=Ti.call(this,e,a,n)||this;if(t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var r=0,s=t.playerOptions.techOrder;r<s.length;r++){var o=Ie(s[r]),l=ci.getTech(o);if(o||(l=Le.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}return i}Le.registerComponent("MediaLoader",wi);var xi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).emitTapEvents(),n.enable(),n}Re(e,i);var t=e.prototype;return t.createEl=function(e,t,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={}),t=m({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&f.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=m({role:"button"},n),this.tabIndex_=t.tabIndex;var a=i.prototype.createEl.call(this,e,t,n);return this.createControlTextEl(a),a},t.dispose=function(){this.controlTextEl_=null,i.prototype.dispose.call(this)},t.createControlTextEl=function(e){return this.controlTextEl_=_("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,b(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)},t.buildCSSClass=function(){return"vjs-control vjs-button "+i.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},t.handleClick=function(e){},t.handleKeyDown=function(e){Dt.isEventKey(e,"Space")||Dt.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,e)},e}(Le);Le.registerComponent("ClickableComponent",xi);var Ci=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).update(),e.on("posterchange",pe(Be(n),n.update)),n}Re(e,a);var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update),a.prototype.dispose.call(this)},t.createEl=function(){return _("div",{className:"vjs-poster",tabIndex:-1})},t.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.setSrc=function(e){var t=e?'url("'+e+'")':"";this.el_.style.backgroundImage=t},t.handleClick=function(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Pt(this.player_.play()):this.player_.pause())},e}(xi);Le.registerComponent("PosterImage",Ci);var Di={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Ei(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Ai(e,t,n){try{e.style[t]=n}catch(e){return}}var ki=function(r){function e(n,e,t){var a=r.call(this,n,e,t)||this,i=pe(Be(a),a.updateDisplay);return n.on("loadstart",pe(Be(a),a.toggleDisplay)),n.on("texttrackchange",i),n.on("loadedmetadata",pe(Be(a),a.preselectTrack)),n.ready(pe(Be(a),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",i),n.on("playerresize",i),y.addEventListener("orientationchange",i),n.on("dispose",function(){return y.removeEventListener("orientationchange",i)});for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),a}Re(e,r);var t=e.prototype;return t.preselectTrack=function(){for(var e,t,n,a={captions:1,subtitles:1},i=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage,s=0;s<i.length;s++){var o=i[s];r&&r.enabled&&r.language&&r.language===o.language&&o.kind in a?n=o.kind!==r.kind&&n||o:r&&!r.enabled?t=e=n=null:o.default&&("descriptions"!==o.kind||e?o.kind in a&&!t&&(t=o):e=o)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){"function"==typeof y.WebVTT&&y.WebVTT.processCues(y,[],this.el_)},t.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],a=0;a<e.length;++a){var i=e[a];"showing"===i.mode&&n.push(i)}this.updateForTrack(n)}else{for(var r=null,s=null,o=e.length;o--;){var l=e[o];"showing"===l.mode&&("descriptions"===l.kind?r=l:s=l)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):r&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r))}},t.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,a=n.length;a--;){var i,r,s=n[a];s&&(i=s.displayState,t.color&&(i.firstChild.style.color=t.color),t.textOpacity&&Ai(i.firstChild,"color",Ei(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(i.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Ai(i.firstChild,"backgroundColor",Ei(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Ai(i,"backgroundColor",Ei(t.windowColor,t.windowOpacity)):i.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?i.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t.edgeStyle?i.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t.edgeStyle?i.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t.edgeStyle&&(i.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t.fontPercent&&1!==t.fontPercent&&(r=y.parseFloat(i.style.fontSize),i.style.fontSize=r*t.fontPercent+"px",i.style.height="auto",i.style.top="auto",i.style.bottom="2px"),t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?i.firstChild.style.fontVariant="small-caps":i.firstChild.style.fontFamily=Di[t.fontFamily]))}},t.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof y.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],n=0;n<e.length;++n)for(var a=e[n],i=0;i<a.activeCues.length;++i)t.push(a.activeCues[i]);y.WebVTT.processCues(y,t,this.el_);for(var r=0;r<e.length;++r){for(var s=e[r],o=0;o<s.activeCues.length;++o){var l=s.activeCues[o].displayState;w(l,"vjs-text-track-cue"),w(l,"vjs-text-track-cue-"+(s.language?s.language:r))}this.player_.textTrackSettings&&this.updateDisplayState(s)}}},e}(Le);Le.registerComponent("TextTrackDisplay",ki);var Ii,Mi=(Re($i,Ii=Le),$i.prototype.createEl=function(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=_("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[t])}),a=Ii.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return a.appendChild(n),a},$i);function $i(){return Ii.apply(this,arguments)||this}Le.registerComponent("LoadingSpinner",Mi);var Li=function(t){function e(){return t.apply(this,arguments)||this}Re(e,t);var n=e.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),t=m({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),n=m({type:"button"},n);var a=Le.prototype.createEl.call(this,"button",t,n);return this.createControlTextEl(a),a},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return f.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),Le.prototype.addChild.call(this,e,t)},n.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(e){Dt.isEventKey(e,"Space")||Dt.isEventKey(e,"Enter")?e.stopPropagation():t.prototype.handleKeyDown.call(this,e)},e}(xi);Le.registerComponent("Button",Li);var Oi=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return Pt(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());var n=this.player_.getChild("controlBar"),a=n&&n.getChild("playToggle");function i(){return a.focus()}a?wt(t)?t.then(i,function(){}):this.setTimeout(i,1):this.player_.tech(!0).focus()},t.handleKeyDown=function(e){this.mouseused_=!1,a.prototype.handleKeyDown.call(this,e)},t.handleMouseDown=function(e){this.mouseused_=!0},e}(Li);Oi.prototype.controlText_="Play Video",Le.registerComponent("BigPlayButton",Oi);var Ri=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).controlText(t&&t.controlText||n.localize("Close")),n}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(e){Dt.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,e)},e}(Li);Le.registerComponent("CloseButton",Ri);var Ni=function(a){function e(e,t){var n;return void 0===t&&(t={}),n=a.call(this,e,t)||this,t.replay=void 0===t.replay||t.replay,n.on(e,"play",n.handlePlay),n.on(e,"pause",n.handlePause),t.replay&&n.on(e,"ended",n.handleEnded),n}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(Li);function Fi(e,t){e=e<0?0:e;var n=Math.floor(e%60),a=Math.floor(e/60%60),i=Math.floor(e/3600),r=Math.floor(t/60%60),s=Math.floor(t/3600);return!isNaN(e)&&e!==1/0||(i=a=n="-"),(i=0<i||0<s?i+":":"")+(a=((i||10<=r)&&a<10?"0"+a:a)+":")+(n<10?"0"+n:n)}Ni.prototype.controlText_="Play",Le.registerComponent("PlayToggle",Ni);var Bi=Fi;function Vi(e,t){return void 0===t&&(t=e),Bi(e,t)}var ji=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).throttledUpdateContent=me(pe(Be(n),n.updateContent),30),n.on(e,"timeupdate",n.throttledUpdateContent),n}Re(e,a);var t=e.prototype;return t.createEl=function(){var e=this.buildCSSClass(),t=a.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"Ã </span>"});return this.contentEl_=_("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),this.updateTextNode_(),t.appendChild(this.contentEl_),t},t.dispose=function(){this.contentEl_=null,this.textNode_=null,a.prototype.dispose.call(this)},t.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=h.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},t.formatTime_=function(e){return Vi(e)},t.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},t.updateContent=function(e){},e}(Le);ji.prototype.labelText_="Time",ji.prototype.controlText_="Time",Le.registerComponent("TimeDisplay",ji);var Ui=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).on(e,"ended",n.handleEnded),n}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},t.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},e}(ji);Ui.prototype.labelText_="Current Time",Ui.prototype.controlText_="Current Time",Le.registerComponent("CurrentTimeDisplay",Ui);var Hi=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).on(e,"durationchange",n.updateContent),n.on(e,"loadstart",n.updateContent),n.on(e,"loadedmetadata",n.throttledUpdateContent),n}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(e){var t=this.player_.duration();this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},e}(ji);Hi.prototype.labelText_="Duration",Hi.prototype.controlText_="Duration",Le.registerComponent("DurationDisplay",Hi);var Gi,Yi=(Re(qi,Gi=Le),qi.prototype.createEl=function(){return Gi.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},qi);function qi(){return Gi.apply(this,arguments)||this}Le.registerComponent("TimeDivider",Yi);var zi=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).on(e,"durationchange",n.throttledUpdateContent),n.on(e,"ended",n.handleEnded),n}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var e=a.prototype.createEl.call(this);return e.insertBefore(_("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},t.updateContent=function(e){"number"==typeof this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},t.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},e}(ji);zi.prototype.labelText_="Remaining Time",zi.prototype.controlText_="Remaining Time",Le.registerComponent("RemainingTimeDisplay",zi);var Wi=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}Re(e,a);var t=e.prototype;return t.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=_("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"Ã </span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},t.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},t.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},e}(Le);Le.registerComponent("LiveDisplay",Wi);var Ki=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatus),n}Re(e,a);var t=e.prototype;return t.createEl=function(){var e=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=_("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},t.updateLiveEdgeStatus=function(e){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,a.prototype.dispose.call(this)},e}(Li);Ki.prototype.controlText_="Seek to live, currently playing live",Le.registerComponent("SeekToLive",Ki);var Xi=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}Re(e,a);var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){var e;this.enabled()&&(e=this.bar.el_.ownerDocument,this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1)},t.createEl=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),t.className=t.className+" vjs-slider",t=m({tabIndex:0},t),n=m({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),a.prototype.createEl.call(this,e,t,n)},t.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||at||e.preventDefault(),I(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.handleMouseMove=function(e){},t.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;M(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%",a=t.el().style,i=this.vertical()?"height":"width";return a[i]!==n&&(a[i]=n),e}}},t.calculateDistance=function(e){var t=O(this.el_,e);return this.vertical()?t.y:t.x},t.handleKeyDown=function(e){Dt.isEventKey(e,"Left")||Dt.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):Dt.isEventKey(e,"Right")||Dt.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):a.prototype.handleKeyDown.call(this,e)},t.handleClick=function(e){e.stopPropagation(),e.preventDefault()},t.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(Le);Le.registerComponent("Slider",Xi);var Qi=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).partEls_=[],n.on(e,"progress",n.update),n}Re(e,a);var t=e.prototype;return t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})},t.dispose=function(){this.partEls_=null,a.prototype.dispose.call(this)},t.update=function(e){function t(e,t,n){var a=100*(1<=(a=e/t||0)?1:a);return n&&(a=a.toFixed(2)),a+"%"}var n=this.player_.liveTracker,a=this.player_.buffered(),i=n&&n.isLive()?n.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),s=this.partEls_,o=this.$(".vjs-control-text-loaded-percentage");this.el_.style.width=t(r,i),b(o,t(r,i,!0));for(var l=0;l<a.length;l++){var c=a.start(l),u=a.end(l),h=s[l];h||(h=this.el_.appendChild(_()),s[l]=h),h.style.left=t(c,r),h.style.width=t(u-c,r)}for(var d=s.length;d>a.length;d--)this.el_.removeChild(s[d-1]);s.length=a.length},e}(Le);Le.registerComponent("LoadProgressBar",Qi);var Ji=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).update=me(pe(Be(n),n.update),30),n}Re(e,a);var t=e.prototype;return t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(e,t,n){var a,i,r,s=$(this.el_),o=$(this.player_.el()),l=e.width*t;o&&s&&(a=e.left-o.left+l,i=e.width-l+(o.right-e.right),a<(r=s.width/2)?r+=r-a:i<r&&(r=i),r<0?r=0:r>s.width&&(r=s.width),this.el_.style.right="-"+r+"px",this.write(n))},t.write=function(e){b(this.el_,e)},t.updateTime=function(i,r,s,o){var l=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e,t,n,a=l.player_.duration();n=l.player_.liveTracker&&l.player_.liveTracker.isLive()?((t=(e=l.player_.liveTracker.liveWindow())-r*e)<1?"":"-")+Vi(t,e):Vi(s,a),l.update(i,r,n),o&&o()})},e}(Le);Le.registerComponent("TimeTooltip",Ji);var Zi=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).update=me(pe(Be(n),n.update),30),n}Re(e,a);var t=e.prototype;return t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(e,t){var n,a=this.getChild("timeTooltip");a&&(n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),a.updateTime(e,t,n))},e}(Le);Zi.prototype.options_={children:[]},Xe||Je||Zi.prototype.options_.children.push("timeTooltip"),Le.registerComponent("PlayProgressBar",Zi);var er=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).update=me(pe(Be(n),n.update),30),n}Re(e,a);var t=e.prototype;return t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(e,t){var n=this,a=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,a,function(){n.el_.style.left=e.width*t+"px"})},e}(Le);er.prototype.options_={children:["timeTooltip"]},Le.registerComponent("MouseTimeDisplay",er);var tr=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).setEventHandlers_(),n}Re(e,a);var t=e.prototype;return t.setEventHandlers_=function(){this.update=me(pe(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.on(this.player_,"durationchange",this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in h&&"visibilityState"in h&&this.on(h,"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(e){h.hidden?this.disableInterval_(e):(this.enableInterval_(),this.requestAnimationFrame(this.update))},t.enableInterval_=function(){var e=this;this.clearInterval(this.updateInterval),this.updateInterval=this.setInterval(function(){e.requestAnimationFrame(e.update)},30)},t.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&"ended"!==e.type||this.clearInterval(this.updateInterval)},t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update_=function(e,t){var n=this.player_.liveTracker,a=this.player_.duration();n&&n.isLive()&&(a=this.player_.liveTracker.liveCurrentTime()),this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Vi(e,a),Vi(a,a)],"{1} of {2}")),this.bar&&this.bar.update($(this.el_),t)},t.update=function(e){if(null!==this.el().offsetParent){var t=a.prototype.update.call(this);return this.update_(this.getCurrentTime_(),t),t}},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.handleEnded=function(e){this.update_(this.player_.duration(),1)},t.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),1<=e?1:e||0},t.handleMouseDown=function(e){j(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,e))},t.handleMouseMove=function(e){if(j(e)){var t,n=this.calculateDistance(e),a=this.player_.liveTracker;if(a&&a.isLive()){var i=a.seekableStart(),r=a.liveCurrentTime();if(r<=(t=i+n*a.liveWindow())&&(t=r),t<=i&&(t=i+.1),t===1/0)return}else(t=n*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},t.enable=function(){a.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},t.disable=function(){a.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},t.handleMouseUp=function(e){a.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Pt(this.player_.play())},t.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(e){var t;Dt.isEventKey(e,"Space")||Dt.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.handleAction(e)):Dt.isEventKey(e,"Home")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(0)):Dt.isEventKey(e,"End")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.duration())):/^[0-9]$/.test(Dt(e))?(e.preventDefault(),e.stopPropagation(),t=10*(Dt.codes[Dt(e)]-Dt.codes[0])/100,this.player_.currentTime(this.player_.duration()*t)):Dt.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):Dt.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):a.prototype.handleKeyDown.call(this,e)},e}(Xi);tr.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Xe||Je||tr.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Le.registerComponent("SeekBar",tr);var nr=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).handleMouseMove=me(pe(Be(n),n.handleMouseMove),30),n.throttledHandleMouseSeek=me(pe(Be(n),n.handleMouseSeek),30),n.enable(),n}Re(e,a);var t=e.prototype;return t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(e){var t,n,a,i,r=this.getChild("seekBar");r&&(t=r.getChild("mouseTimeDisplay"),a=$(n=r.el()),1<(i=O(n,e).x)?i=1:i<0&&(i=0),t&&t.update(a,i))},t.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},t.enabled=function(){return this.enabled_},t.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},t.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.handleMouseUp=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},e}(Le);nr.prototype.options_={children:["seekBar"]},Le.registerComponent("ProgressControl",nr);var ar=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).on(e,["enterpictureinpicture","leavepictureinpicture"],n.handlePictureInPictureChange),h.pictureInPictureEnabled||n.disable(),n}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)},t.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")},t.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Li);ar.prototype.controlText_="Picture-in-Picture",Le.registerComponent("PictureInPictureToggle",ar);var ir=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).on(e,"fullscreenchange",n.handleFullscreenChange),!1===h[e.fsApi_.fullscreenEnabled]&&n.disable(),n}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Li);ir.prototype.controlText_="Fullscreen",Le.registerComponent("FullscreenToggle",ir);var rr,sr=(Re(or,rr=Le),or.prototype.createEl=function(){return rr.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},or);function or(){return rr.apply(this,arguments)||this}Le.registerComponent("VolumeLevel",sr);var lr=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).on("slideractive",n.updateLastVolume_),n.on(e,"volumechange",n.updateARIAAttributes),e.ready(function(){return n.updateARIAAttributes()}),n}Re(e,a);var t=e.prototype;return t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(e){j(e)&&a.prototype.handleMouseDown.call(this,e)},t.handleMouseMove=function(e){j(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},e}(Xi);lr.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},lr.prototype.playerEvent="volumechange",Le.registerComponent("VolumeBar",lr);var cr=function(r){function e(e,t){var n,a,i;return void 0===t&&(t={}),t.vertical=t.vertical||!1,void 0!==t.volumeBar&&!o(t.volumeBar)||(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),a=Be(n=r.call(this,e,t)||this),(i=e).tech_&&!i.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(i,"loadstart",function(){i.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")}),n.throttledHandleMouseMove=me(pe(Be(n),n.handleMouseMove),30),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}Re(e,r);var t=e.prototype;return t.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),r.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},t.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},e}(Le);cr.prototype.options_={children:["volumeBar"]},Le.registerComponent("VolumeControl",cr);var ur=function(r){function e(e,t){var n,a,i;return a=Be(n=r.call(this,e,t)||this),(i=e).tech_&&!i.tech_.featuresMuteControl&&a.addClass("vjs-hidden"),a.on(i,"loadstart",function(){i.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")}),n.on(e,["loadstart","volumechange"],n.update),n}Re(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(e){var t,n=this.player_.volume(),a=this.player_.lastVolume_();0===n?(t=a<.1?.1:a,this.player_.volume(t),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},t.update=function(e){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var e=this.player_.volume(),t=3;Xe&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)P(this.el_,"vjs-vol-"+n);w(this.el_,"vjs-vol-"+t)},t.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},e}(Li);ur.prototype.controlText_="Mute",Le.registerComponent("MuteToggle",ur);var hr=function(a){function e(e,t){var n;return void 0===t&&(t={}),void 0!==t.inline?t.inline=t.inline:t.inline=!0,void 0!==t.volumeControl&&!o(t.volumeControl)||(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),(n=a.call(this,e,t)||this).on(e,["loadstart"],n.volumePanelState_),n.on(n.muteToggle,"keyup",n.handleKeyPress),n.on(n.volumeControl,"keyup",n.handleVolumeControlKeyUp),n.on("keydown",n.handleKeyPress),n.on("mouseover",n.handleMouseOver),n.on("mouseout",n.handleMouseOut),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}Re(e,a);var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},t.dispose=function(){this.handleMouseOut(),a.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(e){Dt.isEventKey(e,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(e){this.addClass("vjs-hover"),ce(h,"keyup",pe(this,this.handleKeyPress))},t.handleMouseOut=function(e){this.removeClass("vjs-hover"),ue(h,"keyup",pe(this,this.handleKeyPress))},t.handleKeyPress=function(e){Dt.isEventKey(e,"Esc")&&this.handleMouseOut()},e}(Le);hr.prototype.options_={children:["muteToggle","volumeControl"]},Le.registerComponent("VolumePanel",hr);var dr=function(a){function e(e,t){var n=a.call(this,e,t)||this;return t&&(n.menuButton_=t.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyDown),n.boundHandleBlur_=pe(Be(n),n.handleBlur),n.boundHandleTapClick_=pe(Be(n),n.handleTapClick),n}Re(e,a);var t=e.prototype;return t.addEventListenerForItem=function(e){e instanceof Le&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(e){e instanceof Le&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),a.prototype.removeChild.call(this,e)},t.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},t.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=_(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),ce(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,a.prototype.dispose.call(this)},t.handleBlur=function(e){var t,n=e.relatedTarget||h.activeElement;this.children().some(function(e){return e.el()===n})||(t=this.menuButton_)&&t.buttonPressed_&&n!==t.el().firstChild&&t.unpressButton()},t.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var e=this.children();if(!Array.isArray(e))return;var n=e.filter(function(e){return e.el()===t.target})[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},t.handleKeyDown=function(e){Dt.isEventKey(e,"Left")||Dt.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Dt.isEventKey(e,"Right")||Dt.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},t.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},e}(Le);Le.registerComponent("Menu",dr);var fr=function(i){function e(e,t){var n;void 0===t&&(t={}),(n=i.call(this,e,t)||this).menuButton_=new Li(e,t),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var a=Li.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+a,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"keydown",n.handleKeyDown),n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover"),n.menu.show(),ce(h,"keyup",pe(Be(n),n.handleMenuKeyUp))}),n.on("mouseleave",n.handleMouseLeave),n.on("keydown",n.handleSubmenuKeyDown),n}Re(e,i);var t=e.prototype;return t.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.createMenu=function(){var e,t,n=new dr(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title&&(e=_("li",{className:"vjs-menu-title",innerHTML:Ie(this.options_.title),tabIndex:-1}),this.hideThreshold_+=1,t=new Le(this.player_,{el:e}),n.addItem(t)),this.items=this.createItems(),this.items)for(var a=0;a<this.items.length;a++)n.addItem(this.items[a]);return n},t.createItems=function(){},t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Li.prototype.buildCSSClass()+" "+i.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+i.prototype.buildCSSClass.call(this)},t.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},t.dispose=function(){this.handleMouseLeave(),i.prototype.dispose.call(this)},t.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(e){this.removeClass("vjs-hover"),ue(h,"keyup",pe(this,this.handleMenuKeyUp))},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(e){Dt.isEventKey(e,"Esc")||Dt.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Dt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Dt.isEventKey(e,"Up")||Dt.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(e){(Dt.isEventKey(e,"Esc")||Dt.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},t.handleSubmenuKeyDown=function(e){(Dt.isEventKey(e,"Esc")||Dt.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Dt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Xe&&v())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(Le);Le.registerComponent("MenuButton",fr);var pr,mr=(Re(gr,pr=fr),gr);function gr(e,t){var n,a=t.tracks;if((n=pr.call(this,e,t)||this).items.length<=1&&n.hide(),!a)return Be(n);var i=pe(Be(n),n.update);return a.addEventListener("removetrack",i),a.addEventListener("addtrack",i),n.player_.on("ready",i),n.player_.on("dispose",function(){a.removeEventListener("removetrack",i),a.removeEventListener("addtrack",i)}),n}Le.registerComponent("TrackButton",mr);var vr=["Tab","Esc","Up","Down","Right","Left"],yr=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).selectable=t.selectable,n.isSelected_=t.selected||!1,n.multiSelectable=t.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}Re(e,a);var t=e.prototype;return t.createEl=function(e,t,n){return this.nonIconControl=!0,a.prototype.createEl.call(this,"li",m({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},t),n)},t.handleKeyDown=function(t){vr.some(function(e){return Dt.isEventKey(t,e)})||a.prototype.handleKeyDown.call(this,t)},t.handleClick=function(e){this.selected(!0)},t.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(xi);Le.registerComponent("MenuItem",yr);var _r=function(l){function e(e,t){var a,n,i=t.track,r=e.textTracks();function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.handleTracksChange.apply(Be(a),t)}function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.handleSelectedLanguageChange.apply(Be(a),t)}return t.label=i.label||i.language||"Unknown",t.selected="showing"===i.mode,(a=l.call(this,e,t)||this).track=i,a.kinds=(t.kinds||[t.kind||a.track.kind]).filter(Boolean),e.on(["loadstart","texttrackchange"],s),r.addEventListener("change",s),r.addEventListener("selectedlanguagechange",o),a.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),r.removeEventListener("change",s),r.removeEventListener("selectedlanguagechange",o)}),void 0===r.onchange&&a.on(["tap","click"],function(){if("object"!=typeof y.Event)try{n=new y.Event("change")}catch(e){}n||(n=h.createEvent("Event")).initEvent("change",!0,!0),r.dispatchEvent(n)}),a.handleTracksChange(),a}Re(e,l);var t=e.prototype;return t.handleClick=function(e){var t=this.track,n=this.player_.textTracks();if(l.prototype.handleClick.call(this,e),n)for(var a=0;a<n.length;a++){var i=n[a];-1!==this.kinds.indexOf(i.kind)&&(i===t?"showing"!==i.mode&&(i.mode="showing"):"disabled"!==i.mode&&(i.mode="disabled"))}},t.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},t.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,l.prototype.dispose.call(this)},e}(yr);Le.registerComponent("TextTrackMenuItem",_r);var br=function(n){function e(e,t){return t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,n.call(this,e,t)||this}Re(e,n);var t=e.prototype;return t.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,a=0,i=t.length;a<i;a++){var r=t[a];if(-1<this.options_.kinds.indexOf(r.kind)&&"showing"===r.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},t.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,a=0,i=t.length;a<i;a++){var r=t[a];if(-1<["captions","descriptions","subtitles"].indexOf(r.kind)&&"showing"===r.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(_r);Le.registerComponent("OffTextTrackMenuItem",br);var Sr,Tr=(Re(wr,Sr=mr),wr.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=_r),this.label_&&(n=this.label_+" off"),e.push(new br(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var a=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var i=0;i<a.length;i++){var r,s=a[i];-1<this.kinds_.indexOf(s.kind)&&((r=new t(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1})).addClass("vjs-"+s.kind+"-menu-item"),e.push(r))}return e},wr);function wr(e,t){return void 0===t&&(t={}),t.tracks=e.textTracks(),Sr.call(this,e,t)||this}Le.registerComponent("TextTrackButton",Tr);var Pr=function(s){function e(e,t){var n,a=t.track,i=t.cue,r=e.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=i.text,t.selected=i.startTime<=r&&r<i.endTime,(n=s.call(this,e,t)||this).track=a,n.cue=i,a.addEventListener("cuechange",pe(Be(n),n.update)),n}Re(e,s);var t=e.prototype;return t.handleClick=function(e){s.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},e}(yr);Le.registerComponent("ChaptersTrackMenuItem",Pr);var xr=function(a){function e(e,t,n){return a.call(this,e,t,n)||this}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)},t.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),a.prototype.update.call(this)},t.setTrack=function(e){var t,n;this.track_!==e&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&((t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t.removeEventListener("load",this.updateHandler_),this.track_=null),this.track_=e,this.track_&&(this.track_.mode="hidden",(n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&n.addEventListener("load",this.updateHandler_)))},t.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var n=e[t];if(n.kind===this.kind_)return n}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ie(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),a.prototype.createMenu.call(this)},t.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,a=t.length;n<a;n++){var i=t[n],r=new Pr(this.player_,{track:this.track_,cue:i});e.push(r)}return e},e}(Tr);xr.prototype.kind_="chapters",xr.prototype.controlText_="Chapters",Le.registerComponent("ChaptersButton",xr);var Cr=function(s){function e(e,t,n){var a=s.call(this,e,t,n)||this,i=e.textTracks(),r=pe(Be(a),a.handleTracksChange);return i.addEventListener("change",r),a.on("dispose",function(){i.removeEventListener("change",r)}),a}Re(e,s);var t=e.prototype;return t.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,a=0,i=t.length;a<i;a++){var r=t[a];if(r.kind!==this.kind_&&"showing"===r.mode){n=!0;break}}n?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildWrapperCSSClass.call(this)},e}(Tr);Cr.prototype.kind_="descriptions",Cr.prototype.controlText_="Descriptions",Le.registerComponent("DescriptionsButton",Cr);var Dr=function(a){function e(e,t,n){return a.call(this,e,t,n)||this}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)},e}(Tr);Dr.prototype.kind_="subtitles",Dr.prototype.controlText_="Subtitles",Le.registerComponent("SubtitlesButton",Dr);var Er,Ar=(Re(kr,Er=_r),kr.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},kr);function kr(e,t){var n;return t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(n=Er.call(this,e,t)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+t.kind+" settings dialog"),n}Le.registerComponent("CaptionSettingsMenuItem",Ar);var Ir=function(a){function e(e,t,n){return a.call(this,e,t,n)||this}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ar(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,e)},e}(Tr);Ir.prototype.kind_="captions",Ir.prototype.controlText_="Captions",Le.registerComponent("CaptionsButton",Ir);var Mr,$r=(Re(Lr,Mr=_r),Lr.prototype.createEl=function(e,t,n){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),a+="</span>",Mr.prototype.createEl.call(this,e,m({innerHTML:a},t),n)},Lr);function Lr(){return Mr.apply(this,arguments)||this}Le.registerComponent("SubsCapsMenuItem",$r);var Or=function(a){function e(e,t){var n;return void 0===t&&(t={}),(n=a.call(this,e,t)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions"),n.menuButton_.controlText(Ie(n.label_)),n}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ar(this.player_,{kind:this.label_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,e,$r)},e}(Tr);Or.prototype.kinds_=["captions","subtitles"],Or.prototype.controlText_="Subtitles",Le.registerComponent("SubsCapsButton",Or);var Rr=function(s){function e(e,t){var a,n=t.track,i=e.audioTracks();function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.handleTracksChange.apply(Be(a),t)}return t.label=n.label||n.language||"Unknown",t.selected=n.enabled,(a=s.call(this,e,t)||this).track=n,a.addClass("vjs-"+n.kind+"-menu-item"),i.addEventListener("change",r),a.on("dispose",function(){i.removeEventListener("change",r)}),a}Re(e,s);var t=e.prototype;return t.createEl=function(e,t,n){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),a+="</span>",s.prototype.createEl.call(this,e,m({innerHTML:a},t),n)},t.handleClick=function(e){var t=this.player_.audioTracks();s.prototype.handleClick.call(this,e);for(var n=0;n<t.length;n++){var a=t[n];a.enabled=a===this.track}},t.handleTracksChange=function(e){this.selected(this.track.enabled)},e}(yr);Le.registerComponent("AudioTrackMenuItem",Rr);var Nr=function(n){function e(e,t){return void 0===t&&(t={}),t.tracks=e.audioTracks(),n.call(this,e,t)||this}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var a=t[n];e.push(new Rr(this.player_,{track:a,selectable:!0,multiSelectable:!1}))}return e},e}(mr);Nr.prototype.controlText_="Audio Track",Le.registerComponent("AudioTrackButton",Nr);var Fr=function(r){function e(e,t){var n,a=t.rate,i=parseFloat(a,10);return t.label=a,t.selected=1===i,t.selectable=!0,t.multiSelectable=!1,(n=r.call(this,e,t)||this).label=a,n.rate=i,n.on(e,"ratechange",n.update),n}Re(e,r);var t=e.prototype;return t.handleClick=function(e){r.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(e){this.selected(this.player().playbackRate()===this.rate)},e}(yr);Fr.prototype.contentElType="button",Le.registerComponent("PlaybackRateMenuItem",Fr);var Br=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).updateVisibility(),n.updateLabel(),n.on(e,"loadstart",n.updateVisibility),n.on(e,"ratechange",n.updateLabel),n}Re(e,a);var t=e.prototype;return t.createEl=function(){var e=a.prototype.createEl.call(this);return this.labelEl_=_("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},t.dispose=function(){this.labelEl_=null,a.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)},t.createMenu=function(){var e=new dr(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;0<=n;n--)e.addChild(new Fr(this.player(),{rate:t[n]+"x"}));return e},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),a=n[0],i=0;i<n.length;i++)if(n[i]>t){a=n[i];break}this.player().playbackRate(a)},t.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},t.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(fr);Br.prototype.controlText_="Playback Rate",Le.registerComponent("PlaybackRateMenuButton",Br);var Vr=function(e){function t(){return e.apply(this,arguments)||this}Re(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Le);Le.registerComponent("Spacer",Vr);var jr=function(t){function e(){return t.apply(this,arguments)||this}Re(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML="Ã ",e},e}(Vr);Le.registerComponent("CustomControlSpacer",jr);var Ur,Hr=(Re(Gr,Ur=Le),Gr.prototype.createEl=function(){return Ur.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},Gr);function Gr(){return Ur.apply(this,arguments)||this}Hr.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in h&&Hr.prototype.options_.children.splice(Hr.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Le.registerComponent("ControlBar",Hr);var Yr=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).on(e,"error",n.open),n}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},t.content=function(){var e=this.player().error();return e?this.localize(e.message):""},e}(At);Yr.prototype.options_=Me(At.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Le.registerComponent("ErrorDisplay",Yr);var qr="vjs-text-track-settings",zr=["#000","Black"],Wr=["#00F","Blue"],Kr=["#0FF","Cyan"],Xr=["#0F0","Green"],Qr=["#F0F","Magenta"],Jr=["#F00","Red"],Zr=["#FFF","White"],es=["#FF0","Yellow"],ts=["1","Opaque"],ns=["0.5","Semi-Transparent"],as=["0","Transparent"],is={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[zr,Zr,Jr,Xr,Wr,es,Qr,Kr]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ts,ns,as]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Zr,zr,Jr,Xr,Wr,es,Qr,Kr]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ts,ns]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[as,ns,ts]}};function rs(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}is.windowColor.options=is.backgroundColor.options;var ss=function(a){function e(e,t){var n;return t.temporary=!1,(n=a.call(this,e,t)||this).updateDisplay=pe(Be(n),n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=_("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===t.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),r(is,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}Re(e,a);var t=e.prototype;return t.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},t.createElSelect_=function(e,t,n){var a=this;void 0===t&&(t=""),void 0===n&&(n="label");var i=is[e],r=i.id.replace("%s",this.id_),s=[t,r].join(" ").trim();return["<"+n+' id="'+r+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(i.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(i.options.map(function(e){var t=r+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',a.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return _("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return _("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var e=this.localize("restore all settings to the default values");return _("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var s,e,o=this;return void 0===(e={})&&(e=0),i(s=is).reduce(function(e,t){return n=e,a=s[t],i=t,void 0!==(r=function(e,t){return rs(e.options[e.options.selectedIndex].value,t)}(o.$(a.selector),a.parser))&&(n[i]=r),n;var n,a,i,r},e)},t.setValues=function(n){var a=this;r(is,function(e,t){!function(e,t,n){if(t)for(var a=0;a<e.options.length;a++)if(rs(e.options[a].value,n)===t){e.selectedIndex=a;break}}(a.$(e.selector),n[t],e.parser)})},t.setDefaults=function(){var n=this;r(is,function(e){var t=e.hasOwnProperty("default")?e.default:0;n.$(e.selector).selectedIndex=t})},t.restoreSettings=function(){var e;try{e=JSON.parse(y.localStorage.getItem(qr))}catch(e){f.warn(e)}e&&this.setValues(e)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?y.localStorage.setItem(qr,JSON.stringify(e)):y.localStorage.removeItem(qr)}catch(e){f.warn(e)}}},t.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},e}(At);Le.registerComponent("TextTrackSettings",ss);var os=function(c){function e(e,t){var n,a=t.ResizeObserver||y.ResizeObserver;null===t.ResizeObserver&&(a=!1);var i,r,s,o=Me({createEl:!a,reportTouchActivity:!1},t);return(n=c.call(this,e,o)||this).ResizeObserver=t.ResizeObserver||y.ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=(i=function(){n.resizeHandler()},void 0===(r=Be(n))&&(r=y),l.cancel=function(){r.clearTimeout(s),s=null},l),a?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(e.el())):(n.loadListener_=function(){var e,t;n.el_&&n.el_.contentWindow&&(e=n.debouncedHandler_,t=n.unloadListener_=function(){ue(this,"resize",e),ue(this,"unload",t),t=null},ce(n.el_.contentWindow,"unload",t),ce(n.el_.contentWindow,"resize",e))},n.one("load",n.loadListener_)),n;function l(){var e=this,t=arguments,n=function(){n=s=null,i.apply(e,t)};r.clearTimeout(s),s=r.setTimeout(n,100)}}Re(e,c);var t=e.prototype;return t.createEl=function(){return c.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},t.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,c.prototype.dispose.call(this)},e}(Le);Le.registerComponent("ResizeManager",os);var ls=function(i){function e(e,t){var n,a=Me({createEl:!1},t);return(n=i.call(this,e,a)||this).reset_(),n.on(n.player_,"durationchange",n.handleDurationchange),rt&&"hidden"in h&&"visibilityState"in h&&n.on(h,"visibilitychange",n.handleVisibilityChange),n}Re(e,i);var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(h.hidden?this.stopTracking():this.startTracking())},t.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var e=this.liveCurrentTime(),t=this.player_.currentTime(),n=2*this.seekableIncrement_+.07;return e!==1/0&&t<=e-n},t.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var e,t,n,a,i=this.player_.seekable();i&&i.length&&((e=this.seekableEnd())!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrementList_=this.seekableIncrementList_.slice(-11),this.seekableIncrementList_.push(Math.abs(e-this.lastSeekEnd_)),3<this.seekableIncrementList_.length&&(this.seekableIncrement_=(t=this.seekableIncrementList_,n=Math.floor(t.length/2),a=[].concat(t).sort(function(e,t){return e-t}),t.length%2!=0?a[n]:(a[n-1]+a[n])/2))),this.pastSeekEnd_=0,this.lastSeekEnd_=e,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange")))},t.handleDurationchange=function(){this.player_.duration()===1/0?this.startTracking():this.stopTracking()},t.startTracking=function(){var e=this;this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.timeupdateSeen_||(this.one(this.player_,"play",this.handlePlay),this.handleTimeupdate=function(){e.timeupdateSeen_=!0,e.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},t.reset_=function(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.seekableIncrementList_=[],this.off(this.player_,"play",this.trackLive_),this.off(this.player_,"pause",this.trackLive_),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},t.stopTracking=function(){this.isTracking()&&this.reset_()},t.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},t.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},t.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){return this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return"number"==typeof this.trackingInterval_},t.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},t.dispose=function(){this.stopTracking(),i.prototype.dispose.call(this)},e}(Le);function cs(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),1;var n=e.$$("source"),a=[],i="";if(n.length){for(var r=0;r<n.length;r++){var s=n[r].src;s&&-1===a.indexOf(s)&&a.push(s)}return a.length&&(1===a.length&&(i=a[0]),e.triggerSourceset(i),1)}}function us(e,t){for(var n={},a=0;a<e.length&&!((n=Object.getOwnPropertyDescriptor(e[a],t))&&n.set&&n.get);a++);return n.enumerable=!0,n.configurable=!0,n}function hs(r){var t,e,s=r.el();function n(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=i.apply(s,t);return cs(r),a}}s.resetSourceWatch_||(t={},e=us([r.el(),y.HTMLMediaElement.prototype,y.Element.prototype,fs],"innerHTML"),["append","appendChild","insertAdjacentHTML"].forEach(function(e){s[e]&&(t[e]=s[e],s[e]=n(t[e]))}),Object.defineProperty(s,"innerHTML",Me(e,{set:n(e.set)})),s.resetSourceWatch_=function(){s.resetSourceWatch_=null,Object.keys(t).forEach(function(e){s[e]=t[e]}),Object.defineProperty(s,"innerHTML",e)},r.one("sourceset",s.resetSourceWatch_))}Le.registerComponent("LiveTracker",ls);var ds,fs=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=h.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=h.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",y.Element.prototype.appendChild.call(this,n),this.innerHTML}}),ps=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Ot(y.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return y.Element.prototype.setAttribute.call(this,"src",e),e}}),ms=function(u){function o(e,t){var n=u.call(this,e,t)||this,a=e.source,i=!1;if(a&&(n.el_.currentSrc!==a.src||e.tag&&3===e.tag.initNetworkState_)?n.setSource(a):n.handleLateInit_(n.el_),e.enableSourceset&&n.setupSourcesetHandling_(),n.el_.hasChildNodes()){for(var r=n.el_.childNodes,s=r.length,o=[];s--;){var l=r[s];"track"===l.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(l),n.remoteTextTracks().addTrack(l.track),n.textTracks().addTrack(l.track),i||n.el_.hasAttribute("crossorigin")||!Nt(l.src)||(i=!0)):o.push(l))}for(var c=0;c<o.length;c++)n.el_.removeChild(o[c])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&i&&f.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(ct||We||et)&&!0===e.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}Re(o,u);var e=o.prototype;return e.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),o.disposeMediaElement(this.el_),this.options_=null,u.prototype.dispose.call(this)},e.setupSourcesetHandling_=function(){var a,i,n,r,t;(a=this).featuresSourceset&&((i=a.el()).resetSourceset_||(n=us([a.el(),y.HTMLMediaElement.prototype,ps],"src"),r=i.setAttribute,t=i.load,Object.defineProperty(i,"src",Me(n,{set:function(e){var t=n.set.call(i,e);return a.triggerSourceset(i.src),t}})),i.setAttribute=function(e,t){var n=r.call(i,e,t);return/src/i.test(e)&&a.triggerSourceset(i.src),n},i.load=function(){var e=t.call(i);return cs(a)||(a.triggerSourceset(""),hs(a)),e},i.currentSrc?a.triggerSourceset(i.currentSrc):cs(a)||hs(a),i.resetSourceset_=function(){i.resetSourceset_=null,i.load=t,i.setAttribute=r,Object.defineProperty(i,"src",n),i.resetSourceWatch_&&i.resetSourceWatch_()}))},e.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){n=[];for(var e=0;e<a.length;e++){var t=a[e];"metadata"===t.kind&&n.push({track:t,storedMode:t.mode})}}var n,a=this.textTracks();function i(){for(var e=0;e<n.length;e++){var t=n[e];"disabled"===t.track.mode&&t.track.mode!==t.storedMode&&(t.track.mode=t.storedMode)}a.removeEventListener("change",i)}e(),a.addEventListener("change",e),this.on("dispose",function(){return a.removeEventListener("change",e)}),this.on("webkitbeginfullscreen",function(){a.removeEventListener("change",e),a.removeEventListener("change",i),a.addEventListener("change",i)}),this.on("webkitendfullscreen",function(){a.removeEventListener("change",e),a.addEventListener("change",e),a.removeEventListener("change",i)})},e.overrideNative_=function(e,t){var n,a=this;t===this["featuresNative"+e+"Tracks"]&&(this[(n=e.toLowerCase())+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){a.el()[n+"Tracks"].removeEventListener(e,a[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n))},e.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},e.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},e.proxyNativeTracksForType_=function(e){var a,i=this,t=La[e],r=this.el()[t.getterName],s=this[t.getterName]();function n(){for(var e=[],t=0;t<s.length;t++){for(var n=!1,a=0;a<r.length;a++)if(r[a]===s[t]){n=!0;break}n||e.push(s[t])}for(;e.length;)s.removeTrack(e.shift())}this["featuresNative"+t.capitalName+"Tracks"]&&r&&r.addEventListener&&(a={change:function(e){s.trigger({type:"change",target:s,currentTarget:s,srcElement:s})},addtrack:function(e){s.addTrack(e.track)},removetrack:function(e){s.removeTrack(e.track)}},this[t.getterName+"Listeners_"]=a,Object.keys(a).forEach(function(t){var n=a[t];r.addEventListener(t,n),i.on("dispose",function(e){return r.removeEventListener(t,n)})}),this.on("loadstart",n),this.on("dispose",function(e){return i.off("loadstart",n)}))},e.proxyNativeTracks_=function(){var t=this;La.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},e.createEl=function(){var e,t,n=this.options_.tag;n&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(n?(e=n.cloneNode(!0),n.parentNode&&n.parentNode.insertBefore(e,n),o.disposeMediaElement(n),n=e):(n=h.createElement("video"),t=Me({},this.options_.tag&&D(this.options_.tag)),ct&&!0===this.options_.nativeControlsForTouch||delete t.controls,C(n,m(t,{id:this.options_.techId,class:"vjs-tech"}))),n.playerId=this.options_.playerId),void 0!==this.options_.preload&&A(n,"preload",this.options_.preload);for(var a=["loop","muted","playsinline","autoplay"],i=0;i<a.length;i++){var r=a[i],s=this.options_[r];void 0!==s&&(s?A(n,r,r):k(n,r),n[r]=s)}return n},e.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){function t(){n=!0}var n=!1;function a(){n||this.trigger("loadstart")}return this.on("loadstart",t),this.on("loadedmetadata",a),void this.ready(function(){this.off("loadstart",t),this.off("loadedmetadata",a),n||this.trigger("loadstart")})}var i=["loadstart"];i.push("loadedmetadata"),2<=e.readyState&&i.push("loadeddata"),3<=e.readyState&&i.push("canplay"),4<=e.readyState&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(e){this.trigger(e)},this)})}},e.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){f(e,"Video is not ready. (Video.js)")}},e.duration=function(){var t=this;return this.el_.duration===1/0&&Je&&at&&0===this.el_.currentTime?(this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN):this.el_.duration||NaN},e.width=function(){return this.el_.offsetWidth},e.height=function(){return this.el_.offsetHeight},e.proxyWebkitFullscreen_=function(){var e=this;function t(){this.trigger("fullscreenchange",{isFullscreen:!1})}function n(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))}"webkitDisplayingFullscreen"in this.el_&&(this.on("webkitbeginfullscreen",n),this.on("dispose",function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))},e.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=y.navigator&&y.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},e.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},e.exitFullScreen=function(){this.el_.webkitExitFullScreen()},e.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},e.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},e.reset=function(){o.resetMediaElement(this.el_)},e.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.setControls=function(e){this.el_.controls=!!e},e.addTextTrack=function(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):u.prototype.addTextTrack.call(this,e,t,n)},e.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return u.prototype.createRemoteTextTrack.call(this,e);var t=h.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},e.addRemoteTextTrack=function(e,t){var n=u.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},e.removeRemoteTextTrack=function(e){if(u.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),n=t.length;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])},e.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),y.performance&&"function"==typeof y.performance.now?e.creationTime=y.performance.now():y.performance&&y.performance.timing&&"number"==typeof y.performance.timing.navigationStart&&(e.creationTime=y.Date.now()-y.performance.timing.navigationStart),e},o}(ci);u()&&(ms.TEST_VID=h.createElement("video"),(ds=h.createElement("track")).kind="captions",ds.srclang="en",ds.label="English",ms.TEST_VID.appendChild(ds)),ms.isSupported=function(){try{ms.TEST_VID.volume=.5}catch(e){return!1}return!(!ms.TEST_VID||!ms.TEST_VID.canPlayType)},ms.canPlayType=function(e){return ms.TEST_VID.canPlayType(e)},ms.canPlaySource=function(e,t){return ms.canPlayType(e.type)},ms.canControlVolume=function(){try{var e=ms.TEST_VID.volume;return ms.TEST_VID.volume=e/2+.1,e!==ms.TEST_VID.volume}catch(e){return!1}},ms.canMuteVolume=function(){try{var e=ms.TEST_VID.muted;return ms.TEST_VID.muted=!e,ms.TEST_VID.muted?A(ms.TEST_VID,"muted","muted"):k(ms.TEST_VID,"muted"),e!==ms.TEST_VID.muted}catch(e){return!1}},ms.canControlPlaybackRate=function(){if(Je&&at&&it<58)return!1;try{var e=ms.TEST_VID.playbackRate;return ms.TEST_VID.playbackRate=e/2+.1,e!==ms.TEST_VID.playbackRate}catch(e){return!1}},ms.canOverrideAttributes=function(){try{function e(){}Object.defineProperty(h.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(h.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(h.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(h.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},ms.supportsNativeTextTracks=function(){return ot||Xe&&at},ms.supportsNativeVideoTracks=function(){return!(!ms.TEST_VID||!ms.TEST_VID.videoTracks)},ms.supportsNativeAudioTracks=function(){return!(!ms.TEST_VID||!ms.TEST_VID.audioTracks)},ms.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],ms.prototype.featuresVolumeControl=ms.canControlVolume(),ms.prototype.featuresMuteControl=ms.canMuteVolume(),ms.prototype.featuresPlaybackRate=ms.canControlPlaybackRate(),ms.prototype.featuresSourceset=ms.canOverrideAttributes(),ms.prototype.movingMediaElementInDOM=!Xe,ms.prototype.featuresFullscreenResize=!0,ms.prototype.featuresProgressEvents=!0,ms.prototype.featuresTimeupdateEvents=!0,ms.prototype.featuresNativeTextTracks=ms.supportsNativeTextTracks(),ms.prototype.featuresNativeVideoTracks=ms.supportsNativeVideoTracks(),ms.prototype.featuresNativeAudioTracks=ms.supportsNativeAudioTracks();var gs=ms.TEST_VID&&ms.TEST_VID.constructor.prototype.canPlayType,vs=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;ms.patchCanPlayType=function(){4<=Ze&&!tt&&!at&&(ms.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&vs.test(e)?"maybe":gs.call(this,e)})},ms.unpatchCanPlayType=function(){var e=ms.TEST_VID.constructor.prototype.canPlayType;return ms.TEST_VID.constructor.prototype.canPlayType=gs,e},ms.patchCanPlayType(),ms.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},ms.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){ms.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){ms.prototype["set"+Ie(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){ms.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){ms.prototype["set"+Ie(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(e){ms.prototype[e]=function(){return this.el_[e]()}}),ci.withSourceHandlers(ms),ms.nativeSourceHandler={},ms.nativeSourceHandler.canPlayType=function(e){try{return ms.TEST_VID.canPlayType(e)}catch(e){return""}},ms.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return ms.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=Rt(e.src);return ms.nativeSourceHandler.canPlayType("video/"+n)}return""},ms.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},ms.nativeSourceHandler.dispose=function(){},ms.registerSourceHandler(ms.nativeSourceHandler),ci.registerTech("Html5",ms);var ys=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],_s={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},bs=["tiny","xsmall","small","medium","large","xlarge","huge"],Ss={};bs.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Ss[e]="vjs-layout-"+t});var Ts={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ws=function(u){function c(e,t,n){var a,i;if(e.id=e.id||t.id||"vjs_video_"+te(),(t=m(c.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var r=e.closest("[lang]");r&&r.getAttribute&&(t.language=r.getAttribute("lang"))}else for(var s=e;s&&1===s.nodeType;){if(D(s).hasOwnProperty("lang")){t.language=s.getAttribute("lang");break}s=s.parentNode}if((a=u.call(this,null,t,n)||this).boundDocumentFullscreenChange_=pe(Be(a),a.documentFullscreenChange_),a.boundFullWindowOnEscKey_=pe(Be(a),a.fullWindowOnEscKey),a.log=p(a.id_),a.fsApi_=gt,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");a.tag=e,a.tagAttributes=e&&D(e),a.language(a.options_.language),t.languages?(i={},Object.getOwnPropertyNames(t.languages).forEach(function(e){i[e.toLowerCase()]=t.languages[e]}),a.languages_=i):a.languages_=c.prototype.options_.languages,a.resetCache_(),a.poster_=t.poster||"",a.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],e.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(e){if("function"!=typeof a[e])throw new Error('plugin "'+e+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),De(Be(a),{eventBusKey:"el_"}),a.fluid_&&a.on("playerreset",a.updateStyleEl_);var o=Me(a.options_);t.plugins&&Object.keys(t.plugins).forEach(function(e){a[e](t.plugins[e])}),a.options_.playerOptions=o,a.middleware_=[],a.initChildren(),a.isAudio("audio"===e.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),ct&&a.addClass("vjs-touch-enabled"),Xe||a.addClass("vjs-workinghover"),c.players[a.id_]=Be(a);var l=d.split(".")[0];return a.addClass("vjs-v"+l),a.userActive(!0),a.reportUserActivity(),a.one("play",a.listenForUserActivity_),a.on("stageclick",a.handleStageClick_),a.on("keydown",a.handleKeyDown),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a}Re(c,u);var e=c.prototype;return e.dispose=function(){var a=this;this.trigger("dispose"),this.off("dispose"),ue(h,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),ue(h,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),c.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),hi[this.id()]=null,Ra.names.forEach(function(e){var t=Ra[e],n=a[t.getterName]();n&&n.off&&n.off()}),u.prototype.dispose.call(this)},e.createEl=function(){var t,n=this.tag,e=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),a="video-js"===this.tag.tagName.toLowerCase();e?t=this.el_=n.parentNode:a||(t=this.el_=u.prototype.createEl.call(this,"div"));var i,r,s=D(n);if(a){for(t=this.el_=n,n=this.tag=h.createElement("video");t.children.length;)n.appendChild(t.firstChild);T(t,"video-js")||w(t,"video-js"),t.appendChild(n),e=this.playerElIngest_=t,Object.keys(t).forEach(function(e){try{n[e]=t[e]}catch(e){}})}n.setAttribute("tabindex","-1"),s.tabindex="-1",(rt||at&&lt)&&(n.setAttribute("role","application"),s.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(e){a&&"class"===e||t.setAttribute(e,s[e]),a&&n.setAttribute(e,s[e])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",(n.player=t.player=this).addClass("vjs-paused"),!0!==y.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=X("vjs-styles-dimensions"),i=H(".vjs-styles-defaults"),(r=H("head")).insertBefore(this.styleEl_,i?i.nextSibling:r.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var o=n.getElementsByTagName("a"),l=0;l<o.length;l++){var c=o.item(l);w(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!e&&n.parentNode.insertBefore(t,n),S(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=t},e.width=function(e){return this.dimension("width",e)},e.height=function(e){return this.dimension("height",e)},e.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t)return this[n]=void 0,void this.updateStyleEl_();var a=parseFloat(t);isNaN(a)?f.error('Improper value "'+t+'" supplied for for '+e):(this[n]=a,this.updateStyleEl_())},e.fluid=function(e){if(void 0===e)return!!this.fluid_;var t;this.fluid_=!!e,xe(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),xe(t=function(){this.on("playerreset",this.updateStyleEl_)})?(void 0)():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(void 0))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},e.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},e.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},e.updateStyleEl_=function(){var e,t,n,a,i,r,s,o;!0!==y.VIDEOJS_NO_DYNAMIC_STYLE?(t=(e=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/e[0],n=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/t:this.videoWidth()||300,a=void 0!==this.height_?this.height_:n*t,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),Q(this.styleEl_,"\n      ."+i+" {\n        width: "+n+"px;\n        height: "+a+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*t+"%;\n      }\n    ")):(r="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,(o=this.tech_&&this.tech_.el())&&(0<=r&&(o.width=r),0<=s&&(o.height=s)))},e.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var a=Ie(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==a&&this.tag&&(ci.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=a,this.isReady_=!1;var r={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Ra.names.forEach(function(e){var t=Ra[e];r[t.getterName]=n[t.privateName]}),m(r,this.options_[a]),m(r,this.options_[i]),m(r,this.options_[e.toLowerCase()]),this.tag&&(r.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(r.startTime=this.cache_.currentTime);var s,o,l=ci.getTech(e);if(!l)throw new Error("No Tech named '"+a+"' exists! '"+a+"' should be registered using videojs.registerTech()'");this.tech_=new l(r),this.tech_.ready(pe(this,this.handleTechReady_),!0),s=this.textTracksJson_||[],o=this.tech_,s.forEach(function(e){var t=o.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),o.textTracks(),ys.forEach(function(e){n.on(n.tech_,e,n["handleTech"+Ie(e)+"_"])}),Object.keys(_s).forEach(function(t){n.on(n.tech_,t,function(e){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+_s[t]+"_"].bind(n),event:e}):n["handleTech"+_s[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===a&&this.tag||S(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.unloadTech_=function(){var e,t,n,a=this;Ra.names.forEach(function(e){var t=Ra[e];a[t.privateName]=a[t.getterName]()}),this.textTracksJson_=(e=this.tech_,t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track}),Array.prototype.map.call(t,function(e){var t=xt(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(xt))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},e.tech=function(e){return void 0===e&&f.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},e.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},e.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},e.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},e.manualAutoplay_=function(t){var e,a=this;if(this.tech_&&"string"==typeof t){function n(){var e=a.muted();function t(){a.muted(e)}a.muted(!0),a.playTerminatedQueue_.push(t);var n=a.play();if(wt(n))return n.catch(t)}if("any"===t&&!0!==this.muted()?wt(e=this.play())&&(e=e.catch(n)):e="muted"===t&&!0!==this.muted()?n():this.play(),wt(e))return e.then(function(){a.trigger({type:"autoplay-success",autoplay:t})}).catch(function(e){a.trigger({type:"autoplay-failure",autoplay:t})})}},e.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(e){return e.src===t});if(n.length)return n[0].type;for(var a=e.$$("source"),i=0;i<a.length;i++){var r=a[i];if(r.type&&r.src&&r.src===t)return r.type}return _i(t)}(this,t)),this.cache_.source=Me({},e,{src:t,type:n});for(var a=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),i=[],r=this.$$("source"),s=[],o=0;o<r.length;o++){var l=D(r[o]);i.push(l),l.src&&l.src===t&&s.push(l.src)}s.length&&!a.length?this.cache_.sources=i:a.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},e.handleTechSourceset_=function(e){var t,n,a,i=this;this.changingSrc_||(t=function(e){return i.updateSourceCaches_(e)},n=this.currentSource().src,a=e.src,n&&!/^blob:/.test(n)&&/^blob:/.test(a)&&(this.lastSource_&&(this.lastSource_.tech===a||this.lastSource_.player===n)||(t=function(){})),t(a),e.src||this.tech_.any(["sourceset","loadstart"],function(e){var t;"sourceset"!==e.type&&(t=i.techGet("currentSrc"),i.lastSource_.tech=t,i.updateSourceCaches_(t))})),this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},e.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},e.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},e.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var n=this.currentTime();this.on("timeupdate",function e(){n!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",e))})},e.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},e.handleTechFirstPlay_=function(){this.options_.starttime&&(f.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.handleTechClick_=function(e){j(e)&&this.controls_&&(this.paused()?Pt(this.play()):this.pause())},e.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},e.handleTechTap_=function(){this.userActive(!this.userActive())},e.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.handleTechTouchEnd_=function(e){e.preventDefault()},e.handleStageClick_=function(){this.reportUserActivity()},e.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},e.documentFullscreenChange_=function(e){var t=this.el(),n=h[this.fsApi_.fullscreenElement]===t;!n&&t.matches?n=t.matches(":"+this.fsApi_.fullscreen):!n&&t.msMatchesSelector&&(n=t.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n),!1===this.isFullscreen()&&ue(h,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed&&this.trigger("fullscreenchange")},e.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},e.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},e.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},e.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},e.handleTechError_=function(){var e=this.tech_.error();this.error(e)},e.handleTechTextData_=function(e,t){var n=1<arguments.length?t:null;this.trigger("textdata",n)},e.getCache=function(){return this.cache_},e.resetCache_=function(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},e.techCall_=function(t,n){this.ready(function(){if(t in gi)return e=this.middleware_,this.tech_[t](e.reduce(yi(t),n));var e;if(t in vi)return pi(this.middleware_,this.tech_,t,n);try{this.tech_&&this.tech_[t](n)}catch(e){throw f(e),e}},!0)},e.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in mi)return e=this.middleware_,n=this.tech_,e.reduceRight(yi(t),n[t]());if(t in vi)return pi(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw f("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw f("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw f(e),e}}var e,n},e.play=function(){var t=this,e=this.options_.Promise||y.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},e.play_=function(e){var t=this;void 0===e&&(e=Pt),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!ot&&!Xe||this.load());var a=this.techGet_("play");null===a?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(a)},e.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},e.runPlayCallbacks_=function(t){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach(function(e){e(t)})},e.pause=function(){this.techCall_("pause")},e.paused=function(){return!1!==this.techGet_("paused")},e.played=function(){return this.techGet_("played")||ft(0,0)},e.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},e.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},e.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&((this.cache_.duration=e)===1/0?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(e)||this.trigger("durationchange"))},e.remainingTime=function(){return this.duration()-this.currentTime()},e.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},e.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=ft(0,0)),e},e.bufferedPercent=function(){return pt(this.buffered(),this.duration())},e.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return t<n&&(n=t),n},e.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},e.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},e.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},e.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},e.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,void this.toggleFullscreenClass_()):!!this.isFullscreen_},e.requestFullscreen=function(e){var t;this.isFullscreen(!0),this.fsApi_.requestFullscreen?(ce(h,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),Pt(this.el_[this.fsApi_.requestFullscreen](t))):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},e.exitFullscreen=function(){this.isFullscreen(!1),this.fsApi_.requestFullscreen?Pt(h[this.fsApi_.exitFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},e.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=h.documentElement.style.overflow,ce(h,"keydown",this.boundFullWindowOnEscKey_),h.documentElement.style.overflow="hidden",w(h.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.fullWindowOnEscKey=function(e){Dt.isEventKey(e,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},e.exitFullWindow=function(){this.isFullWindow=!1,ue(h,"keydown",this.boundFullWindowOnEscKey_),h.documentElement.style.overflow=this.docOrigOverflow,P(h.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},e.requestPictureInPicture=function(){if("pictureInPictureEnabled"in h)return this.techGet_("requestPictureInPicture")},e.exitPictureInPicture=function(){if("pictureInPictureEnabled"in h)return h.exitPictureInPicture()},e.handleKeyDown=function(e){var t,n,a=this.options_.userActions;a&&a.hotkeys&&(t=this.el_.ownerDocument.activeElement,n=t.tagName.toLowerCase(),t.isContentEditable||("input"===n?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(n))||("function"==typeof a.hotkeys?a.hotkeys.call(this,e):this.handleHotkeys(e)))},e.handleHotkeys=function(e){var t,n=this.options_.userActions?this.options_.userActions.hotkeys:{},a=n.fullscreenKey,i=void 0===a?function(e){return Dt.isEventKey(e,"f")}:a,r=n.muteKey,s=void 0===r?function(e){return Dt.isEventKey(e,"m")}:r,o=n.playPauseKey,l=void 0===o?function(e){return Dt.isEventKey(e,"k")||Dt.isEventKey(e,"Space")}:o;i.call(this,e)?(e.preventDefault(),e.stopPropagation(),t=Le.getComponent("FullscreenToggle"),!1!==h[this.fsApi_.fullscreenEnabled]&&t.prototype.handleClick.call(this,e)):s.call(this,e)?(e.preventDefault(),e.stopPropagation(),Le.getComponent("MuteToggle").prototype.handleClick.call(this,e)):l.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Le.getComponent("PlayToggle").prototype.handleClick.call(this,e))},e.canPlayType=function(e){for(var t,n=0,a=this.options_.techOrder;n<a.length;n++){var i=a[n],r=ci.getTech(i);if(r=r||Le.getComponent(i)){if(r.isSupported()&&(t=r.canPlayType(e)))return t}else f.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.selectSource=function(e){function t(e,n,a){var i;return e.some(function(t){return n.some(function(e){if(i=a(t,e))return!0})}),i}function n(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}}var a,i=this,r=this.options_.techOrder.map(function(e){return[e,ci.getTech(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(f.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?t(e,r,(a=n,function(e,t){return a(t,e)})):t(r,e,n))||!1},e.src=function(e){var a=this;if(void 0===e)return this.cache_.src||"";var i=function t(e){var n;return e=Array.isArray(e)?(n=[],e.forEach(function(e){e=t(e),Array.isArray(e)?n=n.concat(e):s(e)&&n.push(e)}),n):"string"==typeof e&&e.trim()?[Si({src:e})]:s(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Si(e)]:[]}(e);i.length?(this.changingSrc_=!0,this.cache_.sources=i,this.updateSourceCaches_(i[0]),fi(this,i[0],function(e,t){return a.middleware_=t,a.cache_.sources=i,a.updateSourceCaches_(e),a.src_(e)?1<i.length?a.src(i.slice(1)):(a.changingSrc_=!1,a.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void a.triggerReady()):(n=a.tech_,void t.forEach(function(e){return e.setTech&&e.setTech(n)}));var n})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},e.src_=function(e){var t,n,a=this,i=this.selectSource([e]);return!i||(t=i.tech,n=this.techName_,Ie(t)===Ie(n)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(function(){a.changingSrc_=!1})),!1)},e.load=function(){this.techCall_("load")},e.reset=function(){var e=this,t=this.options_.Promise||y.Promise;this.paused()||!t?this.doReset_():Pt(this.play().then(function(){return e.doReset_()}))},e.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),xe(this)&&this.trigger("playerreset")},e.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},e.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},e.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},e.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},e.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},e.currentSource=function(){return this.cache_.source||{}},e.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},e.currentType=function(){return this.currentSource()&&this.currentSource().type||""},e.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},e.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},e.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},e.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},e.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},e.handleTechPosterChange_=function(){var e;this.poster_&&!this.options_.techCanOverridePoster||!this.tech_||!this.tech_.poster||(e=this.tech_.poster()||"")!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))},e.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},e.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},e.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&e.message&&e.message===this.localize(this.options_.notSupportedMessage)){function t(){this.error(e)}return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new St(e),this.addClass("vjs-error"),f.error("(CODE:"+this.error_.code+" "+St.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},e.reportUserActivity=function(e){this.userActivity_=!0},e.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},e.listenForUserActivity_=function(){var t,n,a,i=pe(this,this.reportUserActivity);this.on("mousedown",function(){i(),this.clearInterval(t),t=this.setInterval(i,250)}),this.on("mousemove",function(e){e.screenX===n&&e.screenY===a||(n=e.screenX,a=e.screenY,i())}),this.on("mouseup",function(e){i(),this.clearInterval(t)});var r,e=this.getChild("controlBar");!e||Xe||Je||(e.on("mouseenter",function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),e.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i),this.setInterval(function(){var e;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(r),(e=this.options_.inactivityTimeout)<=0||(r=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e)))},250)},e.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},e.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},e.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},e.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},e.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},e.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=(t=e.track)||e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},e.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},e.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},e.languages=function(){return Me(c.prototype.options_.languages,this.languages_)},e.toJSON=function(){var e=Me(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var a=t[n];(a=Me(a)).player=void 0,e.tracks[n]=a}return e},e.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var a=new At(this,t);return this.addChild(a),a.on("dispose",function(){n.removeChild(a)}),a.open(),a},e.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<bs.length;n++){var a=bs[n];if(t<=this.breakpoints_[a]){if(e===a)return;e&&this.removeClass(Ss[e]),this.addClass(Ss[a]),this.breakpoint_=a;break}}},e.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},e.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=m({},Ts,e),this.updateCurrentBreakpoint_()),m(this.breakpoints_)},e.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},e.currentBreakpoint=function(){return this.breakpoint_},e.currentBreakpointClass=function(){return Ss[this.breakpoint_]||""},e.loadMedia=function(e,t){var n,a,i,r,s,o=this;e&&"object"==typeof e&&(this.reset(),this.cache_.media=Me(e),a=(n=this.cache_.media).artwork,i=n.poster,r=n.src,s=n.textTracks,!a&&i&&(this.cache_.media.artwork=[{src:i,type:_i(i)}]),r&&this.src(r),i&&this.poster(i),Array.isArray(s)&&s.forEach(function(e){return o.addRemoteTextTrack(e,!1)}),this.ready(t))},e.getMedia=function(){if(this.cache_.media)return Me(this.cache_.media);var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:_i(t.poster)}]),t},c.getTagSettings=function(e){var t,n,a,i={sources:[],tracks:[]},r=D(e),s=r["data-setup"];if(T(e,"vjs-fill")&&(r.fill=!0),T(e,"vjs-fluid")&&(r.fluid=!0),null!==s&&(n=(t=function(e,t){var n,a=null;try{n=JSON.parse(e,t)}catch(e){a=e}return[a,n]}(s||"{}"))[0],a=t[1],n&&f.error(n),m(r,a)),m(i,r),e.hasChildNodes())for(var o=e.childNodes,l=0,c=o.length;l<c;l++){var u=o[l],h=u.nodeName.toLowerCase();"source"===h?i.sources.push(D(u)):"track"===h&&i.tracks.push(D(u))}return i},e.flexNotSupported_=function(){var e=h.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},c}(Le);Ra.names.forEach(function(e){var t=Ra[e];ws.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),ws.players={};var Ps=y.navigator;function xs(e){return $s.hasOwnProperty(e)}function Cs(e){return xs(e)?$s[e]:void 0}function Ds(e,t){e[Ms]=e[Ms]||{},e[Ms][t]=!0}function Es(e,t,n){var a=(n?"before":"")+"pluginsetup";e.trigger(a,t),e.trigger(a+":"+t.name,t)}function As(i,r){return r.prototype.name=i,function(){Es(this,{name:i,plugin:r,instance:null},!0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=Fe(r,[this].concat(t));return this[i]=function(){return a},Es(this,a.getEventHash()),a}}ws.prototype.options_={techOrder:ci.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Ps&&(Ps.languages&&Ps.languages[0]||Ps.userLanguage||Ps.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){ws.prototype[e]=function(){return this.techGet_(e)}}),ys.forEach(function(e){ws.prototype["handleTech"+Ie(e)+"_"]=function(){return this.trigger(e)}}),Le.registerComponent("Player",ws);var ks,Is="plugin",Ms="activePlugins_",$s={},Ls=((ks=Os.prototype).version=function(){return this.constructor.VERSION},ks.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},ks.trigger=function(e,t){return void 0===t&&(t={}),he(this.eventBusEl_,e,this.getEventHash(t))},ks.handleStateChanged=function(e){},ks.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Ms][e]=!1,this.player=this.state=null,t[e]=As(e,$s[e])},Os.isBasic=function(e){var t="string"==typeof e?Cs(e):e;return"function"==typeof t&&!Os.prototype.isPrototypeOf(t.prototype)},Os.registerPlugin=function(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(xs(e))f.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(ws.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof t+".");return $s[e]=t,e!==Is&&(Os.isBasic(t)?ws.prototype[e]=(a=e,i=t,Object.keys(i).forEach(function(e){n[e]=i[e]}),n):ws.prototype[e]=As(e,t)),t;function n(){Es(this,{name:a,plugin:i,instance:null},!0);var e=i.apply(this,arguments);return Ds(this,a),Es(this,{name:a,plugin:i,instance:e}),e}var a,i},Os.deregisterPlugin=function(e){if(e===Is)throw new Error("Cannot de-register base plugin.");xs(e)&&(delete $s[e],delete ws.prototype[e])},Os.getPlugins=function(e){var n;return void 0===e&&(e=Object.keys($s)),e.forEach(function(e){var t=Cs(e);t&&((n=n||{})[e]=t)}),n},Os.getPluginVersion=function(e){var t=Cs(e);return t&&t.VERSION||""},Os);function Os(e){if(this.constructor===Os)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,De(this),delete this.trigger,Ae(this,this.constructor.defaultState),Ds(e,this.name),this.dispose=pe(this,this.dispose),e.on("dispose",this.dispose)}Ls.getPlugin=Cs,Ls.BASE_PLUGIN_NAME=Is,Ls.registerPlugin(Is,Ls),ws.prototype.usingPlugin=function(e){return!!this[Ms]&&!0===this[Ms][e]},ws.prototype.hasPlugin=function(e){return!!xs(e)};var Rs,Ns,Fs=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Bs(e,n,t){if(i=Bs.getPlayer(e))return n&&f.warn('Player "'+e+'" is already initialised. Options will not be applied.'),t&&i.ready(t),i;var a="string"==typeof e?H("#"+Fs(e)):e;if(!g(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");a.ownerDocument.defaultView&&a.ownerDocument.body.contains(a)||f.warn("The element supplied is not included in the DOM"),n=n||{},Bs.hooks("beforesetup").forEach(function(e){var t=e(a,Me(n));s(t)&&!Array.isArray(t)?n=Me(n,t):f.error("please return an object in beforesetup hooks")});var i=new(Le.getComponent("Player"))(a,n,t);return Bs.hooks("setup").forEach(function(e){return e(i)}),i}Bs.hooks_={},Bs.hooks=function(e,t){return Bs.hooks_[e]=Bs.hooks_[e]||[],t&&(Bs.hooks_[e]=Bs.hooks_[e].concat(t)),Bs.hooks_[e]},Bs.hook=function(e,t){Bs.hooks(e,t)},Bs.hookOnce=function(n,e){Bs.hooks(n,[].concat(e).map(function(t){return function e(){return Bs.removeHook(n,e),t.apply(void 0,arguments)}}))},Bs.removeHook=function(e,t){var n=Bs.hooks(e).indexOf(t);return!(n<=-1||(Bs.hooks_[e]=Bs.hooks_[e].slice(),Bs.hooks_[e].splice(n,1),0))},!0!==y.VIDEOJS_NO_DYNAMIC_STYLE&&u()&&((Rs=H(".vjs-styles-defaults"))||(Rs=X("vjs-styles-defaults"),(Ns=H("head"))&&Ns.insertBefore(Rs,Ns.firstChild),Q(Rs,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    "))),W(1,Bs),Bs.VERSION=d,Bs.options=ws.prototype.options_,Bs.getPlayers=function(){return ws.players},Bs.getPlayer=function(e){var t,n=ws.players;if("string"==typeof e){var a=Fs(e),i=n[a];if(i)return i;t=H("#"+a)}else t=e;if(g(t)){var r=t.player,s=t.playerId;if(r||n[s])return r||n[s]}},Bs.getAllPlayers=function(){return Object.keys(ws.players).map(function(e){return ws.players[e]}).filter(Boolean)},Bs.players=ws.players,Bs.getComponent=Le.getComponent,Bs.registerComponent=function(e,t){ci.isTech(t)&&f.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Le.registerComponent.call(Le,e,t)},Bs.getTech=ci.getTech,Bs.registerTech=ci.registerTech,Bs.use=function(e,t){ui[e]=ui[e]||[],ui[e].push(t)},Object.defineProperty(Bs,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Bs.middleware,"TERMINATOR",{value:di,writeable:!1,enumerable:!0}),Bs.browser=ut,Bs.TOUCH_ENABLED=ct,Bs.extend=function(e,t){void 0===t&&(t={});var n,a=function(){e.apply(this,arguments)},i={};for(n in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(a=t.constructor),i=t):"function"==typeof t&&(a=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)}(a,e),i)i.hasOwnProperty(n)&&(a.prototype[n]=i[n]);return a},Bs.mergeOptions=Me,Bs.bind=pe,Bs.registerPlugin=Ls.registerPlugin,Bs.deregisterPlugin=Ls.deregisterPlugin,Bs.plugin=function(e,t){return f.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ls.registerPlugin(e,t)},Bs.getPlugins=Ls.getPlugins,Bs.getPlugin=Ls.getPlugin,Bs.getPluginVersion=Ls.getPluginVersion,Bs.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),Bs.options.languages=Me(Bs.options.languages,((n={})[e]=t,n)),Bs.options.languages[e]},Bs.log=f,Bs.createLogger=p,Bs.createTimeRange=Bs.createTimeRanges=ft,Bs.formatTime=Vi,Bs.setFormatTime=function(e){Bi=e},Bs.resetFormatTime=function(){Bi=Fi},Bs.parseUrl=Lt,Bs.isCrossOrigin=Nt,Bs.EventTarget=ge,Bs.on=ce,Bs.one=de,Bs.off=ue,Bs.trigger=he,Bs.xhr=_a,Bs.TextTrack=Pa,Bs.AudioTrack=Ea,Bs.VideoTrack=Aa,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Bs[e]=function(){return f.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Y[e].apply(null,arguments)}}),Bs.computedStyle=a,Bs.dom=Y,Bs.url=Qt;var Vs=Ct(function(e,t){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,u=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,h={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var a=h.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return a.path=h.normalizePath(a.path),h.buildURLFromParts(a)}var i=h.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=h.normalizePath(i.path),h.buildURLFromParts(i)):t;var r,s=h.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");!s.netLoc&&s.path&&"/"!==s.path[0]&&(r=u.exec(s.path),s.netLoc=r[1],s.path=r[2]),s.netLoc&&!s.path&&(s.path="/");var o,l,c={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(c.netLoc=s.netLoc,"/"===i.path[0])||(i.path?(l=(o=s.path).substring(0,o.lastIndexOf("/")+1)+i.path,c.path=h.normalizePath(l)):(c.path=s.path,i.params||(c.params=s.params,i.query||(c.query=s.query)))),null===c.path&&(c.path=n.alwaysNormalize?h.normalizePath(i.path):i.path),h.buildURLFromParts(c)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=h});function js(){return(js=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,a=arguments[t];for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Us(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Hs(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),a={},i=n.length;i--;)""!==n[i]&&((t=/([^=]*)=(.*)/.exec(n[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),a[t[0]]=t[1]);return a}var Gs,Ys,qs=((Ys=Xs.prototype).on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},Ys.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},Ys.trigger=function(e,t){var n,a,i,r=this.listeners[e];if(r)if(2===arguments.length)for(a=r.length,n=0;n<a;++n)r[n].call(this,t);else for(i=Array.prototype.slice.call(arguments,1),a=r.length,n=0;n<a;++n)r[n].apply(this,i)},Ys.dispose=function(){this.listeners={}},Ys.pipe=function(t){this.on("data",function(e){t.push(e)})},Xs),zs=(Us(Ks,Gs=qs),Ks.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},Ks),Ws=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}Us(e,t);var n=e.prototype;return n.push=function(a){var l,c,u=this;0!==(a=a.trim()).length&&("#"===a[0]?this.tagMappers.reduce(function(e,t){var n=t(a);return n===a?e:e.concat([n])},[a]).forEach(function(e){for(var t,n,a,i,r,s,o=0;o<u.customParsers.length;o++)if(u.customParsers[o].call(u,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),l=/^#EXTM3U/.exec(e))u.trigger("data",{type:"tag",tagType:"m3u"});else{if(l=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return c={type:"tag",tagType:"inf"},l[1]&&(c.duration=parseFloat(l[1])),l[2]&&(c.title=l[2]),void u.trigger("data",c);if(l=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return c={type:"tag",tagType:"targetduration"},l[1]&&(c.duration=parseInt(l[1],10)),void u.trigger("data",c);if(l=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return c={type:"tag",tagType:"totalduration"},l[1]&&(c.duration=parseInt(l[1],10)),void u.trigger("data",c);if(l=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return c={type:"tag",tagType:"version"},l[1]&&(c.version=parseInt(l[1],10)),void u.trigger("data",c);if(l=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return c={type:"tag",tagType:"media-sequence"},l[1]&&(c.number=parseInt(l[1],10)),void u.trigger("data",c);if(l=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return c={type:"tag",tagType:"discontinuity-sequence"},l[1]&&(c.number=parseInt(l[1],10)),void u.trigger("data",c);if(l=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return c={type:"tag",tagType:"playlist-type"},l[1]&&(c.playlistType=l[1]),void u.trigger("data",c);if(l=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return c={type:"tag",tagType:"byterange"},l[1]&&(c.length=parseInt(l[1],10)),l[2]&&(c.offset=parseInt(l[2],10)),void u.trigger("data",c);if(l=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return c={type:"tag",tagType:"allow-cache"},l[1]&&(c.allowed=!/NO/.test(l[1])),void u.trigger("data",c);if(l=/^#EXT-X-MAP:?(.*)$/.exec(e))c={type:"tag",tagType:"map"},l[1]&&((t=Hs(l[1])).URI&&(c.uri=t.URI),t.BYTERANGE&&(a=(n=t.BYTERANGE.split("@"))[0],i=n[1],c.byterange={},a&&(c.byterange.length=parseInt(a,10)),i&&(c.byterange.offset=parseInt(i,10)))),u.trigger("data",c);else if(l=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){c={type:"tag",tagType:"stream-inf"},l[1]&&(c.attributes=Hs(l[1]),c.attributes.RESOLUTION&&(s={},(r=c.attributes.RESOLUTION.split("x"))[0]&&(s.width=parseInt(r[0],10)),r[1]&&(s.height=parseInt(r[1],10)),c.attributes.RESOLUTION=s),c.attributes.BANDWIDTH&&(c.attributes.BANDWIDTH=parseInt(c.attributes.BANDWIDTH,10)),c.attributes["PROGRAM-ID"]&&(c.attributes["PROGRAM-ID"]=parseInt(c.attributes["PROGRAM-ID"],10))),u.trigger("data",c)}else{if(l=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return c={type:"tag",tagType:"media"},l[1]&&(c.attributes=Hs(l[1])),void u.trigger("data",c);if(l=/^#EXT-X-ENDLIST/.exec(e))u.trigger("data",{type:"tag",tagType:"endlist"});else if(l=/^#EXT-X-DISCONTINUITY/.exec(e))u.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(l=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return c={type:"tag",tagType:"program-date-time"},l[1]&&(c.dateTimeString=l[1],c.dateTimeObject=new Date(l[1])),void u.trigger("data",c);if(l=/^#EXT-X-KEY:?(.*)$/.exec(e))return c={type:"tag",tagType:"key"},l[1]&&(c.attributes=Hs(l[1]),c.attributes.IV&&("0x"===c.attributes.IV.substring(0,2).toLowerCase()&&(c.attributes.IV=c.attributes.IV.substring(2)),c.attributes.IV=c.attributes.IV.match(/.{8}/g),c.attributes.IV[0]=parseInt(c.attributes.IV[0],16),c.attributes.IV[1]=parseInt(c.attributes.IV[1],16),c.attributes.IV[2]=parseInt(c.attributes.IV[2],16),c.attributes.IV[3]=parseInt(c.attributes.IV[3],16),c.attributes.IV=new Uint32Array(c.attributes.IV))),void u.trigger("data",c);if(l=/^#EXT-X-START:?(.*)$/.exec(e))return c={type:"tag",tagType:"start"},l[1]&&(c.attributes=Hs(l[1]),c.attributes["TIME-OFFSET"]=parseFloat(c.attributes["TIME-OFFSET"]),c.attributes.PRECISE=/YES/.test(c.attributes.PRECISE)),void u.trigger("data",c);if(l=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return c={type:"tag",tagType:"cue-out-cont"},l[1]?c.data=l[1]:c.data="",void u.trigger("data",c);if(l=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return c={type:"tag",tagType:"cue-out"},l[1]?c.data=l[1]:c.data="",void u.trigger("data",c);if(l=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return c={type:"tag",tagType:"cue-in"},l[1]?c.data=l[1]:c.data="",void u.trigger("data",c);u.trigger("data",{type:"tag",data:e.slice(4)})}}}else u.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:a}))},n.addParser=function(e){var t=this,n=e.expression,a=e.customType,i=e.dataParser,r=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push(function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:a,segment:r}),!0})},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push(function(e){return t.test(e)?n(e):e})},e}(qs);function Ks(){var e;return(e=Gs.call(this)||this).buffer="",e}function Xs(){this.listeners={}}function Qs(e){return e&&"object"==typeof e}function Js(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(t,n){return Object.keys(n).forEach(function(e){Array.isArray(t[e])&&Array.isArray(n[e])?t[e]=t[e].concat(n[e]):Qs(t[e])&&Qs(n[e])?t[e]=Js(t[e],n[e]):t[e]=n[e]}),t},{})}function Zs(e){return e.reduce(function(e,t){return e.concat(t)},[])}function eo(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}var to=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new zs,e.parseStream=new Ws,e.lineStream.pipe(e.parseStream);var i,r,s=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e),o=[],l={},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(t){var n,a;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&((l.byterange=e).length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&((l.byterange=e).offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(l.duration=t.duration),0===t.duration&&(l.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:function(e){for(var t=y.atob(e||""),n=new Uint8Array(t.length),a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n}(t.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(r.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,u=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){i={},t.uri&&(i.uri=t.uri),t.byterange&&(i.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||c,t.attributes?(l.attributes||(l.attributes={}),js(l.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){var e;this.manifest.mediaGroups=this.manifest.mediaGroups||c,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME?((e=this.manifest.mediaGroups[t.attributes.TYPE])[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},n=e[t.attributes["GROUP-ID"]],(a={default:/yes/i.test(t.attributes.DEFAULT)}).default?a.autoselect=!0:a.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(a.language=t.attributes.LANGUAGE),t.attributes.URI&&(a.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(a.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(a.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(a.forced=/yes/i.test(t.attributes.FORCED)),n[t.attributes.NAME]=a):this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,l.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),l.dateTimeString=t.dateTimeString,l.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){l.cueOut=t.data},"cue-out-cont":function(){l.cueOutCont=t.data},"cue-in":function(){l.cueIn=t.data}}[t.tagType]||function(){}).call(s)},uri:function(){l.uri=t.uri,o.push(l),!this.manifest.targetDuration||"duration"in l||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),l.duration=this.manifest.targetDuration),r&&(l.key=r),l.timeline=u,i&&(l.map=i),l={}},comment:function(){},custom:function(){t.segment?(l.custom=l.custom||{},l.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(s)}),e}Us(e,t);var n=e.prototype;return n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},e}(qs),no="INVALID_NUMBER_OF_PERIOD",ao="DASH_EMPTY_MANIFEST",io="DASH_INVALID_XML",ro="NO_BASE_URL",so="SEGMENT_TIME_UNSPECIFIED";function oo(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=Mo.buildAbsoluteURL(y.location.href,e)),Mo.buildAbsoluteURL(e,t))}function lo(e){var t,n,a,i=e.baseUrl,r=void 0===i?"":i,s=e.source,o=void 0===s?"":s,l=e.range,c=void 0===l?"":l,u=e.indexRange,h=void 0===u?"":u,d={uri:o,resolvedUri:oo(r||"",o)};return(c||h)&&(t=(c||h).split("-"),n=parseInt(t[0],10),a=parseInt(t[1],10),d.byterange={length:a-n+1,offset:n}),d}function co(e){var o,t,n=e.type,a=void 0===n?"static":n,i=e.duration,r=e.timescale,s=void 0===r?1:r,l=e.sourceDuration,c=$o[a](e),u=function(e,t){for(var n=[],a=e;a<t;a++)n.push(a);return n}(c.start,c.end).map((o=e,function(e,t){var n=o.duration,a=o.timescale,i=void 0===a?1:a,r=o.periodIndex,s=o.startNumber;return{number:(void 0===s?1:s)+e,duration:n/i,timeline:r,time:t*n}}));return"static"===a&&(u[t=u.length-1].duration=l-i/s*t),u}function uo(e){var t=e.baseUrl,n=e.initialization,a=void 0===n?{}:n,i=e.sourceDuration,r=e.timescale,s=void 0===r?1:r,o=e.indexRange,l=void 0===o?"":o,c=e.duration;if(!t)throw new Error(ro);var u,h=lo({baseUrl:t,source:a.sourceURL,range:a.range}),d=lo({baseUrl:t,source:t,indexRange:l});return d.map=h,c?(u=co(e)).length&&(d.duration=u[0].duration,d.timeline=u[0].timeline):i&&(d.duration=i/s,d.timeline=0),d.number=0,[d]}function ho(e){return t=e.reduce(function(e,t){var n,a=t.attributes.id+(t.attributes.lang||"");return e[a]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[a].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[a].attributes.contentProtection=t.attributes.contentProtection)):e[a]=t,e},{}),Object.keys(t).map(function(e){return t[e]}).map(function(e){return e.discontinuityStarts=e.segments.reduce(function(e,t,n){return t.discontinuity&&e.push(n),e},[]),e});var t}function fo(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e){var a,i,r=e[n];r.sidx&&(i=t[a=r.sidx.uri+"-"+(o=(s=r.sidx.byterange).offset+s.length-1,s.offset+"-"+o)]&&t[a].sidx,r.sidx&&i&&function(e,t,n){for(var a=e.sidx.map?e.sidx.map:null,i=e.sidx.duration,r=e.timeline||0,s=e.sidx.byterange,o=s.offset+s.length,l=t.timescale,c=t.references.filter(function(e){return 1!==e.referenceType}),u=[],h=o+t.firstOffset,d=0;d<c.length;d++){var f=t.references[d],p=f.referencedSize,m=uo({baseUrl:n,timescale:l,timeline:r,periodIndex:r,duration:f.subsegmentDuration,sourceDuration:i,indexRange:h+"-"+(h+p-1)})[0];a&&(m.map=a),u.push(m),h+=p}e.segments=u}(r,i,r.sidx.resolvedUri))}var s,o;return e}function po(e){var t,n=e.attributes,a=e.segments,i=e.sidx,r={attributes:((t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:a,mediaSequence:a.length?a[0].number:1};return n.contentProtection&&(r.contentProtection=n.contentProtection),i&&(r.sidx=i),r}function mo(e,t){var n;if(void 0===t&&(t={}),!e.length)return{};var s,a=e[0].attributes,i=a.sourceDuration,r=a.minimumUpdatePeriod,o=void 0===r?0:r,l=ho(e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType})).map(po),c=ho(e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType})),u=e.filter(function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),h={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:((n={AUDIO:{},VIDEO:{}})["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:i,playlists:fo(l,t),minimumUpdatePeriod:1e3*o};return c.length&&(h.mediaGroups.AUDIO.audio=function(h){var d;void 0===h&&(h={});var e=c.reduce(function(e,t){var n,a,i,r,s,o,l=t.attributes.role&&t.attributes.role.value||"",c=t.attributes.lang||"",u="main";return c&&(n=l?" ("+l+")":"",u=t.attributes.lang+n),e[u]&&e[u].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth||(e[u]={language:c,autoselect:!0,default:"main"===l,playlists:fo([(i=t.attributes,r=t.segments,s=t.sidx,o={attributes:((a={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs})["PROGRAM-ID"]=1,a),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:r,mediaSequence:r.length?r[0].number:1},i.contentProtection&&(o.contentProtection=i.contentProtection),s&&(o.sidx=s),o)],h),uri:""},void 0===d&&"main"===l&&((d=t).default=!0)),e},{});return d||(e[Object.keys(e)[0]].default=!0),e}(t)),u.length&&(h.mediaGroups.SUBTITLES.subs=(void 0===(s=t)&&(s={}),u.reduce(function(e,t){var n,a,i,r=t.attributes.lang||"text";return e[r]||(e[r]={language:r,default:!1,autoselect:!1,playlists:fo([(a=t.attributes,void 0===(i=t.segments)&&(i=[{uri:a.baseUrl,timeline:a.periodIndex,resolvedUri:a.baseUrl||"",duration:a.sourceDuration,number:0}],a.duration=a.sourceDuration),{attributes:((n={NAME:a.id,BANDWIDTH:a.bandwidth})["PROGRAM-ID"]=1,n),uri:"",endList:"static"===(a.type||"static"),timeline:a.periodIndex,resolvedUri:a.baseUrl||"",targetDuration:a.duration,segments:i,mediaSequence:i.length?i[0].number:1})],s),uri:""}),e},{}))),h}function go(e,t){for(var n,a,i,r,s,o,l,c,u,h=e.type,d=void 0===h?"static":h,f=e.minimumUpdatePeriod,p=void 0===f?0:f,m=e.media,g=void 0===m?"":m,v=e.sourceDuration,y=e.timescale,_=void 0===y?1:y,b=e.startNumber,S=void 0===b?1:b,T=e.periodIndex,w=[],P=-1,x=0;x<t.length;x++){var C=t[x],D=C.d,E=C.r||0,A=C.t||0;P<0&&(P=A),A&&P<A&&(P=A);var k,I=void 0;I=E<0?(k=x+1)===t.length?"dynamic"===d&&0<p&&0<g.indexOf("$Number$")?(n=e.NOW,a=e.clientOffset,i=e.availabilityStartTime,s=void 0===(r=e.timescale)?1:r,l=void 0===(o=e.start)?0:o,u=(n+a)/1e3+(void 0===(c=e.minimumUpdatePeriod)?0:c)-(i+l),Math.ceil((u*s-P)/D)):(v*_-P)/D:(t[k].t-P)/D:E+1;for(var M=S+w.length+I,$=S+w.length;$<M;)w.push({number:$,duration:D/_,time:P,timeline:T}),P+=D,$++}return w}function vo(e,t){return e.replace(Lo,(r=t,function(e,t,n,a){if("$$"===e)return"$";if(void 0===r[t])return e;var i=""+r[t];return"RepresentationID"===t||(a=n?parseInt(a,10):1)<=i.length?i:new Array(a-i.length+1).join("0")+i}));var r}function yo(n,e){var t,a,i={RepresentationID:n.id,Bandwidth:n.bandwidth||0},r=n.initialization,s=void 0===r?{sourceURL:"",range:""}:r,o=lo({baseUrl:n.baseUrl,source:vo(s.sourceURL,i),range:s.range});return a=e,((t=n).duration||a?t.duration?co(t):go(t,a):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]).map(function(e){i.Number=e.number,i.Time=e.time;var t=vo(n.media||"",i);return{uri:t,timeline:e.timeline,duration:e.duration,resolvedUri:oo(n.baseUrl||"",t),map:o,number:e.number}})}function _o(o,e){var t=o.duration,n=o.segmentUrls,a=void 0===n?[]:n;if(!t&&!e||t&&e)throw new Error(so);var i,r=a.map(function(e){return t=e,n=o.baseUrl,a=o.initialization,r=lo({baseUrl:n,source:(i=void 0===a?{}:a).sourceURL,range:i.range}),(s=lo({baseUrl:n,source:t.media,range:t.mediaRange})).map=r,s;var t,n,a,i,r,s});return t&&(i=co(o)),e&&(i=go(o,e)),i.map(function(e,t){if(r[t]){var n=r[t];return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n}}).filter(function(e){return e})}function bo(e){var t,n,a=e.attributes,i=e.segmentInfo;i.template?(n=yo,t=Js(a,i.template)):i.base?(n=uo,t=Js(a,i.base)):i.list&&(n=_o,t=Js(a,i.list));var r={attributes:a};if(!n)return r;var s,o,l,c=n(t,i.timeline);return t.duration?(s=t.duration,l=void 0===(o=t.timescale)?1:o,t.duration=s/l):c.length?t.duration=c.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0,r.attributes=t,r.segments=c,i.base&&t.indexRange&&(r.sidx=c[0],r.segments=[]),r}function So(e,t){return eo(e.childNodes).filter(function(e){return e.tagName===t})}function To(e){return e.textContent.trim()}function wo(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),a=n[0],i=n[1],r=n[2],s=n[3],o=n[4],l=n[5];return 31536e3*parseFloat(a||0)+2592e3*parseFloat(i||0)+86400*parseFloat(r||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(l||0)}function Po(e){return e&&e.attributes?eo(e.attributes).reduce(function(e,t){var n=Oo[t.name]||Oo.DEFAULT;return e[t.name]=n(t.value),e},{}):{}}var xo,Co,Do,Eo,Ao,ko,Io,Mo=(Co=xo={exports:{}},Do=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,Eo=/^([^\/?#]*)(.*)$/,Ao=/(?:\/|^)\.(?=\/)/g,ko=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,Io={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var a=Io.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return a.path=Io.normalizePath(a.path),Io.buildURLFromParts(a)}var i=Io.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=Io.normalizePath(i.path),Io.buildURLFromParts(i)):t;var r,s=Io.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");!s.netLoc&&s.path&&"/"!==s.path[0]&&(r=Eo.exec(s.path),s.netLoc=r[1],s.path=r[2]),s.netLoc&&!s.path&&(s.path="/");var o,l,c={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(c.netLoc=s.netLoc,"/"===i.path[0])||(i.path?(l=(o=s.path).substring(0,o.lastIndexOf("/")+1)+i.path,c.path=Io.normalizePath(l)):(c.path=s.path,i.params||(c.params=s.params,i.query||(c.query=s.query)))),null===c.path&&(c.path=n.alwaysNormalize?Io.normalizePath(i.path):i.path),Io.buildURLFromParts(c)},parseURL:function(e){var t=Do.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(Ao,"");e.length!==(e=e.replace(ko,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},Co.exports=Io,xo.exports),$o={static:function(e){var t=e.duration,n=e.timescale,a=void 0===n?1:n,i=e.sourceDuration;return{start:0,end:Math.ceil(i/(t/a))}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,a=e.availabilityStartTime,i=e.timescale,r=void 0===i?1:i,s=e.duration,o=e.start,l=void 0===o?0:o,c=e.minimumUpdatePeriod,u=void 0===c?0:c,h=e.timeShiftBufferDepth,d=void 0===h?1/0:h,f=(t+n)/1e3,p=a+l,m=f+u-p,g=Math.ceil(m*r/s),v=Math.floor((f-p-d)*r/s),y=Math.floor((f-p)*r/s);return{start:Math.max(0,v),end:Math.min(g,y)}}},Lo=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Oo={mediaPresentationDuration:wo,availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:wo,timeShiftBufferDepth:wo,start:wo,width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?wo(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}};function Ro(e,n){return n.length?Zs(e.map(function(t){return n.map(function(e){return oo(t,To(e))})})):e}function No(e){var t=So(e,"SegmentTemplate")[0],n=So(e,"SegmentList")[0],a=n&&So(n,"SegmentURL").map(function(e){return Js({tag:"SegmentURL"},Po(e))}),i=So(e,"SegmentBase")[0],r=n||t,s=r&&So(r,"SegmentTimeline")[0],o=n||i||t,l=o&&So(o,"Initialization")[0],c=t&&Po(t);c&&l?c.initialization=l&&Po(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var u={template:c,timeline:s&&So(s,"S").map(Po),list:n&&Js(Po(n),{segmentUrls:a,initialization:Po(l)}),base:i&&Js(Po(i),{initialization:Po(l)})};return Object.keys(u).forEach(function(e){u[e]||delete u[e]}),u}function Fo(d,f,p){return function(e){var t=Po(e),n=Ro(f,So(e,"BaseURL")),a={role:Po(So(e,"Role")[0])},i=Js(d,t,a),r=So(e,"ContentProtection").reduce(function(e,t){var n,a,i,r=Po(t),s=Ko[r.schemeIdUri];return s&&(e[s]={attributes:r},(n=So(t,"cenc:pssh")[0])&&(i=(a=To(n))&&function(){for(var e=y.atob(a),t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(),e[s].pssh=i)),e},{});Object.keys(r).length&&(i=Js(i,{contentProtection:r}));var s,o,l,c=No(e),u=So(e,"Representation"),h=Js(p,c);return Zs(u.map((s=i,o=n,l=h,function(e){var t=So(e,"BaseURL"),n=Ro(o,t),a=Js(s,Po(e)),i=No(e);return n.map(function(e){return{segmentInfo:Js(l,i),attributes:Js(a,{baseUrl:e})}})})))}}function Bo(e){if(""===e)throw new Error(ao);var t=(new y.DOMParser).parseFromString(e,"application/xml"),n=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!n||n&&0<n.getElementsByTagName("parsererror").length)throw new Error(io);return n}function Vo(e,t){return void 0===t&&(t={}),mo(function(e,t){void 0===t&&(t={});var n=t,a=n.manifestUri,i=void 0===a?"":a,r=n.NOW,s=void 0===r?Date.now():r,o=n.clientOffset,l=void 0===o?0:o,c=So(e,"Period");if(!c.length)throw new Error(no);var u,h,d=Po(e),f=Ro([i],So(e,"BaseURL"));return d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=s,d.clientOffset=l,Zs(c.map((u=d,h=f,function(e,t){var n=Ro(h,So(e,"BaseURL")),a=Po(e),i=parseInt(a.id,10),r=y.isNaN(i)?t:i,s=Js(u,{periodIndex:r}),o=So(e,"AdaptationSet"),l=No(e);return Zs(o.map(Fo(s,n,l)))})))}(Bo(e),t).map(bo),t.sidxMapping)}function jo(e){return e>>>0}function Uo(e){return("00"+e.toString(16)).slice(-2)}var Ho,Go,Yo,qo,zo,Wo,Ko={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};function Xo(e){return new Date(1e3*e-20828448e5)}function Qo(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}function Jo(){this.init=function(){var r={};this.on=function(e,t){r[e]||(r[e]=[]),r[e]=r[e].concat(t)},this.off=function(e,t){var n;return!!r[e]&&(n=r[e].indexOf(t),r[e]=r[e].slice(),r[e].splice(n,1),-1<n)},this.trigger=function(e){var t,n,a,i;if(t=r[e])if(2===arguments.length)for(a=t.length,n=0;n<a;++n)t[n].call(this,arguments[1]);else{for(i=[],n=arguments.length,n=1;n<arguments.length;++n)i.push(arguments[n]);for(a=t.length,n=0;n<a;++n)t[n].apply(this,i)}},this.dispose=function(){r={}}}}Yo=function(e){return Ho(e,["moov","trak"]).reduce(function(e,t){var n,a,i,r,s;return(n=Ho(t,["tkhd"])[0])?(a=n[0],r=jo(n[i=0===a?12:20]<<24|n[1+i]<<16|n[2+i]<<8|n[3+i]),(s=Ho(t,["mdia","mdhd"])[0])?(i=0===s[0]?12:20,e[r]=jo(s[i]<<24|s[1+i]<<16|s[2+i]<<8|s[3+i]),e):null):null},{})},qo=function(i,e){var t=Ho(e,["moof","traf"]),n=[].concat.apply([],t.map(function(a){return Ho(a,["tfhd"]).map(function(e){var t=jo(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),n=i[t]||9e4;return(Ho(a,["tfdt"]).map(function(e){var t=e[0],n=jo(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);return 1===t&&(n*=Math.pow(2,32),n+=jo(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n})[0]||1/0)/n})})),a=Math.min.apply(null,n);return isFinite(a)?a:0},zo=function(e){var t=Ho(e,["moov","trak"]),o=[];return t.forEach(function(e){var t=Ho(e,["mdia","hdlr"]),s=Ho(e,["tkhd"]);t.forEach(function(e,t){var n,a,i=Go(e.subarray(8,12)),r=s[t];"vide"===i&&(a=0===(n=new DataView(r.buffer,r.byteOffset,r.byteLength)).getUint8(0)?n.getUint32(12):n.getUint32(20),o.push(a))})}),o},Wo=function(e){var t=Ho(e,["moov","trak"]),f=[];return t.forEach(function(e){var t,n,a={},i=Ho(e,["tkhd"])[0];i&&(n=(t=new DataView(i.buffer,i.byteOffset,i.byteLength)).getUint8(0),a.id=0===n?t.getUint32(12):t.getUint32(20));var r,s=Ho(e,["mdia","hdlr"])[0];s&&(r=Go(s.subarray(8,12)),a.type="vide"===r?"video":"soun"===r?"audio":r);var o,l,c,u=Ho(e,["mdia","minf","stbl","stsd"])[0];u&&(o=u.subarray(8),a.codec=Go(o.subarray(4,8)),(c=Ho(o,[a.codec])[0])&&(/^[a-z]vc[1-9]$/i.test(a.codec)?(l=c.subarray(78),"avcC"===Go(l.subarray(4,8))&&11<l.length?(a.codec+=".",a.codec+=Uo(l[9]),a.codec+=Uo(l[10]),a.codec+=Uo(l[11])):a.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(a.codec)&&(l=c.subarray(28),"esds"===Go(l.subarray(4,8))&&20<l.length&&0!==l[19]?(a.codec+="."+Uo(l[19]),a.codec+="."+Uo(l[20]>>>2&63).replace(/^0/,"")):a.codec="mp4a.40.2")));var h,d=Ho(e,["mdia","mdhd"])[0];d&&i&&(h=0===n?12:20,a.timescale=jo(d[h]<<24|d[1+h]<<16|d[2+h]<<8|d[3+h])),f.push(a)}),f};var Zo,el,tl={findBox:Ho=function(e,t){var n,a,i,r,s,o=[];if(!t.length)return null;for(n=0;n<e.byteLength;)a=jo(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),i=Go(e.subarray(n+4,n+8)),r=1<a?n+a:e.byteLength,i===t[0]&&(1===t.length?o.push(e.subarray(n+8,r)):(s=Ho(e.subarray(n+8,r),t.slice(1))).length&&(o=o.concat(s))),n=r;return o},parseType:Go=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},timescale:Yo,startTime:qo,videoTrackIds:zo,tracks:Wo},nl=tl.parseType,al={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:Zo(e.subarray(78,e.byteLength))}},avcC:function(e){for(var t,n,a=new DataView(e.buffer,e.byteOffset,e.byteLength),i={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},r=31&e[5],s=6,o=0;o<r;o++)n=a.getUint16(s),s+=2,i.sps.push(new Uint8Array(e.subarray(s,s+n))),s+=n;for(t=e[s],s++,o=0;o<t;o++)n=a.getUint16(s),s+=2,i.pps.push(new Uint8Array(e.subarray(s,s+n))),s+=n;return i},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:nl(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},a=8;a<e.byteLength;)n.compatibleBrands.push(nl(e.subarray(a,a+4))),a+=4;return n},dinf:function(e){return{boxes:Zo(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:Zo(e.subarray(8))}},hdlr:function(e){for(var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:nl(e.subarray(8,12)),name:""},n=8,n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){for(var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),a=[],i=0;i+4<e.length;i+=t)if(t=n.getUint32(i),i+=4,t<=0)a.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[i]){case 1:a.push("slice_layer_without_partitioning_rbsp");break;case 5:a.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:a.push("sei_rbsp");break;case 7:a.push("seq_parameter_set_rbsp");break;case 8:a.push("pic_parameter_set_rbsp");break;case 9:a.push("access_unit_delimiter_rbsp");break;default:a.push("UNKNOWN NAL - "+e[i]&31)}return a}(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),a=4,i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===i.version?(a+=4,i.creationTime=Xo(n.getUint32(a)),a+=8,i.modificationTime=Xo(n.getUint32(a)),a+=4,i.timescale=n.getUint32(a),a+=8):(i.creationTime=Xo(n.getUint32(a)),a+=4,i.modificationTime=Xo(n.getUint32(a)),a+=4,i.timescale=n.getUint32(a),a+=4),i.duration=n.getUint32(a),a+=4,t=n.getUint16(a),i.language+=String.fromCharCode(96+(t>>10)),i.language+=String.fromCharCode(96+((992&t)>>5)),i.language+=String.fromCharCode(96+(31&t)),i},mdia:function(e){return{boxes:Zo(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:Zo(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(n.streamDescriptor=Zo(e.subarray(28))[0]),n},moof:function(e){return{boxes:Zo(e)}},moov:function(e){return{boxes:Zo(e)}},mvex:function(e){return{boxes:Zo(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,a={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===a.version?(n+=4,a.creationTime=Xo(t.getUint32(n)),n+=8,a.modificationTime=Xo(t.getUint32(n)),n+=4,a.timescale=t.getUint32(n),n+=8):(a.creationTime=Xo(t.getUint32(n)),n+=4,a.modificationTime=Xo(t.getUint32(n)),n+=4,a.timescale=t.getUint32(n),n+=4),a.duration=t.getUint32(n),n+=4,a.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,a.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,a.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,a.nextTrackId=t.getUint32(n),a},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){for(var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=4;n<e.byteLength;n++)t.samples.push({dependsOn:(48&e[n])>>4,isDependedOn:(12&e[n])>>2,hasRedundancy:3&e[n]});return t},sidx:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8),earliestPresentationTime:t.getUint32(12),firstOffset:t.getUint32(16)},a=t.getUint16(22),i=24;a;i+=12,a--)n.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return n},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:Zo(e)}},stco:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},a=t.getUint32(4),i=8;a;i+=4,a--)n.chunkOffsets.push(t.getUint32(i));return n},stsc:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=t.getUint32(4),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]},i=8;n;i+=12,n--)a.sampleToChunks.push({firstChunk:t.getUint32(i),samplesPerChunk:t.getUint32(i+4),sampleDescriptionIndex:t.getUint32(i+8)});return a},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:Zo(e.subarray(8))}},stsz:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:t.getUint32(4),entries:[]},a=12;a<e.byteLength;a+=4)n.entries.push(t.getUint32(a));return n},stts:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},a=t.getUint32(4),i=8;a;i+=8,a--)n.timeToSamples.push({sampleCount:t.getUint32(i),sampleDelta:t.getUint32(i+4)});return n},styp:function(e){return al.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},a=1&n.flags[2],i=2&n.flags[2],r=8&n.flags[2],s=16&n.flags[2],o=32&n.flags[2],l=65536&n.flags[0],c=131072&n.flags[0],u=8;return a&&(u+=4,n.baseDataOffset=t.getUint32(12),u+=4),i&&(n.sampleDescriptionIndex=t.getUint32(u),u+=4),r&&(n.defaultSampleDuration=t.getUint32(u),u+=4),s&&(n.defaultSampleSize=t.getUint32(u),u+=4),o&&(n.defaultSampleFlags=t.getUint32(u)),l&&(n.durationIsEmpty=!0),!a&&c&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,a={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===a.version?(n+=4,a.creationTime=Xo(t.getUint32(n)),n+=8,a.modificationTime=Xo(t.getUint32(n)),n+=4,a.trackId=t.getUint32(n),n+=4,n+=8):(a.creationTime=Xo(t.getUint32(n)),n+=4,a.modificationTime=Xo(t.getUint32(n)),n+=4,a.trackId=t.getUint32(n),n+=4,n+=4),a.duration=t.getUint32(n),n+=4,n+=8,a.layer=t.getUint16(n),n+=2,a.alternateGroup=t.getUint16(n),n+=2,a.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,a.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,a.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,a.height=t.getUint16(n)+t.getUint16(n+2)/16,a},traf:function(e){return{boxes:Zo(e)}},trak:function(e){return{boxes:Zo(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},a=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],r=4&n.flags[2],s=1&n.flags[1],o=2&n.flags[1],l=4&n.flags[1],c=8&n.flags[1],u=a.getUint32(4),h=8;for(i&&(n.dataOffset=a.getInt32(h),h+=4),r&&u&&(t={flags:Qo(e.subarray(h,h+4))},h+=4,s&&(t.duration=a.getUint32(h),h+=4),o&&(t.size=a.getUint32(h),h+=4),c&&(t.compositionTimeOffset=a.getUint32(h),h+=4),n.samples.push(t),u--);u--;)t={},s&&(t.duration=a.getUint32(h),h+=4),o&&(t.size=a.getUint32(h),h+=4),l&&(t.flags=Qo(e.subarray(h,h+4)),h+=4),c&&(t.compositionTimeOffset=a.getUint32(h),h+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},il={inspect:Zo=function(e){for(var t,n,a,i,r,s=0,o=[],l=new ArrayBuffer(e.length),c=new Uint8Array(l),u=0;u<e.length;++u)c[u]=e[u];for(t=new DataView(l);s<e.byteLength;)n=t.getUint32(s),a=nl(e.subarray(s+4,s+8)),i=1<n?s+n:e.byteLength,(r=(al[a]||function(e){return{data:e}})(e.subarray(s+8,i))).size=n,r.type=a,o.push(r),s=i;return o},textify:el=function(e,t){var r;return t=t||0,r=new Array(2*t+1).join(" "),e.map(function(i,e){return r+i.type+"\n"+Object.keys(i).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var t=r+"  "+e+": ",n=i[e];if(n instanceof Uint8Array||n instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return a?1===a.length?t+"<"+a.join("").slice(1)+">":t+"<\n"+a.map(function(e){return r+"  "+e}).join("\n")+"\n"+r+"  >":t+"<>"}return t+JSON.stringify(n,null,2).split("\n").map(function(e,t){return 0===t?e:r+"  "+e}).join("\n")}).join("\n")+(i.boxes?"\n"+el(i.boxes,t+1):"")}).join("\n")},parseTfdt:al.tfdt,parseHdlr:al.hdlr,parseTfhd:al.tfhd,parseTrun:al.trun,parseSidx:al.sidx};function rl(){rl.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new hl(0,0),new hl(0,1),new hl(1,0),new hl(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)}Jo.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},Jo.prototype.push=function(e){this.trigger("data",e)},Jo.prototype.flush=function(e){this.trigger("done",e)},Jo.prototype.partialFlush=function(e){this.trigger("partialdone",e)},Jo.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},Jo.prototype.reset=function(e){this.trigger("reset",e)};var sl=Jo;function ol(e){return null===e?"":(e=cl[e]||e,String.fromCharCode(e))}function ll(){for(var e=[],t=15;t--;)e.push("");return e}(rl.prototype=new sl).push=function(e){var t,n,a,i;if("sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},a=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)a+=255,t++;for(a+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===a){n.payloadType=a,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}t+=i,i=a=0}return n}(e.escapedRBSP)).payloadType&&(n=181!==(i=t).payload[0]||49!=(i.payload[1]<<8|i.payload[2])||"GA94"!==String.fromCharCode(i.payload[3],i.payload[4],i.payload[5],i.payload[6])||3!==i.payload[7]?null:i.payload.subarray(8,i.payload.length-1)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));a=function(e,t){var n,a,i,r,s=[];if(!(64&t[0]))return s;for(a=31&t[0],n=0;n<a;n++)r={type:3&t[2+(i=3*n)],pts:e},4&t[2+i]&&(r.ccData=t[3+i]<<8|t[4+i],s.push(r));return s}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(a),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},rl.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},rl.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},rl.prototype.flush=function(){return this.flushStream("flush")},rl.prototype.partialFlush=function(){return this.flushStream("partialFlush")},rl.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},rl.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},rl.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},rl.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},rl.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var cl={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ul=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],hl=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,a,i,r,s;(t=32639&e.ccData)!==this.lastControlCode_?(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),a=t>>>8,i=255&t,t!==this.PADDING_&&(t===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":t===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts):t===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(e.pts)):t===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(e.pts)):t===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(e.pts)):t===this.CARRIAGE_RETURN_?(this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts):t===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):t===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(e.pts),this.displayed_=ll()):t===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=ll():t===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ll()),this.mode_="paintOn",this.startPts_=e.pts):this.isSpecialCharacter(a,i)?(r=ol((a=(3&a)<<8)|i),this[this.mode_](e.pts,r),this.column_++):this.isExtCharacter(a,i)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),r=ol((a=(3&a)<<8)|i),this[this.mode_](e.pts,r),this.column_++):this.isMidRowCode(a,i)?(this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"])):this.isOffsetControlCode(a,i)?this.column_+=3&i:this.isPAC(a,i)?(s=ul.indexOf(7968&t),"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])):this.isNormalChar(a)&&(0===i&&(i=null),r=ol(a),r+=ol(i),this[this.mode_](e.pts,r),this.column_+=r.length))):this.lastControlCode_=null}};function dl(e,m){var a=tl.findBox(e,["moof","traf"]),t=tl.findBox(e,["mdat"]),g={},i=[];return t.forEach(function(e,t){var n=a[t];i.push({mdat:e,traf:n})}),i.forEach(function(e){var t,n,a,i,r,s,o=e.mdat,l=e.traf,c=tl.findBox(l,["tfhd"]),u=il.parseTfhd(c[0]),h=u.trackId,d=tl.findBox(l,["tfdt"]),f=0<d.length?il.parseTfdt(d[0]).baseMediaDecodeTime:0,p=tl.findBox(l,["trun"]);m===h&&0<p.length&&(t=function(e,t,n){for(var a,i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[],s=0;s+4<e.length;s+=u){var o,l,c,u=i.getUint32(s);s+=4,u<=0||6==(31&e[s])&&(o=e.subarray(s+1,s+1+u),l=function(e,t){for(var n=e,a=0;a<t.length;a++){var i=t[a];if(n<i.size)return i;n-=i.size}return null}(s,t),c={nalUnitType:"sei_rbsp",size:u,data:o,escapedRBSP:fl(o),trackId:n},l?(c.pts=l.pts,c.dts=l.dts,a=l):(c.pts=a.pts,c.dts=a.dts),r.push(c))}return r}(o,(n=f,a=u.defaultSampleDuration||0,i=u.defaultSampleSize||0,r=u.trackId,s=[],p.forEach(function(e){var t=il.parseTrun(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=a),void 0===e.size&&(e.size=i),e.trackId=r,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration}),s=s.concat(t)}),s),h),g[h]||(g[h]=[]),g[h]=g[h].concat(t))}),g}hl.prototype=new sl,hl.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},hl.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ll(),this.nonDisplayed_=ll(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},hl.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},hl.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},hl.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},hl.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},hl.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},hl.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},hl.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},hl.prototype.isNormalChar=function(e){return 32<=e&&e<=127},hl.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ll(),this.displayed_=ll()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},hl.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},hl.prototype.clearFormatting=function(e){var t;this.formatting_.length&&(t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},""),this.formatting_=[],this[this.mode_](e,t))},hl.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},hl.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},hl.prototype.shiftRowsUp_=function(){for(var e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},hl.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var fl=function(e){for(var t,n,a=e.byteLength,i=[],r=1;r<a-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(i.push(r+2),r+=2):r++;if(0===i.length)return e;t=a-i.length,n=new Uint8Array(t);for(var s=0,r=0;r<t;s++,r++)s===i[0]&&(s++,i.shift()),n[r]=e[s];return n},pl=rl,ml=function(){var t,o,l,c,u,n,a=!1;this.isInitialized=function(){return a},this.init=function(e){t=new pl,a=!0,n=!!e&&e.isPartial,t.on("data",function(e){e.startTime=e.startPts/c,e.endTime=e.endPts/c,u.captions.push(e),u.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||l===e[0]&&c===t[l])},this.parse=function(e,t,n){var a,i,r;if(!this.isInitialized())return null;if(!t||!n)return null;if(this.isNewInit(t,n))l=t[0],c=n[l];else if(null===l||!c)return o.push(e),null;for(;0<o.length;){var s=o.shift();this.parse(s,t,n)}return null!==(r=c,a=null===(i=l)?null:{seiNals:dl(e,i)[i],timescale:r})&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),u):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;n?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){u.captions=[],u.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){o=[],c=l=null,u?this.clearParsedCaptions():u={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()};function gl(e){var t=31&e[1];return(t<<=8)|e[2]}function vl(e){return!!(64&e[1])}function yl(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function _l(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}function bl(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}new sl;var Sl={parseType:function(e,t){var n=gl(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=vl(e),n=4+yl(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=vl(e),a=4+yl(e);if(n&&(a+=e[a]+1),1&e[a+5]){for(var i=3+((15&e[a+1])<<8|e[a+2])-4,r=12+((15&e[a+10])<<8|e[a+11]);r<i;){var s=a+r;t[(31&e[s+1])<<8|e[s+2]]=e[s],r+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:vl,parsePesType:function(e,t){switch(t[gl(e)]){case 27:return"video";case 15:return"audio";case 21:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!vl(e))return null;var t=4+yl(e);if(t>=e.byteLength)return null;var n,a=null;return 192&(n=e[t+7])&&((a={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,a.pts*=4,a.pts+=(6&e[t+13])>>>1,a.dts=a.pts,64&n&&(a.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,a.dts*=4,a.dts+=(6&e[t+18])>>>1)),a},videoPacketContainsKeyFrame:function(e){for(var t=4+yl(e),n=e.subarray(t),a=0,i=0,r=!1;i<n.byteLength-3;i++)if(1===n[i+2]){a=i+5;break}for(;a<n.byteLength;)switch(n[a]){case 0:if(0!==n[a-1]){a+=2;break}if(0!==n[a-2]){a++;break}for(i+3!==a-2&&"slice_layer_without_partitioning_rbsp_idr"===_l(31&n[i+3])&&(r=!0);1!==n[++a]&&a<n.length;);i=a-2,a+=3;break;case 1:if(0!==n[a-1]||0!==n[a-2]){a+=3;break}"slice_layer_without_partitioning_rbsp_idr"===_l(31&n[i+3])&&(r=!0),i=a-2,a+=3;break;default:a+=3}return n=n.subarray(i),a-=i,i=0,n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===_l(31&n[i+3])&&(r=!0),r}},Tl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],wl={isLikelyAacData:function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},parseId3TagSize:function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+n:10+n},parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,a=e[t+4]<<3;return 6144&e[t+3]|a|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return Tl[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,a=10;64&e[5]&&(a+=4,a+=bl(e.subarray(10,14)));do{if((t=bl(e.subarray(a+4,a+8)))<1)return null;if("PRIV"===String.fromCharCode(e[a],e[a+1],e[a+2],e[a+3])){n=e.subarray(a+10,a+t+10);for(var i=0;i<n.byteLength;i++)if(0===n[i]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t){for(var n="",a=0;a<t;a++)n+="%"+("00"+e[a].toString(16)).slice(-2);return n}(n,i)))break;var r=n.subarray(i+1),s=(1&r[3])<<30|r[4]<<22|r[5]<<14|r[6]<<6|r[7]>>>2;return(s*=4)+(3&r[7])}}a+=10,a+=t}while(a<e.byteLength);return null}},Pl=function(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e},xl={};function Cl(e){var t,n={pid:null,table:null},a={};for(t in function(e,t){for(var n,a=0,i=Dl;i<e.byteLength;)if(71!==e[a]||71!==e[i])a++,i++;else{switch(n=e.subarray(a,i),xl.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=xl.ts.parsePat(n));break;case"pmt":t.table||(t.table=xl.ts.parsePmt(n))}if(t.pid&&t.table)return;a+=Dl,i+=Dl}}(e,n),n.table)if(n.table.hasOwnProperty(t))switch(n.table[t]){case 27:a.video=[],function(e,t,n){for(var a,i,r,s,o,l,c,u,h=0,d=Dl,f=!1,p={data:[],size:0};d<e.byteLength;)if(71!==e[h]||71!==e[d])h++,d++;else{if("pes"===(a=e.subarray(h,d),xl.ts.parseType(a,t.pid)))if(i=xl.ts.parsePesType(a,t.table),r=xl.ts.parsePayloadUnitStartIndicator(a),"video"===i&&(r&&!f&&(s=xl.ts.parsePesTime(a))&&(s.type="video",n.video.push(s),f=!0),!n.firstKeyFrame)){if(r&&0!==p.size){for(o=new Uint8Array(p.size),l=0;p.data.length;)c=p.data.shift(),o.set(c,l),l+=c.byteLength;!xl.ts.videoPacketContainsKeyFrame(o)||(u=xl.ts.parsePesTime(o))&&(n.firstKeyFrame=u,n.firstKeyFrame.type="video"),p.size=0}p.data.push(a),p.size+=a.byteLength}if(f&&n.firstKeyFrame)break;h+=Dl,d+=Dl}for(h=(d=e.byteLength)-Dl,f=!1;0<=h;)if(71!==e[h]||71!==e[d])h--,d--;else{if("pes"===(a=e.subarray(h,d),xl.ts.parseType(a,t.pid))&&(i=xl.ts.parsePesType(a,t.table),r=xl.ts.parsePayloadUnitStartIndicator(a),"video"===i&&r&&(s=xl.ts.parsePesTime(a))&&(s.type="video",n.video.push(s),f=!0)),f)break;h-=Dl,d-=Dl}}(e,n,a),0===a.video.length&&delete a.video;break;case 15:a.audio=[],function(e,t,n){for(var a,i,r,s,o=0,l=Dl,c=!1;l<=e.byteLength;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o++,l++;else{if("pes"===(a=e.subarray(o,l),xl.ts.parseType(a,t.pid))&&(i=xl.ts.parsePesType(a,t.table),r=xl.ts.parsePayloadUnitStartIndicator(a),"audio"===i&&r&&(s=xl.ts.parsePesTime(a))&&(s.type="audio",n.audio.push(s),c=!0)),c)break;o+=Dl,l+=Dl}for(o=(l=e.byteLength)-Dl,c=!1;0<=o;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o--,l--;else{if("pes"===(a=e.subarray(o,l),xl.ts.parseType(a,t.pid))&&(i=xl.ts.parsePesType(a,t.table),r=xl.ts.parsePayloadUnitStartIndicator(a),"audio"===i&&r&&(s=xl.ts.parsePesTime(a))&&(s.type="audio",n.audio.push(s),c=!0)),c)break;o-=Dl,l-=Dl}}(e,n,a),0===a.audio.length&&delete a.audio}return a}xl.ts=Sl,xl.aac=wl;var Dl=188;function El(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Al(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var kl=null,Il=(Ml.prototype.decrypt=function(e,t,n,a,i,r){for(var s,o,l=this._key[1],c=e^l[0],u=a^l[1],h=n^l[2],d=t^l[3],f=void 0,p=l.length/4-2,m=void 0,g=4,v=this._tables[1],y=v[0],_=v[1],b=v[2],S=v[3],T=v[4],m=0;m<p;m++)f=y[c>>>24]^_[u>>16&255]^b[h>>8&255]^S[255&d]^l[g],s=y[u>>>24]^_[h>>16&255]^b[d>>8&255]^S[255&c]^l[g+1],o=y[h>>>24]^_[d>>16&255]^b[c>>8&255]^S[255&u]^l[g+2],d=y[d>>>24]^_[c>>16&255]^b[u>>8&255]^S[255&h]^l[g+3],g+=4,c=f,u=s,h=o;for(m=0;m<4;m++)i[(3&-m)+r]=T[c>>>24]<<24^T[u>>16&255]<<16^T[h>>8&255]<<8^T[255&d]^l[g++],f=c,c=u,u=h,h=d,d=f},Ml);function Ml(e){El(this,Ml),kl=kl||function(){for(var e,t,n,a=[[[],[],[],[],[]],[[],[],[],[],[]]],i=a[0],r=a[1],s=i[4],o=r[4],l=void 0,c=void 0,u=void 0,h=[],d=[],f=void 0,p=void 0,l=0;l<256;l++)d[(h[l]=l<<1^283*(l>>7))^l]=l;for(c=u=0;!s[c];c^=e||1,u=d[u]||1)for(n=(n=u^u<<1^u<<2^u<<3^u<<4)>>8^255&n^99,p=16843009*h[t=h[e=h[o[s[c]=n]=c]]]^65537*t^257*e^16843008*c,f=257*h[n]^16843008*n,l=0;l<4;l++)i[l][c]=f=f<<24^f>>>8,r[l][n]=p=p<<24^p>>>8;for(l=0;l<5;l++)i[l]=i[l].slice(0),r[l]=r[l].slice(0);return a}(),this._tables=[[kl[0][0].slice(),kl[0][1].slice(),kl[0][2].slice(),kl[0][3].slice(),kl[0][4].slice()],[kl[1][0].slice(),kl[1][1].slice(),kl[1][2].slice(),kl[1][3].slice(),kl[1][4].slice()]];var t=void 0,n=void 0,a=void 0,i=void 0,r=void 0,s=this._tables[0][4],o=this._tables[1],l=e.length,c=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(i=e.slice(0),r=[],this._key=[i,r],t=l;t<4*l+28;t++)a=i[t-1],(t%l==0||8===l&&t%l==4)&&(a=s[a>>>24]<<24^s[a>>16&255]<<16^s[a>>8&255]<<8^s[255&a],t%l==0&&(a=a<<8^a>>>24^c<<24,c=c<<1^283*(c>>7))),i[t]=i[t-l]^a;for(n=0;t;n++,t--)a=i[3&n?t:t-4],r[n]=t<=4||n<4?a:o[0][s[a>>>24]]^o[1][s[a>>16&255]]^o[2][s[a>>8&255]]^o[3][s[255&a]]}var $l=(Ll.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},Ll.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},Ll.prototype.trigger=function(e,t){var n=this.listeners[e];if(n)if(2===arguments.length)for(var a=n.length,i=0;i<a;++i)n[i].call(this,t);else for(var r=Array.prototype.slice.call(arguments,1),s=n.length,o=0;o<s;++o)n[o].apply(this,r)},Ll.prototype.dispose=function(){this.listeners={}},Ll.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},Ll);function Ll(){El(this,Ll),this.listeners={}}var Ol,Rl=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Nl,Ol=$l),Nl.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},Nl.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},Nl);function Nl(){El(this,Nl);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Ol.call(this,$l));return e.jobs=[],e.delay=1,e.timeout_=null,e}function Fl(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}function Bl(e,t,n){for(var a,i,r,s,o=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),l=new Il(Array.prototype.slice.call(t)),c=new Uint8Array(e.byteLength),u=new Int32Array(c.buffer),h=void 0,d=void 0,f=void 0,p=void 0,m=void 0,h=n[0],d=n[1],f=n[2],p=n[3],m=0;m<o.length;m+=4)a=Fl(o[m]),i=Fl(o[m+1]),r=Fl(o[m+2]),s=Fl(o[m+3]),l.decrypt(a,i,r,s,u,m),u[m]=Fl(u[m]^h),u[m+1]=Fl(u[m+1]^d),u[m+2]=Fl(u[m+2]^f),u[m+3]=Fl(u[m+3]^p),h=a,d=i,f=r,p=s;return c}var Vl,jl,Ul,Hl=(Gl.prototype.decryptChunk_=function(t,n,a,i){return function(){var e=Bl(t,n,a);i.set(e,t.byteOffset)}},Vl=Gl,Ul=[{key:"STEP",get:function(){return 32e3}}],(jl=null)&&Al(Vl.prototype,jl),Ul&&Al(Vl,Ul),Gl);function Gl(e,t,n,a){El(this,Gl);var i=Gl.STEP,r=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new Rl,this.asyncStream_.push(this.decryptChunk_(r.subarray(o,o+i),t,n,s)),o=i;o<r.length;o+=i)n=new Uint32Array([Fl(r[o-4]),Fl(r[o-3]),Fl(r[o-2]),Fl(r[o-1])]),this.asyncStream_.push(this.decryptChunk_(r.subarray(o,o+i),t,n,s));this.asyncStream_.push(function(){a(null,s.subarray(0,s.byteLength-s[s.byteLength-1]))})}function Yl(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=Vs.buildAbsoluteURL(y.location.href,e)),Vs.buildAbsoluteURL(e,t))}function ql(e,t,n){return e&&n.responseURL&&t!==n.responseURL?n.responseURL:t}function zl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wl(e,t,n){return t&&Kl(e.prototype,t),n&&Kl(e,n),e}function Kl(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Xl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ql(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Jl(i,r){["AUDIO","SUBTITLES"].forEach(function(e){for(var t in i.mediaGroups[e])for(var n in i.mediaGroups[e][t]){var a=i.mediaGroups[e][t][n];r(a,e,t,n)}})}function Zl(e,t){var n=ac(e,{}),a=n.playlists[t.uri];if(!a)return null;if(a.segments&&t.segments&&a.segments.length===t.segments.length&&a.endList===t.endList&&a.mediaSequence===t.mediaSequence)return null;var i=ac(a,t);a.segments&&(i.segments=function(e,t,n){var a=t.slice();n=n||0;for(var i=Math.min(e.length,t.length+n),r=n;r<i;r++)a[r-n]=ac(e[r],a[r-n]);return a}(a.segments,t.segments,t.mediaSequence-a.mediaSequence)),i.segments.forEach(function(e){var t,n;t=e,n=i.resolvedUri,t.resolvedUri||(t.resolvedUri=Yl(n,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Yl(n,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Yl(n,t.map.uri))});for(var r=0;r<n.playlists.length;r++)n.playlists[r].uri===t.uri&&(n.playlists[r]=i);return n.playlists[t.uri]=i,n}function ec(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];(e.playlists[n.uri]=n).resolvedUri=Yl(e.uri,n.uri),n.id=t,n.attributes||(n.attributes={},ic.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}}function tc(t){Jl(t,function(e){e.uri&&(e.resolvedUri=Yl(t.uri,e.uri))})}function nc(e,t){var n=e.segments[e.segments.length-1];return t&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)}var ac=Bs.mergeOptions,ic=Bs.log,rc=(Xl(sc,Bs.EventTarget),Wl(sc,[{key:"playlistRequestError",value:function(e,t,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t+".",responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,t){var n=this;this.request=null,this.state="HAVE_METADATA";var a=new to;this.customTagParsers.forEach(function(e){return a.addParser(e)}),this.customTagMappers.forEach(function(e){return a.addTagMapper(e)}),a.push(e.responseText),a.end(),a.manifest.uri=t,a.manifest.attributes=a.manifest.attributes||{};var i=Zl(this.master,a.manifest);this.targetDuration=a.manifest.targetDuration,i?(this.master=i,this.media_=this.master.playlists[a.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(y.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=y.setTimeout(function(){n.trigger("mediaupdatetimeout")},nc(this.media(),!!i))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),y.clearTimeout(this.mediaUpdateTimeout),y.clearTimeout(this.finalRenditionTimeout)}},{key:"stopRequest",value:function(){var e;this.request&&(e=this.request,this.request=null,e.onreadystatechange=null,e.abort())}},{key:"media",value:function(n,e){var a=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}if(y.clearTimeout(this.finalRenditionTimeout),e){var t=n.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=y.setTimeout(this.media.bind(this,n,!1),t)}else{var i=this.state,r=!this.media_||n.uri!==this.media_.uri;if(this.master.playlists[n.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r){if(this.state="SWITCHING_MEDIA",this.request){if(n.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:n.resolvedUri,withCredentials:this.withCredentials},function(e,t){if(a.request){if(n.resolvedUri=ql(a.handleManifestRedirects,n.resolvedUri,t),e)return a.playlistRequestError(a.request,n.uri,i);a.haveMetadata(t,n.uri),"HAVE_MASTER"===i?a.trigger("loadedmetadata"):a.trigger("mediachange")}})}}}},{key:"pause",value:function(){this.stopRequest(),y.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var t=this;y.clearTimeout(this.mediaUpdateTimeout);var n,a=this.media();e?(n=a?a.targetDuration/2*1e3:5e3,this.mediaUpdateTimeout=y.setTimeout(function(){return t.load()},n)):this.started?a&&!a.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var a=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(a.request){if(a.request=null,e)return a.error={status:t.status,message:"HLS playlist request error at URL: "+a.srcUrl+".",responseText:t.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");var n=new to;return a.customTagParsers.forEach(function(e){return n.addParser(e)}),a.customTagMappers.forEach(function(e){return n.addTagMapper(e)}),n.push(t.responseText),n.end(),a.state="HAVE_MASTER",a.srcUrl=ql(a.handleManifestRedirects,a.srcUrl,t),n.manifest.uri=a.srcUrl,n.manifest.playlists?(a.master=n.manifest,ec(a.master),tc(a.master),a.trigger("loadedplaylist"),void(a.request||a.media(n.manifest.playlists[0]))):(a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:y.location.href,playlists:[{uri:a.srcUrl,id:0,resolvedUri:a.srcUrl,attributes:{}}]},a.master.playlists[a.srcUrl]=a.master.playlists[0],a.haveMetadata(t,a.srcUrl),a.trigger("loadedmetadata"))}})}}]),sc);function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};zl(this,sc);var a=Ql(this,(sc.__proto__||Object.getPrototypeOf(sc)).call(this)),i=n.withCredentials,r=void 0!==i&&i,s=n.handleManifestRedirects,o=void 0!==s&&s;a.srcUrl=e,a.hls_=t,a.withCredentials=r,a.handleManifestRedirects=o;var l=t.options_;if(a.customTagParsers=l&&l.customTagParsers||[],a.customTagMappers=l&&l.customTagMappers||[],!a.srcUrl)throw new Error("A non-empty playlist URL is required");return a.state="HAVE_NOTHING",a.on("mediaupdatetimeout",function(){"HAVE_METADATA"===a.state&&(a.state="HAVE_CURRENT_METADATA",a.request=a.hls_.xhr({uri:Yl(a.master.uri,a.media().uri),withCredentials:a.withCredentials},function(e,t){if(a.request)return e?a.playlistRequestError(a.request,a.media().uri,"HAVE_METADATA"):void a.haveMetadata(a.request,a.media().uri)}))}),a}function oc(e,i,t){var n,a;return void 0===i&&(i=e.mediaSequence+e.segments.length),i<e.mediaSequence?0:(n=function(e){var t=0,n=i-e.mediaSequence,a=e.segments[n];if(a){if(void 0!==a.start)return{result:a.start,precise:!0};if(void 0!==a.end)return{result:a.end-a.duration,precise:!0}}for(;n--;){if(void 0!==(a=e.segments[n]).end)return{result:t+a.end,precise:!0};if(t+=a.duration,void 0!==a.start)return{result:t+a.start,precise:!0}}return{result:t,precise:!1}}(e)).precise?n.result:(a=function(e){for(var t,n=0,a=i-e.mediaSequence;a<e.segments.length;a++){if(void 0!==(t=e.segments[a]).start)return{result:t.start-n,precise:!0};if(n+=t.duration,void 0!==t.end)return{result:t.end-n,precise:!0}}return{result:-1,precise:!1}}(e)).precise?a.result:n.result+t}function lc(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return y.Infinity}return oc(e,t,n)}function cc(e,t,n){var a,i=0;if(n<t&&(t=(a=[n,t])[0],n=a[1]),t<0){for(var r=t;r<Math.min(0,n);r++)i+=e.targetDuration;t=0}for(var s=t;s<n;s++)i+=e.segments[s].duration;return i}function uc(e){if(!e.segments.length)return 0;for(var t,n=e.segments.length-1,a=(t=e.segments[n].duration||e.targetDuration)+2*e.targetDuration;n--&&!(a<=(t+=e.segments[n].duration)););return Math.max(0,n)}function hc(e,t,n){if(!e||!e.segments)return null;if(e.endList)return lc(e);if(null===t)return null;t=t||0;var a=n?uc(e):e.segments.length;return oc(e,e.mediaSequence+a,t)}function dc(e){return e-Math.floor(e)==0}function fc(e,t){if(dc(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,a=1;a<=n;a++){var i=Math.pow(10,a),r=t*i;if(dc(r)||a===n)return(r+e)/i}}function pc(e){return e.excludeUntil&&e.excludeUntil>Date.now()}function mc(e){return e.excludeUntil&&e.excludeUntil===1/0}function gc(e){var t=pc(e);return!e.disabled&&!t}function vc(e,t){return t.attributes&&t.attributes[e]}function yc(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!gc(e)&&(e.attributes.BANDWIDTH||0)<n}).length}function _c(){return function e(t,a){t=jc({timeout:45e3},t);var n,i=e.beforeRequest||Bs.Hls.xhr.beforeRequest;!i||"function"!=typeof i||(n=i(t))&&(t=n);var r=Vc(t,function(e,t){var n=r.response;!e&&n&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=n.byteLength||n.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),t.headers&&(r.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(r.timedout=!0),e||r.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(r&&(n||r.responseText)))),a(e,r)}),s=r.abort;return r.abort=function(){return r.aborted=!0,s.apply(r,arguments)},r.uri=t.uri,r.requestTime=Date.now(),r}}function bc(e){var t,n,a={};return e.byterange&&(a.Range=(t=e.byterange,n=t.offset+t.length-1,"bytes="+t.offset+"-"+n)),a}function Sc(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")}function Tc(e){return 32<=e&&e<126?String.fromCharCode(e):"."}function wc(n){var a={};return Object.keys(n).forEach(function(e){var t=n[e];ArrayBuffer.isView(t)?a[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:a[e]=t}),a}function Pc(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}function xc(e){return e.resolvedUri}function Cc(e){for(var t=Array.prototype.slice.call(e),n="",a=0;a<t.length/16;a++)n+=t.slice(16*a,16*a+16).map(Sc).join("")+" "+t.slice(16*a,16*a+16).map(Tc).join("")+"\n";return n}function Dc(e){var t=e.programTime,n=e.playlist,a=e.retryCount,i=void 0===a?2:a,r=e.seekTo,s=e.pauseAfterSeek,o=void 0===s||s,l=e.tech,c=e.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===t||!n||!r)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!l.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(e){if(e.segments&&0!==e.segments.length){for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return;return 1}}(n))return c({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var u=function(e,t){var n=void 0;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var a=t.segments[0];if(n<a.dateTimeObject)return null;for(var i=0;i<t.segments.length-1&&(a=t.segments[i],!(n<t.segments[i+1].dateTimeObject));i++);var r,s=t.segments[t.segments.length-1],o=s.dateTimeObject,l=s.videoTimingInfo?(r=s.videoTimingInfo).transmuxedPresentationEnd-r.transmuxedPresentationStart-r.transmuxerPrependedSeconds:s.duration+.25*s.duration;return new Date(o.getTime()+1e3*l)<n?null:(o<n&&(a=s),{segment:a,estimatedStart:a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationStart:Bc.duration(t,t.mediaSequence+t.segments.indexOf(a)),type:a.videoTimingInfo?"accurate":"estimate"})}(t,n);if(!u)return c({message:t+" was not found in the stream"});var h=u.segment,d=function(e,t){var n=void 0,a=void 0;try{n=new Date(e),a=new Date(t)}catch(e){}var i=n.getTime();return(a.getTime()-i)/1e3}(h.dateTimeObject,t);if("estimate"===u.type)return 0===i?c({message:t+" is not buffered yet. Try again"}):(r(u.estimatedStart+d),void l.one("seeked",function(){Dc({programTime:t,playlist:n,retryCount:i-1,seekTo:r,pauseAfterSeek:o,tech:l,callback:c})}));var f=h.start+d;l.one("seeked",function(){return c(null,l.currentTime())}),o&&l.pause(),r(f)}function Ec(e,t){var n=[],a=void 0;if(e&&e.length)for(a=0;a<e.length;a++)t(e.start(a),e.end(a))&&n.push([e.start(a),e.end(a)]);return Bs.createTimeRanges(n)}function Ac(e,n){return Ec(e,function(e,t){return e-.1<=n&&n<=t+.1})}function kc(e,t){return Ec(e,function(e){return t<=e-1/30})}function Ic(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")}function Mc(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function $c(e,t,n){var a,i=void 0;if(n&&n.cues)for(i=n.cues.length;i--;)(a=n.cues[i]).startTime<=t&&a.endTime>=e&&n.removeCue(a)}function Lc(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}function Oc(e,t,n){var i=y.WebKitDataCue||y.VTTCue;if(t&&t.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new i(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),n){var r=Lc(e.mediaSource_.duration);if(n.forEach(function(e){var a=e.cueTime+this.timestampOffset;!("number"!=typeof a||y.isNaN(a)||a<0)&&a<1/0&&e.frames.forEach(function(e){var t,n=new i(a,a,e.value||e.url||e.data||"");n.frame=e,n.value=e,t=n,Object.defineProperties(t.frame,{id:{get:function(){return Bs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return Bs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return Bs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}}),this.metadataTrack_.addCue(n)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var a=e.metadataTrack_.cues,s=[],o=0;o<a.length;o++)a[o]&&s.push(a[o]);var l=s.reduce(function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e},{}),c=Object.keys(l).sort(function(e,t){return Number(e)-Number(t)});c.forEach(function(e,t){var n=l[e],a=Number(c[t+1])||r;n.forEach(function(e){e.endTime=a})})}}}var Rc=Bs.createTimeRange,Nc=fc.bind(null,1),Fc=fc.bind(null,-1),Bc={duration:lc,seekable:function(e,t){var n=t||0,a=hc(e,t,!0);return null===a?Rc():Rc(n,a)},safeLiveIndex:uc,getMediaInfoForTime:function(e,t,n,a){var i=void 0,r=void 0,s=e.segments.length,o=t-a;if(o<0){if(0<n)for(i=n-1;0<=i;i--)if(r=e.segments[i],0<(o+=Fc(r.duration)))return{mediaIndex:i,startTime:a-cc(e,n,i)};return{mediaIndex:0,startTime:t}}if(n<0){for(i=n;i<0;i++)if((o-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(i=n;i<s;i++)if(r=e.segments[i],(o-=Nc(r.duration))<0)return{mediaIndex:i,startTime:a+cc(e,n,i)};return{mediaIndex:s-1,startTime:t}},isEnabled:gc,isDisabled:function(e){return e.disabled},isBlacklisted:pc,isIncompatible:mc,playlistEnd:hc,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:vc,estimateSegmentRequestTime:function(e,t,n,a){var i=3<arguments.length&&void 0!==a?a:0;return vc("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*i)/t:NaN},isLowestEnabledRendition:yc},Vc=Bs.xhr,jc=Bs.mergeOptions,Uc=Object.freeze({createTransferableMessage:wc,initSegmentId:Pc,segmentKeyId:xc,hexDump:Cc,tagDump:function(e){return Cc(e.bytes)},textRanges:function(e){for(var t,n,a="",i=void 0,i=0;i<e.length;i++)a+=(n=i,(t=e).start(n)+"-"+t.end(n)+" ");return a}}),Hc="undefined"!=typeof window?window:{},Gc="undefined"==typeof Symbol?"__target":Symbol(),Yc="application/javascript",qc=Hc.BlobBuilder||Hc.WebKitBlobBuilder||Hc.MozBlobBuilder||Hc.MSBlobBuilder,zc=Hc.URL||Hc.webkitURL||zc&&zc.msURL,Wc=Hc.Worker;function Kc(s,o){return function(e){var t,n,a=this;if(!o)return new Wc(s);if(Wc&&!e){var i=Zc(o.toString().replace(/^function.+?{/,"").slice(0,-1));return this[Gc]=new Wc(i),(t=this[Gc])&&i&&(n=t.terminate,t.objURL=i,t.terminate=function(){t.objURL&&zc.revokeObjectURL(t.objURL),n.call(t)}),this[Gc]}var r={postMessage:function(e){a.onmessage&&setTimeout(function(){a.onmessage({data:e,target:r})})}};o.call(r),this.postMessage=function(e){setTimeout(function(){r.onmessage({data:e,target:a})})},this.isThisThread=!0}}if(Wc){var Xc,Qc=Zc("self.onmessage = function () {}"),Jc=new Uint8Array(1);try{(Xc=new Wc(Qc)).postMessage(Jc,[Jc.buffer])}catch(e){Wc=null}finally{zc.revokeObjectURL(Qc),Xc&&Xc.terminate()}}function Zc(t){try{return zc.createObjectURL(new Blob([t],{type:Yc}))}catch(e){var n=new qc;return n.append(t),zc.createObjectURL(n.getBlob(type))}}function eu(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})}function tu(e){var t,n=0<arguments.length&&void 0!==e?e:"",a={codecCount:0};return a.codecCount=n.split(",").length,a.codecCount=a.codecCount||2,(t=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(n))&&(a.videoCodec=t[2],a.videoObjectTypeIndicator=t[3]),a.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(n),a.audioProfile=a.audioProfile&&a.audioProfile[2],a}function nu(e,t,n){return e+"/"+t+'; codecs="'+n.filter(function(e){return!!e}).join(", ")+'"'}function au(e){return/mp4a\.\d+.\d+/i.test(e)}function iu(e){return/avc1\.[\da-f]+/i.test(e)}var ru=new Kc("./transmuxer-worker.worker.js",function(e,t){var Qe=this;!function(){function e(){this.init=function(){var r={};this.on=function(e,t){r[e]||(r[e]=[]),r[e]=r[e].concat(t)},this.off=function(e,t){var n;return!!r[e]&&(n=r[e].indexOf(t),r[e]=r[e].slice(),r[e].splice(n,1),-1<n)},this.trigger=function(e){var t,n,a,i;if(t=r[e])if(2===arguments.length)for(a=t.length,n=0;n<a;++n)t[n].call(this,arguments[1]);else{for(i=[],n=arguments.length,n=1;n<arguments.length;++n)i.push(arguments[n]);for(a=t.length,n=0;n<a;++n)t[n].apply(this,i)}},this.dispose=function(){r={}}}}e.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var c,t,n,d,i,a,r,f,s,o,l,u,h,p,m,g,v,y,_,b,S,T,w,P,x,C,D,E,A,k,I,M,$,L,O,R,N,F,B,V,j=e,U=Math.pow(2,32)-1;function H(e){for(var t=[];e--;)t.push(0);return t}function G(){G.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new le(0,0),new le(0,1),new le(1,0),new le(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)}!function(){if(T={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var e in T)T.hasOwnProperty(e)&&(T[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);w=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),x=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),P=new Uint8Array([0,0,0,1]),C=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),D=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),E={video:C,audio:D},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0]),M=new Uint8Array([0,0,0,0,0,0,0,0]),$=M,L=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),O=M,A=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),c=function(e){for(var t,n=[],a=0,i=1;i<arguments.length;i++)n.push(arguments[i]);for(i=n.length;i--;)a+=n[i].byteLength;for(t=new Uint8Array(a+8),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(0,t.byteLength),t.set(e,4),i=0,a=8;i<n.length;i++)t.set(n[i],a),a+=n[i].byteLength;return t},t=function(){return c(T.dinf,c(T.dref,I))},n=function(e){return c(T.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},m=function(e){return c(T.hdlr,E[e])},p=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),c(T.mdhd,t)},h=function(e){return c(T.mdia,p(e),m(e.type),a(e))},i=function(e){return c(T.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},a=function(e){return c(T.minf,"video"===e.type?c(T.vmhd,A):c(T.smhd,k),t(),v(e))},r=function(e,t){for(var n=[],a=t.length;a--;)n[a]=_(t[a]);return c.apply(null,[T.moof,i(e)].concat(n))},f=function(e){for(var t=e.length,n=[];t--;)n[t]=l(e[t]);return c.apply(null,[T.moov,o(4294967295)].concat(n).concat(s(e)))},s=function(e){for(var t=e.length,n=[];t--;)n[t]=b(e[t]);return c.apply(null,[T.mvex].concat(n))},o=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return c(T.mvhd,t)},g=function(e){for(var t,n=e.samples||[],a=new Uint8Array(4+n.length),i=0;i<n.length;i++)t=n[i].flags,a[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return c(T.sdtp,a)},v=function(e){return c(T.stbl,y(e),c(T.stts,O),c(T.stsc,$),c(T.stsz,L),c(T.stco,M))},y=function(e){return c(T.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===e.type?R:N)(e))},R=function(e){for(var t=e.sps||[],n=e.pps||[],a=[],i=[],r=0;r<t.length;r++)a.push((65280&t[r].byteLength)>>>8),a.push(255&t[r].byteLength),a=a.concat(Array.prototype.slice.call(t[r]));for(r=0;r<n.length;r++)i.push((65280&n[r].byteLength)>>>8),i.push(255&n[r].byteLength),i=i.concat(Array.prototype.slice.call(n[r]));var s,o,l=[T.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c(T.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([t.length],a,[n.length],i))),c(T.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];return e.sarRatio&&(s=e.sarRatio[0],o=e.sarRatio[1],l.push(c(T.pasp,new Uint8Array([(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s,(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o])))),c.apply(null,l)},N=function(e){return c(T.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),n(e))},u=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return c(T.tkhd,t)},_=function(e){var t,n,a=c(T.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),i=Math.floor(e.baseMediaDecodeTime/(1+U)),r=Math.floor(e.baseMediaDecodeTime%(1+U)),s=c(T.tfdt,new Uint8Array([1,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r]));return"audio"===e.type?(t=S(e,92),c(T.traf,a,s,t)):(n=g(e),t=S(e,n.length+92),c(T.traf,a,s,t,n))},l=function(e){return e.duration=e.duration||4294967295,c(T.trak,u(e),h(e))},b=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),c(T.trex,t)},V=function(e,t){var n=0,a=0,i=0,r=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(a=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(r=8)),[0,0,n|a|i|r,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(e,t){var n,a,i,r;for(t+=20+16*(a=e.samples||[]).length,n=V(a,t),r=0;r<a.length;r++)i=a[r],n=n.concat([(4278190080&i.duration)>>>24,(16711680&i.duration)>>>16,(65280&i.duration)>>>8,255&i.duration,(4278190080&i.size)>>>24,(16711680&i.size)>>>16,(65280&i.size)>>>8,255&i.size,i.flags.isLeading<<2|i.flags.dependsOn,i.flags.isDependedOn<<6|i.flags.hasRedundancy<<4|i.flags.paddingValue<<1|i.flags.isNonSyncSample,61440&i.flags.degradationPriority,15&i.flags.degradationPriority,(4278190080&i.compositionTimeOffset)>>>24,(16711680&i.compositionTimeOffset)>>>16,(65280&i.compositionTimeOffset)>>>8,255&i.compositionTimeOffset]);return c(T.trun,new Uint8Array(n))},F=function(e,t){var n,a,i,r;for(t+=20+8*(a=e.samples||[]).length,n=V(a,t),r=0;r<a.length;r++)i=a[r],n=n.concat([(4278190080&i.duration)>>>24,(16711680&i.duration)>>>16,(65280&i.duration)>>>8,255&i.duration,(4278190080&i.size)>>>24,(16711680&i.size)>>>16,(65280&i.size)>>>8,255&i.size]);return c(T.trun,new Uint8Array(n))},S=function(e,t){return("audio"===e.type?F:B)(e,t)},d=function(){return c(T.ftyp,w,P,w,x)};function Y(e){return c(T.mdat,e)}function q(e,t,n){return Q(n?e:e-t)}function z(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts}function W(e,t){var n,a=e.minSegmentDts;return t||(a-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=a,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n}function K(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}var X,Q,J=r,Z=[33,16,5,32,164,27],ee=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],te={96e3:[Z,[227,64],H(154),[56]],88200:[Z,[231],H(170),[56]],64e3:[Z,[248,192],H(240),[56]],48e3:[Z,[255,192],H(268),[55,148,128],H(54),[112]],44100:[Z,[255,192],H(268),[55,163,128],H(84),[112]],32e3:[Z,[255,192],H(268),[55,234],H(226),[112]],24e3:[Z,[255,192],H(268),[55,255,128],H(268),[111,112],H(126),[224]],16e3:[Z,[255,192],H(268),[55,255,128],H(268),[111,255],H(269),[223,108],H(195),[1,192]],12e3:[ee,H(268),[3,127,248],H(268),[6,255,240],H(268),[13,255,224],H(268),[27,253,128],H(259),[56]],11025:[ee,H(268),[3,127,248],H(268),[6,255,240],H(268),[13,255,224],H(268),[27,255,192],H(268),[55,175,128],H(108),[112]],8e3:[ee,H(268),[3,121,16],H(47),[7]]},ne=(X=te,Object.keys(X).reduce(function(e,t){return e[t]=new Uint8Array(X[t].reduce(function(e,t){return e.concat(t)},[])),e},{})),ae=(Q=function(e){return e/9e4},function(e,t){return e/t*9e4});function ie(e){return null===e?"":(e=se[e]||e,String.fromCharCode(e))}function re(){for(var e=[],t=15;t--;)e.push("");return e}(G.prototype=new j).push=function(e){var t,n,a,i;if("sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},a=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)a+=255,t++;for(a+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===a){n.payloadType=a,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}t+=i,i=a=0}return n}(e.escapedRBSP)).payloadType&&(n=181!==(i=t).payload[0]||49!=(i.payload[1]<<8|i.payload[2])||"GA94"!==String.fromCharCode(i.payload[3],i.payload[4],i.payload[5],i.payload[6])||3!==i.payload[7]?null:i.payload.subarray(8,i.payload.length-1)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));a=function(e,t){var n,a,i,r,s=[];if(!(64&t[0]))return s;for(a=31&t[0],n=0;n<a;n++)r={type:3&t[2+(i=3*n)],pts:e},4&t[2+i]&&(r.ccData=t[3+i]<<8|t[4+i],s.push(r));return s}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(a),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},G.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},G.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},G.prototype.flush=function(){return this.flushStream("flush")},G.prototype.partialFlush=function(){return this.flushStream("partialFlush")},G.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},G.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},G.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},G.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},G.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var se={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},oe=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],le=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,a,i,r,s;(t=32639&e.ccData)!==this.lastControlCode_?(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),a=t>>>8,i=255&t,t!==this.PADDING_&&(t===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":t===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts):t===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(e.pts)):t===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(e.pts)):t===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(e.pts)):t===this.CARRIAGE_RETURN_?(this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts):t===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):t===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(e.pts),this.displayed_=re()):t===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=re():t===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=re()),this.mode_="paintOn",this.startPts_=e.pts):this.isSpecialCharacter(a,i)?(r=ie((a=(3&a)<<8)|i),this[this.mode_](e.pts,r),this.column_++):this.isExtCharacter(a,i)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),r=ie((a=(3&a)<<8)|i),this[this.mode_](e.pts,r),this.column_++):this.isMidRowCode(a,i)?(this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"])):this.isOffsetControlCode(a,i)?this.column_+=3&i:this.isPAC(a,i)?(s=oe.indexOf(7968&t),"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])):this.isNormalChar(a)&&(0===i&&(i=null),r=ie(a),r+=ie(i),this[this.mode_](e.pts,r),this.column_+=r.length))):this.lastControlCode_=null}};function ce(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function ue(e){var t,n;ue.prototype.init.call(this),this.type_=e||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=ce(e.dts,n),e.pts=ce(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){t=n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}le.prototype=new j,le.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},le.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=re(),this.nonDisplayed_=re(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},le.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},le.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},le.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},le.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},le.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},le.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},le.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},le.prototype.isNormalChar=function(e){return 32<=e&&e<=127},le.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=re(),this.displayed_=re()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},le.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},le.prototype.clearFormatting=function(e){var t;this.formatting_.length&&(t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},""),this.formatting_=[],this[this.mode_](e,t))},le.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},le.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},le.prototype.shiftRowsUp_=function(){for(var e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},le.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var he={CaptionStream:G,Cea608Stream:le},de={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};function fe(e,t,n){for(var a="",i=t;i<n;i++)a+="%"+("00"+e[i].toString(16)).slice(-2);return a}function pe(e,t,n){return decodeURIComponent(fe(e,t,n))}function me(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}ue.prototype=new j;var ge,ve=ue,ye={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=pe(e.data,1,t),e.value=pe(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=pe(e.data,1,t),e.url=pe(e.data,t+1,e.data.length);break}},PRIV:function(e){for(var t,n=0;n<e.data.length;n++)if(0===e.data[n]){e.owner=(t=e.data,unescape(fe(t,0,n)));break}e.privateData=e.data.subarray(n+1),e.data=e.privateData}};(ge=function(e){var t,l={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},c=0,u=[],h=0;if(ge.prototype.init.call(this),this.dispatchType=de.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(t=0;t<l.descriptor.length;t++)this.dispatchType+=("00"+l.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,a,i,r,s,o;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(h=0,u.length=0),0===u.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))l.debug;else if(u.push(e),h+=e.data.byteLength,1===u.length&&(c=me(e.data.subarray(6,10)),c+=10),!(h<c)){for(t={data:new Uint8Array(c),frames:[],pts:u[0].pts,dts:u[0].dts},r=0;r<c;)t.data.set(u[0].data.subarray(0,c-r),r),r+=u[0].data.byteLength,h-=u[0].data.byteLength,u.shift();n=10,64&t.data[5]&&(n+=4,n+=me(t.data.subarray(10,14)),c-=me(t.data.subarray(16,20)));do{if((a=me(t.data.subarray(n+4,n+8)))<1)return;(i={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+a+10)}).key=i.id,ye[i.id]&&(ye[i.id](i),"com.apple.streaming.transportStreamTimestamp"===i.owner)&&(o=(1&(s=i.data)[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2,o*=4,o+=3&s[7],i.timeStamp=o,void 0===t.pts&&void 0===t.dts&&(t.pts=i.timeStamp,t.dts=i.timeStamp),this.trigger("timestamp",i)),t.frames.push(i),n+=10,n+=a}while(n<c);this.trigger("data",t)}}}).prototype=new j;var _e,be,Se,Te=ge,we=ve;(_e=function(){var i=new Uint8Array(188),r=0;_e.prototype.init.call(this),this.push=function(e){var t,n=0,a=188;for(r?((t=new Uint8Array(e.byteLength+r)).set(i.subarray(0,r)),t.set(e,r),r=0):t=e;a<t.byteLength;)71!==t[n]||71!==t[a]?(n++,a++):(this.trigger("data",t.subarray(n,a)),n+=188,a+=188);n<t.byteLength&&(i.set(t.subarray(n),0),r=t.byteLength-n)},this.flush=function(){188===r&&71===i[0]&&(this.trigger("data",i),r=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){r=0,this.trigger("reset")}}).prototype=new j,(be=function(){var a,i,r,s;be.prototype.init.call(this),(s=this).packetsWaitingForPmt=[],this.programMapTable=void 0,a=function(e,t){var n=0;t.payloadUnitStartIndicator&&(n+=e[n]+1),("pat"===t.type?i:r)(e.subarray(n),t)},i=function(e,t){t.section_number=e[7],t.last_section_number=e[8],s.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=s.pmtPid},r=function(e,t){var n,a;if(1&e[5]){for(s.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,a=12+((15&e[10])<<8|e[11]);a<n;){var i=e[a],r=(31&e[a+1])<<8|e[a+2];i===de.H264_STREAM_TYPE&&null===s.programMapTable.video?s.programMapTable.video=r:i===de.ADTS_STREAM_TYPE&&null===s.programMapTable.audio?s.programMapTable.audio=r:i===de.METADATA_STREAM_TYPE&&(s.programMapTable["timed-metadata"][r]=i),a+=5+((15&e[a+3])<<8|e[a+4])}t.programMapTable=s.programMapTable}},this.push=function(e){var t={},n=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(n+=e[n]+1),0===t.pid)t.type="pat",a(e.subarray(n),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",a(e.subarray(n),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,t]):this.processPes_(e,n,t)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=de.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=de.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new j,be.STREAM_TYPES={h264:27,adts:15},(Se=function(){function a(e,t,n){var a,i,r,s,o,l=new Uint8Array(e.size),c={type:t},u=0,h=0;if(e.data.length&&!(e.size<9)){for(c.trackId=e.data[0].pid,u=0;u<e.data.length;u++)i=e.data[u],l.set(i.data,h),h+=i.data.byteLength;r=l,(s=c).packetLength=6+(r[4]<<8|r[5]),s.dataAlignmentIndicator=0!=(4&r[6]),192&(o=r[7])&&(s.pts=(14&r[9])<<27|(255&r[10])<<20|(254&r[11])<<12|(255&r[12])<<5|(254&r[13])>>>3,s.pts*=4,s.pts+=(6&r[13])>>>1,s.dts=s.pts,64&o&&(s.dts=(14&r[14])<<27|(255&r[15])<<20|(254&r[16])<<12|(255&r[17])<<5|(254&r[18])>>>3,s.dts*=4,s.dts+=(6&r[18])>>>1)),s.data=r.subarray(9+r[8]),a="video"===t||c.packetLength<=e.size,(n||a)&&(e.size=0,e.data.length=0),a&&d.trigger("data",c)}}var t,d=this,i={data:[],size:0},r={data:[],size:0},s={data:[],size:0};Se.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var e,t;switch(n.streamType){case de.H264_STREAM_TYPE:case de.H264_STREAM_TYPE:e=i,t="video";break;case de.ADTS_STREAM_TYPE:e=r,t="audio";break;case de.METADATA_STREAM_TYPE:e=s,t="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(n),e.size+=n.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=n.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),d.trigger("data",e)}})[n.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(i,"video"),a(r,"audio"),a(s,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new j;var Pe,xe={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:_e,TransportParseStream:be,ElementaryStream:Se,TimestampRolloverStream:we,CaptionStream:he.CaptionStream,Cea608Stream:he.Cea608Stream,MetadataStream:Te};for(Pe in de)de.hasOwnProperty(Pe)&&(xe[Pe]=de[Pe]);var Ce,De=xe,Ee=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Ce=function(l){var c,u=0;Ce.prototype.init.call(this),this.push=function(e){var t,n,a,i,r,s,o=0;if(l||(u=0),"audio"===e.type)for(c?(i=c,(c=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),c.set(e.data,i.byteLength)):c=e.data;o+5<c.length;)if(255===c[o]&&240==(246&c[o+1])){if(n=2*(1&~c[o+1]),t=(3&c[o+3])<<11|c[o+4]<<3|(224&c[o+5])>>5,s=9e4*(r=1024*(1+(3&c[o+6])))/Ee[(60&c[o+2])>>>2],a=o+t,c.byteLength<a)return;if(this.trigger("data",{pts:e.pts+u*s,dts:e.dts+u*s,sampleCount:r,audioobjecttype:1+(c[o+2]>>>6&3),channelcount:(1&c[o+2])<<2|(192&c[o+3])>>>6,samplerate:Ee[(60&c[o+2])>>>2],samplingfrequencyindex:(60&c[o+2])>>>2,samplesize:16,data:c.subarray(o+7+n,a)}),u++,c.byteLength===a)return void(c=void 0);c=c.subarray(a)}else o++},this.flush=function(){u=0,this.trigger("done")},this.reset=function(){c=void 0,this.trigger("reset")},this.endTimeline=function(){c=void 0,this.trigger("endedtimeline")}}).prototype=new j;function Ae(a){var i=a.byteLength,r=0,s=0;this.length=function(){return 8*i},this.bitsAvailable=function(){return 8*i+s},this.loadWord=function(){var e=a.byteLength-i,t=new Uint8Array(4),n=Math.min(4,i);if(0===n)throw new Error("no bytes available");t.set(a.subarray(e,e+n)),r=new DataView(t.buffer).getUint32(0),s=8*n,i-=n},this.skipBits=function(e){var t;e<s||(e-=s,e-=8*(t=Math.floor(e/8)),i-=t,this.loadWord()),r<<=e,s-=e},this.readBits=function(e){var t=Math.min(s,e),n=r>>>32-t;return 0<(s-=t)?r<<=t:0<i&&this.loadWord(),0<(t=e-t)?n<<t|this.readBits(t):n},this.skipLeadingZeros=function(){for(var e=0;e<s;++e)if(0!=(r&2147483648>>>e))return r<<=e,s-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()}var ke,Ie,Me,$e=Ce;(Ie=function(){var a,i,r=0;Ie.prototype.init.call(this),this.push=function(e){for(var t,n=(i=i?((t=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),t.set(e.data,i.byteLength),t):e.data).byteLength;r<n-3;r++)if(1===i[r+2]){a=r+5;break}for(;a<n;)switch(i[a]){case 0:if(0!==i[a-1]){a+=2;break}if(0!==i[a-2]){a++;break}for(r+3!==a-2&&this.trigger("data",i.subarray(r+3,a-2));1!==i[++a]&&a<n;);r=a-2,a+=3;break;case 1:if(0!==i[a-1]||0!==i[a-2]){a+=3;break}this.trigger("data",i.subarray(r+3,a-2)),r=a-2,a+=3;break;default:a+=3}i=i.subarray(r),a-=r,r=0},this.reset=function(){i=null,r=0,this.trigger("reset")},this.flush=function(){i&&3<i.byteLength&&this.trigger("data",i.subarray(r+3)),i=null,r=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new j,Me={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(ke=function(){var n,a,i,r,s,o,_,t=new Ie;ke.prototype.init.call(this),(n=this).push=function(e){"video"===e.type&&(a=e.trackId,i=e.pts,r=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:a,pts:i,dts:r,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=s(e.subarray(1)),t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",t)}),t.on("done",function(){n.trigger("done")}),t.on("partialdone",function(){n.trigger("partialdone")}),t.on("reset",function(){n.trigger("reset")}),t.on("endedtimeline",function(){n.trigger("endedtimeline")}),this.flush=function(){t.flush()},this.partialFlush=function(){t.partialFlush()},this.reset=function(){t.reset()},this.endTimeline=function(){t.endTimeline()},_=function(e,t){for(var n=8,a=8,i=0;i<e;i++)0!==a&&(a=(n+t.readExpGolomb()+256)%256),n=0===a?n:a},s=function(e){for(var t,n,a=e.byteLength,i=[],r=1;r<a-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(i.push(r+2),r+=2):r++;if(0===i.length)return e;t=a-i.length,n=new Uint8Array(t);for(var s=0,r=0;r<t;s++,r++)s===i[0]&&(s++,i.shift()),n[r]=e[s];return n},o=function(e){var t,n,a,i,r,s,o,l,c,u,h=0,d=0,f=0,p=0,m=1,g=(t=new Ae(e)).readUnsignedByte(),v=t.readUnsignedByte(),y=t.readUnsignedByte();if(t.skipUnsignedExpGolomb(),Me[g]&&(3===(n=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(l=3!==n?8:12,u=0;u<l;u++)t.readBoolean()&&_(u<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(a=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===a)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),i=t.readUnsignedExpGolomb(),u=0;u<i;u++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),r=t.readUnsignedExpGolomb(),s=t.readUnsignedExpGolomb(),0===(o=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(h=t.readUnsignedExpGolomb(),d=t.readUnsignedExpGolomb(),f=t.readUnsignedExpGolomb(),p=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:c=[1,1];break;case 2:c=[12,11];break;case 3:c=[10,11];break;case 4:c=[16,11];break;case 5:c=[40,33];break;case 6:c=[24,11];break;case 7:c=[20,11];break;case 8:c=[32,11];break;case 9:c=[80,33];break;case 10:c=[18,11];break;case 11:c=[15,11];break;case 12:c=[64,33];break;case 13:c=[160,99];break;case 14:c=[4,3];break;case 15:c=[3,2];break;case 16:c=[2,1];break;case 255:c=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}c&&(m=c[0]/c[1])}return{profileIdc:g,levelIdc:y,profileCompatibility:v,width:Math.ceil((16*(r+1)-2*h-2*d)*m),height:(2-o)*(s+1)*16-2*f-2*p,sarRatio:c}}}).prototype=new j;var Le,Oe={H264Stream:ke,NalByteStream:Ie};function Re(e,t){var n;if(e.length===t.length){for(n=0;n<e.length;n++)if(e[n]!==t[n])return;return 1}}function Ne(e,t,n,a,i,r){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(a-t),pts:e+(i-n)},prependedContentDuration:r,baseMediaDecodeTime:e}}(Le=function(){var p=new Uint8Array,m=0;Le.prototype.init.call(this),this.setTimestamp=function(e){m=e},this.push=function(e){var t,n,a,i,r,s,o,l,c,u,h,d=0,f=0;for(p.length?(i=p.length,(p=new Uint8Array(e.byteLength+i)).set(p.subarray(0,i)),p.set(e,i)):p=e;3<=p.length-f;)if(p[f]!=="I".charCodeAt(0)||p[f+1]!=="D".charCodeAt(0)||p[f+2]!=="3".charCodeAt(0))if(255!=(255&p[f])||240!=(240&p[f+1]))f++;else{if(p.length-f<7)break;if(f+(h=u=void 0,u=(224&(l=p)[(c=f)+5])>>5,h=l[c+4]<<3,d=6144&l[c+3]|h|u)>p.length)break;a={type:"audio",data:p.subarray(f,f+d),pts:m,dts:m},this.trigger("data",a),f+=d}else{if(p.length-f<10)break;if(f+(o=void 0,o=(r=p)[(s=f)+6]<<21|r[s+7]<<14|r[s+8]<<7|r[s+9],d=(16&r[s+5])>>4?20+o:10+o)>p.length)break;n={type:"timed-metadata",data:p.subarray(f,f+d)},this.trigger("data",n),f+=d}t=p.length-f,p=0<t?p.subarray(f):new Uint8Array},this.reset=function(){p=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){p=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new j;var Fe,Be,Ve,je,Ue=Le,He=Oe.H264Stream,Ge=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},Ye=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],qe=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"];(Be=function(l,c){var u=[],h=0,d=0,f=0,p=1/0;c=c||{},Be.prototype.init.call(this),this.push=function(t){K(l,t),l&&Ye.forEach(function(e){l[e]=t[e]}),u.push(t)},this.setEarliestDts=function(e){d=e-l.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){p=e},this.setAudioAppendStart=function(e){f=e},this.flush=function(){var e,t,n,a,i,r,s,o;0!==u.length&&(r=u,o=d,e=(s=l).minSegmentDts>=o?r:(s.minSegmentDts=1/0,r.filter(function(e){return e.dts>=o&&(s.minSegmentDts=Math.min(s.minSegmentDts,e.dts),s.minSegmentPts=s.minSegmentDts,!0)})),l.baseMediaDecodeTime=W(l,c.keepOriginalTimestamps),function(e,t,n,a){var i,r,s,o,l,c,u=0,h=0;if(t.length&&(i=ae(e.baseMediaDecodeTime,e.samplerate),r=Math.ceil(9e4/(e.samplerate/1024)),n&&a&&(c=i-Math.max(n,a),h=(u=Math.floor(c/r))*r),!(u<1||45e3<h))){for(s=ne[e.samplerate]||t[0].data,o=0;o<u;o++)l=t[0],t.splice(0,0,{data:s,dts:l.dts-r,pts:l.pts-r});e.baseMediaDecodeTime-=Math.floor(h/9e4*e.samplerate)}}(l,e,f,p),l.samples=function(e){for(var t,n=[],a=0;a<e.length;a++)t=e[a],n.push({size:t.data.byteLength,duration:1024});return n}(e),n=Y(function(e){for(var t,n=0,a=new Uint8Array(function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].data.byteLength;return t}(e)),i=0;i<e.length;i++)t=e[i],a.set(t.data,n),n+=t.data.byteLength;return a}(e)),u=[],t=J(h,[l]),a=new Uint8Array(t.byteLength+n.byteLength),h++,a.set(t),a.set(n,t.byteLength),z(l),i=Math.ceil(9216e4/l.samplerate),e.length&&this.trigger("timingInfo",{start:e[0].dts,end:e[0].dts+e.length*i}),this.trigger("data",{track:l,boxes:a})),this.trigger("done","AudioSegmentStream")},this.reset=function(){z(l),u=[],this.trigger("reset")}}).prototype=new j,(Fe=function(h,d){var t,n,f=0,p=[],m=[];d=d||{},Fe.prototype.init.call(this),delete h.minPTS,this.gopCache_=[],this.push=function(e){K(h,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,h.sps=[e.data],qe.forEach(function(e){h[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,h.pps=[e.data]),p.push(e)},this.flush=function(){for(var e,t,n,a,i,r,s,o,l,c,u=0;p.length&&"access_unit_delimiter_rbsp"!==p[0].nalUnitType;)p.shift();if(0===p.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if((t=function(e){var t,n,a=[],i=[];for(a.byteLength=0,a.nalCount=0,a.duration=0,a.pts=e[0].pts,a.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(a.length&&(i.push(a),i.byteLength+=a.byteLength,i.nalCount+=a.nalCount,i.duration+=a.duration),(a=[n]).nalCount=n.length,a.byteLength=n.byteLength,a.pts=n.pts,a.dts=n.dts,a.duration=n.duration):(a.duration+=n.duration,a.nalCount+=n.length,a.byteLength+=n.byteLength,a.push(n));return i.length&&a.duration<=0&&(a.duration=i[i.length-1].duration),i.byteLength+=a.byteLength,i.nalCount+=a.nalCount,i.duration+=a.duration,i.push(a),i}(function(e){var t,n,a=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,t=a.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(a.length&&(a.duration=n.dts-a.dts,i.byteLength+=a.byteLength,i.nalCount+=a.length,i.duration+=a.duration,i.push(a)),(a=[n]).byteLength=n.data.byteLength,a.pts=n.pts,a.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(a.keyFrame=!0),a.duration=n.dts-a.dts,a.byteLength+=n.data.byteLength,a.push(n));return i.length&&(!a.duration||a.duration<=0)&&(a.duration=i[i.length-1].duration),i.byteLength+=a.byteLength,i.nalCount+=a.length,i.duration+=a.duration,i.push(a),i}(p)))[0][0].keyFrame||((e=this.getGopForFusion_(p[0],h))?(u=e.duration,t.unshift(e),t.byteLength+=e.byteLength,t.nalCount+=e.nalCount,t.pts=e.pts,t.dts=e.dts,t.duration+=e.duration):(!(l=t)[0][0].keyFrame&&1<l.length&&(c=l.shift(),l.byteLength-=c.byteLength,l.nalCount-=c.nalCount,l[0][0].dts=c.dts,l[0][0].pts=c.pts,l[0][0].duration+=c.duration),t=l)),m.length){if(!(o=d.alignGopsAtEnd?this.alignGopsAtEnd_(t):this.alignGopsAtStart_(t)))return this.gopCache_.unshift({gop:t.pop(),pps:h.pps,sps:h.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),p=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");z(h),t=o}K(h,t),h.samples=function(e,t){for(var n,a,i,r,s,o=t||0,l=[],c=0;c<e.length;c++)for(a=e[c],n=0;n<a.length;n++)i=a[n],o+=(r=i,s=void 0,(s={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=o,s.compositionTimeOffset=r.pts-r.dts,s.duration=r.duration,s.size=4*r.length,s.size+=r.byteLength,r.keyFrame&&(s.flags.dependsOn=2,s.flags.isNonSyncSample=0),s.size),l.push(s);return l}(t),a=Y(function(e){for(var t,n,a,i,r,s=0,o=e.byteLength,l=e.nalCount,c=new Uint8Array(o+4*l),u=new DataView(c.buffer),h=0;h<e.length;h++)for(a=e[h],t=0;t<a.length;t++)for(i=a[t],n=0;n<i.length;n++)r=i[n],u.setUint32(s,r.data.byteLength),s+=4,c.set(r.data,s),s+=r.data.byteLength;return c}(t)),h.baseMediaDecodeTime=W(h,d.keepOriginalTimestamps),this.trigger("processedGopsInfo",t.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),r=t[0],s=t[t.length-1],this.trigger("segmentTimingInfo",Ne(h.baseMediaDecodeTime,r.dts,r.pts,s.dts+s.duration,s.pts+s.duration,u)),this.trigger("timingInfo",{start:t[0].dts,end:t[t.length-1].dts+t[t.length-1].duration}),this.gopCache_.unshift({gop:t.pop(),pps:h.pps,sps:h.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),p=[],this.trigger("baseMediaDecodeTime",h.baseMediaDecodeTime),this.trigger("timelineStartInfo",h.timelineStartInfo),n=J(f,[h]),i=new Uint8Array(n.byteLength+a.byteLength),f++,i.set(n),i.set(a,n.byteLength),this.trigger("data",{track:h,boxes:i}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),p=[],this.gopCache_.length=0,m.length=0,this.trigger("reset")},this.resetStream_=function(){z(h),n=t=void 0},this.getGopForFusion_=function(e){for(var t,n,a,i,r=1/0,s=0;s<this.gopCache_.length;s++)a=(i=this.gopCache_[s]).gop,h.pps&&Re(h.pps[0],i.pps[0])&&h.sps&&Re(h.sps[0],i.sps[0])&&(a.dts<h.timelineStartInfo.dts||-1e4<=(t=e.dts-a.dts-a.duration)&&t<=45e3&&(!n||t<r)&&(n=i,r=t));return n?n.gop:null},this.alignGopsAtStart_=function(e){for(var t,n,a,i,r=e.byteLength,s=e.nalCount,o=e.duration,l=t=0;l<m.length&&t<e.length&&(n=m[l],a=e[t],n.pts!==a.pts);)a.pts>n.pts?l++:(t++,r-=a.byteLength,s-=a.nalCount,o-=a.duration);return 0===t?e:t===e.length?null:((i=e.slice(t)).byteLength=r,i.duration=o,i.nalCount=s,i.pts=i[0].pts,i.dts=i[0].dts,i)},this.alignGopsAtEnd_=function(e){for(var t,n,a,i=m.length-1,r=e.length-1,s=null,o=!1;0<=i&&0<=r;){if(t=m[i],n=e[r],t.pts===n.pts){o=!0;break}t.pts>n.pts?i--:(i===m.length-1&&(s=r),r--)}if(!o&&null===s)return null;if(0===(a=o?r:s))return e;var l=e.slice(a),c=l.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){m=e}}).prototype=new j,(je=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,je.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new j,je.prototype.flush=function(e){var t,n,a,i,r,s,o,l,c=0,u={captions:[],captionStreams:{},metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,qe.forEach(function(e){u.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,Ye.forEach(function(e){u.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?u.type=this.pendingTracks[0].type:u.type="combined",this.emittedTracks+=this.pendingTracks.length,r=this.pendingTracks,o=d(),l=f(r),(s=new Uint8Array(o.byteLength+l.byteLength)).set(o),s.set(l,o.byteLength),a=s,u.initSegment=new Uint8Array(a.byteLength),u.initSegment.set(a),u.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)u.data.set(this.pendingBoxes[i],c),c+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=q(t.startPts,h,this.keepOriginalTimestamps),t.endTime=q(t.endPts,h,this.keepOriginalTimestamps),u.captionStreams[t.stream]=!0,u.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=q(n.pts,h,this.keepOriginalTimestamps),u.metadata.push(n);for(u.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",u),i=0;i<u.captions.length;i++)t=u.captions[i],this.trigger("caption",t);for(i=0;i<u.metadata.length;i++)n=u.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},je.prototype.setRemux=function(e){this.remuxTracks=e},(Ve=function(a){var i,r,s=this,n=!0;Ve.prototype.init.call(this),a=a||{},this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new De.MetadataStream,t.aacStream=new Ue,t.audioTimestampRolloverStream=new De.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new De.TimestampRolloverStream("timed-metadata"),t.adtsStream=new $e,t.coalesceStream=new je(a,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(r=r||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new Be(r,a),t.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream)),s.trigger("trackinfo",{hasAudio:!!r,hasVideo:!!i})}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new De.MetadataStream,n.packetStream=new De.TransportPacketStream,n.parseStream=new De.TransportParseStream,n.elementaryStream=new De.ElementaryStream,n.timestampRolloverStream=new De.TimestampRolloverStream,n.adtsStream=new $e,n.h264Stream=new He,n.captionStream=new De.CaptionStream,n.coalesceStream=new je(a,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream).pipe(n.timestampRolloverStream),n.timestampRolloverStream.pipe(n.h264Stream),n.timestampRolloverStream.pipe(n.adtsStream),n.timestampRolloverStream.pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)i||"video"!==e.tracks[t].type?r||"audio"!==e.tracks[t].type||((r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(i=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime;i&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new Fe(i,a),n.videoSegmentStream.on("timelineStartInfo",function(e){r&&(r.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts))}),n.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),n.videoSegmentStream.on("segmentTimingInfo",s.trigger.bind(s,"videoSegmentTimingInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(e){r&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),n.videoSegmentStream.on("timingInfo",s.trigger.bind(s,"videoTimingInfo")),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),r&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new Be(r,a),n.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream)),s.trigger("trackinfo",{hasAudio:!!r,hasVideo:!!i})}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("id3Frame",function(e){e.dispatchType=n.metadataStream.dispatchType,s.trigger("id3Frame",e)}),n.coalesceStream.on("caption",this.trigger.bind(this,"caption")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),r&&(r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,z(r),a.keepOriginalTimestamps||(r.timelineStartInfo.baseMediaDecodeTime=e),t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),i&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[]),i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,z(i),t.captionStream.reset(),a.keepOriginalTimestamps||(i.timelineStartInfo.baseMediaDecodeTime=e)),t.timestampRolloverStream&&t.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){r&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(e){var t=this.transmuxPipeline_;a.remux=e,t&&t.coalesceStream&&t.coalesceStream.setRemux(e)},this.alignGopsWith=function(e){i&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){var t;n&&((t=Ge(e))&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1),this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new j;var ze={Transmuxer:Ve,VideoSegmentStream:Fe,AudioSegmentStream:Be,AUDIO_PROPERTIES:Ye,VIDEO_PROPERTIES:qe,generateVideoSegmentTimingInfo:Ne};function We(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ke=(We(Xe.prototype,[{key:"init",value:function(){var a,e;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new ze.Transmuxer(this.options),a=this.self,(e=this.transmuxer).on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var n=e.data;e.data=n.buffer,a.postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){a.postMessage({action:"caption",data:e})}),e.on("done",function(e){a.postMessage({action:"done"})}),e.on("gopInfo",function(e){a.postMessage({action:"gopInfo",gopInfo:e})}),e.on("videoSegmentTimingInfo",function(e){a.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:e})})}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),Xe);function Xe(e,t){!function(e){if(!(e instanceof Xe))throw new TypeError("Cannot call a class as a function")}(this),this.options=t||{},this.self=e,this.init()}new function(t){t.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Ke(t,e.data.options):(this.messageHandlers||(this.messageHandlers=new Ke(t)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}(Qe)}()}),su={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},ou=(Xl(lu,Bs.EventTarget),Wl(lu,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,n){var a,i=t.player_;if(n.captions&&n.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),n.captionStreams){e.inbandTextTracks_[r]||(i.tech_.trigger({type:"usage",name:"hls-608"}),a=i.textTracks().getTrackById(r),e.inbandTextTracks_[r]=a||i.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track)}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"videoSegmentTimingInfo_",value:function(e){var t={start:{decode:e.start.dts/9e4,presentation:e.start.pts/9e4},end:{decode:e.end.dts/9e4,presentation:e.end.pts/9e4},baseMediaDecodeTime:e.baseMediaDecodeTime/9e4};e.prependedContentDuration&&(t.prependedContentDuration=e.prependedContentDuration/9e4),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}},{key:"createRealSourceBuffers_",value:function(){var r=this,a=["audio","video"];a.forEach(function(t){var i,n;r[t+"Codec_"]&&!r[t+"Buffer_"]&&(n=null,r.mediaSource_[t+"Buffer_"]?(n=r.mediaSource_[t+"Buffer_"]).updating=!1:(i=t+'/mp4;codecs="'+r[t+"Codec_"]+'"',n=function(){var e,n=r.mediaSource_.nativeMediaSource_.addSourceBuffer(i),a=Object.create(null);for(e in a.updating=!1,a.realBuffer_=n)!function(t){"function"==typeof n[t]?a[t]=function(){return n[t].apply(n,arguments)}:void 0===a[t]&&Object.defineProperty(a,t,{get:function(){return n[t]},set:function(e){return n[t]=e}})}(e);return a}(),r.mediaSource_[t+"Buffer_"]=n),r[t+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(e){n.addEventListener(e,function(){if("audio"!==t||!r.audioDisabled_)return"updateend"===e&&(r[t+"Buffer_"].updating=!1),a.every(function(e){return!("audio"!==e||!r.audioDisabled_)||t===e||!r[e+"Buffer_"]||!r[e+"Buffer_"].updating})?r.trigger(e):void 0})}))})}},{key:"appendBuffer",value:function(e){var t;this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length&&(t=this.audioBuffer_.buffered,this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})),this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:function(e,t,n){if(null==t||!e.length)return[];for(var a=Math.ceil(9e4*(t-n+3)),i=void 0,i=0;i<e.length&&!(e[i].pts>a);i++);return e.slice(i)}(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var a=t[0].pts,i=0;i<e.length&&!(e[i].pts>=a);i++);return e.slice(0,i).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(l,e){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(l,e),this.gopBuffer_=function(e,t,n){for(var a=Math.ceil(9e4*(l-n)),i=Math.ceil(9e4*(t-n)),r=e.slice(),s=e.length;s--&&!(e[s].pts<=i););if(-1===s)return r;for(var o=s+1;o--&&!(e[o].pts<=a););return o=Math.max(o,0),r.splice(o,s-o+1),r}(this.gopBuffer_,e,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(l,e)),$c(l,e,this.metadataTrack_),this.inbandTextTracks_)for(var t in this.inbandTextTracks_)$c(l,e,this.inbandTextTracks_[t])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger("updateend"),void(this.bufferUpdating_=!1);e=this.pendingBuffers_.reduce(function(e,t){var n=t.type,a=t.data,i=t.initSegment;return e[n].segments.push(a),e[n].bytes+=a.byteLength,e[n].initSegment=i,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),Oc(this,e.captions,e.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,a=void 0;if(e.bytes){a=new Uint8Array(e.bytes),e.segments.forEach(function(e){a.set(e,n),n+=e.byteLength});try{t.updating=!0,t.appendBuffer(a)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),lu);function lu(e,t){zl(this,lu);var n=Ql(this,(lu.__proto__||Object.getPrototypeOf(lu)).call(this,Bs.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=e,n.codecs_=t,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=11<=Bs.browser.IE_VERSION;var a={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(e){au(e)?n.audioCodec_=e:iu(e)&&(n.videoCodec_=e)}),n.transmuxer_=new ru,n.transmuxer_.postMessage({action:"init",options:a}),n.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):"videoSegmentTimingInfo"===e.data.action?n.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):void 0},Object.defineProperty(n,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(n,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function(){return function(e,t,n){var a=null,i=null,r=0,s=[],o=[];if(!e&&!t)return Bs.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(n)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return Bs.createTimeRange();for(var l=e.buffered,c=t.buffered,u=l.length;u--;)s.push({time:l.start(u),type:"start"}),s.push({time:l.end(u),type:"end"});for(u=c.length;u--;)s.push({time:c.start(u),type:"start"}),s.push({time:c.end(u),type:"end"});for(s.sort(function(e,t){return e.time-t.time}),u=0;u<s.length;u++)"start"===s[u].type?2==++r&&(a=s[u].time):"end"===s[u].type&&1==--r&&(i=s[u].time),null!==a&&null!==i&&(o.push([a,i]),i=a=null);return Bs.createTimeRanges(o)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}var cu=(Xl(uu,Bs.EventTarget),Wl(uu,[{key:"addSeekableRange_",value:function(e,t){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var i,t,n,a=void 0,r=(i={type:"",parameters:{}},t=e.trim().split(";"),i.type=t.shift().trim(),t.forEach(function(e){var t,n,a=e.trim().split("=");1<a.length&&(t=a[0].replace(/"/g,"").trim(),n=a[1].replace(/"/g,"").trim(),i.parameters[t]=n)}),i);return/^(video|audio)\/mp2t$/i.test(r.type)?(n=[],r.parameters&&r.parameters.codecs&&(n=(n=eu(n=r.parameters.codecs.split(","))).filter(function(e){return au(e)||iu(e)})),0===n.length&&(n=["avc1.4d400d","mp4a.40.2"]),a=new ou(this,n),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),a.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):a=this.nativeMediaSource_.addSourceBuffer(e),this.sourceBuffers.push(a),a}}]),uu);function uu(){zl(this,uu);var r=Ql(this,(uu.__proto__||Object.getPrototypeOf(uu)).call(this)),e=void 0;for(e in r.nativeMediaSource_=new y.MediaSource,r.nativeMediaSource_)e in uu.prototype||"function"!=typeof r.nativeMediaSource_[e]||(r[e]=r.nativeMediaSource_[e].bind(r.nativeMediaSource_));return r.duration_=NaN,Object.defineProperty(r,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){(this.duration_=e)===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(r,"seekable",{get:function(){return this.duration_===1/0?Bs.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(r,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(r,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),r.sourceBuffers=[],r.activeSourceBuffers_=[],r.updateActiveSourceBuffers_=function(){if(r.activeSourceBuffers_.length=0,1===r.sourceBuffers.length){var e=r.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void r.activeSourceBuffers_.push(e)}for(var n=!1,a=!0,t=0;t<r.player_.audioTracks().length;t++){var i=r.player_.audioTracks()[t];if(i.enabled&&"main"!==i.kind){a=!(n=!0);break}}r.sourceBuffers.forEach(function(e,t){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=n;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,a=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=t?a:!a,e.audioDisabled_))return;r.activeSourceBuffers_.push(e)})},r.onPlayerMediachange_=function(){r.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},r.onHlsReset_=function(){r.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},r.onHlsSegmentTimeMapping_=function(t){r.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},r),r.on("sourceopen",function(e){var t=h.querySelector('[src="'+r.url_+'"]');t&&(r.player_=Bs(t.parentNode),r.player_&&(r.player_.tech_.on("hls-reset",r.onHlsReset_),r.player_.tech_.on("hls-segment-time-mapping",r.onHlsSegmentTimeMapping_),r.player_.audioTracks&&r.player_.audioTracks()&&(r.player_.audioTracks().on("change",r.updateActiveSourceBuffers_),r.player_.audioTracks().on("addtrack",r.updateActiveSourceBuffers_),r.player_.audioTracks().on("removetrack",r.updateActiveSourceBuffers_)),r.player_.on("mediachange",r.onPlayerMediachange_)))}),r.on("sourceended",function(e){for(var t=Lc(r.duration),n=0;n<r.sourceBuffers.length;n++){var a=r.sourceBuffers[n],i=a.metadataTrack_&&a.metadataTrack_.cues;i&&i.length&&(i[i.length-1].endTime=t)}}),r.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),r}var hu=0;function du(e,t){var n=Bs.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})}function fu(){return!!y.MediaSource&&!!y.MediaSource.isTypeSupported&&y.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function pu(){if(this.MediaSource={open:du,supportsNativeMediaSources:fu},fu())return new cu;throw new Error("Cannot use create a virtual MediaSource for this video")}Bs.mediaSources={},pu.open=du,pu.supportsNativeMediaSources=fu;var mu={createObjectURL:function(e){var t=void 0;return e instanceof cu?(t=y.URL.createObjectURL(e.nativeMediaSource_),e.url_=t):e instanceof cu?(t="blob:vjs-media-source/"+hu,hu++,Bs.mediaSources[t]=e,t):(t=y.URL.createObjectURL(e),e.url_=t)}};function gu(e,t){for(var s=void 0,o=bu(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),n=0;n<t.playlists.length;n++){var a=Zl(o,t.playlists[n]);a?o=a:s=!0}return Jl(t,function(e,t,n,a){var i,r;e.playlists&&e.playlists.length&&(i=e.playlists[0].uri,(r=Zl(o,e.playlists[0]))&&((o=r).mediaGroups[t][n][a].playlists[0]=o.playlists[i],s=!1))}),s?null:o}function vu(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t}function yu(e,t){var n,a={};for(n in e){var i=e[n].sidx;if(i){var r=vu(i);if(!t[r])break;var s=t[r].sidxInfo,o=i;(Boolean(!s.map&&!o.map)||Boolean(s.map&&o.map&&s.map.byterange.offset===o.map.byterange.offset&&s.map.byterange.length===o.map.byterange.length))&&s.uri===o.uri&&s.byterange.offset===o.byterange.offset&&s.byterange.length===o.byterange.length&&(a[r]=t[r])}}return a}function _u(e,t,n,a,i){var r={uri:ql(a.handleManifestRedirects,e.resolvedUri),byterange:e.byterange,playlist:t};return n(Bs.mergeOptions(r,{responseType:"arraybuffer",headers:bc(r)}),i)}Bs.MediaSource=pu,Bs.URL=mu;var bu=Bs.mergeOptions,Su=(Xl(Tu,Bs.EventTarget),Wl(Tu,[{key:"setupChildLoader",value:function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t}},{key:"dispose",value:function(){this.stopRequest(),this.loadedPlaylists_={},y.clearTimeout(this.minimumUpdatePeriodTimeout_),y.clearTimeout(this.mediaRequest_),y.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){var e;this.request&&(e=this.request,this.request=null,e.onreadystatechange=null,e.abort())}},{key:"sidxRequestFinished_",value:function(i,r,s,o){var l=this;return function(e,t){if(l.request){if(l.request=null,e)return l.error={status:t.status,message:"DASH playlist request error at URL: "+i.uri,response:t.response,code:2},s&&(l.state=s),l.trigger("error"),o(r,null);var n=new Uint8Array(t.response),a=il.parseSidx(n.subarray(8));return o(r,a)}}}},{key:"media",value:function(n){var a=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}var e,r,s,t=!this.media_||n.uri!==this.media_.uri;if(t&&this.loadedPlaylists_[n.uri]&&this.loadedPlaylists_[n.uri].endList)return this.state="HAVE_METADATA",this.media_=n,void(t&&(this.trigger("mediachanging"),this.trigger("mediachange")));t&&(this.media_&&this.trigger("mediachanging"),n.sidx?(r=e=void 0,r=this.masterPlaylistLoader_?(e=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.sidxMapping_):(e=this.master,this.sidxMapping_),s=vu(n.sidx),r[s]={sidxInfo:n.sidx},this.request=_u(n.sidx,n,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(n,e,i,function(e,t){if(!e||!t)throw new Error("failed to request sidx");r[s].sidx=t,a.haveMetadata({startingState:i,playlist:e.playlists[n.uri]})}))):this.mediaRequest_=y.setTimeout(this.haveMetadata.bind(this,{startingState:i,playlist:n}),0))}},{key:"haveMetadata",value:function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.uri]=n,this.mediaRequest_=null,this.refreshMedia_(n.uri),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.stopRequest(),y.clearTimeout(this.mediaUpdateTimeout),y.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(e){var t=this;y.clearTimeout(this.mediaUpdateTimeout),y.clearTimeout(this.minimumUpdatePeriodTimeout_);var n,a=this.media();e?(n=a?a.targetDuration/2*1e3:5e3,this.mediaUpdateTimeout=y.setTimeout(function(){return t.load()},n)):this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var r=Vo(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});r.uri=this.srcUrl;for(var e=0;e<r.playlists.length;e++){var t="placeholder-uri-"+e;r.playlists[e].uri=t,r.playlists[t]=r.playlists[e]}return Jl(r,function(e,t,n,a){var i;e.playlists&&e.playlists.length&&(i="placeholder-uri-"+t+"-"+n+"-"+a,e.playlists[0].uri=i,r.playlists[i]=e.playlists[0])}),ec(r),tc(r),r}},{key:"start",value:function(){var n=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=y.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(n.request){if(n.request=null,e)return n.error={status:t.status,message:"DASH playlist request error at URL: "+n.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");n.masterXml_=t.responseText,t.responseHeaders&&t.responseHeaders.date?n.masterLoaded_=Date.parse(t.responseHeaders.date):n.masterLoaded_=Date.now(),n.srcUrl=ql(n.handleManifestRedirects,n.srcUrl,t),n.syncClientServerClock_(n.onClientServerClockSync_.bind(n))}})}},{key:"syncClientServerClock_",value:function(a){var n,i=this,r=(n=this.masterXml_,function(){var e=So(Bo(n),"UTCTiming")[0];if(!e)return null;var t=Po(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return t}());return null===r?(this.clientOffset_=this.masterLoaded_-Date.now(),a()):"DIRECT"===r.method?(this.clientOffset_=r.value-Date.now(),a()):void(this.request=this.hls_.xhr({uri:Yl(this.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},function(e,t){if(i.request){if(e)return i.clientOffset_=i.masterLoaded_-Date.now(),a();var n="HEAD"===r.method?t.responseHeaders&&t.responseHeaders.date?Date.parse(t.responseHeaders.date):i.masterLoaded_:Date.parse(t.responseText);i.clientOffset_=n-Date.now(),a()}}))}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var e=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=y.setTimeout(function(){e.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var f=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(f.request){if(f.request=null,e)return f.error={status:t.status,message:"DASH playlist request error at URL: "+f.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===f.state&&(f.started=!1),f.trigger("error");f.masterXml_=t.responseText,f.sidxMapping_=(o=f.masterXml_,l=f.srcUrl,c=f.clientOffset_,u=f.sidxMapping_,h=Vo(o,{manifestUri:l,clientOffset:c}),d=yu(h.playlists,u),Jl(h,function(e,t,n,a){var i;e.playlists&&e.playlists.length&&(i=e.playlists,d=bu(d,yu(i,u)))}),d);var n,a,i=f.parseMasterXml(),r=gu(f.master,i),s=f.media().sidx;r&&(s?(n=vu(s),f.sidxMapping_[n]||(a=f.media(),f.request=_u(a.sidx,a,f.hls_.xhr,{handleManifestRedirects:f.handleManifestRedirects},f.sidxRequestFinished_(a,i,f.state,function(e,t){if(!e||!t)throw new Error("failed to request sidx on minimumUpdatePeriod");f.sidxMapping_[n].sidx=t,f.minimumUpdatePeriodTimeout_=y.setTimeout(function(){f.trigger("minimumUpdatePeriod")},f.master.minimumUpdatePeriod),f.refreshMedia_(f.media().uri)})))):f.master=r),f.minimumUpdatePeriodTimeout_=y.setTimeout(function(){f.trigger("minimumUpdatePeriod")},f.master.minimumUpdatePeriod)}var o,l,c,u,h,d})}},{key:"refreshMedia_",value:function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media uri");var n=void 0,a=this.masterPlaylistLoader_?(n=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.parseMasterXml()):(n=this.master,this.parseMasterXml()),i=gu(n,a);i?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=i:this.master=i,this.media_=i.playlists[e]):(this.media_=a.playlists[e],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=y.setTimeout(function(){t.trigger("mediaupdatetimeout")},nc(this.media(),!!i))),this.trigger("loadedplaylist")}}]),Tu);function Tu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=arguments[3];zl(this,Tu);var i=Ql(this,(Tu.__proto__||Object.getPrototypeOf(Tu)).call(this)),r=n.withCredentials,s=void 0!==r&&r,o=n.handleManifestRedirects,l=void 0!==o&&o;if(i.hls_=t,i.withCredentials=s,i.handleManifestRedirects=l,!e)throw new Error("A non-empty playlist URL or playlist is required");return i.on("minimumUpdatePeriod",function(){i.refreshXml_()}),i.on("mediaupdatetimeout",function(){i.refreshMedia_(i.media().uri)}),i.state="HAVE_NOTHING",i.loadedPlaylists_={},"string"==typeof e?(i.srcUrl=e,i.sidxMapping_={},Ql(i)):(i.setupChildLoader(a,e),i)}function wu(e){return Bs.log.debug?Bs.log.debug.bind(Bs,"VHS:",e+" >"):function(){}}function Pu(){}var xu=(Wl(Cu,[{key:"createSourceBuffer_",value:function(e,t){var n=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",function(){n.start_()}):this.start_()}},{key:"start_",value:function(){var t=this;this.started_=!0,this.onUpdateendCallback_=function(){var e=t.pendingCallback_;t.pendingCallback_=null,t.sourceBuffer_.removing=!1,t.logger_("buffered ["+Ic(t.buffered())+"]"),e&&e(),t.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.addEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),n.sourceBuffer_.appendBuffer(e.bytes)},function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),t()})}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:Bs.createTimeRanges()}},{key:"remove",value:function(e,t,n){var a=this,i=2<arguments.length&&void 0!==n?n:Pu;this.processedAppend_&&this.queueCallback_(function(){a.logger_("remove ["+e+" => "+t+"]"),a.sourceBuffer_.removing=!0,a.sourceBuffer_.remove(e,t)},i)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Pu}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e,t.runCallback_()}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){function e(){t.sourceBuffer_&&"open"===t.mediaSource.readyState&&t.sourceBuffer_.abort(),t.sourceBuffer_.removeEventListener("updateend",e)}var t=this;this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",e):e()}}]),Cu);function Cu(e,t,n,a){zl(this,Cu),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,this.type_=n,this.mimeType_=t,this.logger_=wu("SourceUpdater["+n+"]["+t+"]"),"closed"===e.readyState?e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,t,a)):this.createSourceBuffer_(t,a)}function Du(e){e.forEach(function(e){e.abort()})}function Eu(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Nu,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Fu,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Ru,xhr:t}:null}function Au(i,r){return function(e){return i.stats=Bs.mergeOptions(i.stats,(n=(t=e).target,(a={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-n.requestTime||0}).bytesReceived=t.loaded,a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3),a)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),r(e,i);var t,n,a}}function ku(e,t,n,a,i,r,s){var o,l,c,u,h,d,f,p,m,g,v,y,_=[],b=(o=_,l=n,c=s,u=0,h=!1,function(e,t){if(!h)return e?(h=!0,Du(o),c(e,t)):(u+=1)===o.length?(t.endOfAllRequests=Date.now(),t.encryptedBytes?function(a,i,r){a.addEventListener("message",function e(t){if(t.data.source===i.requestId){a.removeEventListener("message",e);var n=t.data.decrypted;return i.bytes=new Uint8Array(n.bytes,n.byteOffset,n.byteLength),r(null,i)}});var e=i.key.bytes.slice?i.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.key.bytes));a.postMessage(wc({source:i.requestId,encrypted:i.encryptedBytes,key:e,iv:i.key.iv}),[i.encryptedBytes.buffer,e.buffer])}(l,t,c):c(null,t)):void 0});i.key&&!i.key.bytes&&(d=e(Bs.mergeOptions(t,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),(f=i,p=b,function(e,t){var n=t.response,a=Eu(e,t);if(a)return p(a,f);if(16!==n.byteLength)return p({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:Ru,xhr:t},f);var i=new DataView(n);return f.key.bytes=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]),p(null,f)})),_.push(d)),i.map&&!i.map.bytes&&(m=e(Bs.mergeOptions(t,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:bc(i.map)}),(g=i,v=a,y=b,function(e,t){var n=t.response,a=Eu(e,t);return a?y(a,g):0===n.byteLength?y({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:Ru,xhr:t},g):(g.map.bytes=new Uint8Array(t.response),v&&!v.isInitialized()&&v.init(),g.map.timescales=tl.timescale(g.map.bytes),g.map.videoTrackIds=tl.videoTrackIds(g.map.bytes),y(null,g))})),_.push(m));var S,T,w,P=e(Bs.mergeOptions(t,{uri:i.resolvedUri,responseType:"arraybuffer",headers:bc(i)}),(S=i,T=a,w=b,function(e,t){var n,a=t.response,i=Eu(e,t);return i?w(i,S):0===a.byteLength?w({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:Ru,xhr:t},S):(S.stats={bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0},S.key?S.encryptedBytes=new Uint8Array(t.response):S.bytes=new Uint8Array(t.response),T&&S.map&&S.map.bytes&&(T.isInitialized()||T.init(),(n=T.parse(S.bytes,S.map.videoTrackIds,S.map.timescales))&&n.captions&&(S.captionStreams=n.captionStreams,S.fmp4Captions=n.captions)),w(null,S))}));return P.addEventListener("progress",Au(i,r)),_.push(P),function(){return Du(_)}}function Iu(e,t){var n;return e&&(n=y.getComputedStyle(e))?n[t]:""}function Mu(e,a){var i=e.slice();e.sort(function(e,t){var n=a(e,t);return 0===n?i.indexOf(e)-i.indexOf(t):n})}function $u(e,t){var n=void 0,a=void 0;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||y.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(a=t.attributes.BANDWIDTH),n-(a||y.Number.MAX_VALUE)}function Lu(e){return"number"==typeof e&&isFinite(e)}var Ou={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Ru=2,Nu=-101,Fu=-102,Bu=(Xl(Vu,Bs.EventTarget),Wl(Vu,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():Bs.createTimeRanges()}},{key:"initSegment",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(!e)return null;var a=Pc(e),i=this.initSegments_[a];return n&&!i&&e.bytes&&(this.initSegments_[a]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),i||e}},{key:"segmentKey",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(!e)return null;var a=xc(e),i=this.keyCache_[a];this.cacheEncryptionKeys_&&n&&!i&&e.bytes&&(this.keyCache_[a]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(i||e).resolvedUri};return i&&(r.bytes=i.bytes),r}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new xu(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};if(e){var a=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var r,s=null;if(a&&(a.id?s=a.id:a.uri&&(s=a.uri)),this.logger_("playlist update ["+s+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();a&&a.uri===e.uri?(r=e.mediaSequence-a.mediaSequence,this.logger_("live window shift ["+r+"]"),null!==this.mediaIndex&&(this.mediaIndex-=r),i&&(i.mediaIndex-=r,0<=i.mediaIndex&&(i.segment=e.segments[i.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(a,e)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,n){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,n),$c(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var a in this.inbandTextTracks_)$c(e,t,this.inbandTextTracks_[a])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=y.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=y.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){var e;this.sourceUpdater_.updating()||(this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())),(e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_))&&(this.isEndOfStream_(e.mediaIndex)?this.endOfStream():e.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()||(e.timeline!==this.currentTimeline_&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(e))))}},{key:"isEndOfStream_",value:function(a,e){return function(e,t){if(!e||!t)return!1;var n=a===e.segments.length;return e.endList&&"open"===t.readyState&&n}(1<arguments.length&&void 0!==e?e:this.playlist_,this.mediaSource_)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(e,t,n,a,i,r){var s=0,o=void 0;e.length&&(s=e.end(e.length-1));var l,c,u=Math.max(0,s-i);return!t.segments.length||u>=this.goalBufferLength_()||!a&&1<=u?null:null===r?(n=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,n,null,!0)):null!==n?(t.segments[n],o=s,this.generateSegmentInfo_(t,n+1,o,!1)):(o=this.fetchAtBuffer_?(n=(l=Bc.getMediaInfoForTime(t,s,r.segmentIndex,r.time)).mediaIndex,l.startTime):(n=(c=Bc.getMediaInfoForTime(t,i,r.segmentIndex,r.time)).mediaIndex,c.startTime),this.generateSegmentInfo_(t,n,o,!1))}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,n,a){if(t<0||t>=e.segments.length)return null;var i=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:i.resolvedUri,mediaIndex:t,isSyncRequest:a,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:i.timeline,duration:i.duration,segment:i}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),n=e.bandwidth,a=this.pendingSegment_.duration,i=Bc.estimateSegmentRequestTime(a,n,this.playlist_,e.bytesReceived),r=function(e,t,n){var a=2<arguments.length&&void 0!==n?n:1;return((e.length?e.end(e.length-1):0)-t)/a}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(i<=r)return!1;var s=function(e){var n=e.currentTime,a=e.bandwidth,i=e.duration,r=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,l=e.syncController,t=e.master.playlists.filter(function(e){return!Bc.isIncompatible(e)}),c=t.filter(Bc.isEnabled);c.length||(c=t.filter(function(e){return!Bc.isDisabled(e)}));var u=c.filter(Bc.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=l.getSyncPoint(e,i,o,n)?1:2;return{playlist:e,rebufferingImpact:Bc.estimateSegmentRequestTime(r,a,e)*t-s}}),h=u.filter(function(e){return e.rebufferingImpact<=0});return Mu(h,function(e,t){return $u(t.playlist,e.playlist)}),h.length?h[0]:(Mu(u,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),u[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:a,timeUntilRebuffer:r,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=i-r-s.rebufferingImpact,l=r<=1/30?1:.5;return!(!s.playlist||s.playlist.uri===this.playlist_.uri||o<l||(this.bandwidth=s.playlist.attributes.BANDWIDTH*Ou.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),0))}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=ku(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t,n,a,i,r=(t=this.seekable_(),n=this.currentTime_(),a=this.playlist_.targetDuration||10,i=t.length&&0<t.start(0)&&t.start(0)<n?t.start(0):n-30,Math.min(i,n-a));0<r&&this.remove(0,r)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t,n=e.segment,a={resolvedUri:n.resolvedUri,byterange:n.byterange,requestId:e.requestId};return n.key&&(t=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]),a.key=this.segmentKey(n.key),a.key.iv=t),n.map&&(a.map=this.initSegment(n.map)),a}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Fu?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Nu?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),t.key&&this.segmentKey(t.key,!0),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t,i,r,n,s,a=this.pendingSegment_;a.bytes=e.bytes,e.map&&(a.segment.map.bytes=e.map.bytes),a.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(function(e,t,n){for(var a in n){var i;e[a]||(t.trigger({type:"usage",name:"hls-608"}),i=t.textTracks().getTrackById(a),e[a]=i||t.addRemoteTextTrack({kind:"captions",id:a,label:a},!1).track)}}(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),t={inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0},r=t.inbandTextTracks,s=t.timestampOffset,(n=t.captionArray)&&(i=window.WebKitDataCue||window.VTTCue,n.forEach(function(e){var t=e.stream,n=e.startTime,a=e.endTime;r[t]&&(n+=s,a+=s,r[t].addCue(new i(n,a,e.text)))})),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e,t,n,a,i,r,s,o,l,c,u,h,d=this;if(this.pendingSegment_){var f=this.pendingSegment_,p=f.segment,m=this.syncController_.probeSegmentInfo(f);void 0===this.startingMedia_&&m&&(m.containsAudio||m.containsVideo)&&(this.startingMedia_={containsAudio:m.containsAudio,containsVideo:m.containsVideo});var g,v,y=(u=this.loaderType_,h=this.startingMedia_,"main"===u&&h&&m?m.containsAudio||m.containsVideo?h.containsVideo&&!m.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!h.containsVideo&&m.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(y)return this.error({message:y,blacklistDuration:1/0}),void this.trigger("error");if(f.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==f.timestampOffset&&f.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(m&&m.segmentTimestampInfo&&(g=m.segmentTimestampInfo[0].ptsTime,v=m.segmentTimestampInfo[0].dtsTime,f.timestampOffset-=g-v),this.sourceUpdater_.timestampOffset(f.timestampOffset),this.trigger("timestampoffset"));var _,b,S=this.syncController_.mappingForTimeline(f.timeline);null!==S&&this.trigger({type:"segmenttimemapping",mapping:S}),this.state="APPENDING",p.map&&(_=Pc(p.map),this.activeInitSegmentId_&&this.activeInitSegmentId_===_||(b=this.initSegment(p.map),this.sourceUpdater_.appendBuffer({bytes:b.bytes},function(){d.activeInitSegmentId_=_}))),f.byteLength=f.bytes.byteLength,"number"==typeof p.start&&"number"==typeof p.end?this.mediaSecondsLoaded+=p.end-p.start:this.mediaSecondsLoaded+=p.duration,this.logger_((e=f.segment,t=e.start,n=e.end,a=f.playlist,i=a.mediaSequence,r=a.id,s=a.segments,o=void 0===s?[]:s,l=f.mediaIndex,c=f.timeline,["appending ["+l+"] of ["+i+", "+(i+o.length)+"] from playlist ["+r+"]","["+t+" => "+n+"] in timeline ["+c+"]"].join(" "))),this.sourceUpdater_.appendBuffer({bytes:f.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,f.requestId)},this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(e,t){var n;this.pendingSegment_&&e===this.pendingSegment_.requestId&&((n=this.pendingSegment_.segment).videoTimingInfo||(n.videoTimingInfo={}),n.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||0,n.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,n.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,n.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime)}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,n=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(e.mediaIndex+1,e.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,a=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(a-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(e){var t,n,a,i,r,s;this.segmentMetadataTrack_&&(n=(t=e.segment).start,a=t.end,Lu(n)&&Lu(a)&&($c(n,a,this.segmentMetadataTrack_),i=y.WebKitDataCue||y.VTTCue,r={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:n,end:a},(s=new i(n,a,JSON.stringify(r))).value=r,this.segmentMetadataTrack_.addCue(s)))}}]),Vu);function Vu(e){zl(this,Vu);var t=Ql(this,(Vu.__proto__||Object.getPrototypeOf(Vu)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=e.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=void 0,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_="INIT",t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.mimeType_=null,t.sourceUpdater_=null,t.xhrOptions_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.cacheEncryptionKeys_=e.cacheEncryptionKeys,t.keyCache_={},"main"===t.loaderType_?t.captionParser_=new ml:t.captionParser_=null,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={segmentIndex:0,time:0},t.syncController_.on("syncinfoupdate",function(){return t.trigger("syncinfoupdate")}),t.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=!1}),t.fetchAtBuffer_=!1,t.logger_=wu("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),t}function ju(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}var Uu=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),Hu=(Xl(Gu,Bu),Wl(Gu,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Bs.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return Bs.createTimeRanges([[t,n]])}},{key:"initSegment",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(!e)return null;var a,i,r=Pc(e),s=this.initSegments_[r];return n&&!s&&e.bytes&&(a=Uu.byteLength+e.bytes.byteLength,(i=new Uint8Array(a)).set(e.bytes),i.set(Uu,e.bytes.byteLength),this.initSegments_[r]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:i}),s||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(e,t){$c(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var e=this.pendingSegment_,n=e.segment;if("function"!=typeof y.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){function a(){t.subtitlesTrack_.tech_.off("vttjsloaded",i),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")}var i=void 0,i=function(){t.subtitlesTrack_.tech_.off("vttjserror",a),t.handleSegment_()};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",i),void this.subtitlesTrack_.tech_.one("vttjserror",a)}n.requested=!0;try{this.parseVTTCues_(e)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,e.cues.length&&this.remove(e.cues[0].endTime,e.cues[e.cues.length-1].endTime),e.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(t){var e=void 0,n=!1;"function"==typeof y.TextDecoder?e=new y.TextDecoder("utf8"):(e=y.WebVTT.StringDecoder(),n=!0);var a,i=new y.WebVTT.Parser(y,y.vttjs,e);t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=t.cues.push.bind(t.cues),i.ontimestampmap=function(e){return t.timestampmap=e},i.onparsingerror=function(e){Bs.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map&&(a=t.segment.map.bytes,n&&(a=ju(a)),i.parse(a));var r=t.bytes;n&&(r=ju(r)),i.parse(r),i.flush()}},{key:"updateTimeMapping_",value:function(e,t,n){var a,i,r,s,o=e.segment;t&&(e.cues.length?(a=e.timestampmap,i=a.MPEGTS/9e4-a.LOCAL+t.mapping,e.cues.forEach(function(e){e.startTime+=i,e.endTime+=i}),n.syncInfo||(r=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime,n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(r,s-o.duration)})):o.empty=!0)}}]),Gu);function Gu(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};zl(this,Gu);var n=Ql(this,(Gu.__proto__||Object.getPrototypeOf(Gu)).call(this,e,t));return n.mediaSource_=null,n.subtitlesTrack_=null,n}var Yu=function(e,t){var n,a,i,r,s,o;return(n=(xl.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,a=0,i=null,r=null,s=0,o=0;3<=e.length-o;){switch(xl.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){n=!0;break}if((s=xl.aac.parseId3TagSize(e,o))>e.length){n=!0;break}null===r&&(t=e.subarray(o,o+s),r=xl.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){n=!0;break}if((s=xl.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===i&&(t=e.subarray(o,o+s),i=xl.aac.parseSampleRate(t)),a++,o+=s;break;default:o++}if(n)return null}if(null===i||null===r)return null;var l=9e4/i;return{audio:[{type:"audio",dts:r,pts:r},{type:"audio",dts:r+1024*a*l,pts:r+1024*a*l}]}}:Cl)(e))&&(n.audio||n.video)?(i=t,(a=n).audio&&a.audio.length&&(void 0===(r=i)&&(r=a.audio[0].dts),a.audio.forEach(function(e){e.dts=Pl(e.dts,r),e.pts=Pl(e.pts,r),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})),a.video&&a.video.length&&(void 0===(s=i)&&(s=a.video[0].dts),a.video.forEach(function(e){e.dts=Pl(e.dts,s),e.pts=Pl(e.pts,s),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),a.firstKeyFrame&&((o=a.firstKeyFrame).dts=Pl(o.dts,s),o.pts=Pl(o.pts,s),o.dtsTime=o.dts/9e4,o.ptsTime=o.dts/9e4)),n):null},qu=[{name:"VOD",run:function(e,t,n,a,i){return n===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(e,t,n,a,i){if(!e.datetimeToDisplayTime)return null;var r=t.segments||[],s=null,o=null;i=i||0;for(var l=0;l<r.length;l++){var c=r[l];if(c.dateTimeObject){var u=c.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,h=Math.abs(i-u);if(null!==o&&(0===h||o<h))break;o=h,s={time:u,segmentIndex:l}}}return s}},{name:"Segment",run:function(e,t,n,a,i){var r=t.segments||[],s=null,o=null;i=i||0;for(var l=0;l<r.length;l++){var c=r[l];if(c.timeline===a&&void 0!==c.start){var u=Math.abs(i-c.start);if(null!==o&&o<u)break;(!s||null===o||u<=o)&&(o=u,s={time:c.start,segmentIndex:l})}}return s}},{name:"Discontinuity",run:function(e,t,n,a,i){var r=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],c=t.discontinuitySequence+o+1,u=e.discontinuities[c];if(u){var h=Math.abs(i-u.time);if(null!==s&&s<h)break;(!r||null===s||h<=s)&&(s=h,r={time:u.time,segmentIndex:l})}}return r}},{name:"Playlist",run:function(e,t,n,a,i){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],zu=(Xl(Wu,Bs.EventTarget),Wl(Wu,[{key:"getSyncPoint",value:function(e,t,n,a){var i=this.runStrategies_(e,t,n,a);return i.length?this.selectSyncPoint_(i,{key:"time",value:a}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var a=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return 0<a.segmentIndex&&(a.time*=-1),Math.abs(a.time+cc(e,a.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,n,a){for(var i=[],r=0;r<qu.length;r++){var s=qu[r],o=s.run(this,e,t,n,a);o&&(o.strategy=s.name,i.push({strategy:s.name,syncPoint:o}))}return i}},{key:"selectSyncPoint_",value:function(e,t){for(var n=e[0].syncPoint,a=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,r=1;r<e.length;r++){var s=Math.abs(e[r].syncPoint[t.key]-t.value);s<a&&(a=s,n=e[r].syncPoint,i=e[r].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+i+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var n=t.mediaSequence-e.mediaSequence-1;0<=n;n--){var a=e.segments[n];if(a&&void 0!==a.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:a.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){var t;!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject&&(t=e.segments[0].dateTimeObject.getTime()/1e3,this.datetimeToDisplayTime=-t)}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t,n=e.segment,a=e.playlist;return(t=n.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,t)&&(this.saveDiscontinuitySyncInfo_(e),a.syncInfo||(a.syncInfo={mediaSequence:a.mediaSequence+e.mediaIndex,time:n.start})),t}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,n=tl.timescale(t.map.bytes),a=tl.startTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=a),{start:a,end:a+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=Yu(e.bytes,this.inspectCache_),n=void 0,a=void 0,i=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,a=t.video[1].dtsTime,i=t.video):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,a=t.audio[1].dtsTime,i=t.audio),{segmentTimestampInfo:i,start:n,end:a,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var n=e.segment,a=this.timelines[e.timeline];if(null!==e.timestampOffset)a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+a.time+"] [mapping: "+a.mapping+"]"),n.start=e.startOfSegment,n.end=t.end+a.mapping;else{if(!a)return!1;n.start=t.start+a.mapping,n.end=t.end+a.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var a=0;a<t.discontinuityStarts.length;a++){var i,r=t.discontinuityStarts[a],s=t.discontinuitySequence+a+1,o=r-e.mediaIndex,l=Math.abs(o);(!this.discontinuities[s]||this.discontinuities[s].accuracy>l)&&(i=void 0,i=o<0?n.start-cc(t,e.mediaIndex,r):n.end+cc(t,e.mediaIndex+1,r),this.discontinuities[s]={time:i,accuracy:l})}}}]),Wu);function Wu(){zl(this,Wu);var e=Ql(this,(Wu.__proto__||Object.getPrototypeOf(Wu)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=wu("SyncController"),e}function Ku(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)}function Xu(e,t){(t.activePlaylistLoader=e).load()}function Qu(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){th[e](e,t)});var n=t.mediaTypes,e=t.masterPlaylistLoader,a=t.tech,i=t.hls;["AUDIO","SUBTITLES"].forEach(function(e){var o,l,c,u,r,s;n[e].activeGroup=(r=e,s=t,function(t){var e=s.masterPlaylistLoader,n=s.mediaTypes[r].groups,a=e.media();if(!a)return null;var i=null;return a.attributes[r]&&(i=n[a.attributes[r]]),i=i||n.main,void 0===t?i:null!==t&&i.filter(function(e){return e.id===t.id})[0]||null}),n[e].activeTrack=nh[e](e,t),n[e].onGroupChanged=(c=e,u=t,function(){var e=u.segmentLoaders,t=e[c],n=e.main,a=u.mediaTypes[c],i=a.activeTrack(),r=a.activeGroup(i),s=a.activePlaylistLoader;Ku(t,a),r&&(r.playlistLoader?(t.resyncLoader(),Xu(r.playlistLoader,a)):s&&n.resetEverything())}),n[e].onTrackChanged=(o=e,l=t,function(){var e=l.segmentLoaders,t=e[o],n=e.main,a=l.mediaTypes[o],i=a.activeTrack(),r=a.activeGroup(i),s=a.activePlaylistLoader;Ku(t,a),r&&(r.playlistLoader?(s!==r.playlistLoader&&(t.track&&t.track(i),t.resetEverything()),Xu(r.playlistLoader,a)):n.resetEverything())})});var r,s=n.AUDIO.activeGroup(),o=(s.filter(function(e){return e.default})[0]||s[0]).id;function l(){n.AUDIO.onTrackChanged(),a.trigger({type:"usage",name:"hls-audio-change"})}for(r in n.AUDIO.tracks[o].enabled=!0,n.AUDIO.onTrackChanged(),e.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return n[e].onGroupChanged()})}),a.audioTracks().addEventListener("change",l),a.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),i.on("dispose",function(){a.audioTracks().removeEventListener("change",l),a.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),a.clearTracks("audio"),n.AUDIO.tracks)a.audioTracks().addTrack(n.AUDIO.tracks[r])}var Ju=new Kc("./decrypter-worker.worker.js",function(e,t){var n,u,g,a,i,l,s;function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e){h(this,d),u=u||function(){for(var e,t,n,a=[[[],[],[],[],[]],[[],[],[],[],[]]],i=a[0],r=a[1],s=i[4],o=r[4],l=void 0,c=void 0,u=void 0,h=[],d=[],f=void 0,p=void 0,l=0;l<256;l++)d[(h[l]=l<<1^283*(l>>7))^l]=l;for(c=u=0;!s[c];c^=e||1,u=d[u]||1)for(n=(n=u^u<<1^u<<2^u<<3^u<<4)>>8^255&n^99,p=16843009*h[t=h[e=h[o[s[c]=n]=c]]]^65537*t^257*e^16843008*c,f=257*h[n]^16843008*n,l=0;l<4;l++)i[l][c]=f=f<<24^f>>>8,r[l][n]=p=p<<24^p>>>8;for(l=0;l<5;l++)i[l]=i[l].slice(0),r[l]=r[l].slice(0);return a}(),this._tables=[[u[0][0].slice(),u[0][1].slice(),u[0][2].slice(),u[0][3].slice(),u[0][4].slice()],[u[1][0].slice(),u[1][1].slice(),u[1][2].slice(),u[1][3].slice(),u[1][4].slice()]];var t=void 0,n=void 0,a=void 0,i=void 0,r=void 0,s=this._tables[0][4],o=this._tables[1],l=e.length,c=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(i=e.slice(0),r=[],this._key=[i,r],t=l;t<4*l+28;t++)a=i[t-1],(t%l==0||8===l&&t%l==4)&&(a=s[a>>>24]<<24^s[a>>16&255]<<16^s[a>>8&255]<<8^s[255&a],t%l==0&&(a=a<<8^a>>>24^c<<24,c=c<<1^283*(c>>7))),i[t]=i[t-l]^a;for(n=0;t;n++,t--)a=i[3&n?t:t-4],r[n]=t<=4||n<4?a:o[0][s[a>>>24]]^o[1][s[a>>16&255]]^o[2][s[a>>8&255]]^o[3][s[255&a]]}function o(){h(this,o),this.listeners={}}function c(){h(this,c);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,a));return e.jobs=[],e.delay=1,e.timeout_=null,e}function v(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}function f(e,t,n,a){h(this,f);var i=f.STEP,r=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(r.subarray(o,o+i),t,n,s)),o=i;o<r.length;o+=i)n=new Uint32Array([v(r[o-4]),v(r[o-3]),v(r[o-2]),v(r[o-1])]),this.asyncStream_.push(this.decryptChunk_(r.subarray(o,o+i),t,n,s));this.asyncStream_.push(function(){a(null,s.subarray(0,s.byteLength-s[s.byteLength-1]))})}n=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e},u=null,d.prototype.decrypt=function(e,t,n,a,i,r){for(var s,o,l=this._key[1],c=e^l[0],u=a^l[1],h=n^l[2],d=t^l[3],f=void 0,p=l.length/4-2,m=void 0,g=4,v=this._tables[1],y=v[0],_=v[1],b=v[2],S=v[3],T=v[4],m=0;m<p;m++)f=y[c>>>24]^_[u>>16&255]^b[h>>8&255]^S[255&d]^l[g],s=y[u>>>24]^_[h>>16&255]^b[d>>8&255]^S[255&c]^l[g+1],o=y[h>>>24]^_[d>>16&255]^b[c>>8&255]^S[255&u]^l[g+2],d=y[d>>>24]^_[c>>16&255]^b[u>>8&255]^S[255&h]^l[g+3],g+=4,c=f,u=s,h=o;for(m=0;m<4;m++)i[(3&-m)+r]=T[c>>>24]<<24^T[u>>16&255]<<16^T[h>>8&255]<<8^T[255&d]^l[g++],f=c,c=u,u=h,h=d,d=f},g=d,o.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},o.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},o.prototype.trigger=function(e,t){var n=this.listeners[e];if(n)if(2===arguments.length)for(var a=n.length,i=0;i<a;++i)n[i].call(this,t);else for(var r=Array.prototype.slice.call(arguments,1),s=n.length,o=0;o<s;++o)n[o].apply(this,r)},o.prototype.dispose=function(){this.listeners={}},o.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}(c,i=a=o),c.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},c.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},l=c,f.prototype.decryptChunk_=function(t,n,a,i){return function(){var e=function(e,t,n){for(var a,i,r,s,o=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),l=new g(Array.prototype.slice.call(t)),c=new Uint8Array(e.byteLength),u=new Int32Array(c.buffer),h=void 0,d=void 0,f=void 0,p=void 0,m=void 0,h=n[0],d=n[1],f=n[2],p=n[3],m=0;m<o.length;m+=4)a=v(o[m]),i=v(o[m+1]),r=v(o[m+2]),s=v(o[m+3]),l.decrypt(a,i,r,s,u,m),u[m]=v(u[m]^h),u[m+1]=v(u[m+1]^d),u[m+2]=v(u[m+2]^f),u[m+3]=v(u[m+3]^p),h=a,d=i,f=r,p=s;return c}(t,n,a);i.set(e,t.byteOffset)}},n(f,null,[{key:"STEP",get:function(){return 32e3}}]),s=f,new function(r){r.onmessage=function(e){var i=e.data,t=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),n=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4),a=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new s(t,n,a,function(e,t){var n,a;r.postMessage((n={source:i.source,decrypted:t},a={},Object.keys(n).forEach(function(e){var t=n[e];ArrayBuffer.isView(t)?a[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:a[e]=t}),a),[t.buffer])})}}(this)}),Zu={AUDIO:function(l,c){return function(){var e=c.segmentLoaders[l],t=c.mediaTypes[l],n=c.blacklistCurrentPlaylist;Ku(e,t);var a=t.activeTrack(),i=t.activeGroup(),r=(i.filter(function(e){return e.default})[0]||i[0]).id,s=t.tracks[r];if(a!==s){for(var o in Bs.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[o].enabled=t.tracks[o]===s;t.onTrackChanged()}else n({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(a,i){return function(){var e=i.segmentLoaders[a],t=i.mediaTypes[a];Bs.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Ku(e,t);var n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}}},eh={AUDIO:function(e,t,n){var a,i,r;t&&(a=n.tech,i=n.requestOptions,r=n.segmentLoaders[e],t.on("loadedmetadata",function(){var e=t.media();r.playlist(e,i),(!a.paused()||e.endList&&"none"!==a.preload())&&r.load()}),t.on("loadedplaylist",function(){r.playlist(t.media(),i),a.paused()||r.load()}),t.on("error",Zu[e](e,n)))},SUBTITLES:function(e,t,n){var a=n.tech,i=n.requestOptions,r=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();r.playlist(e,i),r.track(s.activeTrack()),(!a.paused()||e.endList&&"none"!==a.preload())&&r.load()}),t.on("loadedplaylist",function(){r.playlist(t.media(),i),a.paused()||r.load()}),t.on("error",Zu[e](e,n))}},th={AUDIO:function(e,t){var n,a,i=t.hls,r=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,c=t.mediaTypes[e],u=c.groups,h=c.tracks,d=t.masterPlaylistLoader;for(a in l[e]&&0!==Object.keys(l[e]).length||(l[e]={main:{default:{default:!0}}}),l[e])for(var f in u[a]||(u[a]=[]),l[e][a]){var p,m=(g=l[e][a][f]).resolvedUri?new rc(g.resolvedUri,i,o):g.playlists&&"dash"===r?new Su(g.playlists[0],i,o,d):null,g=Bs.mergeOptions({id:f,playlistLoader:m},g);eh[e](e,g.playlistLoader,t),u[a].push(g),void 0===h[f]&&(p=new Bs.AudioTrack({id:f,kind:(n=void 0,n=g.default?"main":"alternative",g.characteristics&&0<=g.characteristics.indexOf("public.accessibility.describes-video")&&(n="main-desc"),n),enabled:!1,language:g.language,default:g.default,label:f}),h[f]=p)}s.on("error",Zu[e](e,t))},SUBTITLES:function(e,t){var n,a,i,r,s=t.tech,o=t.hls,l=t.sourceType,c=t.segmentLoaders[e],u=t.requestOptions,h=t.master.mediaGroups,d=t.mediaTypes[e],f=d.groups,p=d.tracks,m=t.masterPlaylistLoader;for(n in h[e])for(var g in f[n]||(f[n]=[]),h[e][n]){h[e][n][g].forced||(a=h[e][n][g],i=void 0,"hls"===l?i=new rc(a.resolvedUri,o,u):"dash"===l&&(i=new Su(a.playlists[0],o,u,m)),a=Bs.mergeOptions({id:g,playlistLoader:i},a),eh[e](e,a.playlistLoader,t),f[n].push(a),void 0===p[g]&&(r=s.addRemoteTextTrack({id:g,kind:"subtitles",default:a.default&&a.autoselect,language:a.language,label:g},!1).track,p[g]=r))}c.on("error",Zu[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n,a=t.tech,i=t.master.mediaGroups,r=t.mediaTypes[e],s=r.groups,o=r.tracks;for(n in i[e])for(var l in s[n]||(s[n]=[]),i[e][n]){var c,u=i[e][n][l];u.instreamId.match(/CC\d/)&&(s[n].push(Bs.mergeOptions({id:l},u)),void 0===o[l])&&(c=a.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default&&u.autoselect,language:u.language,label:l},!1).track,o[l]=c)}}},nh={AUDIO:function(n,a){return function(){var e,t=a.mediaTypes[n].tracks;for(e in t)if(t[e].enabled)return t[e];return null}},SUBTITLES:function(n,a){return function(){var e,t=a.mediaTypes[n].tracks;for(e in t)if("showing"===t[e].mode)return t[e];return null}}},ah=void 0,ih=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],rh=(Xl(sh,Bs.EventTarget),Wl(sh,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=a.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;yc(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=t,e.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(e,a.requestOptions_),a.mainSegmentLoader_.load()),Qu({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)}),a.triggerPresenceUsage_(a.master(),e);try{a.setupSourceBuffers_()}catch(e){return Bs.log.warn("Failed to create SourceBuffers",e),a.mediaSource.endOfStream("decode")}a.setupFirstPlay(),!a.mediaTypes_.AUDIO.activePlaylistLoader||a.mediaTypes_.AUDIO.activePlaylistLoader.media()?a.trigger("selectedinitialmedia"):a.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){a.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=a.masterPlaylistLoader_.media();if(!e){a.excludeUnsupportedVariants_();var t=void 0;return a.enableLowInitialPlaylist&&(t=a.selectInitialPlaylist()),t=t||a.selectPlaylist(),a.initialMedia_=t,void a.masterPlaylistLoader_.media(a.initialMedia_)}function n(){var e=a.seekable();0!==e.length&&a.mediaSource.addSeekableRange_(e.start(0),e.end(0))}a.useCueTags_&&a.updateAdCues_(e),a.mainSegmentLoader_.playlist(e,a.requestOptions_),a.updateDuration(),a.tech_.paused()||(a.mainSegmentLoader_.load(),a.audioSegmentLoader_&&a.audioSegmentLoader_.load()),e.endList||(a.duration()!==1/0?a.tech_.one("durationchange",function e(){a.duration()===1/0?n():a.tech_.one("durationchange",e)}):n())}),this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort(),a.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=a.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;yc(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=t,a.mainSegmentLoader_.playlist(e,a.requestOptions_),a.mainSegmentLoader_.load(),a.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(e)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),a.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(e,t){var n,a=e.mediaGroups||{},i=!0,r=Object.keys(a.AUDIO);for(n in a.AUDIO)for(var s in a.AUDIO[n])a.AUDIO[n][s].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),ah.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),ah.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&1<Object.keys(a.AUDIO[r[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var r=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=r.selectPlaylist(),t=r.masterPlaylistLoader_.media(),n=r.tech_.buffered(),a=n.length?n.end(n.length-1)-r.tech_.currentTime():0,i=r.bufferLowWaterLine();(!t.endList||r.duration()<Ou.MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<t.attributes.BANDWIDTH||i<=a)&&r.masterPlaylistLoader_.media(e),r.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){r.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){r.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){r.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){r.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){r.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(e){r.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}),this.audioSegmentLoader_.on("ended",function(){r.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything(function(){Bs.browser.IE_VERSION||Bs.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.seekTo_(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(Bs.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.seekTo_(n.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(n.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return Bs.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}var e;!this.tech_.autoplay()||void 0!==(e=this.tech_.play())&&"function"==typeof e.then&&e.then(null,function(e){}),this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=(this.mainSegmentLoader_.startingMedia_&&!this.mainSegmentLoader_.startingMedia_.containsVideo||e)&&this.audioSegmentLoader_.ended_),e){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(e){Bs.log.warn("Failed to call media source endOfStream",e)}}}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var n=ah.Playlist.playlistEnd(e,t),a=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-a<=.1;var r=i.end(i.length-1);return r-a<=.1&&n-r<=.1}},{key:"blacklistCurrentPlaylist",value:function(e,t){var n,a=0<arguments.length&&void 0!==e?e:{},i=t,r=void 0,r=a.playlist||this.masterPlaylistLoader_.media(),i=i||a.blacklistDuration||this.blacklistDuration;if(!r){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var s=1===this.masterPlaylistLoader_.master.playlists.filter(gc).length,o=this.masterPlaylistLoader_.master.playlists;return 1===o.length?(Bs.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s)):(s&&(Bs.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),o.forEach(function(e){e.excludeUntil!==1/0&&delete e.excludeUntil}),this.tech_.trigger("retryplaylist")),r.excludeUntil=Date.now()+1e3*i,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),n=this.selectPlaylist(),Bs.log.warn("Problem encountered with the current HLS playlist."+(a.message?" "+a.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(n,s))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=Ac(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:ah.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var a=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==a&&0!==(e=ah.Playlist.seekable(n,a)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(a=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(t=ah.Playlist.seekable(n,a)).length)return}var i=void 0,r=void 0;this.seekable_&&this.seekable_.length&&(i=this.seekable_.end(0),r=this.seekable_.start(0)),!t||t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=Bs.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]),this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===i&&this.seekable_.start(0)===r||(this.logger_("seekable updated ["+Ic(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},{key:"updateDuration",value:function(){function e(){t.logger_("Setting duration from "+t.mediaSource.duration+" => "+a);try{t.mediaSource.duration=a}catch(e){Bs.log.warn("Failed to set media source duration",e)}t.tech_.trigger("durationchange"),t.mediaSource.removeEventListener("sourceopen",e)}var t=this,n=this.mediaSource.duration,a=ah.Playlist.duration(this.masterPlaylistLoader_.media()),i=this.tech_.buffered();0<i.length&&(a=Math.max(a,i.end(i.length-1))),n!==a&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",e):e())}},{key:"dispose",value:function(){var a=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(e){var t,n=a.mediaTypes_[e].groups;for(t in n)n[t].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=function(i,e){var t,n=e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t",a=(t=e.attributes||{}).CODECS?tu(t.CODECS):su,r=e.attributes||{},s=!0,o=!1;if(!e)return[];if(i.mediaGroups.AUDIO&&r.AUDIO){var l=i.mediaGroups.AUDIO[r.AUDIO];if(l)for(var c in s=!(o=!0),l)if(!l[c].uri&&!l[c].playlists){s=!0;break}}o&&!a.audioProfile&&(s||(a.audioProfile=function(e){if(!i.mediaGroups.AUDIO||!e)return null;var t,n=i.mediaGroups.AUDIO[e];if(!n)return null;for(t in n){var a=n[t];if(a.default&&a.playlists)return tu(a.playlists[0].attributes.CODECS).audioProfile}return null}(r.AUDIO)),a.audioProfile||(Bs.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),a.audioProfile=su.audioProfile));var u={};a.videoCodec&&(u.video=""+a.videoCodec+a.videoObjectTypeIndicator),a.audioProfile&&(u.audio="mp4a.40."+a.audioProfile);var h=nu("audio",n,[u.audio]),d=nu("video",n,[u.video]),f=nu("video",n,[u.video,u.audio]);return o?!s&&u.video?[d,h]:s||u.video?[f,h]:[h,h]:u.video?[f]:[h]}(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=1<e.length&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new Bs.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(e){e.attributes.CODECS&&y.MediaSource&&y.MediaSource.isTypeSupported&&!y.MediaSource.isTypeSupported('video/mp4; codecs="'+e.attributes.CODECS.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return eu([e])[0]})+'"')&&(e.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(e){var t,n=2,a=null;e.attributes.CODECS&&(t=tu(e.attributes.CODECS),a=t.videoCodec,n=t.codecCount),this.master().playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};e.attributes.CODECS&&(t=tu(e.attributes.CODECS)),t.codecCount!==n&&(e.excludeUntil=1/0),t.videoCodec!==a&&(e.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){var a=2<arguments.length&&void 0!==n?n:0;if(e.segments)for(var i=a,r=void 0,s=0;s<e.segments.length;s++){var o,l,c,u=e.segments[s];if(r=r||function(e,t){for(var n=e.cues,a=0;a<n.length;a++){var i=n[a];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null}(t,i+u.duration/2)){if("cueIn"in u){r.endTime=i,r.adEndTime=i,i+=u.duration,r=null;continue}if(i<r.endTime){i+=u.duration;continue}r.endTime+=u.duration}else{"cueOut"in u&&((r=new y.VTTCue(i,i+u.duration,u.cueOut)).adStartTime=i,r.adEndTime=i+parseFloat(u.cueOut),t.addCue(r)),"cueOutCont"in u&&(l=(o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(u.cueOutCont.split("/").map(parseFloat),2))[0],c=o[1],(r=new y.VTTCue(i,i+u.duration,"")).adStartTime=i-l,r.adEndTime=r.adStartTime+c,t.addCue(r))}i+=u.duration}}(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=Ou.GOAL_BUFFER_LENGTH,n=Ou.GOAL_BUFFER_LENGTH_RATE,a=Math.max(t,Ou.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,a)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=Ou.BUFFER_LOW_WATER_LINE,n=Ou.BUFFER_LOW_WATER_LINE_RATE,a=Math.max(t,Ou.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,a)}}]),sh);function sh(e){zl(this,sh);var t,n=Ql(this,(sh.__proto__||Object.getPrototypeOf(sh)).call(this)),a=e.url,i=e.handleManifestRedirects,r=e.withCredentials,s=e.tech,o=e.bandwidth,l=e.externHls,c=e.useCueTags,u=e.blacklistDuration,h=e.enableLowInitialPlaylist,d=e.sourceType,f=e.seekTo,p=e.cacheEncryptionKeys;if(!a)throw new Error("A non-empty playlist URL is required");ah=l,n.withCredentials=r,n.tech_=s,n.hls_=s.hls,n.seekTo_=f,n.sourceType_=d,n.useCueTags_=c,n.blacklistDuration=u,n.enableLowInitialPlaylist=h,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:r,handleManifestRedirects:i,timeout:null},n.mediaTypes_=(t={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Pu,activeTrack:Pu,onGroupChanged:Pu,onTrackChanged:Pu}}),t),n.mediaSource=new Bs.MediaSource,n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_.bind(n)),n.seekable_=Bs.createTimeRanges(),n.hasPlayed_=function(){return!1},n.syncController_=new zu(e),n.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new Ju,n.inbandTextTracks_={};var m={hls:n.hls_,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.mediaSource.duration},hasPlayed:function(){return n.hasPlayed_()},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:o,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:p};return n.masterPlaylistLoader_=new("dash"===n.sourceType_?Su:rc)(a,n.hls_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new Bu(Bs.mergeOptions(m,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),e),n.audioSegmentLoader_=new Bu(Bs.mergeOptions(m,{loaderType:"audio"}),e),n.subtitleSegmentLoader_=new Hu(Bs.mergeOptions(m,{loaderType:"vtt"}),e),n.setupSegmentLoaderListeners_(),ih.forEach(function(e){n[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(n,e)}),n.logger_=wu("MPC"),n.masterPlaylistLoader_.load(),n}function oh(e,t,n){zl(this,oh);var a,i,r,s,o=e.masterPlaylistController_,l=o[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);t.attributes.RESOLUTION&&(a=t.attributes.RESOLUTION,this.width=a.width,this.height=a.height),this.bandwidth=t.attributes.BANDWIDTH,this.id=n,this.enabled=(i=e.playlists,r=t.uri,s=l,function(e){var t=i.master.playlists[r],n=mc(t),a=gc(t);return void 0===e?a:(e?delete t.disabled:t.disabled=!0,e===a||n||(s(),e?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),e)})}var lh=["seeking","seeked","pause","playing","error"],ch=(Wl(uh,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&y.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=y.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var e=this.seekable(),t=this.tech_.currentTime(),n=void 0;return this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(n=e.end(e.length-1)),this.beforeSeekableWindow_(e,t)&&(n=e.start(0)+.1),void 0!==n&&(this.logger_("Trying to seek outside of seekable at time "+t+" with seekable range "+Ic(e)+". Seeking to "+n+"."),this.seekTo(n),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=Ac(this.tech_.buffered(),e);return t.length&&e+3<=t.end(0)?(this.cancelTimer_(),this.seekTo(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.seekTo(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var a=this.tech_.buffered(),i=kc(a,t);if(this.videoUnderflow_(i,a,t))return this.cancelTimer_(),this.seekTo(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<i.length){var r=i.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+r+", seeking to "+i.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*r,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t,n,a){var i=3<arguments.length&&void 0!==a&&a;if(!e.length)return!1;var r=e.end(e.length-1)+.1;return!n.endList&&i&&(r=e.end(e.length-1)+3*n.targetDuration),r<t}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-.1)}},{key:"videoUnderflow_",value:function(e,t,n){if(0===e.length){var a=this.gapFromVideoUnderflow_(t,n);if(a)return this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),a=kc(t,n);this.cancelTimer_(),0!==a.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",a.start(0)),this.seekTo(a.start(0)+1/30),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=function(e){if(e.length<2)return Bs.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var a=e.end(n-1),i=e.start(n);t.push([a,i])}return Bs.createTimeRanges(t)}(e),a=0;a<n.length;a++){var i=n.start(a),r=n.end(a);if(t-i<4&&2<t-i)return{start:i,end:r}}return null}}]),uh);function uh(e){var t=this;function n(){return t.monitorCurrentTime_()}function a(){return t.techWaiting_()}function i(){return t.cancelTimer_()}function r(){return t.fixesBadSeeks_()}zl(this,uh),this.tech_=e.tech,this.seekable=e.seekable,this.seekTo=e.seekTo,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=wu("PlaybackWatcher"),this.logger_("initialize"),this.tech_.on("seekablechanged",r),this.tech_.on("waiting",a),this.tech_.on(lh,i),this.tech_.on("canplay",n),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",r),t.tech_.off("waiting",a),t.tech_.off(lh,i),t.tech_.off("canplay",n),t.checkCurrentTimeTimeout_&&y.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}function hh(e){!function t(n,e){var a=0,i=0,r=Bs.mergeOptions(dh,e);function s(){i&&n.currentTime(i)}function o(e){null!=e&&(i=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",s),n.src(e),n.trigger({type:"usage",name:"hls-error-reload"}),n.play())}function l(){if(Date.now()-a<1e3*r.errorInterval)n.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(r.getSource&&"function"==typeof r.getSource)return a=Date.now(),r.getSource.call(n,o);Bs.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}}function c(){n.off("loadedmetadata",s),n.off("error",l),n.off("dispose",c)}n.ready(function(){n.trigger({type:"usage",name:"hls-error-reload-initialized"})}),n.on("error",l),n.on("dispose",c),n.reloadSourceOnError=function(e){c(),t(n,e)}}(this,e)}var dh={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}};Bs.use("*",function(t){return{setSource:function(e,t){t(null,e)},setCurrentTime:function(e){return t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(e),e},play:function(){t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(t.tech_.currentTime())}}});var fh={PlaylistLoader:rc,Playlist:Bc,Decrypter:Hl,AsyncStream:Rl,decrypt:Bl,utils:Uc,STANDARD_PLAYLIST_SELECTOR:function(){return function(e,t,n,a,i){var r=e.playlists.map(function(e){var t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes.BANDWIDTH||y.Number.MAX_VALUE,width:t,height:n,playlist:e}});Mu(r,function(e,t){return e.bandwidth-t.bandwidth});var s=(r=r.filter(function(e){return!Bc.isIncompatible(e.playlist)})).filter(function(e){return Bc.isEnabled(e.playlist)});s.length||(s=r.filter(function(e){return!Bc.isDisabled(e.playlist)}));var o=s.filter(function(e){return e.bandwidth*Ou.BANDWIDTH_VARIANCE<t}),l=o[o.length-1],c=o.filter(function(e){return e.bandwidth===l.bandwidth})[0];if(!1===i){var u=c||s[0]||r[0];return u?u.playlist:null}var h=o.filter(function(e){return e.width&&e.height});Mu(h,function(e,t){return e.width-t.width});var d=h.filter(function(e){return e.width===n&&e.height===a}),l=d[d.length-1],f=d.filter(function(e){return e.bandwidth===l.bandwidth})[0],p=void 0,m=void 0,g=void 0;f||(m=(p=h.filter(function(e){return e.width>n||e.height>a})).filter(function(e){return e.width===p[0].width&&e.height===p[0].height}),l=m[m.length-1],g=m.filter(function(e){return e.bandwidth===l.bandwidth})[0]);var v=g||f||c||s[0]||r[0];return v?v.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Iu(this.tech_.el(),"width"),10),parseInt(Iu(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(Bc.isEnabled);return Mu(e,$u),e.filter(function(e){return tu(e.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:$u,comparePlaylistResolution:function(e,t){var n=void 0,a=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||y.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(a=t.attributes.RESOLUTION.width),n===(a=a||y.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-a},xhr:_c()};function ph(e){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)?"hls":/^application\/dash\+xml/i.test(e)?"dash":null}function mh(e,t){for(var n=t.media(),a=-1,i=0;i<e.length;i++)if(e[i].id===n.uri){a=i;break}e.selectedIndex_=a,e.trigger({selectedIndex:a,type:"change"})}["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(fh,t,{get:function(){return Bs.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),Ou[t]},set:function(e){Bs.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?Bs.log.warn("value of Hls."+t+" must be greater than or equal to 0"):Ou[t]=e}})});var gh,vh="videojs-vhs";function yh(){if(!window.localStorage)return null;var e=window.localStorage.getItem(vh);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}fh.canPlaySource=function(){return Bs.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},fh.supportsNativeHls=(gh=h.createElement("video"),!!Bs.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(gh.canPlayType(e))})),fh.supportsNativeDash=!!Bs.getTech("Html5").isSupported()&&/maybe|probably/i.test(h.createElement("video").canPlayType("application/dash+xml")),fh.supportsTypeNatively=function(e){return"hls"===e?fh.supportsNativeHls:"dash"===e&&fh.supportsNativeDash},fh.isSupported=function(){return Bs.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var _h=(Xl(bh,Bs.getComponent("Component")),Wl(bh,[{key:"setOptions_",value:function(){var e,t=this;this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage&&((e=yh())&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Ou.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ou.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach(function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(e,t){var r=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=fh,this.options_.sourceType=ph(t),this.options_.seekTo=function(e){r.tech_.setCurrentTime(e),r.setCurrentTime(e)},this.masterPlaylistController_=new rh(this.options_),this.playbackWatcher_=new ch(Bs.mergeOptions(this.options_,{seekable:function(){return r.seekable()},media:function(){return r.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){Bs.players[r.tech_.options_.playerId].error(r.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):fh.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=fh.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=0<this.throughput?1/this.throughput:0;return Math.floor(1/(e+t))},set:function(){Bs.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return r.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return r.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return r.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return r.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return r.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return r.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return r.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return r.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Mc(r.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return r.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return r.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return r.tech_.name_},enumerable:!0},duration:{get:function(){return r.tech_.duration()},enumerable:!0},master:{get:function(){return r.playlists.master},enumerable:!0},playerDimensions:{get:function(){return r.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Mc(r.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return r.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){r.options_.useBandwidthFromLocalStorage&&function(e){if(window.localStorage){var t=(t=yh())?Bs.mergeOptions(t,e):e;try{window.localStorage.setItem(vh,JSON.stringify(t))}catch(e){return}}}({bandwidth:r.bandwidth,throughput:Math.round(r.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e,t,n,a,i;i=(a=r).playlists,a.representations=function(){return i.master.playlists.filter(function(e){return!mc(e)}).map(function(e,t){return new oh(a,e,e.uri)})},"dash"===(e=r).options_.sourceType&&(!(t=Bs.players[e.tech_.options_.playerId]).eme||(n=function(e,t,n){if(!e)return e;var a,i={};for(a in e)i[a]={audioContentType:'audio/mp4; codecs="'+n.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[a]&&t.contentProtection[a].pssh&&(i[a].pssh=t.contentProtection[a].pssh),"string"==typeof e[a]&&(i[a].url=e[a]);return Bs.mergeOptions(e,i)}(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media()))&&(t.currentSource().keySystems=n,t.eme.initializeMediaKeys&&t.eme.initializeMediaKeys()))}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return r.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(Bs.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var n=this,e=Bs.players[this.tech_.options_.playerId];e&&e.qualityLevels&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,e;t=n.qualityLevels_,(e=n).representations().forEach(function(e){t.addQualityLevel(e)}),mh(t,e.playlists)}),this.playlists.on("mediachange",function(){mh(n.qualityLevels_,n.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,function e(t,n,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,a)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(a):void 0}(bh.prototype.__proto__||Object.getPrototypeOf(bh.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(e,t){return function(e){var t=e.playlist,n=e.time,a=void 0===n?void 0:n,i=e.callback;if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===a)return i({message:"getProgramTime: playlist and time must be provided"});var r=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n=0,a=void 0,i=0;i<t.segments.length&&!(e<=(n=(a=t.segments[i]).videoTimingInfo?a.videoTimingInfo.transmuxedPresentationEnd:n+a.duration));i++);var r=t.segments[t.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(n<e){if(e>n+.25*r.duration)return null;a=r}return{segment:a,estimatedStart:a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationStart:n-a.duration,type:a.videoTimingInfo?"accurate":"estimate"}}(a,t);if(!r)return i({message:"valid programTime was not found"});if("estimate"===r.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});var s={mediaSeconds:a},o=function(e){if(!e.dateTimeObject)return null;var t=e.videoTimingInfo.transmuxerPrependedSeconds,n=a-(e.videoTimingInfo.transmuxedPresentationStart+t);return new Date(e.dateTimeObject.getTime()+1e3*n)}(r.segment);return o&&(s.programDateTime=o.toISOString()),i(null,s)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:"seekToProgramTime",value:function(e,t,n,a){var i=!(2<arguments.length&&void 0!==n)||n,r=3<arguments.length&&void 0!==a?a:2;return Dc({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:r,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),bh);function bh(e,t,n){zl(this,bh);var a,i=Ql(this,(bh.__proto__||Object.getPrototypeOf(bh)).call(this,t,n.hls));if(t.options_&&t.options_.playerId&&((a=Bs(t.options_.playerId)).hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return Bs.log.warn("player.hls is deprecated. Use player.tech().hls instead."),t.trigger({type:"usage",name:"hls-player-access"}),i},configurable:!0}),a.vhs=i,(a.dash=i).player_=a),i.tech_=t,i.source_=e,i.stats={},i.setOptions_(),i.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(i.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return i.on(h,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;t&&t.contains(i.tech_.el())&&i.masterPlaylistController_.smoothQualityChange_()}),i.on(i.tech_,"seeking",function(){0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),i.on(i.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),i.on(i.tech_,"play",i.play),i}var Sh={name:"videojs-http-streaming",VERSION:"1.10.6",canHandleSource:function(e,t){var n=Bs.mergeOptions(Bs.options,1<arguments.length&&void 0!==t?t:{});return Sh.canPlayType(e.type,n)},handleSource:function(e,t,n){var a=Bs.mergeOptions(Bs.options,2<arguments.length&&void 0!==n?n:{});return t.hls=new _h(e,t,a),t.hls.xhr=_c(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e,t){var n=Bs.mergeOptions(Bs.options,1<arguments.length&&void 0!==t?t:{}).hls.overrideNative,a=ph(e);return!a||fh.supportsTypeNatively(a)&&!n?"":"maybe"}};return void 0!==Bs.MediaSource&&void 0!==Bs.URL||(Bs.MediaSource=pu,Bs.URL=mu),pu.supportsNativeMediaSources()&&Bs.getTech("Html5").registerSourceHandler(Sh,0),Bs.HlsHandler=_h,Bs.HlsSourceHandler=Sh,Bs.Hls=fh,Bs.use||Bs.registerComponent("Hls",fh),Bs.options.hls=Bs.options.hls||{},Bs.registerPlugin?Bs.registerPlugin("reloadSourceOnError",hh):Bs.plugin("reloadSourceOnError",hh),Bs}),function(){"use strict";var s,t,h,d,i,r,o,f,e,n=null;function p(e,t,n,a){return h={label:n,sources:t},"function"==typeof a?a(e,t,n):(e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}})),e||e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}})))}n=void 0===window.videojs&&"function"==typeof require?require("video.js"):window.videojs,window,t={},h={},d={},i=(s=n).getComponent("MenuItem"),r=s.extend(i,{constructor:function(e,t,n,a){this.onClickListener=n,this.label=a,i.call(this,e,t),this.src=t.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAsLabel(),this.selected(!0),this.addClass("vjs-selected"))},showAsLabel:function(){this.label&&(this.label.innerHTML=this.options_.label)},onClick:function(e){this.onClickListener(this);var t=this.player_.currentTime(),n=this.player_.paused();this.showAsLabel(),this.addClass("vjs-selected"),n||this.player_.bigPlayButton.hide(),"function"!=typeof e&&"function"==typeof this.options_.customSourcePicker&&(e=this.options_.customSourcePicker);var a="loadeddata";"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(a="timeupdate"),p(this.player_,this.src,this.options_.label,e).one(a,function(){this.player_.currentTime(t),this.player_.handleTechSeeked_&&this.player_.handleTechSeeked_(),n||this.player_.play()&&this.player_.handleTechSeeked_&&this.player_.handleTechSeeked_(),this.player_.trigger("resolutionchange")})}}),o=s.getComponent("MenuButton"),f=s.extend(o,{constructor:function(e,t,n,a){var i;this.sources=t.sources,this.label=a,this.label.innerHTML=t.initialySelectedLabel,o.call(this,e,t,n),this.controlText("Quality"),n.dynamicLabel?this.el().appendChild(a):(i=document.createElement("span"),s.dom.addClass(i,"vjs-resolution-button-staticlabel"),s.addClass(i,"vjs-icon-cog"),this.el().appendChild(i))},createItems:function(){function e(t){n.map(function(e){e.selected(e===t),e.removeClass("vjs-selected")})}var t,n=[],a=this.sources&&this.sources.label||{};for(t in a)a.hasOwnProperty(t)&&(n.push(new r(this.player_,{label:t,src:a[t],initialySelected:t===this.options_.initialySelectedLabel,customSourcePicker:this.options_.customSourcePicker},e,this.label)),d[t]=n[n.length-1]);return n}}),e=function(e){var o=s.mergeOptions(t,e),a=this,l=document.createElement("span"),c={};function i(e,t){return e.res&&t.res?t.res-e.res:0}function u(e){var t={label:{},res:{},type:{}};return e.map(function(e){n(t,"label",e),n(t,"res",e),n(t,"type",e),r(t,"label",e),r(t,"res",e),r(t,"type",e)}),t}function n(e,t,n){null==e[t][n[t]]&&(e[t][n[t]]=[])}function r(e,t,n){e[t][n[t]].push(n)}s.dom.addClass(l,"vjs-resolution-button-label"),a.updateSrc=function(e){if(!e)return a.src(sources.map(function(e){return{src:e.src,type:e.type,res:e.res}})),a||a.src();a.controlBar.resolutionSwitcher&&(a.controlBar.resolutionSwitcher.dispose(),delete a.controlBar.resolutionSwitcher),e=e.sort(i);var t=function(e,t){var n=o.default,a="";"high"===n?(n=t[0].res,a=t[0].label):"low"!==n&&null!=n&&e.res[n]?e.res[n]&&(a=e.res[n][0].label):(n=t[t.length-1].res,a=t[t.length-1].label);return{res:n,label:a,sources:e.res[n]}}(c=u(e),e),n=new f(a,{sources:c,initialySelectedLabel:t.label,initialySelectedRes:t.res,customSourcePicker:o.customSourcePicker},o,l);return s.dom.addClass(n.el(),"vjs-resolution-button"),a.controlBar.resolutionSwitcher=a.controlBar.el_.insertBefore(n.el_,a.controlBar.getChild("fullscreenToggle").el_),a.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)},p(a,t.sources,t.label)},a.currentResolution=function(e,t){if(null==e)return h;if(null!=d[e])try{d[e].onClick(t)}catch(e){}return a},a.getGroupedSrc=function(){return c},a.ready(function(){var s;1<a.options_.sources.length&&a.updateSrc(a.options_.sources),"Youtube"===a.techName_&&((s=a).tech_.ytPlayer.setPlaybackQuality("default"),s.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(){s.trigger("resolutionchange")}),s.one("play",function(){var e=s.tech_.ytPlayer.getAvailableQualityLevels(),t={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"default"}},n=[];e.map(function(e){n.push({src:s.src().src,type:s.src().type,label:t[e].label,res:t[e].res,_yt:t[e].yt})});var a="auto",i=0,r=((c=u(n)).label.auto,new f(s,{sources:c,initialySelectedLabel:a,initialySelectedRes:i,customSourcePicker:function(e,t,n){return s.tech_.ytPlayer.setPlaybackQuality(t[0]._yt),s}},o,l));r.el().classList.add("vjs-resolution-button"),s.controlBar.resolutionSwitcher=s.controlBar.addChild(r)}))})},s.registerPlugin("videoJsResolutionSwitcher",e)}(),function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports):t(e.ADB={})}("undefined"!=typeof self?self:this,function(e){var t={};(function(){var e,v,s,y,o,t,n,a,i,r,l,B;e=this,void 0===v&&(v={}),void 0===s&&(s={}),void 0===y&&(y={}),y.radio||(y.radio={}),y.plugin||(y.plugin={}),void 0===o&&(o={}),o.clock||(o.clock={}),function(){"use strict";function h(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,a,i,r){return h((s=h(h(t,e),h(a,r)))<<(o=i)|s>>>32-o,n);var s,o}function d(e,t,n,a,i,r,s){return o(t&n|~t&a,e,t,i,r,s)}function f(e,t,n,a,i,r,s){return o(t&a|n&~a,e,t,i,r,s)}function p(e,t,n,a,i,r,s){return o(t^n^a,e,t,i,r,s)}function m(e,t,n,a,i,r,s){return o(n^(t|~a),e,t,i,r,s)}function l(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n,a,i,r,s=1732584193,o=-271733879,l=-1732584194,c=271733878,u=0;u<e.length;u+=16)s=d(n=s,a=o,i=l,r=c,e[u],7,-680876936),c=d(c,s,o,l,e[u+1],12,-389564586),l=d(l,c,s,o,e[u+2],17,606105819),o=d(o,l,c,s,e[u+3],22,-1044525330),s=d(s,o,l,c,e[u+4],7,-176418897),c=d(c,s,o,l,e[u+5],12,1200080426),l=d(l,c,s,o,e[u+6],17,-1473231341),o=d(o,l,c,s,e[u+7],22,-45705983),s=d(s,o,l,c,e[u+8],7,1770035416),c=d(c,s,o,l,e[u+9],12,-1958414417),l=d(l,c,s,o,e[u+10],17,-42063),o=d(o,l,c,s,e[u+11],22,-1990404162),s=d(s,o,l,c,e[u+12],7,1804603682),c=d(c,s,o,l,e[u+13],12,-40341101),l=d(l,c,s,o,e[u+14],17,-1502002290),s=f(s,o=d(o,l,c,s,e[u+15],22,1236535329),l,c,e[u+1],5,-165796510),c=f(c,s,o,l,e[u+6],9,-1069501632),l=f(l,c,s,o,e[u+11],14,643717713),o=f(o,l,c,s,e[u],20,-373897302),s=f(s,o,l,c,e[u+5],5,-701558691),c=f(c,s,o,l,e[u+10],9,38016083),l=f(l,c,s,o,e[u+15],14,-660478335),o=f(o,l,c,s,e[u+4],20,-405537848),s=f(s,o,l,c,e[u+9],5,568446438),c=f(c,s,o,l,e[u+14],9,-1019803690),l=f(l,c,s,o,e[u+3],14,-187363961),o=f(o,l,c,s,e[u+8],20,1163531501),s=f(s,o,l,c,e[u+13],5,-1444681467),c=f(c,s,o,l,e[u+2],9,-51403784),l=f(l,c,s,o,e[u+7],14,1735328473),s=p(s,o=f(o,l,c,s,e[u+12],20,-1926607734),l,c,e[u+5],4,-378558),c=p(c,s,o,l,e[u+8],11,-2022574463),l=p(l,c,s,o,e[u+11],16,1839030562),o=p(o,l,c,s,e[u+14],23,-35309556),s=p(s,o,l,c,e[u+1],4,-1530992060),c=p(c,s,o,l,e[u+4],11,1272893353),l=p(l,c,s,o,e[u+7],16,-155497632),o=p(o,l,c,s,e[u+10],23,-1094730640),s=p(s,o,l,c,e[u+13],4,681279174),c=p(c,s,o,l,e[u],11,-358537222),l=p(l,c,s,o,e[u+3],16,-722521979),o=p(o,l,c,s,e[u+6],23,76029189),s=p(s,o,l,c,e[u+9],4,-640364487),c=p(c,s,o,l,e[u+12],11,-421815835),l=p(l,c,s,o,e[u+15],16,530742520),s=m(s,o=p(o,l,c,s,e[u+2],23,-995338651),l,c,e[u],6,-198630844),c=m(c,s,o,l,e[u+7],10,1126891415),l=m(l,c,s,o,e[u+14],15,-1416354905),o=m(o,l,c,s,e[u+5],21,-57434055),s=m(s,o,l,c,e[u+12],6,1700485571),c=m(c,s,o,l,e[u+3],10,-1894986606),l=m(l,c,s,o,e[u+10],15,-1051523),o=m(o,l,c,s,e[u+1],21,-2054922799),s=m(s,o,l,c,e[u+8],6,1873313359),c=m(c,s,o,l,e[u+15],10,-30611744),l=m(l,c,s,o,e[u+6],15,-1560198380),o=m(o,l,c,s,e[u+13],21,1309151649),s=m(s,o,l,c,e[u+4],6,-145523070),c=m(c,s,o,l,e[u+11],10,-1120210379),l=m(l,c,s,o,e[u+2],15,718787259),o=m(o,l,c,s,e[u+9],21,-343485551),s=h(s,n),o=h(o,a),l=h(l,i),c=h(c,r);return[s,o,l,c]}function c(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function a(e){for(var t,n="0123456789abcdef",a="",i=0;i<e.length;i+=1)t=e.charCodeAt(i),a+=n.charAt(t>>>4&15)+n.charAt(15&t);return a}function n(e){return unescape(encodeURIComponent(e))}function i(e){return c(l(u(t=n(e)),8*t.length));var t}function r(e,t){return function(e,t){var n,a,i=u(e),r=[],s=[];for(r[15]=s[15]=void 0,16<i.length&&(i=l(i,8*e.length)),n=0;n<16;n+=1)r[n]=909522486^i[n],s[n]=1549556828^i[n];return a=l(r.concat(u(t)),512+8*t.length),c(l(s.concat(a),640))}(n(e),n(t))}v.md5=function(e,t,n){return t?n?r(t,e):a(r(t,e)):n?i(e):a(i(e))}}(),function(){"use strict";var e={startsWith:function(e,t){return 0==e.indexOf(t)}};v.StringUtils=e}(),function(){"use strict";var i={clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},merge:function(e,t){var n,a=i.clone(e);for(n in t)t.hasOwnProperty(n)&&(a[n]=t[n]);return a},append:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}};v.ObjectUtils=i}(),function(){"use strict";function l(e){if(null==e)return 1;for(var t=0;t<e.length;++t)if(isNaN(e[t]))return;return 1}function n(e,t){if("string"!=typeof e||"string"!=typeof t)return NaN;var n=e.split("."),a=t.split(".");if(!l(n)||!l(a))return NaN;for(var i=Math.max(n.length,a.length),r=0;r<i;++r){var s=null!=n[r]?n[r]:"0",o=null!=a[r]?a[r]:"0",s=Number(s);if((o=Number(o))<s)return 1;if(s<o)return-1}return 0}var e={isGreaterThan:function(e,t){return 0<n(e,t)},isGreaterThanEqual:function(e,t){return 0<=n(e,t)},isLessThan:function(e,t){return n(e,t)<0},isLessThanEqual:function(e,t){return n(e,t)<=0},isSame:function(e,t){return 0===n(e,t)},isDifferent:function(e,t){return 0!==n(e,t)}};v.VersionUtils=e}(),function(e){"use strict";function t(e,t,n){this.fn=e,this.ctx=t,this.params=n}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},e.radio.Command=t}(y),function(e){"use strict";function t(e,t){this._queue=[],this._lastTs=0,this._isSuspended=void 0!==e&&e,this._delay=void 0!==t?t:0}t.prototype.addCommand=function(e){this._queue.push(e),this._drain()},t.prototype.cancelAllCommands=function(){this._queue=[]},t.prototype.isEmpty=function(){return 0===this._queue.length},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1,this._drain()},t.prototype.flush=function(){this._isSuspended=!1;for(var e=0;e<this._queue.length;e++)this._queue[e].run();this._queue=[]},t.prototype._drain=function(){var n;this._isSuspended||this._drainInProgress||(this._drainInProgress=!0,n=this,function e(){var t=n._queue.shift();t?n._runCommand(t,function(){n._isSuspended||e()}):n._drainInProgress=!1}())},t.prototype._runCommand=function(e,t){function n(){e.run(),null!=t&&t.call(r)}var a,i,r=this;0==this._lastTs?n():(i=(a=(new Date).getTime())-this._lastTs,this._lastTs=a,i<this._delay?setTimeout(n,this._delay-i):n())},e.radio.CommandQueue=t}(y),function(e){"use strict";function s(e,t){if(this._name=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}s.WILDCARD="*",s.SEPARATOR=":",s.prototype.toString=function(){return"<channel: "+this._name+">"},s.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(a,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},s.prototype.on=function(e,t,n){this._isShutDown||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push({fn:t,ctx:n}))},s.prototype.off=function(e,t,n){if(!this._isShutDown){if(t="function"==typeof t?t:null,!e&&null==t&&!n)return void(this._listeners={});if(e)this._removeListener(e,t,n);else for(e in this._listeners)this._listeners.hasOwnProperty(e)&&this._removeListener(e,t,n)}},s.prototype.trigger=function(e){if(!this._isShutDown)for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)&&function(e,t){if(e===t)return 1;for(var n=(e||"").split(s.SEPARATOR),a=(t||"").split(s.SEPARATOR),i=!0,r=0;r<n.length;r++)i=i&&(n[r]===s.WILDCARD||n[r]===a[r]);return i}(t,e.name))for(var n=this._listeners[t].slice(0),a=0;a<n.length;a++){var i=n[a];i.fn.call(i.ctx,e)}},s.prototype.comply=function(e,t,n){this._isShutDown||(this._commands[e]={cmd:t,ctx:n})},s.prototype.command=function(e,t){if(!this._isShutDown){var n=this._commands[e];if(!n)return void this._logger.warn(a,"#command > No command handler for: "+e);n.cmd.call(n.ctx,t)}},s.prototype.reply=function(e,t,n){this._isShutDown||(this._requests[e]={fn:t,ctx:n})},s.prototype.request=function(e){if(!this._isShutDown){var t=this._requests[e];return t?t.fn.call(t.ctx):(this._logger.warn(a,"#request > No request handler for: "+e),null)}},s.prototype._removeListener=function(e,t,n){t="function"==typeof t?t:null;var a=this._listeners[e];if(a){if(!a.length||null==t&&!n)return void delete this._listeners[e];for(var i=0;i<a.length;i++){var r=a[i];null!==t&&t!==r.fn||n&&n!==r.ctx||this._listeners[e].splice(i,1)}}};var a="radio::Channel";e.radio.Channel=s}(y),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._channels={}}var n=e.radio.Channel;t.prototype.channel=function(e){return this._channels[e]||(this._channels[e]=new n(e,this._logger)),this._channels[e]},t.prototype.shutdown=function(){for(var e in this._channels)this._channels.hasOwnProperty(e)&&this._channels[e].shutdown()},e.radio.Radio=t}(y),function(){"use strict";y.extend=function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e}}(),function(e){"use strict";function t(){}t.prototype.write=function(e){throw new Error("Implementation error: Method must be overridden.")},e.ILogWriter=t}(y),function(e){"use strict";function t(){}t.prototype.write=function(e){window.console&&window.console.log&&window.console.log(e)},e.LogWriter=t}(y),function(e){"use strict";function t(){}t.prototype.setLogWriter=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.debug=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.info=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.warn=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.error=function(e,t){throw new Error("Implementation error: Method must be overridden.")},e.ILogger=t}(y),function(e){"use strict";function t(){this._logWriter=new n}var n=e.LogWriter;t.prototype.setLogWriter=function(e){if(!e)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=e,this._enabled=!1},t.prototype.getLogWriter=function(){return this._logWriter},t.prototype.getEnabled=function(){return this._enabled},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.debug=function(e,t){this._log(e,i,t)},t.prototype.info=function(e,t){this._log(e,a,t)},t.prototype.warn=function(e,t){this._log(e,r,t)},t.prototype.error=function(e,t){this._log(e,s,t)},t.prototype._log=function(e,t,n){var a,i,r;t!=s&&!this._enabled||(a="",a+="["+(i=new Date).toTimeString()+"."+((r=i.getMilliseconds())<10?"00"+r:r<100?"0"+r:""+r)+"] ["+t+"] ",a+="["+e+"] "+n,this._logWriter.write(a))};var a="INFO",i="DEBUG",r="WARN",s="ERROR";e.Logger=t}(y),function(e){"use strict";function t(e,t){this._pluginName=e,this._eventName=t}var n=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getEventName=function(){return this._eventName},t.prototype.getName=function(){return this._pluginName+n.SEPARATOR+this._eventName},e.Trigger=t}(y),function(e){"use strict";function t(e,t){this.name=e,this.data=t}t.SUCCESS="success",t.ERROR="error",t.createFromTrigger=function(e){return new t(e.getName())},e.Event=t}(y),function(e){"use strict";function t(){this._events={}}t.prototype.addEventListener=function(e,t,n){e&&t&&(n=n||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:n}))},t.prototype.removeEventListener=function(e,t,n){if(e&&t){n=n||window;var a,i,r=!1;for(i in this._events)if(e===i){r=!0;break}if(r){for(a=this._events[i].length-1;0<=a;a--){var s=this._events[i][a];t===s.cb&&n===s.ctx&&this._events[i].splice(a,1)}this._events[i].length||delete this._events[i]}}},t.prototype.dispatchEvent=function(e){if(e.name)for(var t in this._events)if(this._events.hasOwnProperty(t)&&e.name===t){for(var n=this._events[t].slice(0),a=n.length,i=0;i<a;i++)n[i].cb.call(n[i].ctx,e);break}},t.prototype.removeAllListeners=function(e){var t,n;if(e){for(n in this._events)if(this._events.hasOwnProperty(n)){for(t=this._events[n].length-1;0<=t;t--){this._events[n][t].ctx===e&&this._events[n].splice(t,1)}this._events[n].length||delete this._events[n]}}else this._events={}},e.EventDispatcher=t}(y),function(e){"use strict";function t(){}function r(){r.__super__.constructor.call(this),this._connection=null}var s=e.Event,n=e.EventDispatcher;t.GET="GET",r.RESPONSE="response",r.INSTANCE="instance",e.extend(r,n),r.prototype.close=function(){this.removeAllListeners(null)},r.prototype.load=function(e){e&&e.method&&e.url&&(e._xmlhttp=this._createCORSRequest(e),e._xmlhttp?e._xmlhttp.send():this._loadImage(e))},r.prototype._createCORSRequest=function(e){var t,n,a,i=null;return void 0===window.XMLHttpRequest||"withCredentials"in(t=new window.XMLHttpRequest)&&(i=t).open(e.method,e.url,!0),null==i&&void 0!==window.XDomainRequest&&(i=new window.XDomainRequest).open(e.method,e.url),i&&(a=(n={})[r.INSTANCE]=this,i.onload=function(){if(i.status&&400<=parseInt(i.status,10))return this.onerror();n[r.RESPONSE]=i.responseText,a.dispatchEvent(new s(s.SUCCESS,n))},i.onerror=function(){a.dispatchEvent(new s(s.ERROR,n))}),i},r.prototype._loadImage=function(e){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=e.url;var t={};t[r.RESPONSE]="",(t[r.INSTANCE]=this).dispatchEvent(new s(s.SUCCESS,t))},e.URLRequestMethod=t,e.URLRequest=function(e,t){this.url=e||null,this.method=t,this._xmlhttp=null},e.URLLoader=r}(y),function(){"use strict";var e={getVersion:function(){return"js-2.2.0.223-05c3c4"},getMajor:function(){return e.getNumberAtPosition(0)},getMinor:function(){return e.getNumberAtPosition(1)},getMicro:function(){return e.getNumberAtPosition(2)},getPatch:function(){return e.getNumberAtPosition(3)},getBuild:function(){return"05c3c4"},getApiLevel:function(){return 4},getNumberAtPosition:function(e){return"2.2.0.223".split(".")[e]}};s.Version=e}(),function(e){"use strict";function t(e,t){this._message=e,this._details=t}t.prototype.getMessage=function(){return this._message},t.prototype.getDetails=function(){return this._details},e.ErrorInfo=t}(s),function(){"use strict";s.HeartbeatConfig=function(){this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.HeartbeatDelegate=t}(s),function(e){"use strict";function t(){}t.prototype.configure=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.bootstrap=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.resolveData=function(e){throw new Error("Implementation error: Method must be overridden.")},e.plugin.IPlugin=t}(y),function(e){"use strict";function t(e,t,n,a){this.trigger=e,this.action=n,this.plugin=t,this._paramMappings={},this.mergeParams(a)}var a=e.plugin.ParamMapping;t.prototype.mergeParams=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];this._paramMappings[n.getKeyName()]=n}},t.prototype.getParams=function(){var e,t=[];for(e in this._paramMappings)this._paramMappings.hasOwnProperty(e)&&t.push(this._paramMappings[e]);return t},t.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e},t.prototype.removeParam=function(e,t){var n=new a(e,t);this._paramMappings.hasOwnProperty(n.getKeyName())&&delete this._paramMappings[n.getKeyName()]},e.plugin.Behaviour=t}(y),function(e){"use strict";function t(e,t,n){this._pluginName=e,this._key=t,this._paramName=n||e+a.SEPARATOR+t}var a=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getKey=function(){return this._key},t.prototype.getKeyName=function(){return this._pluginName+a.SEPARATOR+this._key},t.prototype.getParamName=function(){return this._paramName},e.plugin.ParamMapping=t}(y),function(e){"use strict";function n(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._plugins={},this._behaviours={},this._radio=new t(this._logger),this._dataChannel=this._radio.channel(i),this._ctrlChannel=this._radio.channel(o)}var a=e.Event,t=e.radio.Radio,r=e.radio.Channel,s=e.plugin.Behaviour;n.ERROR="error",n.prototype.addPlugin=function(e){var t=e.getName();this._plugins[t]&&this._logger.warn(l,"#addPlugin > Replacing plugin: "+t),(this._plugins[t]=e).bootstrap(this)},n.prototype.setupPlugins=function(){for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].setup()},n.prototype.pluginExists=function(e){return!!this._plugins[e]},n.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()},n.prototype.on=function(e,t,n,a){this._dataChannel.on(e+r.SEPARATOR+t,n,a)},n.prototype.off=function(e,t,n,a){var i=e&&t?e+r.SEPARATOR+t:null;this._dataChannel.off(i,n,a)},n.prototype.trigger=function(e){var t=e.name,n=this._behaviours[t];if(n){for(var a,i,r,s,o,l={},c={},u=0;u<n.length;u++)if(r=(i=n[u]).getParams())for(a=0;a<r.length;a++)l[(s=r[a]).getPluginName()]=l[s.getPluginName()]||[],s.key in l[s.getPluginName()]||l[s.getPluginName()].push(s.getKey());for(o in l)l.hasOwnProperty(o)&&(c[o]=this.request(o,l[o]));for(u=0;u<n.length;u++){var h={_behaviour:i=n[u],_eventData:e.data||{}};if(r=i.getParams()){for(a=0;a<r.length;a++)h[(s=r[a]).getParamName()]=c[s.getPluginName()]?c[s.getPluginName()][s.getKey()]:null;this.command(i.plugin.getName(),i.action,h)}}}this._dataChannel.trigger(e)},n.prototype.request=function(e,t){var n=this._plugins[e];return n&&t&&0!=t.length?n.resolveData(t):null},n.prototype.raise=function(e){this._errorInfo=e;var t=new a(n.ERROR,e);this._ctrlChannel.trigger(t)},n.prototype.getErrorInfo=function(){return this._errorInfo},n.prototype.destroy=function(){for(var e in this._radio.shutdown(),this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].destroy()},n.prototype.comply=function(e,t,n){this._dataChannel.comply(e.getName()+r.SEPARATOR+t,n,e)},n.prototype.command=function(e,t,n){this._dataChannel.command(e+r.SEPARATOR+t,n)},n.prototype.registerBehaviour=function(e,t,n,a){var i=e.getName(),r=new s(e,t,n,a);this._behaviours[i]=this._behaviours[i]||[],this._behaviours[i].push(r)};var i="data_channel",o="ctrl_channel",l="plugin::PluginManager";e.plugin.PluginManager=n}(y),function(e){"use strict";function t(e){this._name=e,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new n}var n=e.Logger,a=e.Trigger,i=e.Event,r=s.ErrorInfo;t.INITIALIZED="initialized",t.prototype.configure=function(e){},t.prototype.bootstrap=function(e){this._pluginManager=e,this._isDestroyed&&this._pluginManager.raise(new r("Invalid state.","Plugin already destroyed."))},t.prototype.setup=function(){this._trigger(t.INITIALIZED),this._isInitialized=!0},t.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},t.prototype.enable=function(){this._isEnabled=!0,this._enabled()},t.prototype.disable=function(){this._isEnabled=!1,this._disabled()},t.prototype.getName=function(){return this._name},t.prototype.getLogger=function(){return this._logger},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,e);var t=null;if(e)for(var n=0;n<e.length;n++){var a=e[n];this._dataResolver.hasOwnProperty(a)&&(t=t||{},"function"==typeof this._dataResolver[a]?t[a]=this._dataResolver[a].call(this):t[a]=this._dataResolver[a])}return t},t.prototype.toString=function(){return"<plugin: "+this._name+">"},t.prototype._enabled=function(){},t.prototype._disabled=function(){},t.prototype._teardown=function(){},t.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)},t.prototype._trigger=function(e,t){var n=i.createFromTrigger(new a(this.getName(),e));n.data=t,this._pluginManager.trigger(n)},e.plugin.BasePlugin=t}(y),function(e){"use strict";function a(e,t,n){this.name=e,this.interval=t,this.isActive=!1,this.repeatCount=void 0!==n?n:r,this._nextTickTimestamp=0,this.reset()}function t(e,t){if(!e)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._timers={};var n=this;this._clock=window.setInterval(function(){n._onTick()},1e3*s)}a.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},a.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-n/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},a.prototype._updateNextTickTimestamp=function(){var e=(new Date).getTime();this._nextTickTimestamp=e+1e3*this.interval-1},t.prototype.createTimer=function(e,t,n){this._timers[e]=new a(e,t,n)},t.prototype.destroyTimer=function(e){delete this._timers[e]},t.prototype.resumeTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(i,"#resumeTimer(name="+e+", reset="+t+")");var n=this._timers[e];n&&(n.isActive=!0,t&&n.reset())},t.prototype.pauseTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(i,"#pauseTimer(name="+e+", reset="+t+")");var n=this._timers[e];n&&(n.isActive=!1,t&&n.reset())},t.prototype.isTimerPaused=function(e){var t=this._timers[e];return!!t&&!t.isActive},t.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},t.prototype._onTick=function(){for(var e in this._timers){var t;!this._timers.hasOwnProperty(e)||(t=this._timers[e]).isActive&&t.shouldTick()&&(1<t.interval&&this._logger.debug(i,"#_onTick() > "+t.name+"("+t.tick+" | "+t.repeatCount+")"),0!=t.repeatCount?(this._service.onTick(t.name,t.interval,t.tick),t.repeatCount!=r&&t.repeatCount--):this.destroyTimer(t.name))}};var i="service.clock::TimerManager",r=-1,s=.25,n=1e3*s;e.clock.TimerDescriptor=a,e.clock.TimerManager=t}(o),function(e){"use strict";function t(e){if(t.__super__.constructor.call(this,i),!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._timerManager=new n(this,this._logger),this._setupDataResolver()}var n=e.clock.TimerManager,s=v.StringUtils,a=y.plugin.BasePlugin;y.extend(t,a),t.prototype.bootstrap=function(e){t.__super__.bootstrap.call(this,e),this._pluginManager.comply(this,r,this._cmdCreate),this._pluginManager.comply(this,l,this._cmdResume),this._pluginManager.comply(this,o,this._cmdPause),this._pluginManager.comply(this,c,this._cmdDestroy)},t.prototype._teardown=function(){this._timerManager.destroy()},t.prototype._cmdCreate=function(e){var t=e[d]||g;this._timerManager.createTimer(e[u],e[h],t)},t.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[u],!!e[p])},t.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[u],!!e[p])},t.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[u])},t.prototype.onTick=function(e,t,n){e+=".tick";var a={};a[u]=e,a[h]=t,a[f]=n,this._trigger(e,a)},t.prototype._setupDataResolver=function(){var r={},t=this._timerManager;r[m]=function(e){return t.isTimerPaused(e)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var a,i=e[n],t=t||{};s.startsWith(i,m)&&0<(a=i.split(m+".")).length&&(t[i]=r[m].call(this,a[1]))}return t}};var i="service.clock",r="create",o="pause",l="resume",c="destroy",u="name",h="interval",d="repeat_count",f="tick",p="reset",m="is_paused",g=-1;e.clock.ClockService=t}(o),function(e){"use strict";function t(e,t){if(this._logger=new a,this._pluginManager=new i(this._logger),this._pluginManager.addPlugin(new r(this._logger)),t)for(var n=0;n<t.length;n++)this._pluginManager.addPlugin(t[n]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var a=y.Logger,i=y.plugin.PluginManager,r=o.clock.ClockService;t.prototype.configure=function(e){if(!e)throw new Error("Configuration object cannot be NULL.");e.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(n,"Instance is destroyed.")},t.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var n="Heartbeat";e.Heartbeat=t}(s),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=y),e.ADB.va||(e.ADB.va=s),e.ADB.va.utils||(e.ADB.va.utils=v),e.ADB.va.plugins||(e.ADB.va.plugins={}),t=this,void 0===n&&(n={}),function(){"use strict";var e={ASSET_TYPE_VOD:"vod",ASSET_TYPE_LIVE:"live",ASSET_TYPE_LINEAR:"linear"};n.AssetType=e}(),function(e){"use strict";function t(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},e.AdBreakInfo=t}(n),function(e){"use strict";function t(){this.id=null,this.name=null,this.length=null,this.position=null,this.granularTracking=!0}t.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position+", granularTracking="+this.granularTracking},e.AdInfo=t}(n),function(e){"use strict";function t(){this.name=null,this.length=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},e.ChapterInfo=t}(n),function(e){"use strict";function t(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}t.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},e.QoSInfo=t}(n),function(e){"use strict";function t(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.mediaType=null,this.streamType=null,this.resumed=!1}t.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", mediaType="+this.mediaType+", streamType="+this.streamType+", resumed="+this.resumed},e.VideoInfo=t}(n),function(){"use strict";n.VideoPlayerPluginConfig=function(){this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getAdBreakInfo=function(){return null},t.prototype.getAdInfo=function(){return null},t.prototype.getChapterInfo=function(){return null},t.prototype.getQoSInfo=function(){return null},e.VideoPlayerPluginDelegate=t}(n),function(e,t){"use strict";function n(e){if(n.__super__.constructor.call(this,o),!e)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=e,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._setupDataResolver()}var a=e.plugin.ParamMapping,i=e.Trigger,r=e.plugin.BasePlugin,s=t.VideoPlayerPluginConfig;e.extend(n,r),n.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof s))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");e.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+e.debugLogging+")")},n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},n.prototype._cmdVideoIdleStart=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},n.prototype._cmdVideoIdleResume=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(m),this._trigger(g),e.isInAd&&(this._trigger(w),this._isTrackingAdBreak=!0),e.isInAd&&(this._trigger(x),this._isTrackingAd=!0),e.isInChapter&&this._trigger(M),this._trigger(b)),this._videoIdle=!1},n.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(m),this._isTrackingSessionStarted=!0;var e=this._dataResolver(["video.resumed"]);e.hasOwnProperty("video.resumed")&&e["video.resumed"]&&this._trigger(g)}},n.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._isTrackingAdBreak=!1,this._isTrackingAd=!1,this._contentStarted=!1,this._isPaused=!0,this._isBuffering=!1,this._isSeeking=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._trigger(d),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},n.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(f),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._contentStarted=!1}},n.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&this._allowPlayerStateChange()&&(this._isPaused=!1,this._trigger(b),this._startPlayheadTimer())},n.prototype.trackPause=function(){var e;this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),(e={})[V]=!1,this._isPaused=!0,this._trigger(S,e))},n.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isBuffering=!0,this._trigger(E))},n.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&this._allowPlayerStateChange()&&(this._isBuffering=!1,this._trigger(A),this._startPlayheadTimer())},n.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isSeeking=!0,this._trigger(k))},n.prototype.trackSeekComplete=function(){this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")&&this._allowPlayerStateChange()&&(this._isSeeking=!1,this._trigger(I),this._startPlayheadTimer())},n.prototype.trackComplete=function(e,t){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){if(this._stopPlayheadTimer(),this._videoIdle)return this._logger.info(this._logTag,"#trackComplete() > Video session is already in Idle State."),void(e&&e());var n={};n[B]=e,(t=void 0===t||!!t)?this._trigger(v,n):(this._trigger(y),this._trigger(p,n))}},n.prototype.trackTimedMetadata=function(e){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(_,e)},n.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(M)},n.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"#trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger($)},n.prototype.trackChapterSkip=function(){this._logger.info(this._logTag,"#trackChapterSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterSkip")&&this._trigger(L)},n.prototype.trackAdBreakStart=function(){this._logger.info(this._logTag,"#trackAdBreakStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakStart")&&(this._trigger(w),this._isTrackingAdBreak=!0)},n.prototype.trackAdBreakComplete=function(){this._logger.info(this._logTag,"#trackAdBreakComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakComplete")&&(this._trigger(P),this._isTrackingAdBreak=!1)},n.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(x),this._isTrackingAd=!0)},n.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(C),this._isTrackingAd=!1)},n.prototype.trackAdSkip=function(){this._logger.info(this._logTag,"#trackAdSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackAdSkip")&&(this._trigger(D),this._isTrackingAd=!1)},n.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(O)},n.prototype.trackVideoPlayerError=function(e){var t;this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+e+")"),this._startSessionIfNeeded("trackVideoPlayerError")&&((t={})[j]=h,t[U]=e,this._trigger(R,t))},n.prototype.trackApplicationError=function(e){var t;this._logger.info(this._logTag,"#trackApplicationError(errorId="+e+")"),this._startSessionIfNeeded("trackApplicationError")&&((t={})[j]=u,t[U]=e,this._trigger(R,t))},n.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},n.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new i(c,N),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new i(c,F),this,"handleVideoIdleResume",[new a(l,"ad.isInAdBreak","isInAdBreak"),new a(l,"ad.isInAd","isInAd"),new a(l,"chapter.isInChapter","isInChapter")])},n.prototype._setupDataResolver=function(){function n(){return l.video||(l.video=c._delegate.getVideoInfo(),c._logger.info(c._logTag,"Data from delegate > VideoInfo: "+l.video)),l.video}function a(){return l.ad||(l.ad=c._delegate.getAdInfo(),c._logger.info(c._logTag,"Data from delegate > AdInfo: "+l.ad)),l.ad}function i(){return l.pod||(l.pod=c._delegate.getAdBreakInfo(),c._logger.info(c._logTag,"Data from delegate > AdBreakInfo: "+l.pod)),l.pod}function r(){return l.chapter||(l.chapter=c._delegate.getChapterInfo(),c._logger.info(c._logTag,"Data from delegate > ChapterInfo: "+l.chapter)),l.chapter}function s(){return l.qos||(l.qos=c._delegate.getQoSInfo(),c._logger.info(c._logTag,"Data from delegate > QoSInfo: "+l.qos)),l.qos}var o={},l={},c=this;o["video.id"]=function(){var e=n(),t=e?e.id:null;return c._logger.debug(c._logTag,"Resolving video.id: "+t),t},o["video.name"]=function(){var e=n(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving video.name: "+t),t},o["video.length"]=function(){var e=n(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving video.length: "+t),t},o["video.playerName"]=function(){var e=n(),t=e?e.playerName:null;return c._logger.debug(c._logTag,"Resolving video.playerName: "+t),t},o["video.mediaType"]=function(){var e=n(),t=e?e.mediaType:null;return c._logger.debug(c._logTag,"Resolving video.mediaType: "+t),t},o["video.streamType"]=function(){var e=n(),t=e?e.streamType:null;return c._logger.debug(c._logTag,"Resolving video.streamType: "+t),t},o["video.playhead"]=function(){var e=n(),t=e?e.playhead:NaN;return c._logger.debug(c._logTag,"Resolving video.playhead: "+t),t},o["video.resumed"]=function(){var e=n(),t=!!e&&e.resumed;return c._logger.debug(c._logTag,"Resolving video.resumed: "+t),t},o["video.playheadStalled"]=function(){return this._playheadStalled},o["pod.name"]=function(){var e=i(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving pod.name: "+t),t},o["pod.playerName"]=function(){var e=i(),t=e?e.playerName:null;return c._logger.debug(c._logTag,"Resolving pod.playerName: "+t),t},o["pod.position"]=function(){var e=i(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving pod.position: "+t),t},o["pod.startTime"]=function(){var e=i(),t=e?e.startTime:NaN;return c._logger.debug(c._logTag,"Resolving pod.startTime: "+t),t},o["ad.isInAd"]=function(){var e=null!=a();return c._logger.debug(c._logTag,"Resolving ad.isInAd: "+e),e},o["ad.isInAdBreak"]=function(){var e=null!=i();return c._logger.debug(c._logTag,"Resolving ad.isInAdBreak: "+e),e},o["ad.id"]=function(){var e=a(),t=e?e.id:null;return c._logger.debug(c._logTag,"Resolving ad.id: "+t),t},o["ad.name"]=function(){var e=a(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving ad.name: "+t),t},o["ad.length"]=function(){var e=a(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving ad.length: "+t),t},o["ad.position"]=function(){var e=a(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving ad.position: "+t),t},o["ad.granularTracking"]=function(){var e=a(),t=!!e&&e.granularTracking;return c._logger.debug(c._logTag,"Resolving ad.granularTracking: "+t),t},o["ad.trackingInterval"]=function(){var e=G;return c._logger.debug(c._logTag,"Resolving ad.trackingInterval: "+e),e},o["chapter.isInChapter"]=function(){var e=null!=r();return c._logger.debug(c._logTag,"Resolving chapter.isInChapter: "+e),e},o["chapter.name"]=function(){var e=r(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving chapter.name: "+t),t},o["chapter.length"]=function(){var e=r(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving chapter.length: "+t),t},o["chapter.position"]=function(){var e=r(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving chapter.position: "+t),t},o["chapter.startTime"]=function(){var e=r(),t=e?e.startTime:NaN;return c._logger.debug(c._logTag,"Resolving chapter.startTime: "+t),t},o["qos.bitrate"]=function(){var e=s(),t=e?e.bitrate:NaN;return c._logger.debug(c._logTag,"Resolving qos.bitrate: "+t),t},o["qos.fps"]=function(){var e=s(),t=e?e.fps:NaN;return c._logger.debug(c._logTag,"Resolving qos.fps: "+t),t},o["qos.droppedFrames"]=function(){var e=s(),t=e?e.droppedFrames:NaN;return c._logger.debug(c._logTag,"Resolving qos.droppedFrames: "+t),t},o["qos.startupTime"]=function(){var e=s(),t=e?1e3*e.startupTime:NaN;return c._logger.debug(c._logTag,"Resolving qos.startupTime: "+t),t},this._dataResolver=function(e){if(!e||0==e.length)return null;l={};for(var t=null,n=0;n<e.length;n++){var a=e[n];(t=t||{})[a]=o.hasOwnProperty(a)?o[a].call(this):null}return t}},n.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(S)))},n.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,!this._playheadStalled||this._isPaused||this._isSeeking||this._isBuffering||(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(b)))},n.prototype._startPlayheadTimer=function(){var n=this;this._playheadTimer||this._isPaused||this._isSeeking||this._isBuffering||(this._playheadTimer=setInterval(function(){var e,t;n._canProcess()&&(e=n._dataResolver(["ad.isInAd","video.playhead"]),n._isTrackingAdBreak?n._playheadStalled&&n._trackExitStall():((t=e["video.playhead"])!=n._previousPlayhead?n._trackExitStall():0<=n._previousPlayhead&&t==n._previousPlayhead&&++n._stalledPlayheadCount==Y&&n._trackPlayheadStall(),t!=n._previousPlayhead&&0<t&&!n._contentStarted&&(n._isPaused||n._isBuffering||n._isSeeking||(n._logger.info(n._logTag,"#_playheadTimer playhead progress to: "+t),n._trigger(T),n._contentStarted=!0)),n._previousPlayhead=t))},H))},n.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},n.prototype._startSessionIfNeeded=function(e){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+e+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+e+"() > No active tracking session."),!1)},n.prototype._allowPlayerStateChange=function(){return!(this._isTrackingAdBreak&&!this._isTrackingAd&&(this._logger.info(this._logTag,"_allowPlayerStateChange Player plugin does not allow player state changes when in Adbreak and not in Ad."),1))};var o="player",l=o,c="adobe-heartbeat",u="sourceErrorExternal",h="sourceErrorSDK",d="video_load",f="video_unload",p="video_session_end",m="video_start",g="video_resume",v="video_complete",y="video_skip",_="timed_metadata",b="play",S="pause",T="content_start",w="adbreak_start",P="adbreak_complete",x="ad_start",C="ad_complete",D="ad_skip",E="buffer_start",A="buffer_complete",k="seek_start",I="seek_complete",M="chapter_start",$="chapter_complete",L="chapter_skip",O="bitrate_change",R="track_error",N="video_idle_start",F="video_idle_resume",B="callback",V="filter_report",j="source",U="error_id",H=1001,G=1,Y=2;t.VideoPlayerPlugin=n}(t.ADB.core,n),t.ADB.va.plugins.videoplayer||(t.ADB.va.plugins.videoplayer=n),a=this,void 0===i&&(i={}),i.clock||(i.clock={}),i.context||(i.context={}),i.filter||(i.filter={}),i.model||(i.model={}),i.network||(i.network={}),function(e,t){"use strict";function a(e,t,n,a,i){if(!t)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=t,!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=e,!i)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+n,this._logger=i,this._isDestroyed=!1,this._createTimer(n,a),this._installHandlers()}var n=e.Event;a.KEY_NAME="name",a.KEY_INTERVAL="interval",a.KEY_RESET="reset",a.prototype.resume=function(e){this._logger.debug(this._logTag,"Starting timer: "+this._name);var t={};t[a.KEY_NAME]=i+"."+this._name,t[a.KEY_RESET]=e,this._pluginManager.command(r,l,t)},a.prototype.pause=function(e){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var t={};t[a.KEY_NAME]=i+"."+this._name,t[a.KEY_RESET]=e,this._pluginManager.command(r,o,t)},a.prototype.destroy=function(){var e;this._isDestroyed||(this._isDestroyed=!0,this._uninstallHandlers(),(e={})[a.KEY_NAME]=i+"."+this._name,this._pluginManager.command(r,c,e))},a.prototype.setInterval=function(e){var t=u+"."+i+"."+this._name,n=this._pluginManager.request(r,[t])[t];this.pause(!0),this._createTimer(this._name,e),n||this.resume(!0)},a.prototype._cmdResume=function(e){var t=!1;null!=e&&e.hasOwnProperty(a.KEY_RESET)&&(t=e[a.KEY_RESET]),this.resume(t)},a.prototype._cmdPause=function(e){var t=!1;null!=e&&e.hasOwnProperty(a.KEY_RESET)&&(t=e[a.KEY_RESET]),this.pause(t)},a.prototype._onTick=function(e,t){this._channel.trigger(new n("clock:"+this._name+".tick",t))},a.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(r,i+"."+this._name+".tick",this._onTick,this)},a.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},a.prototype._createTimer=function(e,t){this._name=e,this._interval=t;var n={};n[a.KEY_NAME]=i+"."+this._name,n[a.KEY_INTERVAL]=this._interval,this._pluginManager.command(r,s,n)};var i="heartbeat",r="service.clock",s="create",o="pause",l="resume",c="destroy",u="is_paused";t.clock.Timer=a}(a.ADB.core,i),function(e,t){"use strict";function a(e,t,n){a.__super__.constructor.call(this,e,t,r,o,n)}var n=e.Event,i=t.clock.Timer;e.extend(a,i),a.prototype._onCheckStatusComplete=function(e){var t=e.data[h];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");s<t?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+t),this.setInterval(s)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(o)},a.prototype._getSettings=function(e){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new n(l))},a.prototype._installHandlers=function(){a.__super__._installHandlers.call(this),this._channel.on(c,this._getSettings,this),this._channel.on(u,this._onCheckStatusComplete,this),this._channel.reply(h,function(){return this._interval},this)};var r="check_status",s=600,o=180,l="clock:check_status.tick",c="clock:check_status.get_settings",u="net:check_status_complete",h="check_status_interval";t.clock.CheckStatusTimer=a}(a.ADB.core,i),function(e,t){"use strict";function a(e,t,n){a.__super__.constructor.call(this,e,t,i,r,n),this._doNotOverrideInterval=!1}var n=t.clock.Timer;e.extend(a,n),a.prototype._onCheckStatusComplete=function(e){var t=e.data[s];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),this._doNotOverrideInterval)this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed. (doNotOverrideInterval = true)");else if(t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(r)},a.prototype._onUpdateReportingInterval=function(e){var t=e.data[s];if(this._doNotOverrideInterval=!!e.data[o],this._logger.debug(this._logTag,"#_onUpdateReportingInterval(interval="+t+", doNotOverrideInterval="+this._doNotOverrideInterval+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval value not changed.");this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onUpdateReportingInterval() > Invalid interval value."),this.setInterval(r)},a.prototype._installHandlers=function(){a.__super__._installHandlers.call(this),this._channel.on(c,this._onCheckStatusComplete,this),this._channel.on(l,this._onUpdateReportingInterval,this),this._channel.reply(s,function(){return this._interval},this)};var i="reporting",r=10,s="reporting_interval",o="do_not_override_interval",l="reporting:update_interval",c="net:check_status_complete";t.clock.ReportingTimer=a}(a.ADB.core,i),function(e,t){"use strict";function a(e,t,n){a.__super__.constructor.call(this,e,t,i,r,n)}var n=t.clock.Timer;e.extend(a,n);var i="idle",r=1800;t.clock.IdleTimer=a}(a.ADB.core,i),function(e,t){"use strict";function a(e,t,n){a.__super__.constructor.call(this,e,t,i,r,n)}var n=t.clock.Timer;e.extend(a,n);var i="flush_filter",r=.25;t.clock.FlushFilterTimer=a}(a.ADB.core,i),function(e){"use strict";function t(e,t,n){if(!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(!t)throw new Error("Reference to the channel object cannot be NULL");if(!n)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new r(e,t,n),this._checkStatusTimer=new a(e,t,n),this._flushFilterTimer=new i(e,t,n),this._idleTimer=new s(e,t,n)}var a=e.clock.CheckStatusTimer,i=e.clock.FlushFilterTimer,r=e.clock.ReportingTimer,s=e.clock.IdleTimer;t.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},e.clock.Clock=t}((a.ADB.core,i)),function(e){"use strict";function a(e,t){this.value=e,this.hint=t}function t(e){this.realm=e,this.data={}}a.HINT_SHORT="short",t.prototype.setField=function(e,t,n){this.data[e]=new a(t,n)},t.prototype._createAccessor=function(e,t,n){var a=this;return function(){return arguments.length&&(a[e]=arguments[0],a.setField(t,arguments[0],n)),a[e]}},e.model.Dao=t,e.model.DaoField=a}((a.ADB.core,i)),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof n?(e=arguments[0],this.adId(e.adId()),this.sid(e.sid()),this.resolver(e.resolver()),this.podId(e.podId()),this.podPosition(e.podPosition()),this.podOffset(e.podOffset()),this.podName(e.podName()),this.adLength(e.adLength()),this.adName(e.adName())):(this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName(""))}var a=t.model.Dao;e.extend(n,a),t.model.AdDao=n}(a.ADB.core,i),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",i.HINT_SHORT),arguments.length&&arguments[0]instanceof n?(e=arguments[0],this.reportSuiteId(e.reportSuiteId()),this.trackingServer(e.trackingServer()),this.ssl(e.ssl())):(this.reportSuiteId(""),this.trackingServer(""),this.ssl(0))}var a=t.model.Dao,i=t.model.DaoField;e.extend(n,a),t.model.AdobeAnalyticsDao=n}(a.ADB.core,i),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof n?(e=arguments[0],this.id(e.id()),this.sid(e.sid()),this.name(e.name()),this.position(e.position()),this.length(e.length()),this.offset(e.offset())):(this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0))}var a=t.model.Dao;e.extend(n,a),t.model.ChapterDao=n}(a.ADB.core,i),function(e,t){"use strict";function a(){var e,t,n;a.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof a?(e=arguments[0],this.type(e.type()),this.name(e.name()),this.videoId(e.videoId()),this.publisher(e.publisher()),this.length(e.length()),t=e.adData()?new i(e.adData()):null,this.adData(t),n=e.chapterData()?new r(e.chapterData()):null,this.chapterData(n)):(this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null))}var n=t.model.Dao,i=t.model.AdDao,r=t.model.ChapterDao;e.extend(a,n),a.TYPE_AD="ad",a.TYPE_MAIN_CONTENT="main",t.model.AssetDao=a}(a.ADB.core,i),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof n?(e=arguments[0],this.type(e.type()),this.duration(e.duration()),this.playhead(e.playhead()),this.id(e.id()),this.source(e.source()),this.ts(e.ts()),this.prevTs(e.prevTs())):(this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1))}var a=t.model.Dao;e.extend(n,a),n.EVENT_TYPE_AA_START="aa_start",n.EVENT_TYPE_AA_AD_START="aa_ad_start",n.EVENT_TYPE_START="start",n.EVENT_TYPE_RESUME="resume",n.EVENT_TYPE_CHAPTER_START="chapter_start",n.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",n.EVENT_TYPE_CHAPTER_SKIP="chapter_skip",n.EVENT_TYPE_PLAY="play",n.EVENT_TYPE_PAUSE="pause",n.EVENT_TYPE_STALL="stall",n.EVENT_TYPE_BUFFER="buffer",n.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",n.EVENT_TYPE_ERROR="error",n.EVENT_TYPE_COMPLETE="complete",n.EVENT_TYPE_SKIP="skip",n.EVENT_TYPE_END="end",t.model.EventDao=n}(a.ADB.core,i),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof n?(e=arguments[0],this.bitrate(e.bitrate()),this.fps(e.fps()),this.droppedFrames(e.droppedFrames()),this.startupTime(e.startupTime()),this.isStartupTimeOverridden=e.isStartupTimeOverridden):(this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1)}var a=t.model.Dao;e.extend(n,a),t.model.QoSDao=n}(a.ADB.core,i),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof n?(e=arguments[0],this.ovp(e.ovp()),this.sdk(e.sdk()),this.channel(e.channel()),this.playerName(e.playerName()),this.libVersion(e.libVersion()),this.apiLevel(e.apiLevel())):(this.ovp(i),this.sdk(i),this.channel(i),this.playerName(""),this.libVersion(""),this.apiLevel(0))}var a=t.model.Dao;e.extend(n,a);var i="unknown";t.model.ServiceProviderDao=n}(a.ADB.core,i),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof n?(e=arguments[0],this.sessionId(e.sessionId())):this.sessionId(null)}var a=t.model.Dao;e.extend(n,a),t.model.SessionDao=n}(a.ADB.core,i),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof n?(e=arguments[0],this.type(e.type())):this.type(null)}var a=t.model.Dao;e.extend(n,a),t.model.StreamDao=n}(a.ADB.core,i),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof n?(e=arguments[0],this.analyticsVisitorId(e.analyticsVisitorId()),this.marketingCloudVisitorId(e.marketingCloudVisitorId()),this.visitorId(e.visitorId())):(this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null))}var a=t.model.Dao;e.extend(n,a),t.model.UserDao=n}(a.ADB.core,i),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof n?(e=arguments[0],this.audienceManagerBlob(e.audienceManagerBlob()),this.audienceManagerLocationHint(e.audienceManagerLocationHint())):(this.audienceManagerBlob(null),this.audienceManagerLocationHint(null))}var a=t.model.Dao;e.extend(n,a),t.model.AudienceManagerDao=n}(a.ADB.core,i),function(e){"use strict";var r=e.ObjectUtils,s=i.model.EventDao,o=i.model.AssetDao,l=i.model.StreamDao,c=i.model.QoSDao;i.model.TrackItem=function(e,t,n,a,i){this.eventData=new s,this.eventData.type(t),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(n),this.assetData=new o(e._assetData),this.streamData=new l(e._streamData),this.qosData=new c(e._qosData),this.cuserData=r.clone(e._cuserData),this.meta=a,this.callback=i,this.filterReport=!0}}(a.ADB.va.utils),function(){"use strict";var s=a.ADB.va.utils.ObjectUtils,o=i.model.EventDao,l=i.model.AssetDao,c=i.model.StreamDao,u=i.model.QoSDao;i.model.CUserDao,i.model.Report=function(e,t,n,a,i,r){this.adobeAnalyticsData=e,this.userData=t,this.aamData=n,this.serviceProviderData=a,this.sessionData=i,this.eventData=new o(r.eventData),this.assetData=new l(r.assetData),this.streamData=new c(r.streamData),this.qosData=new u(r.qosData),this.cuserData=s.clone(r.cuserData),this.meta=s.clone(r.meta),this.callback=r.callback,this.filterReport=r.filterReport}}(),function(e){"use strict";function t(){}t.prototype.serializeReport=function(e){},t.prototype.serializeDao=function(e){},t.prototype.serializeMap=function(e){},t.prototype.serializeNumber=function(e,t,n,a){},t.prototype.serializeString=function(e,t,n,a){},e.model.ISerializer=t}(i),function(e,t){"use strict";function n(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e}var l=t.model.Dao,r=t.model.DaoField,a=t.model.ISerializer;e.extend(n,a),n.prototype.serializeReport=function(e){var t=[];return t.push(this.serializeDao(e.adobeAnalyticsData)),t.push(this.serializeDao(e.userData)),t.push(this.serializeDao(e.aamData)),t.push(this.serializeMap(e.cuserData,"cuser")),t.push(this.serializeDao(e.serviceProviderData)),t.push(this.serializeDao(e.sessionData)),t.push(this.serializeDao(e.eventData)),t.push(this.serializeDao(e.assetData)),t.push(this.serializeDao(e.streamData)),t.push(this.serializeDao(e.qosData)),t.push(this.serializeMap(e.meta,"meta")),{serializedOutput:t.filter(function(e){return!!e}).join("&"),callback:e.callback}},n.prototype.serializeDao=function(e){return this._processDao(e).filter(function(e){return!!e}).join("&")},n.prototype.serializeMap=function(e,t){var n,a=[],i=t||"meta";for(n in e)e.hasOwnProperty(n)&&e[n]&&a.push("s:"+i+":"+n+"="+window.encodeURIComponent(e[n]));return a.join("&")},n.prototype.serializeNumber=function(e,t,n,a){var i=s;return null==t||isNaN(t)?null:(a===r.HINT_SHORT&&(i=o),i+":"+n+":"+e+"="+Math.floor(t))},n.prototype.serializeString=function(e,t,n,a){return t?i+":"+n+":"+e+"="+window.encodeURIComponent(t):null},n.prototype._processDao=function(e){var t,n=[];for(t in e.data)if(e.data.hasOwnProperty(t)){var a=e.data[t],i=a.value,r=a.hint,s=null,o=e.realm;if(null==i)continue;"number"==typeof i?s=this.serializeNumber(t,i,o,r):"string"==typeof i?s=this.serializeString(t,i,o,r):i instanceof l?s=this.serializeDao(i):this._logger.warn(c,"#_processDao() > Unable to serialize DAO. Field: "+t+". Value: "+i+"."),s&&n.push(s)}return n};var c="ah::QuerystringSerializer",s="l",o="h",i="s";t.model.QuerystringSerializer=n}(a.ADB.core,i),function(e){"use strict";function t(e,t){if(!e)throw new Error("Reference to the data object cannot be NULL");if(this._data=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t}t.prototype.parse=function(){var e,t,n,a,i,r,s;window.DOMParser?r=(new window.DOMParser).parseFromString(this._data,"text/xml"):((r=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,r.loadXML(this._data)),(s=parseInt(r.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(e=s),(s=parseInt(r.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(t=s),(s=parseInt(r.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(n=1==s),r.getElementsByTagName("trackingDisabled")[0]&&(a=1==(s=parseInt(r.getElementsByTagName("trackingDisabled")[0].childNodes[0].nodeValue,10))),i=!r.getElementsByTagName("nielsenEnabled")[0]||1==(s=parseInt(r.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10));var o={};return o[c]=e,o[u]=t,o[h]=n,o[f]=a,o[d]=i,this._logger.debug(l,"#parse() > Obtained configuration settings."),o};var l="ah::SettingsParser",c="reporting_interval",u="check_status_interval",h="track_external_errors",d="nielsen_enabled",f="tracking_disabled";e.network.SettingsParser=t}((a.ADB.core,i)),function(e,t){"use strict";function n(e,t){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._serializer=new a(t),this._installEventListeners()}var l=e.Event,c=e.URLRequestMethod,u=e.URLRequest,h=e.URLLoader,s=t.network.SettingsParser,a=t.model.QuerystringSerializer;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(d,"#destroy()"),this._uninstallEventListeners())},n.prototype._onApiConfig=function(e){var t=e.data;this._logger.debug(d,"#_onApiConfig(sb_server="+t[i]+", check_status_server="+t[r]+", publisher="+t[o]+", quiet_mode="+t[f]+", ssl="+t[p]+")"),this._trackingServer=this._updateRequestProtocol(t[i],t[p]),this._checkStatusServer=this._updateRequestProtocol(t[r],t[p]),this._publisher=t[o],this._quietMode=t[f],this._isConfigured=!0},n.prototype._onUpdateVisitorOptOut=function(e){var t=e.data;this._logger.debug(d,"#_onUpdateVisitorOptOut(visitor_opt_out="+t[g]+")"),this._visitorOptedOut=t[g]},n.prototype._onFilterReportAvailable=function(e){var t,n,a,i,r,s,o=e.data;this._isConfigured?(t=o[m],n=this._serializer.serializeReport(t),a=this._trackingServer+"/?"+n.serializedOutput,this._prevReportSent&&this._prevReportSent.eventData&&t.eventData&&this._prevReportSent.eventData.playhead==t.eventData.playhead&&this._prevReportSent.eventData.ts==t.eventData.ts&&this._prevReportSent.eventData.prevTs==t.eventData.prevTs&&this._prevReportSent.eventData.type==t.eventData.type?this._logger.debug(d,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+a):(this._prevReportSent=t,i=new u(a,c.GET),this._logger.debug(d,"#_onFilterReportAvailable() > "+i.url),(r=this)._quietMode||this._visitorOptedOut||((s=new h).addEventListener(l.SUCCESS,function(e){s.close(),n.callback&&n.callback.call(null)},this),s.addEventListener(l.ERROR,function(e){s.close(),r._logger.warn(d,"#_onFilterReportAvailable() > Failed to send heartbeat report."),n.callback&&n.callback.call(null)},this),s.load(i)))):this._logger.warn(d,"#_onFilterReportAvailable() > Unable to send request: not configured.")},n.prototype._onClockCheckStatusTick=function(e){var n,t,a,i,r;this._isConfigured?this._publisher?(t=(n=this)._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),a=this._checkStatusServer+t+".xml?r="+(new Date).getTime(),i=new u(a,c.GET),(r=new h).addEventListener(l.SUCCESS,function(e){var t;e.data&&((t=new s(e.data.response,n._logger).parse())?n._channel.trigger(new l(S,t)):n._logger.warn(d,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")),r.close()},this),r.addEventListener(l.ERROR,function(e){n._logger.warn(d,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),r.close()},this),this._logger.debug(d,"#_onClockCheckStatusTick() > Get new settings from: "+a),r.load(i)):this._logger.warn(d,"#_onClockCheckStatusTick() > Publisher is NULL."):this._logger.warn(d,"#_onClockCheckStatusTick() > Unable to send request: not configured.")},n.prototype._updateRequestProtocol=function(e,t){var n=e;return 0===n.indexOf("http://")?n=n.slice(7):0===n.indexOf("https://")&&(n=n.slice(8)),t?"https://"+n:"http://"+n},n.prototype._installEventListeners=function(){this._channel.on(v,this._onApiConfig,this),this._channel.on(y,this._onUpdateVisitorOptOut,this),this._channel.on(_,this._onFilterReportAvailable,this),this._channel.on(b,this._onClockCheckStatusTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var d="ah::Network",i="tracking_server",r="check_status_server",o="publisher",f="quiet_mode",p="ssl",m="report",g="visitor_opt_out",v="api:config",y="api:update_visitor_optout",_="filter:data_available",b="clock:check_status.tick",S="net:check_status_complete";t.network.Network=n}(a.ADB.core,i),function(e,t){"use strict";function n(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new i,this._installEventListeners()}function l(a){var i=[];return a.forEach(function(e){var t,n;e.eventData.type()!=u.EVENT_TYPE_PLAY||e.eventData.duration()>g?i.push(e):0==e.eventData.duration()&&e.assetData.type()==h.TYPE_MAIN_CONTENT&&(n=[],a.forEach(function(e){e.eventData.type()!=u.EVENT_TYPE_PLAY&&e.eventData.type()!=u.EVENT_TYPE_BUFFER&&e.eventData.type()!=u.EVENT_TYPE_START||n.push(e)}),(t=n).indexOf(e)==t.length-1&&i.push(e))}),i}var a=e.radio.Command,i=e.radio.CommandQueue,c=e.Event,u=t.model.EventDao,h=t.model.AssetDao;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(_,"#destroy()"),this._uninstallEventListeners(),this.clear())},n.prototype.clear=function(){this._logger.debug(_,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},n.prototype.flush=function(){this._workQueue.addCommand(new a(this._flushBufferReport,this))},n.prototype._bufferReport=function(e){var t,n,a;this._isDestroyed||((t=e[f])&&(n=t.sessionData.sessionId(),this._reportBuffer[n]=this._reportBuffer[n]||[],this._reportBuffer[n].push(t)),this._isBufferingInProgress||(this._isBufferingInProgress=!0,(a={})[o]=!0,a[p]=1,this._channel.command(m,a)))},n.prototype._flushBufferReport=function(){if(!this._isDestroyed){var e,r=this;for(e in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(e)){var t=l(function(e){var t=-1,n=-1,a=[];return e.forEach(function(e){e.eventData.type()==u.EVENT_TYPE_START?e.assetData.type()==h.TYPE_MAIN_CONTENT?-1==t?t=a.push(e)-1:(e.eventData.prevTs(-1),a[t]=e):-1==n?n=a.push(e)-1:(e.eventData.prevTs(-1),a[n]=e):a.push(e)}),a}(function(e){var t=[];return e&&e.forEach(function(e){(e.eventData.type()!=u.EVENT_TYPE_PAUSE&&e.eventData.type()!=u.EVENT_TYPE_STALL&&e.eventData.type()!=u.EVENT_TYPE_BUFFER||!e.filterReport||e.eventData.duration()>v)&&t.push(e)}),t}(this._reportBuffer[e])));!function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t],a=n.sessionData.sessionId();r._tsHistory[a]=r._tsHistory[a]||{};var i=n.eventData.type()+"."+(n.assetData.type()==h.TYPE_AD?n.assetData.adData().adId():n.assetData.videoId());r._tsHistory[a].hasOwnProperty(i)&&n.eventData.prevTs(r._tsHistory[a][i]),r._tsHistory[a][i]=n.eventData.ts()}}(t);for(var n=0;n<t.length;n++){var a=t[n],i={};i[f]=a,this._channel.trigger(new c(d,i))}}this._reportBuffer={};var s=this._channel.request(y),o=this._tsHistory[s]||{};this._tsHistory={},this._tsHistory[s]=o,this._isBufferingInProgress=!1}},n.prototype._onContextReportAvailable=function(e){var t=e.data;this._workQueue.addCommand(new a(this._bufferReport,this,[t]))},n.prototype._onClockFlushFilterTick=function(e){this.flush()},n.prototype._installEventListeners=function(){this._channel.on(r,this._onContextReportAvailable,this),this._channel.on(s,this._onClockFlushFilterTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var r="context:report_available",d="filter:data_available",s="clock:flush_filter.tick",o="reset",f="report",p="repeat_count",m="clock:flush_filter.resume",g=250,v=250,y="session_id",_="ah::ReportFilter";t.filter.ReportFilter=n}(a.ADB.core,i),function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var a=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var a=t[n];switch(a){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!e.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof e.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(e.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!e.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===e.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!e.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!e.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof e.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(e.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!e.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof e.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(e.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!e.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof e.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(e.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+a)}}return!0},n.prototype._fail=function(e){var t=new a("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.context.InputDataValidator=n}(a.ADB.va,i),function(e){"use strict";function t(e,t){if(!t)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=t,!e)throw new Error("Reference to the context object cannot be NULL");this._context=e}var n=e.model.Report;t.prototype.createReportForItem=function(e){return this._logger.debug(a,"Creating report for item: "+e.eventData.type()),new n(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,e)};var a="ah::ReportFactory";e.context.ReportFactory=t}((a.ADB.core,i)),function(e,t,n){"use strict";function a(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._stashedMainMetadata=null,this._autoComputedStartupTime=0,this._reportingInterval=he,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new l,this._serviceProviderData=new c,this._userData=new u,this._aamData=new h,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new _(this,this._logger),this._inputDataValidator=new b(function(e){this._logger.error(S,e.getMessage()+" | "+e.getDetails()),this._channel.trigger(new i(w,e))},this),this._trackExternalErrors=!0,this._installEventListeners()}var s=t.md5,o=t.ObjectUtils,i=e.Event,r=n.model.SessionDao,l=n.model.AdobeAnalyticsDao,c=n.model.ServiceProviderDao,u=n.model.UserDao,h=n.model.AudienceManagerDao,d=n.model.EventDao,f=n.model.AssetDao,p=n.model.StreamDao,m=n.model.QoSDao,g=n.model.AdDao,v=n.model.ChapterDao,y=n.model.TrackItem,_=n.context.ReportFactory,b=n.context.InputDataValidator;a.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(S,"#destroy()"),this._uninstallEventListeners())},a.prototype._onApiAnalyticsStart=function(e){this._logger.debug(S,"#_onApiAnalyticsStart()");var t,n=e.data;this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(n,["playhead"])&&(this._userData.visitorId(n.vid),this._userData.analyticsVisitorId(n.aid),this._userData.marketingCloudVisitorId(n.mid),this._aamData.audienceManagerBlob(n.blob),this._aamData.audienceManagerLocationHint(n.loc_hint),n.customerIDs&&(this._cuserData=n.customerIDs),this._updateQoSInfo(n),(t=new y(this,d.EVENT_TYPE_AA_START,n.playhead,null,n._eventData[A])).assetData.adData(null),t.assetData.type(f.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(t))},a.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(S,"#_onApiAnalyticsAdStart()");var t,n=e.data;this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(n,["playhead"])&&(this._updateQoSInfo(n),t=new y(this,d.EVENT_TYPE_AA_AD_START,n.playhead,null,n._eventData[A]),this._sendHit(t))},a.prototype._onApiVideoLoad=function(e){var t=e.data;this._logger.debug(S,"#_onApiVideoLoad(rsid="+t.rsid+", aa_trackingServer="+t.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(t,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},a.prototype._onApiVideoUnload=function(e){this._logger.debug(S,"#_onApiVideoUnload()"),this._isTrackingSessionActive?this._isTrackingSessionActive=!1:this._logger.debug(S,"#_onApiVideoUnload() > No active tracking session.")},a.prototype._onApiVideoStart=function(e){var t,n,a=e.data;this._logger.debug(S,"#_onApiVideoStart(id="+a.videoId+", name="+a.videoName+", length="+a.videoLength+", type="+a.streamType+", playerName="+a.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(a,["videoId","streamType","videoLength","playhead","playerName"])&&(this._lastInBandItem=null,this._stashedLastInBandItem=null,this._adobeAnalyticsData.reportSuiteId(a.rsid),this._adobeAnalyticsData.trackingServer(a.trackingServer),this._adobeAnalyticsData.ssl(Number(a.useSsl)),this._serviceProviderData.ovp(a.ovp),this._serviceProviderData.sdk(a.sdk),this._serviceProviderData.channel(a.channel),this._serviceProviderData.libVersion(a.version),this._serviceProviderData.apiLevel(a.apiLvl),this._serviceProviderData.playerName(a.playerName),this._assetData.adData(null),this._assetData.chapterData(null),this._assetData.videoId(a.videoId),this._assetData.length(a.videoLength),this._assetData.type(f.TYPE_MAIN_CONTENT),this._assetData.publisher(a.publisher),this._assetData.name(a.videoName),this._streamData.type(a.streamType),this._updateQoSInfo(a),t=a.metaNielsen?o.merge(a.metaVideo,a.metaNielsen):a.metaVideo,n=new y(this,d.EVENT_TYPE_START,a.playhead,t,a._eventData[A]),this._sendHit(n))},a.prototype._onApiVideoResume=function(e){var t,n=e.data;this._logger.debug(S,"#_onApiVideoResume(id="+n.videoId+", name="+n.videoName+", length="+n.videoLength+", type="+n.streamType+", playerName="+n.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(n,["videoId","streamType","videoLength","playhead","playerName"])&&(this._assetData.videoId(n.videoId),this._assetData.length(n.videoLength),this._assetData.type(f.TYPE_MAIN_CONTENT),this._assetData.name(n.videoName),this._streamData.type(n.streamType),t=new y(this,d.EVENT_TYPE_RESUME,n.playhead,null,n._eventData[A]),this._sendHit(t))},a.prototype._onApiVideoSessionEnd=function(e){this._logger.debug(S,"#_onApiVideoSessionEnd()");var t,n=e.data;this._checkCall("_onApiVideoSessionEnd")&&this._inputDataValidator.validateFields(n,["playhead"])&&((t=new y(this,d.EVENT_TYPE_END,n.playhead,null,n._eventData[A])).assetData.adData(null),t.assetData.type(f.TYPE_MAIN_CONTENT),this._sendHit(t))},a.prototype._onApiVideoComplete=function(e){this._logger.debug(S,"#_onApiVideoComplete()");var t,n=e.data;this._checkCall("_onApiVideoComplete")&&(t=new y(this,d.EVENT_TYPE_COMPLETE,this._assetData.length(),null,n._eventData[A]),this._sendHit(t),this._isVideoComplete=!0)},a.prototype._onApiVideoSkip=function(e){this._logger.debug(S,"#_onApiVideoSkip()");var t,n=e.data;this._checkCall("_onApiVideoSkip")&&(t=new y(this,d.EVENT_TYPE_SKIP,n.playhead,null,n._eventData[A]),this._sendHit(t),this._isVideoComplete=!0)},a.prototype._onApiPlay=function(e){this._logger.debug(S,"#_onApiPlay()");var t,n=e.data;this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(n,["playhead"])&&(this._updateQoSInfo(n),t=new y(this,d.EVENT_TYPE_PLAY,n.playhead,null,n._eventData[A]),this._sendHit(t))},a.prototype._onApiPause=function(e){this._logger.debug(S,"#_onApiPause()");var t,n,a=e.data;this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(a,["playhead"])&&(this._updateQoSInfo(a),t=a.playheadStalled?d.EVENT_TYPE_STALL:d.EVENT_TYPE_PAUSE,n=new y(this,t,a.playhead,null,a._eventData[A]),a._eventData.hasOwnProperty(k)&&(n.filterReport=a._eventData[k]),this._sendHit(n))},a.prototype._onApiBufferStart=function(e){this._logger.debug(S,"#_onApiBufferStart()");var t,n=e.data;this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(n,["playhead"])&&(this._updateQoSInfo(n),t=new y(this,d.EVENT_TYPE_BUFFER,n.playhead,null,n._eventData[A]),this._sendHit(t))},a.prototype._onApiAdBreakStart=function(e){this._logger.debug(S,"#_onApiAdBreakStart()");var t=e.data;this._checkCall("_onApiAdBreakStart")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._flushLastInbandItem(t),this._updateLastInbandItemToBuffering())},a.prototype._onApiAdBreakComplete=function(e){this._logger.debug(S,"#_onApiAdBreakComplete()");var t=e.data;this._checkCall("_onApiAdBreakComplete")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._flushLastInbandItem(t),this._restoreLastInbandItem())},a.prototype._onApiAdStart=function(e){var t,n,a,i,r=e.data;this._logger.debug(S,"#_onApiAdStart(id="+r.adId+", player_name="+r.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+r.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(r,["playhead","podPosition","podPlayerName","adId","adPosition"])&&((t=new g).adId(r.adId),t.adName(r.adName),t.adLength(r.adLength),t.resolver(r.podPlayerName),t.podId(s(this._assetData.videoId())+"_"+r.podPosition),t.podPosition(r.adPosition+""),t.podName(r.podName),t.podOffset(r.podSecond),t.sid(this._generateSessionId()),this._assetData.adData(t),this._assetData.type(f.TYPE_AD),this._updateQoSInfo(r),n=o.merge(r.metaVideo,r.metaAd),n=r.metaNielsen?o.merge(n,r.metaNielsen):n,n=r.metaAdNielsen?o.merge(n,r.metaAdNielsen):n,a=new y(this,d.EVENT_TYPE_START,r.playhead,n,r._eventData[A]),this._sendHit(a),this._restoreLastInbandItem(),r.adGranularTracking&&(i=r.adTrackingInterval?r.adTrackingInterval:this._reportingInterval,this._updateReportingInterval(i,!0)))},a.prototype._onApiAdComplete=function(e){this._logger.debug(S,"#_onApiAdComplete()");var t=e.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=f.TYPE_AD)return void this._logger.warn(S,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(t);var n=new y(this,d.EVENT_TYPE_COMPLETE,t.playhead,null,t._eventData[A]);this._sendHit(n),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(f.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},a.prototype._onApiAdSkip=function(e){this._logger.debug(S,"#_onApiAdSkip()");var t=e.data;if(this._checkCall("_onApiAdSkip")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=f.TYPE_AD)return void this._logger.warn(S,"#_onApiAdSkip() > Ignoring the ad skip event, because we are no longer in an ad.");this._updateQoSInfo(t);var n=new y(this,d.EVENT_TYPE_SKIP,t.playhead,null,t._eventData[A]);this._sendHit(n),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(f.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},a.prototype._onApiChapterStart=function(e){var t,n,a,i=e.data;this._logger.debug(S,"#_onApiChapterStart(name="+i.chapterName+", length="+i.chapterLength+", position="+i.chapterPosition+", chapter_offset="+i.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(i,["playhead","chapterPosition","chapterOffset","chapterLength"])&&((t=new v).id(s(this._assetData.videoId())+"_"+i.chapterPosition),t.name(i.chapterName),t.length(i.chapterLength),t.position(i.chapterPosition),t.offset(i.chapterOffset),t.sid(this._generateSessionId()),this._assetData.chapterData(t),this._updateQoSInfo(i),n=o.merge(i.metaVideo,i.metaChapter),(a=new y(this,d.EVENT_TYPE_CHAPTER_START,i.playhead,n,i._eventData[A])).assetData.adData(null),a.assetData.type(f.TYPE_MAIN_CONTENT),this._sendHit(a))},a.prototype._onApiChapterComplete=function(e){this._logger.debug(S,"#_onApiChapterComplete()");var t=e.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(S,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(t);var n=new y(this,d.EVENT_TYPE_CHAPTER_COMPLETE,t.playhead,null,t._eventData[A]);n.assetData.adData(null),n.assetData.type(f.TYPE_MAIN_CONTENT),this._sendHit(n),this._assetData.chapterData(null)}},a.prototype._onApiChapterSkip=function(e){this._logger.debug(S,"#_onApiChapterSkip()");var t=e.data;if(this._checkCall("_onApiChapterSkip")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(S,"#_onApiChapterSkip() > Ignoring the chapter skip event, because we are no longer in a chapter.");this._updateQoSInfo(t);var n=new y(this,d.EVENT_TYPE_CHAPTER_SKIP,t.playhead,null,t._eventData[A]);n.assetData.adData(null),n.assetData.type(f.TYPE_MAIN_CONTENT),this._sendHit(n),this._assetData.chapterData(null)}},a.prototype._onApiBitrateChange=function(e){this._logger.debug(S,"#_onApiBitrateChange()");var t,n=e.data;this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(n,["playhead"])&&(this._updateQoSInfo(n),t=new y(this,d.EVENT_TYPE_BITRATE_CHANGE,n.playhead,null,n._eventData[A]),this._sendHit(t))},a.prototype._onApiTrackError=function(e){var t,n=e.data;this._logger.debug(S,"#_onApiTrackError(source="+n._eventData.source+", err_id="+n._eventData.error_id+")"),this._isTrackingSessionActive?!this._trackExternalErrors&&n._eventData.source!==T||(this._updateQoSInfo(n),(t=new y(this,d.EVENT_TYPE_ERROR,0,null,n._eventData[A])).eventData.id(n._eventData.error_id),t.eventData.source(n._eventData.source),this._sendHit(t)):this._logger.warn(S,"#_onApiTrackError() > No active tracking session.")},a.prototype._onApiTrackInternalError=function(e){var t=e.data;this._logger.debug(S,"#_onApiTrackInternalError(source="+t.source+", err_id="+t.error_id+")"),this._updateQoSInfo(t);var n=new y(this,d.EVENT_TYPE_ERROR,0);n.eventData.id(t.error_id),n.eventData.source(t.source),this._sendHit(n)},a.prototype._onApiQuantumEnd=function(e){this._logger.debug(S,"#_onApiQuantumEnd(interval="+this._channel.request(C)+")");var t,n,a=e.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(a,["playhead"])&&((t=this._lastInBandItem)&&(this._updateQoSInfo(a),(n=new y(this,t.eventData.type(),a.playhead,t.meta,t.callback)).filterReport=t.filterReport,this._sendHit(n,!0)))},a.prototype._onNetworkCheckStatusComplete=function(e){var t=e.data;this._trackExternalErrors=t[$],this._reportingInterval=t[L],this._reportingInterval||(this._reportingInterval=he),this._logger.debug(S,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},a.prototype._onResetSessionId=function(e){var t=this._generateSessionId();this._sessionData=new r,this._sessionData.sessionId(t),this._logger.debug(S,"#_resetSessionId(new sessionId="+t+")")},a.prototype._installEventListeners=function(){this._channel.on(R,this._onApiAnalyticsStart,this),this._channel.on(N,this._onApiAnalyticsAdStart,this),this._channel.on(F,this._onApiVideoLoad,this),this._channel.on(B,this._onApiVideoUnload,this),this._channel.on(V,this._onApiVideoStart,this),this._channel.on(j,this._onApiVideoComplete,this),this._channel.on(U,this._onApiVideoSkip,this),this._channel.on(H,this._onApiVideoResume,this),this._channel.on(G,this._onApiVideoSessionEnd,this),this._channel.on(Y,this._onApiAdBreakStart,this),this._channel.on(q,this._onApiAdBreakComplete,this),this._channel.on(z,this._onApiAdStart,this),this._channel.on(W,this._onApiAdComplete,this),this._channel.on(K,this._onApiAdSkip,this),this._channel.on(X,this._onApiPlay,this),this._channel.on(Q,this._onApiPause,this),this._channel.on(J,this._onApiBufferStart,this),this._channel.on(Z,this._onApiChapterStart,this),this._channel.on(ee,this._onApiChapterComplete,this),this._channel.on(te,this._onApiChapterSkip,this),this._channel.on(ie,this._onApiBitrateChange,this),this._channel.on(ne,this._onApiTrackError,this),this._channel.on(ae,this._onApiTrackInternalError,this),this._channel.on(re,this._onApiQuantumEnd,this),this._channel.on(oe,this._onNetworkCheckStatusComplete,this),this._channel.on(E,this._onResetSessionId,this),this._channel.reply(D,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},a.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},a.prototype._resetInternalState=function(){this._logger.debug(S,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._streamData=new p,this._qosData=new m,this._sessionData=new r,this._assetData=new f,this._cuserData=null},a.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},a.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0),this._qosData.fps(e.fps||0),this._qosData.droppedFrames(e.droppedFrames||0),null==e.startupTime||isNaN(e.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(e.startupTime),this._qosData.isStartupTimeOverridden=!0)},a.prototype._checkCall=function(e){return this._isTrackingSessionActive?!this._isVideoComplete||"_onApiVideoSessionEnd"===e||(this._logger.warn(S,"#"+e+"() > The video content already completed."),!1):(this._logger.warn(S,"#"+e+"() > No active tracking session."),!1)},a.prototype._updateReportingInterval=function(e,t){var n={};n[O]=!!t,n[L]=e,this._channel.trigger(new i(le,n))},a.prototype._updateLastInBandItem=function(e){var t=this._lastInBandItem,n=(new Date).getTime(),a=t.assetData.type()===f.TYPE_AD||e.assetData.type()===f.TYPE_AD,i=1e3*Math.abs(e.eventData.playhead()-t.eventData.playhead()),r=Math.abs(n-t.eventData.ts()),s=Math.abs(i-r),o=r;ce<o?(this._logger.warn(S," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to 0 as calculated duration ("+o+")exceeds 10mins"),o=0):t.eventData.type()==d.EVENT_TYPE_PLAY&&!a&&!this._doNotOverrideEventDuration&&ue<s&&(o=Math.min(i,r),this._logger.warn(S," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to "+o+" as calculated error delta ("+s+")exceeds 2sec")),this._doNotOverrideEventDuration=!1,t.eventData.duration(o),t.eventData.ts(n),t.eventData.playhead(e.eventData.playhead()),t.qosData.startupTime(e.qosData.startupTime()),t.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden},a.prototype._updateLastInbandItemToBuffering=function(){this._stashedLastInBandItem=this._lastInBandItem;var e=0;null!=this._lastInBandItem&&(this._lastInBandItem.assetData.type()==f.TYPE_MAIN_CONTENT&&this._lastInBandItem.eventData.type()==d.EVENT_TYPE_START&&(this._stashedMainMetadata=this._lastInBandItem.meta),e=this._lastInBandItem.eventData.playhead());var t=new y(this,d.EVENT_TYPE_BUFFER,e,null,null);t.assetData.adData(null),t.assetData.type(f.TYPE_MAIN_CONTENT),this._lastInBandItem=t},a.prototype._restoreLastInbandItem=function(){var e,t;null!=this._stashedLastInBandItem&&(e=null,this._stashedLastInBandItem.eventData.type()==d.EVENT_TYPE_START&&(this._lastInBandItem.assetData.type()==f.TYPE_AD?e=this._lastInBandItem.meta:(e=this._stashedMainMetadata,this._stashedMainMetadata=null)),(t=new y(this,this._stashedLastInBandItem.eventData.type(),this._stashedLastInBandItem.eventData.playhead(),e,this._stashedLastInBandItem.callback)).filterReport=this._stashedLastInBandItem.filterReport,this._lastInBandItem=t,this._stashedLastInBandItem=null)},a.prototype._flushLastInbandItem=function(e){var t;this._lastInBandItem&&(this._updateQoSInfo(e),t=new y(this,this._lastInBandItem.eventData.type(),e.playhead,this._lastInBandItem.meta,this._lastInBandItem.callback),this._sendHit(t,!0))},a.prototype._createAndSendReport=function(e){var t=this._reportFactory.createReportForItem(e);t.qosData.isStartupTimeOverridden||t.qosData.startupTime(this._autoComputedStartupTime);var n,a={};a[I]=t,this._channel.trigger(new i(se,a)),t.eventData.type()!=d.EVENT_TYPE_START&&t.eventData.type()!=d.EVENT_TYPE_PLAY&&t.eventData.type()!=d.EVENT_TYPE_PAUSE&&t.eventData.type()!=d.EVENT_TYPE_STALL&&t.eventData.type()!=d.EVENT_TYPE_BUFFER||((n={})[M]=!0,this._channel.command(P,n))},a.prototype._sendHit=function(e,t){switch(e.eventData.type()){case d.EVENT_TYPE_START:case d.EVENT_TYPE_PLAY:case d.EVENT_TYPE_PAUSE:case d.EVENT_TYPE_STALL:case d.EVENT_TYPE_BUFFER:this._lastInBandItem?(this._updateLastInBandItem(e),this._lastInBandItem.eventData.type()==d.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==f.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),this._createAndSendReport(this._lastInBandItem),t&&this._lastInBandItem.eventData.type()==e.eventData.type()||this._createAndSendReport(e)):this._createAndSendReport(e),this._lastInBandItem=e;break;case d.EVENT_TYPE_COMPLETE:case d.EVENT_TYPE_SKIP:var n;this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==d.EVENT_TYPE_SKIP&&this._createAndSendReport(e),e.assetData.type()==f.TYPE_MAIN_CONTENT?(this._lastInBandItem=null,this._stashedLastInBandItem=null,(n={})[M]=!0,this._channel.command(x,n)):e.assetData.type()==f.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(f.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case d.EVENT_TYPE_CHAPTER_START:case d.EVENT_TYPE_CHAPTER_COMPLETE:case d.EVENT_TYPE_CHAPTER_SKIP:this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==d.EVENT_TYPE_CHAPTER_SKIP&&this._createAndSendReport(e),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(e.eventData.type()==d.EVENT_TYPE_CHAPTER_START?new v(e.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),this._createAndSendReport(this._lastInBandItem));break;default:this._createAndSendReport(e)}};var S="ah::Context",T="sourceErrorSDK",w="error",P="clock:reporting.resume",x="clock:reporting.pause",C="reporting_interval",D="session_id",E="reset_session_id",A="callback",k="filter_report",I="report",M="reset",$="track_external_errors",L="reporting_interval",O="do_not_override_interval",R="api:aa_start",N="api:aa_ad_start",F="api:video_load",B="api:video_unload",V="api:video_start",j="api:video_complete",U="api:video_skip",H="api:video_resume",G="api:video_session_end",Y="api:adbreak_start",q="api:adbreak_complete",z="api:ad_start",W="api:ad_complete",K="api:ad_skip",X="api:play",Q="api:pause",J="api:buffer_start",Z="api:chapter_start",ee="api:chapter_complete",te="api:chapter_skip",ne="api:track_error",ae="api:track_internal_error",ie="api:bitrate_change",re="api:quantum_end",se="context:report_available",oe="net:check_status_complete",le="reporting:update_interval",ce=6e5,ue=2e3,he=10;n.context.Context=a}(a.ADB.core,(a.ADB.va,a.ADB.va.utils),i),function(){"use strict";i.AdobeHeartbeatPluginConfig=function(e,t){this.trackingServer=e,this.publisher=t,this.ssl=!1,this.ovp="unknown",this.sdk="unknown",this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},t.prototype.onTrackingDisabled=function(){},e.AdobeHeartbeatPluginDelegate=t}(i),function(e,t,n){"use strict";function a(e){a.__super__.constructor.call(this,g),this._radio=new l(this._logger),this._channel=this._radio.channel(P),this._delegate=e,this._context=new h(this._channel,this._logger),this._filter=new d(this._channel,this._logger),this._network=new f(this._channel,this._logger),this._setupDataResolver()}var i=e.Event,r=e.Trigger,s=e.plugin.BasePlugin,o=e.plugin.ParamMapping,l=e.radio.Radio,c=t.ErrorInfo,u=t.Version,h=n.context.Context,d=n.filter.ReportFilter,f=n.network.Network,p=n.clock.Clock,m=n.AdobeHeartbeatPluginConfig;e.extend(a,s),a.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof m))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var t=this._config.trackingServer+"/settings/",n={};n[se]=this._config.trackingServer,n[oe]=t,n[le]=this._config.publisher,n[ce]=this._config.quietMode,n[ue]=this._config.ssl,this._channel.trigger(new i(ge,n)),this._isConfigured=!0},a.prototype.bootstrap=function(e){a.__super__.bootstrap.call(this,e),this._channel.on(x,this._onError,this),this._clock=new p(this._pluginManager,this._channel,this._logger),this._channel.command(je),this._channel.trigger(new i(We)),this._channel.on(fe,this._onCheckStatusComplete,this),this._registerCommands(),this._registerBehaviours()},a.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},a.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):a.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},a.prototype._cmdAnalyticsError=function(e){this._errorInfo||(this._errorInfo=new c("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(x,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},a.prototype._cmdAnalyticsStart=function(e){var t;this._canProcess()&&((t={})[he]=e.visitorOptedOut,this._channel.trigger(new i(ve,t)),this._channel.trigger(new i(pe,e)))},a.prototype._cmdAnalyticsAdStart=function(e){this._canProcess()&&this._channel.trigger(new i(me,e))},a.prototype._cmdVideoLoad=function(e){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new i(_e,e)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new i(ye,e)),this._isTrackingSessionActive=!0)},a.prototype._cmdVideoUnload=function(e){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new i(_e,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},a.prototype._cmdVideoSessionEnd=function(e){this._canProcess()&&this._channel.trigger(new i(Pe,e))},a.prototype._cmdVideoStart=function(e){this._canProcess()&&(this._channel.trigger(new i(be,e)),this._filter.flush())},a.prototype._cmdVideoComplete=function(e){this._canProcess()&&this._channel.trigger(new i(Se,e))},a.prototype._cmdVideoSkip=function(e){this._canProcess()&&this._channel.trigger(new i(Te,e))},a.prototype._cmdVideoResume=function(e){this._canProcess()&&this._channel.trigger(new i(we,e))},a.prototype._cmdPlay=function(e){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(e))},a.prototype._cmdPause=function(e){this._canProcess()&&(this._channel.trigger(new i(Ie,e)),this._isPaused=!0,this._runIdleTimer(!0))},a.prototype._cmdAdBreakStart=function(e){this._canProcess()&&this._channel.trigger(new i(xe,e))},a.prototype._cmdAdBreakComplete=function(e){this._canProcess()&&(this._channel.trigger(new i(Ce,e)),this._resumePlaybackIfPossible(e))},a.prototype._cmdAdStart=function(e){this._canProcess()&&(this._channel.trigger(new i(De,e)),this._resumePlaybackIfPossible(e))},a.prototype._cmdAdComplete=function(e){this._canProcess()&&this._channel.trigger(new i(Ee,e))},a.prototype._cmdAdSkip=function(e){this._canProcess()&&this._channel.trigger(new i(Ae,e))},a.prototype._cmdBufferStart=function(e){this._canProcess()&&(this._channel.trigger(new i(Me,e)),this._isBuffering=!0,this._runIdleTimer(!0))},a.prototype._cmdBufferComplete=function(e){this._canProcess()&&(this._isBuffering=!1,this._isPaused?this._channel.trigger(new i(Ie,e)):this._resumePlaybackIfPossible(e))},a.prototype._cmdSeekStart=function(e){this._canProcess()&&(this._channel.trigger(new i(Ie,e)),this._isSeeking=!0,this._runIdleTimer(!0))},a.prototype._cmdSeekComplete=function(e){this._canProcess()&&(this._isSeeking=!1,this._resumePlaybackIfPossible(e))},a.prototype._cmdChapterStart=function(e){this._canProcess()&&this._channel.trigger(new i($e,e))},a.prototype._cmdChapterComplete=function(e){this._canProcess()&&this._channel.trigger(new i(Le,e))},a.prototype._cmdChapterSkip=function(e){this._canProcess()&&this._channel.trigger(new i(Oe,e))},a.prototype._cmdBitrateChange=function(e){this._canProcess()&&this._channel.trigger(new i(Fe,e))},a.prototype._cmdTrackError=function(e){this._canProcess()&&this._channel.trigger(new i(Re,e))},a.prototype._cmdClockReportingTick=function(e){this._canProcess()&&this._channel.trigger(new i(Be,e))},a.prototype._onCheckStatusComplete=function(e){var t;this._canProcess()&&(t=!1,e&&e.data&&e.data[de]&&(t=e.data[de]),this._logger.debug(this._logTag,"#_onCheckStatusComplete(trackingDisabled="+t+")"),t&&this._delegate&&this._delegate.onTrackingDisabled())},a.prototype._cmdIdleTick=function(e){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(ee),this._channel.trigger(new i(Pe,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(J))},a.prototype._onError=function(e){this._errorInfo=e.data;var t={};t[ie]=Ve,t[re]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new i(Ne,t)),this._runReportingTimer(!1),this._trigger(x,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},a.prototype._runIdleTimer=function(e){var t={};t[ae]=!0,e?this._channel.command(qe,t):this._channel.command(ze,t)},a.prototype._runFlushFilterTimer=function(e){var t={};t[ae]=!0,e?this._channel.command(Ge,t):this._channel.command(Ye,t)},a.prototype._runReportingTimer=function(e){var t={};t[ae]=!0,e?this._channel.command(Ue,t):this._channel.command(He,t)},a.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleVideoSessionEnd",this._cmdVideoSessionEnd),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoSkip",this._cmdVideoSkip),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdBreakStart",this._cmdAdBreakStart),this._pluginManager.comply(this,"handleAdBreakComplete",this._cmdAdBreakComplete),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleAdSkip",this._cmdAdSkip),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleChapterSkip",this._cmdChapterSkip),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},a.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(_,E),this,"handleVideoLoad",[new o(y,"rsid","rsid"),new o(y,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new r(_,A),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new r(_,k),this,"handleVideoSessionEnd",[new o(_,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new r(_,I),this,"handleVideoStart",[new o(_,"video.id","videoId"),new o(_,"video.name","videoName"),new o(_,"video.length","videoLength"),new o(_,"video.playhead","playhead"),new o(_,"video.playerName","playerName"),new o(_,"video.streamType","streamType"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime"),new o(y,"rsid","rsid"),new o(y,"tracking_server","trackingServer"),new o(y,"channel","channel"),new o(y,"meta.video.*","metaVideo"),new o(y,"ssl","useSsl"),new o(b,"meta","metaNielsen"),new o(v,"publisher","publisher"),new o(v,"sdk","sdk"),new o(v,"ovp","ovp"),new o(v,"version","version"),new o(v,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new r(_,$),this,"handleVideoComplete",[new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,L),this,"handleVideoSkip",[new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,M),this,"handleVideoResume",[new o(_,"video.id","videoId"),new o(_,"video.name","videoName"),new o(_,"video.length","videoLength"),new o(_,"video.playhead","playhead"),new o(_,"video.playerName","playerName"),new o(_,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new r(_,O),this,"handlePlay",[new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,R),this,"handlePause",[new o(_,"video.playhead","playhead"),new o(_,"video.playheadStalled","playheadStalled"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,F),this,"handleAdBreakStart",[new o(_,"ad.isInAdBreak","isInAdBreak"),new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,B),this,"handleAdBreakComplete",[new o(_,"ad.isInAdBreak","isInAdBreak"),new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,V),this,"handleAdStart",[new o(_,"video.playhead","playhead"),new o(_,"ad.id","adId"),new o(_,"ad.name","adName"),new o(_,"ad.length","adLength"),new o(_,"ad.position","adPosition"),new o(_,"ad.granularTracking","adGranularTracking"),new o(_,"ad.trackingInterval","adTrackingInterval"),new o(_,"pod.name","podName"),new o(_,"pod.playerName","podPlayerName"),new o(_,"pod.position","podPosition"),new o(_,"pod.startTime","podSecond"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime"),new o(y,"meta.video.*","metaVideo"),new o(y,"meta.ad.*","metaAd"),new o(b,"meta","metaNielsen"),new o(b,"metaAd","metaAdNielsen")]),this._pluginManager.registerBehaviour(new r(_,j),this,"handleAdComplete",[new o(_,"video.playhead","playhead"),new o(_,"ad.isInAdBreak","isInAdBreak"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,U),this,"handleAdSkip",[new o(_,"video.playhead","playhead"),new o(_,"ad.isInAdBreak","isInAdBreak"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,H),this,"handleBufferStart",[new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,G),this,"handleBufferComplete",[new o(_,"video.playhead","playhead"),new o(_,"video.playheadStalled","playheadStalled"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,Y),this,"handleSeekStart",[new o(_,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new r(_,q),this,"handleSeekComplete",[new o(_,"video.playhead","playhead"),new o(_,"ad.isInAd","isInAd"),new o(_,"ad.id","adId"),new o(_,"ad.position","adPosition"),new o(_,"pod.playerName","podPlayerName"),new o(_,"pod.position","podPosition"),new o(_,"chapter.isInChapter","isInChapter"),new o(_,"chapter.position","chapterPosition"),new o(_,"chapter.name","chapterName"),new o(_,"chapter.length","chapterLength"),new o(_,"chapter.startTime","chapterOffset"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,z),this,"handleChapterStart",[new o(_,"video.playhead","playhead"),new o(_,"chapter.position","chapterPosition"),new o(_,"chapter.name","chapterName"),new o(_,"chapter.length","chapterLength"),new o(_,"chapter.startTime","chapterOffset"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime"),new o(y,"meta.video.*","metaVideo"),new o(y,"meta.chapter.*","metaChapter"),new o(b,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new r(_,W),this,"handleChapterComplete",[new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,K),this,"handleChapterSkip",[new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,X),this,"handleBitrateChange",[new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,Q),this,"handleTrackError"),this._pluginManager.registerBehaviour(new r(S,te),this,"handleClockReportingTick",[new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(_,N),this,"handleClockReportingTick",[new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(S,ne),this,"handleIdleTick",[new o(_,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new r(v,ee),this,"handleClockReportingTick",[new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(y,x),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new r(y,C),this,"handleAnalyticsStart",[new o(y,"vid","vid"),new o(y,"aid","aid"),new o(y,"mid","mid"),new o(y,"customerIDs","customerIDs"),new o(y,"visitorOptedOut","visitorOptedOut"),new o(y,"blob","blob"),new o(y,"loc_hint","loc_hint"),new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new r(y,D),this,"handleAnalyticsAdStart",[new o(_,"video.playhead","playhead"),new o(_,"qos.fps","fps"),new o(_,"qos.droppedFrames","droppedFrames"),new o(_,"qos.bitrate","bitrate"),new o(_,"qos.startupTime","startupTime")])},a.prototype._setupDataResolver=function(){var i={},e=this;i.version=function(){return u.getVersion()},i.api_level=function(){return u.getApiLevel()},i.tracking_server=function(){return e._config?e._config.trackingServer:null},i.publisher=function(){return e._config?e._config.publisher:null},i.quiet_mode=function(){return!!e._config&&e._config.quietMode},i.ovp=function(){return e._config?e._config.ovp:null},i.sdk=function(){return e._config?e._config.sdk:null},i.is_primetime=function(){return!!e._config&&e._config.__isPrimetime},i.psdk_version=function(){return e._config?e._config.__psdkVersion:null},i.session_id=function(){return e._channel.request(T)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var a=e[n];(t=t||{})[a]=i.hasOwnProperty(a)?i[a].call(this):null}return t}},a.prototype._resumePlaybackIfPossible=function(e){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle?(this._isVideoIdle=!1,this._resumePlaybackFromIdle()):this._channel.trigger(new i(ke,e)),this._runIdleTimer(!1))},a.prototype._resumePlaybackFromIdle=function(){this._trigger(ee),this._filter.clear(),this._channel.trigger(new i(w)),this._trigger(Z),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var g="adobe-heartbeat",v=g,y="adobe-analytics",_="player",b="nielsen",S="service.clock",T="session_id",w="reset_session_id",P="heartbeat-channel",x="error",C="aa_start",D="sc_ad_start",E="video_load",A="video_unload",k="video_session_end",I="video_start",M="video_resume",$="video_complete",L="video_skip",O="play",R="pause",N="content_start",F="adbreak_start",B="adbreak_complete",V="ad_start",j="ad_complete",U="ad_skip",H="buffer_start",G="buffer_complete",Y="seek_start",q="seek_complete",z="chapter_start",W="chapter_complete",K="chapter_skip",X="bitrate_change",Q="track_error",J="video_idle_start",Z="video_idle_resume",ee="quantum_close",te="heartbeat.reporting.tick",ne="heartbeat.idle.tick",ae="reset",ie="source",re="error_id",se="tracking_server",oe="check_status_server",le="publisher",ce="quiet_mode",ue="ssl",he="visitor_opt_out",de="tracking_disabled",fe="net:check_status_complete",pe="api:aa_start",me="api:aa_ad_start",ge="api:config",ve="api:update_visitor_optout",ye="api:video_load",_e="api:video_unload",be="api:video_start",Se="api:video_complete",Te="api:video_skip",we="api:video_resume",Pe="api:video_session_end",xe="api:adbreak_start",Ce="api:adbreak_complete",De="api:ad_start",Ee="api:ad_complete",Ae="api:ad_skip",ke="api:play",Ie="api:pause",Me="api:buffer_start",$e="api:chapter_start",Le="api:chapter_complete",Oe="api:chapter_skip",Re="api:track_error",Ne="api:track_internal_error",Fe="api:bitrate_change",Be="api:quantum_end",Ve="sourceErrorHeartbeat",je="clock:check_status.resume",Ue="clock:reporting.resume",He="clock:reporting.pause",Ge="clock:flush_filter.resume",Ye="clock:flush_filter.pause",qe="clock:idle.resume",ze="clock:idle.pause",We="clock:check_status.get_settings";n.AdobeHeartbeatPlugin=a}(a.ADB.core,a.ADB.va,i),a.ADB.va.plugins.ah||(a.ADB.va.plugins.ah=i),void 0===l&&(l={}),function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var a=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var a=t[n];switch(a){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"mediaType":if(!e.hasOwnProperty("mediaType"))return this._fail("The media type for the main video must be specified.");if("string"!=typeof e.mediaType)return this._fail("The media type for the main video must be a String.");if(""===e.mediaType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!e.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof e.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(e.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+a)}}return!0},n.prototype._fail=function(e){var t=new a("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.InputDataValidator=n}((r=this).ADB.va,l),function(){"use strict";l.AdobeAnalyticsPluginConfig=function(){this.channel="",this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeAnalyticsPluginDelegate=t}(l),function(e,t,n,a){"use strict";function i(e,t){if(i.__super__.constructor.call(this,v),!e)throw new Error("The reference to the AppMeasurement object cannot be NULL.");if(e.unsupportedBrowser)throw new Error("AppMeasurement is not supported in current browser.");this._appMeasurement=e,this._delegate=t,this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new u(!0,T),this._inputDataValidator=new g(function(e){this._errorInfo=e,this._logger.error(this._logTag,e.getMessage()+" | "+e.getDetails());var t=this;setTimeout(function(){t._trigger(w,e),t._delegate&&t._delegate.onError(t._errorInfo)},0)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var r=e.Trigger,s=e.plugin.BasePlugin,o=e.plugin.ParamMapping,l=e.radio.Channel,c=e.radio.Command,u=e.radio.CommandQueue,h=t.ErrorInfo,d=n.md5,f=n.StringUtils,p=n.ObjectUtils,m=a.AdobeAnalyticsPluginConfig,g=a.InputDataValidator;e.extend(i,s),i.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof m))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},i.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),i.__super__.setup.call(this)},i.prototype.setVideoMetadata=function(e){this._videoMetadata=p.clone(e)},i.prototype.setAdMetadata=function(e){this._adMetadata=p.clone(e)},i.prototype.setChapterMetadata=function(e){this._chapterMetadata=p.clone(e)},i.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):i.__super__._canProcess.call(this)},i.prototype._cmdVideoLoad=function(e){this._errorInfo=null},i.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new c(this._executeOpen,this,[e]))},i.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new c(this._executeOpenAd,this,[e]))},i.prototype._cmdHeartbeatPluginError=function(e){this._errorInfo||(this._errorInfo=new h("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(w,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},i.prototype._track=function(e){try{var t;this._appMeasurement.visitorOptedOut||(t=this._appMeasurement.linkTrackVars,this._appMeasurement.linkTrackVars="",this._appMeasurement.track(e),this._appMeasurement.linkTrackVars=t)}catch(e){this._logger.warn(this._logTag,"appMeasurement.track() call threw an exception.")}},i.prototype._executeOpen=function(e){if(this._logger.debug(this._logTag,"#_executeOpen(id="+e.videoId+", videoName="+e.videoName+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.videoLength+", playerName="+e.playerName+", channel="+e.channel+", isPrimetime="+e.isPrimetime+", sessionId="+e.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","videoLength","playerName"])){var t={};for(n in e.metaVideo)e.metaVideo.hasOwnProperty(n)&&(t[n]=e.metaVideo[n]);if(e.metaNielsen)for(var n in e.metaNielsen)e.metaNielsen.hasOwnProperty(n)&&(t[n]=e.metaNielsen[n]);t["a.contentType"]=e.streamType,t["a.media.name"]=e.videoId,t["a.media.friendlyName"]=e.videoName||"",t["a.media.length"]=Math.floor(e.videoLength)||"0",t["a.media.playerName"]=e.playerName,t["a.media.channel"]=e.channel||"",t["a.media.view"]=!0,t["a.media.vsid"]=e.sessionId;var a={};a.contextData=t,"audio"===e.mediaType?(a.pev3=C,a.ms_a="1"):a.pev3=P,a.pe=e.isPrimetime?A:E,this._track(a);var i=this;setTimeout(function(){i._trigger(M,e)},0)}},i.prototype._executeOpenAd=function(e){var t=d(e.videoId)+"_"+e.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+e.adId+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.adLength+", podPlayerName="+e.podPlayerName+", parentId="+e.videoId+", podId="+t+", parentPodPosition="+e.adPosition+", podSecond="+e.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){e.podSecond=null==e.podSecond||isNaN(e.podSecond)?e.playhead:e.podSecond;var n={};for(a in e.metaVideo)e.metaVideo.hasOwnProperty(a)&&(n[a]=e.metaVideo[a]);for(a in e.metaAd)e.metaAd.hasOwnProperty(a)&&(n[a]=e.metaAd[a]);if(e.metaNielsen)for(var a in e.metaNielsen)e.metaNielsen.hasOwnProperty(a)&&(n[a]=e.metaNielsen[a]);n["a.contentType"]=e.streamType,n["a.media.name"]=e.videoId,n["a.media.playerName"]=e.playerName,n["a.media.channel"]=e.channel||"",n["a.media.vsid"]=e.sessionId,n["a.media.friendlyName"]=e.videoName||"",n["a.media.length"]=Math.floor(e.videoLength)||"0",n["a.media.ad.name"]=e.adId,n["a.media.ad.friendlyName"]=e.adName||"",n["a.media.ad.podFriendlyName"]=e.podName||"",n["a.media.ad.length"]=Math.floor(e.adLength)||"0",n["a.media.ad.playerName"]=e.podPlayerName,n["a.media.ad.pod"]=t,n["a.media.ad.podPosition"]=Math.floor(e.adPosition)||"0",n["a.media.ad.podSecond"]=Math.floor(e.podSecond)||"0",n["a.media.ad.view"]=!0;var i={};i.contextData=n,"audio"===e.mediaType?(i.pev3=D,i.ms_a="1"):i.pev3=x,i.pe=e.isPrimetime?I:k,this._track(i);var r=this;setTimeout(function(){r._trigger($,e)},0)}},i.prototype._setupDataResolver=function(){var i={},r=this;i.rsid=function(){return r._appMeasurement.account},i.tracking_server=function(){return r._appMeasurement.ssl&&r._appMeasurement.trackingServerSecure?r._appMeasurement.trackingServerSecure:r._appMeasurement.trackingServer},i.ssl=function(){return r._appMeasurement.ssl},i.vid=function(){return r._appMeasurement.visitorID},i.aid=function(){return r._appMeasurement.analyticsVisitorID},i.mid=function(){return r._appMeasurement.marketingCloudVisitorID},i.blob=function(){return r._appMeasurement.audienceManagerBlob},i.loc_hint=function(){return r._appMeasurement.audienceManagerLocationHint?parseInt(r._appMeasurement.audienceManagerLocationHint):""},i.customerIDs=function(){var e,t={},n=r._appMeasurement.visitor.getCustomerIDs();for(e in n)if(n.hasOwnProperty(e)){var a=n[e];if("object"==typeof a){for(var i in a)a.hasOwnProperty(i)&&("authState"==i?t[e+".as"]=a[i]:t[e+"."+i]=a[i]);t[e+".as"]||(t[e+".as"]="0")}}return t},i.visitorOptedOut=function(){return!!r._appMeasurement.visitorOptedOut},i.channel=function(){return r._config?r._config.channel:null},i.meta=function(e){var t=e.split(".");if(t.length<2)return null;var n=t.shift();switch(e=t.join("."),n){case"video":return e==l.WILDCARD?r._videoMetadata:r._videoMetadata[e];case"ad":return e==l.WILDCARD?r._adMetadata:r._adMetadata[e];case"chapter":return e==l.WILDCARD?r._chapterMetadata:r._chapterMetadata[e];default:return null}},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var a=e[n],t=t||{};f.startsWith(a,"meta.")?t[a]=i.meta(a.split("meta.")[1]):t[a]=i.hasOwnProperty(a)?i[a].call(this):null}return t}},i.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},i.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(b,L),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new r(b,O),this,"handleVideoStart",[new o(b,"video.id","videoId"),new o(b,"video.mediaType","mediaType"),new o(b,"video.streamType","streamType"),new o(b,"video.name","videoName"),new o(b,"video.length","videoLength"),new o(b,"video.playerName","playerName"),new o(b,"video.streamType","streamType"),new o(S,"is_primetime","isPrimetime"),new o(S,"session_id","sessionId"),new o(y,"channel","channel"),new o(y,"meta.video.*","metaVideo"),new o(_,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new r(b,R),this,"handleAdStart",[new o(b,"video.id","videoId"),new o(b,"video.mediaType","mediaType"),new o(b,"video.streamType","streamType"),new o(b,"video.playhead","playhead"),new o(b,"video.playerName","playerName"),new o(b,"video.name","videoName"),new o(b,"video.length","videoLength"),new o(b,"ad.id","adId"),new o(b,"ad.length","adLength"),new o(b,"ad.position","adPosition"),new o(b,"ad.name","adName"),new o(b,"pod.name","podName"),new o(b,"pod.position","podPosition"),new o(b,"pod.playerName","podPlayerName"),new o(b,"pod.startTime","podSecond"),new o(S,"is_primetime","isPrimetime"),new o(S,"session_id","sessionId"),new o(y,"channel","channel"),new o(y,"meta.video.*","metaVideo"),new o(y,"meta.ad.*","metaAd"),new o(_,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new r(S,w),this,"handleHeartbeatPluginError")},i.prototype._onAppMeasurementReady=function(){this._logger.debug(this._logTag,"[Init] #_onAppMeasurementReady"),this._workQueue.resume()};var v="adobe-analytics",y=v,_="nielsen",b="player",S="adobe-heartbeat",T=2e3,w="error",P="video",x="videoAd",C="audio",D="audioAd",E="ms_s",A="msp_s",k="msa_s",I="mspa_s",M="aa_start",$="sc_ad_start",L="video_load",O="video_start",R="ad_start";a.AdobeAnalyticsPlugin=i}(r.ADB.core,r.ADB.va,r.ADB.va.utils,l),function(e){"use strict";e.VideoMetadataKeys={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},e.AudioMetadataKeys={ARTIST:"a.media.artist",ALBUM:"a.media.album",LABEL:"a.media.label",AUTHOR:"a.media.author",STATION:"a.media.station",PUBLISHER:"a.media.publisher"},e.AdMetadataKeys={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"}}(l),r.ADB.va.plugins.aa||(r.ADB.va.plugins.aa=l),function(e){"use strict";function t(){this._processAction=!0,this._store={}}function c(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._rules=[]}t.prototype.setRuleName=function(e){this._ruleName=e},t.prototype.getRuleName=function(e,t){return this._ruleName},t.prototype.setData=function(e,t){this._store[e]=t},t.prototype.getData=function(e){return this._store[e]},t.prototype.shouldProcessAction=function(){return this._processAction},t.prototype.stopProcessingAction=function(){this._processAction=!1},t.prototype.startProcessingAction=function(){this._processAction=!0},c.createContext=function(){return new t},c.createPredicate=function(e,t,n){return{fn:e,expectedValue:t,msg:n}},c.prototype.registerRule=function(e,t,n,a,i){this._rules.push({name:e,desc:t,preconditions:n,actions:a,scope:i})},c.prototype.registerEnterExitAction=function(e,t){this._enterAction=e,this._exitAction=t},c.prototype._handleFailure=function(e,t){this._logger.error(u,e.desc+" -  "+t.msg)},c.prototype._getRule=function(e){for(var t=0;t<this._rules.length;++t)if(this._rules[t].name===e)return this._rules[t];return null},c.prototype.processRule=function(e,t){var n=!0,a=this._getRule(e);if(a){var i=a.scope;(t=t||c.createContext()).setRuleName(e);for(var r=!1,s=0;s<a.preconditions.length;++s){var o=a.preconditions[s];if(r=!!o.fn.call(i,t)!==o.expectedValue){this._handleFailure(a,o);break}}if(r)n=!1;else{t.startProcessingAction(),this._enterAction&&this._enterAction.call(i,t);for(s=0;s<a.actions.length;++s){var l=a.actions[s];if(!t.shouldProcessAction()){this._logger.info(u,"Stopping actions for "+a.desc);break}l.call(i,t)}this._exitAction&&t.shouldProcessAction()&&this._exitAction.call(i,t)}}else this._logger.warn(u,"No registered event found for ruleName "+e),n=!1;return n};var u="RuleEngine";e._RuleEngine=c}(((B=this).ADB.core,B.ADB.va)),function(e){"use strict";function i(e,t,n){this.taskFn=e,this.scope=t,this.interval=n,this.remainingInterval=n}function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._tasks=[],this._pausedTasks=[]}i.prototype.elapsedTime=function(e){this.remainingInterval-=e},i.prototype.shouldExecute=function(){return this.remainingInterval<=0},i.prototype.execute=function(){this.taskFn.call(this.scope)},t.prototype._getCurrentTimeInMS=function(){return(new Date).getTime()},t.prototype._runTasksForTime=function(e){var t=[],n=e-this._lastTickTime;this._lastTickTime=e;for(var a=0;a<this._tasks.length;){var i=this._tasks[a];i.elapsedTime(n),i.shouldExecute()?(t.push(i),this._tasks.splice(a,1)):++a}this._checkStopTimer();for(a=0;a<t.length;++a)t[a].execute()},t.prototype._onTick=function(){var e=this._getCurrentTimeInMS();this._runTasksForTime(e)},t.prototype._startTimer=function(){var e=this;this._timer||(this._logger.info(r,"#startTimer()"),e._lastTickTime=this._getCurrentTimeInMS(),this._timer=window.setInterval(function(){e._onTick()},n))},t.prototype._stopTimer=function(){this._timer&&(this._logger.info(r,"#stopTimer()"),window.clearInterval(this._timer),this._timer=null)},t.prototype._checkStartTimer=function(){0<this._tasks.length&&this._startTimer()},t.prototype._checkStopTimer=function(){0===this._tasks.length&&this._stopTimer()},t.prototype._removeTask=function(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return e.splice(n,1),!0;return!1},t.prototype.scheduleTask=function(e,t,n){if(this._logger.info(r,"#scheduleTask()"),!e)throw new Error("Reference to the taskFn cannot be NULL");var a=new i(e,t,n);return this._tasks.push(a),this._checkStartTimer(),a},t.prototype.cancelTask=function(e){this._logger.info(r,"#cancelTask()"),this._removeTask(this._tasks,e),this._checkStopTimer()},t.prototype.pauseTask=function(e){this._logger.info(r,"#pauseTask()"),this._removeTask(this._tasks,e)&&this._pausedTasks.push(e),this._checkStopTimer()},t.prototype.resumeTask=function(e){this._logger.info(r,"#resumeTask()"),this._removeTask(this._pausedTasks,e)&&this._tasks.push(e),this._checkStartTimer()},t.prototype.clearTasks=function(){this._stopTimer(),this._tasks=[],this._pausedTasks=[]};var r="TaskScheduler",n=250;e._TaskScheduler=t}((B.ADB.core,B.ADB.va)),function(e){"use strict";function t(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}e.MediaHeartbeatConfig=t,e.MediaHeartbeatConfig.sharedInstance=new t}(B.ADB.va),function(e){"use strict";function i(){this.data={}}var t=e.plugins.videoplayer.VideoInfo,n=e.plugins.videoplayer.AdBreakInfo,a=e.plugins.videoplayer.AdInfo,r=e.plugins.videoplayer.ChapterInfo,s=e.plugins.videoplayer.QoSInfo;i.MEDIAINFO_KEY_NAME="a.name",i.MEDIAINFO_KEY_VIDEOID="a.videoId",i.MEDIAINFO_KEY_ADID="a.adId",i.MEDIAINFO_KEY_LENGTH="a.length",i.MEDIAINFO_KEY_PLAYHEAD="a.playhead",i.MEDIAINFO_KEY_MEDIATYPE="a.mediaType",i.MEDIAINFO_KEY_STREAMTYPE="a.streamType",i.MEDIAINFO_KEY_POSITION="a.position",i.MEDIAINFO_KEY_STARTTIME="a.startTime",i.MEDIAINFO_KEY_BITRATE="a.bitrate",i.MEDIAINFO_KEY_FPS="a.fps",i.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",i.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",i.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",i.prototype.setValue=function(e,t){this.data[e]=t},i.prototype.getValue=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},i.prototype.createVideoInfo=function(){var e=new t;return e.id=null!=this.getValue(i.MEDIAINFO_KEY_VIDEOID)?this.getValue(i.MEDIAINFO_KEY_VIDEOID):"",e.name=null!=this.getValue(i.MEDIAINFO_KEY_NAME)?this.getValue(i.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(i.MEDIAINFO_KEY_LENGTH)?this.getValue(i.MEDIAINFO_KEY_LENGTH):0,e.playhead=null!=this.getValue(i.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(i.MEDIAINFO_KEY_PLAYHEAD):0,e.mediaType=null!=this.getValue(i.MEDIAINFO_KEY_MEDIATYPE)?this.getValue(i.MEDIAINFO_KEY_MEDIATYPE):"",e.streamType=null!=this.getValue(i.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(i.MEDIAINFO_KEY_STREAMTYPE):"",e},i.prototype.createAdBreakInfo=function(){var e=new n;return e.name=null!=this.getValue(i.MEDIAINFO_KEY_NAME)?this.getValue(i.MEDIAINFO_KEY_NAME):"",e.position=null!=this.getValue(i.MEDIAINFO_KEY_POSITION)?this.getValue(i.MEDIAINFO_KEY_POSITION):0,e.startTime=null!=this.getValue(i.MEDIAINFO_KEY_STARTTIME)?this.getValue(i.MEDIAINFO_KEY_STARTTIME):0,e},i.prototype.createAdInfo=function(){var e=new a;return e.id=null!=this.getValue(i.MEDIAINFO_KEY_ADID)?this.getValue(i.MEDIAINFO_KEY_ADID):"",e.name=null!=this.getValue(i.MEDIAINFO_KEY_NAME)?this.getValue(i.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(i.MEDIAINFO_KEY_LENGTH)?this.getValue(i.MEDIAINFO_KEY_LENGTH):0,e.position=null!=this.getValue(i.MEDIAINFO_KEY_POSITION)?this.getValue(i.MEDIAINFO_KEY_POSITION):0,e},i.prototype.createChapterInfo=function(){var e=new r;return e.name=null!=this.getValue(i.MEDIAINFO_KEY_NAME)?this.getValue(i.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(i.MEDIAINFO_KEY_LENGTH)?this.getValue(i.MEDIAINFO_KEY_LENGTH):0,e.startTime=null!=this.getValue(i.MEDIAINFO_KEY_STARTTIME)?this.getValue(i.MEDIAINFO_KEY_STARTTIME):0,e.position=null!=this.getValue(i.MEDIAINFO_KEY_POSITION)?this.getValue(i.MEDIAINFO_KEY_POSITION):0,e},i.prototype.createQoSInfo=function(){var e=new s;return e.bitrate=null!=this.getValue(i.MEDIAINFO_KEY_BITRATE)?this.getValue(i.MEDIAINFO_KEY_BITRATE):0,e.fps=null!=this.getValue(i.MEDIAINFO_KEY_FPS)?this.getValue(i.MEDIAINFO_KEY_FPS):0,e.droppedFrames=null!=this.getValue(i.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(i.MEDIAINFO_KEY_DROPPEDFRAMES):0,e.startupTime=null!=this.getValue(i.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(i.MEDIAINFO_KEY_STARTUPTIME):0,e},i.prototype.isEqual=function(e){if(this===e)return!0;if(!e||"object"!=typeof e||"function"!=typeof e.getValue)return!1;for(var t=[i.MEDIAINFO_KEY_NAME,i.MEDIAINFO_KEY_VIDEOID,i.MEDIAINFO_KEY_ADID,i.MEDIAINFO_KEY_LENGTH,i.MEDIAINFO_KEY_PLAYHEAD,i.MEDIAINFO_KEY_STREAMTYPE,i.MEDIAINFO_KEY_MEDIATYPE,i.MEDIAINFO_KEY_POSITION,i.MEDIAINFO_KEY_STARTTIME,i.MEDIAINFO_KEY_BITRATE,i.MEDIAINFO_KEY_FPS,i.MEDIAINFO_KEY_DROPPEDFRAMES,i.MEDIAINFO_KEY_STARTUPTIME,i.MEDIAINFO_KEY_TIMEDMETADATA],n=0;n<t.length;++n){var a=t[n];if(this.getValue(a)!==e.getValue(a))return!1}return!0},e.MediaObject=i}(B.ADB.va),function(e,t){"use strict";function n(e){n.__super__.constructor.call(this),this._heartbeat=e}function a(e){a.__super__.constructor.call(this),this._heartbeat=e}function i(e){i.__super__.constructor.call(this),this._heartbeat=e}function r(e){r.__super__.constructor.call(this),this._heartbeat=e}e.extend(n,t.plugins.aa.AdobeAnalyticsPluginDelegate),n.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(a,t.plugins.ah.AdobeHeartbeatPluginDelegate),a.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},a.prototype.onTrackingDisabled=function(){this._heartbeat&&this._heartbeat._disableHBTracking()},e.extend(i,t.HeartbeatDelegate),i.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(r,t.plugins.videoplayer.VideoPlayerPluginDelegate),r.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},r.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},r.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},r.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},r.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var e=this._heartbeat._delegate.getQoSObject();if(e&&"object"==typeof e&&e.setValue)return e.createQoSInfo()}return null},t._MediaAnalyticsPluginDelegate=n,t._MediaHeartbeatPluginDelegate=a,t._ADBMediaHeartbeatDelegate=i,t._MediaHeartbeatVideoPlayerPluginDelegate=r}(B.ADB.core,B.ADB.va),function(e,n){"use strict";function a(e,t){a.__super__.constructor.call(this),this._heartbeat=e,this._logger=t,this._validator=new n.plugins.nielsen.MetadataValidator(t)}var t="MediaHeartbeatNielsenPluginDelegate",i={NielsenContentMetadata:"media_nielsen_content_metadata",NielsenChannelMetadata:"media_nielsen_channel_metadata",NielsenAdMetadata:"media_nielsen_ad_metadata"};n.plugins.nielsen&&e.extend(a,n.plugins.nielsen.NielsenPluginDelegate),a.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(i.NielsenContentMetadata);if(e&&"object"==typeof e)return this._validator.validateContentMetadata(e,"MediaHeartbeat.NielsenContentMetadataKeys"),e;this._logger.warn(t,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenContentMetadata in MediaObject")}return null},a.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdObject){var e=this._heartbeat._currentAdObject.getValue(i.NielsenAdMetadata);if(e&&"object"==typeof e)return this._validator.validateAdMetadata(e,"MediaHeartbeat.NielsenAdMetadataKeys"),e;this._logger.warn(t,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenAdMetadata in MediaObject")}return null},a.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(i.NielsenChannelMetadata);if(e&&"object"==typeof e)return this._validator.validateChannelMetadata(e,"MediaHeartbeat.NielsenChannelMetadataKeys"),e;this._logger.warn(t,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenChannelMetadata in MediaObject")}return null},a.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},n.plugins.nielsen&&(n._NielsenObjectKey=i,n._NielsenPluginDelegate=a)}(B.ADB.core,B.ADB.va),function(e,a){"use strict";function t(){}function o(e,t,n){if(this._appMeasurement=n||B.s,!this._appMeasurement)throw new Error("MediaHeartbeat needs a valid AppMeasurement instance.");if(!this._appMeasurement.visitor||!this._appMeasurement.visitor.marketingCloudOrgID)throw new Error("MediaHeartbeat needs a valid visitor instance with marketingCloudOrgId set.");if(!e)throw new Error("MediaHeartbeat needs a valid delegate object.");if(!t||"object"!=typeof t||!t.trackingServer)throw new Error("MediaHeartbeat needs a valid config object with trackingServer set.");this._config=t,this._delegate=e,this._debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,this._logger=new r,this._debugLogging?this._logger.enable():this._logger.disable(),this._ruleEngine=new b(this._logger),this._taskScheduler=new S(this._logger),this._resetState(),this._setupRules()}var n,i,r=e.Logger,l=a.MediaObject,s=a.Heartbeat,c=a.HeartbeatConfig,u=a._ADBMediaHeartbeatDelegate,h=a.plugins.videoplayer.VideoPlayerPlugin,d=a.plugins.videoplayer.VideoPlayerPluginConfig,f=a._MediaHeartbeatVideoPlayerPluginDelegate,p=a.plugins.aa.AdobeAnalyticsPlugin,m=a.plugins.aa.AdobeAnalyticsPluginConfig,g=a._MediaAnalyticsPluginDelegate,v=a.plugins.ah.AdobeHeartbeatPlugin,y=a.plugins.ah.AdobeHeartbeatPluginConfig,_=a._MediaHeartbeatPluginDelegate,b=a._RuleEngine,S=a._TaskScheduler,T=a.utils.ObjectUtils,w=a.utils.VersionUtils;t.prototype.getCurrentPlaybackTime=function(){return null},t.prototype.getQoSObject=function(){return null},o.MediaType={Video:"video",Audio:"audio"},o.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},o.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear",PODCAST:"podcast",AUDIOBOOK:"audiobook",AOD:"aod"},o.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardMediaMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed",MediaResumed:"resumed",PrerollTrackingWaitingTime:"preroll_tracking_waiting_time"},o.VideoMetadataKeys=a.plugins.aa.VideoMetadataKeys,o.AudioMetadataKeys=a.plugins.aa.AudioMetadataKeys,o.AdMetadataKeys=a.plugins.aa.AdMetadataKeys,o.createMediaObject=function(e,t,n,a,i){var r=new l;r.setValue(l.MEDIAINFO_KEY_VIDEOID,t),r.setValue(l.MEDIAINFO_KEY_NAME,e),r.setValue(l.MEDIAINFO_KEY_LENGTH,n),r.setValue(l.MEDIAINFO_KEY_PLAYHEAD,0);var s=a||o.StreamType.VOD;return r.setValue(l.MEDIAINFO_KEY_STREAMTYPE,s),("string"!=typeof i||i!=o.MediaType.Video&&i!=o.MediaType.Audio)&&(i=o.MediaType.Video),r.setValue(l.MEDIAINFO_KEY_MEDIATYPE,i),r},o.createAdBreakObject=function(e,t,n){var a=new l;return a.setValue(l.MEDIAINFO_KEY_NAME,e),a.setValue(l.MEDIAINFO_KEY_POSITION,t),a.setValue(l.MEDIAINFO_KEY_STARTTIME,n),a},o.createAdObject=function(e,t,n,a){var i=new l;return i.setValue(l.MEDIAINFO_KEY_NAME,e),i.setValue(l.MEDIAINFO_KEY_ADID,t),i.setValue(l.MEDIAINFO_KEY_POSITION,n),i.setValue(l.MEDIAINFO_KEY_LENGTH,a),i},o.createChapterObject=function(e,t,n,a){var i=new l;return i.setValue(l.MEDIAINFO_KEY_NAME,e),i.setValue(l.MEDIAINFO_KEY_POSITION,t),i.setValue(l.MEDIAINFO_KEY_LENGTH,n),i.setValue(l.MEDIAINFO_KEY_STARTTIME,a),i},o.createQoSObject=function(e,t,n,a){var i=new l;return i.setValue(l.MEDIAINFO_KEY_BITRATE,e),i.setValue(l.MEDIAINFO_KEY_FPS,n),i.setValue(l.MEDIAINFO_KEY_DROPPEDFRAMES,a),i.setValue(l.MEDIAINFO_KEY_STARTUPTIME,t),i},o.createTimedMetadataObject=function(e){var t=new l;return t.setValue(l.MEDIAINFO_KEY_TIMEDMETADATA,e),t},o.version=function(){return a.Version.getVersion()},o.prototype.trackSessionStart=function(e,t){this._logger.info(D,"#::trackSessionStart()");var n=b.createContext();n.setData(E,e),n.setData($,this._cleanContextData(t)),this._processRule(x.SessionStart,n)},o.prototype.trackPlay=function(){this._logger.info(D,"#::trackPlay()"),this._processRule(x.Play)},o.prototype.trackPause=function(){this._logger.info(D,"#::trackPause()"),this._processRule(x.Pause)},o.prototype.trackComplete=function(){this._logger.info(D,"#::trackComplete()"),this._processRule(x.VideoComplete)},o.prototype.trackSessionEnd=function(){this._logger.info(D,"#::trackSessionEnd()"),this._processRule(x.SessionEnd)},o.prototype.trackError=function(e){this._logger.info(D,"#::trackError()");var t=b.createContext();t.setData(L,e),this._processRule(x.Error,t)},o.prototype.trackEvent=function(e,t,n){this._logger.info(D,"#::trackEvent() - "+e);var a,i=b.createContext();switch(e){case o.Event.AdBreakStart:i.setData(A,t),i.setData($,this._cleanContextData(n)),a=x.AdBreakStart;break;case o.Event.AdBreakComplete:a=x.AdBreakComplete;break;case o.Event.AdStart:i.setData(k,t),i.setData($,this._cleanContextData(n)),a=x.AdStart;break;case o.Event.AdComplete:a=x.AdComplete;break;case o.Event.AdSkip:a=x.AdSkip;break;case o.Event.SeekStart:a=x.SeekStart;break;case o.Event.SeekComplete:a=x.SeekComplete;break;case o.Event.ChapterStart:i.setData(I,t),i.setData($,this._cleanContextData(n)),a=x.ChapterStart;break;case o.Event.ChapterComplete:a=x.ChapterComplete;break;case o.Event.ChapterSkip:a=x.ChapterSkip;break;case o.Event.BufferStart:a=x.BufferStart;break;case o.Event.BufferComplete:a=x.BufferComplete;break;case o.Event.BitrateChange:a=x.BitrateChange;break;case o.Event.TimedMetadataUpdate:a=x.TimedMetadataUpdate,i.setData(M,t);break;default:return void this._logger.error(D,"Incorrect event name.")}this._processRule(a,i)},a.plugins.nielsen&&((n=a.MediaHeartbeatConfig).prototype.nielsenConfigKey=void 0,n.prototype.nielsenAppInfo=void 0,i=a._NielsenObjectKey,o.MediaObjectKey.NielsenContentMetadata=i.NielsenContentMetadata,o.MediaObjectKey.NielsenAdMetadata=i.NielsenAdMetadata,o.MediaObjectKey.NielsenChannelMetadata=i.NielsenChannelMetadata,o.NielsenContentMetadataKeys=a.plugins.nielsen.ContentMetadataKeys,o.NielsenChannelMetadataKeys=a.plugins.nielsen.ChannelMetadataKeys,o.NielsenAdMetadataKeys=a.plugins.nielsen.AdMetadataKeys,o.prototype.nielsenLoadMetadata=function(e){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(e)}),o.prototype._setState=function(e,t){this._mediaState[e]=t},o.prototype._isInState=function(e){return this._mediaState[e]},o.prototype._isTrackingDisabled=function(e){return this._mediaHeartbeatDisabled},o.prototype._isInSession=function(e){return this._isInState(P.Session)},o.prototype._isInMedia=function(e){return this._isInState(P.Media)},o.prototype._isInAd=function(e){return this._isInState(P.Ad)},o.prototype._isInAdBreak=function(e){return this._isInState(P.AdBreak)},o.prototype._isInChapter=function(e){return this._isInState(P.Chapter)},o.prototype._isInPlay=function(e){return this._isInState(P.PlayPause)},o.prototype._isInPause=function(e){return!this._isInState(P.PlayPause)},o.prototype._isInBuffer=function(e){return this._isInState(P.Buffer)},o.prototype._isInSeek=function(e){return this._isInState(P.Seek)},o.prototype._isPlatformTrackingSupported=function(e){return!this._appMeasurement.unsupportedBrowser},o.prototype._isAudioTrackingSupported=function(e){return e.getData(E).getValue(l.MEDIAINFO_KEY_MEDIATYPE)!==o.MediaType.Audio||w.isGreaterThanEqual(this._appMeasurement.version,"2.11.0")},o.prototype._isValidMediaObject=function(e){var t=e.getData(E);if(t&&t instanceof l){var n=t.getValue(o.MediaObjectKey.MediaResumed);null!=n&&"boolean"!=typeof n&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.MediaResumed in MediaObject as we expect a boolean value");var a=t.getValue(o.MediaObjectKey.PrerollTrackingWaitingTime);null!=a&&("string"!=typeof a&&"number"!=typeof a||isNaN(a))&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.PrerollTrackingWaitingTime in MediaObject as we expect a valid duration as number in milliseconds.");var i=t.getValue(o.MediaObjectKey.StandardMediaMetadata);return null!=i&&"object"!=typeof i&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardMediaMetadata in MediaObject as we expect a valid object with kv pairs."),!0}return!1},o.prototype._isValidAdBreakObject=function(e){var t=e.getData(A);return t&&t instanceof l},o.prototype._isDifferentAdBreakObject=function(e){var t=e.getData(A);return!(this._currentAdBreakObject&&this._currentAdBreakObject.isEqual(t))},o.prototype._isValidAdObject=function(e){var t=e.getData(k);if(t&&t instanceof l){var n=t.getValue(N);null!=n&&"boolean"!=typeof n&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.GranularAdTracking in AdObject as we expect a boolean value.");var a=t.getValue(o.MediaObjectKey.StandardAdMetadata);return null!=a&&"object"!=typeof a&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardAdMetadata in AdObject as we expect a valid object with kv pairs."),!0}return!1},o.prototype._isDifferentAdObject=function(e){var t=e.getData(k);return!(this._currentAdObject&&this._currentAdObject.isEqual(t))},o.prototype._isValidChapterObject=function(e){var t=e.getData(I);return t&&t instanceof l},o.prototype._isDifferentChapterObject=function(e){var t=e.getData(I);return!(this._currentChapterObject&&this._currentChapterObject.isEqual(t))},o.prototype._isValidTimedMetadataObject=function(e){var t=e.getData(M);if(t&&t instanceof l){var n=t.getValue(l.MEDIAINFO_KEY_TIMEDMETADATA);return n&&"string"==typeof n}return!1},o.prototype._shouldAllowPlayerStateChange=function(e){return!(this._isInState(P.AdBreak)&&!this._isInState(P.Ad))},o.prototype._deferredTrackPlay=function(){this._prerollWaitEnabled&&(this._logger.info(D,"Executing deferred API:trackPlay."),this._prerollWaitEnabled=!1,this._playTaskHandle=null,this._processRule(x.Play))},o.prototype._cmdEnterAction=function(e){var t=e.getRuleName();if(this._prerollWaitEnabled)if(this._playReceived)switch(t){case x.SeekStart:case x.BufferStart:this._logger.info(D,"Cancelling scheduled API:trackPlay because of SeekStart/BufferStart event"),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null;break;case x.SeekComplete:case x.BufferComplete:this._logger.info(D,"Rescheduled API:trackPlay after SeekComplete/BufferComplete event"),this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime);break;case x.Play:this._logger.info(D,"Dropping API:trackPlay as we already have a API:trackPlay scheduled."),e.stopProcessingAction();break;case x.Pause:this._logger.info(D,"Cancelling scheduled API:trackPlay because of API:trackPause call."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1;break;case x.AdBreakStart:this._logger.info(D,"Received API:trackEvent(AdBreakStart) within "+this._prerollWaitTime+" ms after API:trackPlay. We will track this as preroll AdBreak."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1,this._playAfterAdStart=!0}else switch(t){case x.Play:this._logger.info(D,"Deferring API:trackPlay for "+this._prerollWaitTime+" ms."),this._playReceived=!0,this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime),e.stopProcessingAction();break;case x.AdBreakStart:this._logger.info(D,"Received trackEvent(AdBreakStart) before first trackPlay."),this._prerollWaitEnabled=!1}},o.prototype._cmdExitAction=function(e){var t=e.getRuleName();this._playAfterAdStart&&(t===x.AdStart?(this._cmdPlay(e),this._playAfterAdStart=!1):t===x.AdBreakComplete&&(this._playAfterAdStart=!1)),t!==x.AdStart||this._isInState(P.FPlayPause)||this._cmdPlay(e)},o.prototype._cmdConfigure=function(e){this._resetState(),this._configureAdobeAnalyticsPlugin(),this._configureAdobeHearbeatPlugin(),this._configureVideoPlayerPlugin(),this._configureOtherPlugins(),this._configureHeartbeat()},o.prototype._cmdSessionStart=function(e){var t=e.getData(E),n=e.getData($);this._currentMediaObject=t,this._videoInfo=t.createVideoInfo(),this._videoInfo.playerName=this._config.playerName?this._config.playerName:"";var a=t.getValue(o.MediaObjectKey.StandardMediaMetadata);a&&"object"==typeof a||(a=null);var i=t.getValue(o.MediaObjectKey.MediaResumed);"boolean"==typeof i&&(this._videoInfo.resumed=i);var r=t.getValue(o.MediaObjectKey.PrerollTrackingWaitingTime);"string"!=typeof r&&"number"!=typeof r||isNaN(r)||(this._prerollWaitTime=Number(r),this._prerollWaitTime<=0&&(this._prerollWaitEnabled=!1));var s=this._prepareMetadata(a,n);s[O]=this._videoInfo.mediaType,this._aaPlugin.setVideoMetadata(s),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart(),this._setState(P.Session,!0),this._setState(P.Media,!0)},o.prototype._cmdVideoEnd=function(e){var t,n,a=e.getRuleName()===x.VideoComplete;this._isInState(P.Media)&&(t=this._heartbeat,n=this._playerPlugin,this._playerPlugin.trackComplete(function(){n&&n.trackVideoUnload(),t&&t.destroy()},a)),this._setState(P.Media,!1)},o.prototype._cmdHandleMediaComplete=function(e){this._isInMedia(e)||(this._logger.info(D,"API:trackComplete has already cleaned up Heartbeat instance."),this._cmdSessionEnd(e),e.stopProcessingAction())},o.prototype._cmdSessionEnd=function(e){this._setState(P.Session,!1),this._resetState()},o.prototype._cmdDisableTracking=function(e){this._logger.info(D,"#_cmdDisableTracking: ADBMediaHeartbeat Tracking Disabled Remotely."),this._mediaHeartbeatDisabled=!0},o.prototype._cmdBufferStart=function(e){this._playerPlugin.trackBufferStart(),this._setState(P.Buffer,!0)},o.prototype._cmdBufferComplete=function(e){this._isInState(P.Buffer)&&this._playerPlugin.trackBufferComplete(),this._setState(P.Buffer,!1)},o.prototype._cmdSeekStart=function(e){this._playerPlugin.trackSeekStart(),this._setState(P.Seek,!0)},o.prototype._cmdSeekComplete=function(e){this._isInState(P.Seek)&&this._playerPlugin.trackSeekComplete(),this._setState(P.Seek,!1)},o.prototype._cmdPlay=function(e){this._playerPlugin.trackPlay(),this._setState(P.PlayPause,!0),this._setState(P.FPlayPause,!0)},o.prototype._cmdPause=function(e){this._playerPlugin.trackPause(),this._setState(P.PlayPause,!1),this._setState(P.FPlayPause,!0)},o.prototype._cmdAdBreakStart=function(e){var t=e.getData(A);this._currentAdBreakObject=t,this._adBreakInfo=t.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:"",this._playerPlugin.trackAdBreakStart(),this._setState(P.AdBreak,!0)},o.prototype._cmdAdBreakComplete=function(e){this._currentAdBreakObject=null,this._adBreakInfo=null,this._isInState(P.AdBreak)&&this._playerPlugin.trackAdBreakComplete(),this._setState(P.AdBreak,!1)},o.prototype._cmdAdStart=function(e){var t=e.getData(k),n=e.getData($);this._currentAdObject=t,this._adInfo=t.createAdInfo();var a=t.getValue(N);"boolean"==typeof a&&(this._adInfo.granularTracking=a);var i=t.getValue(o.MediaObjectKey.StandardAdMetadata);i&&"object"==typeof i||(i=null);var r=this._prepareMetadata(i,n);this._aaPlugin.setAdMetadata(r),this._playerPlugin.trackAdStart(),this._setState(P.Ad,!0)},o.prototype._cmdAdComplete=function(e){this._currentAdObject=null,this._adInfo=null,this._isInState(P.Ad)&&this._playerPlugin.trackAdComplete(),this._setState(P.Ad,!1)},o.prototype._cmdAdSkip=function(e){this._currentAdObject=null,this._adInfo=null,this._isInState(P.Ad)&&this._playerPlugin.trackAdSkip(),this._setState(P.Ad,!1)},o.prototype._cmdChapterStart=function(e){var t=e.getData(I),n=e.getData($);this._currentChapterObject=t,this._chapterInfo=t.createChapterInfo();var a=this._prepareMetadata(null,n);this._aaPlugin.setChapterMetadata(a),this._playerPlugin.trackChapterStart(),this._setState(P.Chapter,!0)},o.prototype._cmdChapterComplete=function(e){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(P.Chapter)&&this._playerPlugin.trackChapterComplete(),this._setState(P.Chapter,!1)},o.prototype._cmdChapterSkip=function(e){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(P.Chapter)&&this._playerPlugin.trackChapterSkip(),this._setState(P.Chapter,!1)},o.prototype._cmdError=function(e){var t=(t=e.getData(L))||"unknown_error_id";this._playerPlugin.trackVideoPlayerError(t)},o.prototype._cmdBitrate=function(e){this._playerPlugin.trackBitrateChange()},o.prototype._cmdTimedMetadataUpdate=function(e){var t=e.getData(M).getValue(l.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin.trackTimedMetadata(t)},o.prototype._processRule=function(e,t){return this._ruleEngine.processRule(e,t)},o.prototype._setupRules=function(){this._ruleEngine.registerEnterExitAction(this._cmdEnterAction,this._cmdExitAction),this._ruleEngine.registerRule(x.SessionStart,"API:trackSessionStart",[b.createPredicate(this._isPlatformTrackingSupported,!0,C.ErrUnSupportedPlatform),b.createPredicate(this._isTrackingDisabled,!1,C.ErrTrackingDisabled),b.createPredicate(this._isInSession,!1,C.ErrInSession),b.createPredicate(this._isValidMediaObject,!0,C.ErrInvalidMediaObject),b.createPredicate(this._isAudioTrackingSupported,!0,C.ErrAudioTrackingNotSupported)],[this._cmdConfigure,this._cmdSessionStart],this),this._ruleEngine.registerRule(x.SessionEnd,"API:trackSessionEnd",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession)],[this._cmdHandleMediaComplete,this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd,this._cmdSessionEnd],this),this._ruleEngine.registerRule(x.VideoComplete,"API:trackComplete",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd],this),this._ruleEngine.registerRule(x.DisableTracking,"DisableTracking",[b.createPredicate(this._isTrackingDisabled,!1,C.ErrTrackingDisabled)],[this._cmdDisableTracking],this),this._ruleEngine.registerRule(x.Error,"API:trackError",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia)],[this._cmdError],this),this._ruleEngine.registerRule(x.Play,"API:trackPlay",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState)],[this._cmdSeekComplete,this._cmdBufferComplete,this._cmdPlay],this),this._ruleEngine.registerRule(x.Pause,"API:trackPause",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState),b.createPredicate(this._isInBuffer,!1,C.ErrInBuffer),b.createPredicate(this._isInSeek,!1,C.ErrInSeek)],[this._cmdPause],this),this._ruleEngine.registerRule(x.BufferStart,"API:trackEvent(BufferStart)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState),b.createPredicate(this._isInBuffer,!1,C.ErrInBuffer),b.createPredicate(this._isInSeek,!1,C.ErrInSeek)],[this._cmdBufferStart],this),this._ruleEngine.registerRule(x.BufferComplete,"API:trackEvent(BufferComplete)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState),b.createPredicate(this._isInBuffer,!0,C.ErrNotInBuffer)],[this._cmdBufferComplete],this),this._ruleEngine.registerRule(x.SeekStart,"API:trackEvent(SeekStart)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState),b.createPredicate(this._isInSeek,!1,C.ErrInSeek),b.createPredicate(this._isInBuffer,!1,C.ErrInBuffer)],[this._cmdSeekStart],this),this._ruleEngine.registerRule(x.SeekComplete,"API:trackEvent(SeekComplete)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._shouldAllowPlayerStateChange,!0,C.ErrInvalidPlayerState),b.createPredicate(this._isInSeek,!0,C.ErrNotInSeek)],[this._cmdSeekComplete],this),this._ruleEngine.registerRule(x.AdBreakStart,"API:trackEvent(AdBreakStart)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._isValidAdBreakObject,!0,C.ErrInvalidAdBreakObject),b.createPredicate(this._isDifferentAdBreakObject,!0,C.ErrDuplicateAdBreakObject)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdAdBreakStart],this),this._ruleEngine.registerRule(x.AdBreakComplete,"API:trackEvent(AdBreakComplete)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._isInAdBreak,!0,C.ErrNotInAdBreak)],[this._cmdAdSkip,this._cmdAdBreakComplete],this),this._ruleEngine.registerRule(x.AdStart,"API:trackEvent(AdStart)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._isInAdBreak,!0,C.ErrNotInAdBreak),b.createPredicate(this._isValidAdObject,!0,C.ErrInvalidAdObject),b.createPredicate(this._isDifferentAdObject,!0,C.ErrDuplicateAdObject)],[this._cmdAdSkip,this._cmdAdStart],this),this._ruleEngine.registerRule(x.AdComplete,"API:trackEvent(AdComplete)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._isInAdBreak,!0,C.ErrNotInAdBreak),b.createPredicate(this._isInAd,!0,C.ErrNotInAd)],[this._cmdAdComplete],this),this._ruleEngine.registerRule(x.AdSkip,"API:trackEvent(AdSkip)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._isInAdBreak,!0,C.ErrNotInAdBreak),b.createPredicate(this._isInAd,!0,C.ErrNotInAd)],[this._cmdAdSkip],this),this._ruleEngine.registerRule(x.ChapterStart,"API:trackEvent(ChapterStart)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._isValidChapterObject,!0,C.ErrInvalidChapterObject),b.createPredicate(this._isDifferentChapterObject,!0,C.ErrDuplicateChapterObject)],[this._cmdChapterSkip,this._cmdChapterStart],this),this._ruleEngine.registerRule(x.ChapterComplete,"API:trackEvent(ChapterComplete)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._isInChapter,!0,C.ErrNotInChapter)],[this._cmdChapterComplete],this),this._ruleEngine.registerRule(x.ChapterSkip,"API:trackEvent(ChapterSkip)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._isInChapter,!0,C.ErrNotInChapter)],[this._cmdChapterSkip],this),this._ruleEngine.registerRule(x.BitrateChange,"API:trackEvent(BitrateChange)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia)],[this._cmdBitrate],this),this._ruleEngine.registerRule(x.TimedMetadataUpdate,"API:trackEvent(TimedMetadataUpdate)",[b.createPredicate(this._isInSession,!0,C.ErrNotInSession),b.createPredicate(this._isInMedia,!0,C.ErrNotInMedia),b.createPredicate(this._isValidTimedMetadataObject,!0,C.ErrInvalidTimedMetadataObject)],[this._cmdTimedMetadataUpdate],this)},o.prototype._configureAdobeAnalyticsPlugin=function(){this._aaPlugin=new p(this._appMeasurement,new g(this));var e=new m;e.channel=this._config.channel?this._config.channel:"",e.debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(e),this._plugins.push(this._aaPlugin)},o.prototype._configureAdobeHearbeatPlugin=function(){var e=this._appMeasurement.visitor?this._appMeasurement.visitor.marketingCloudOrgID:"";this._ahPlugin=new v(new _(this));var t=new y(this._config.trackingServer,e);t.debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,t.ovp=this._config.ovp?this._config.ovp:"",t.ssl=this._config.ssl,t.sdk=this._config.appVersion?this._config.appVersion:"";var n=this._primetimeTVSDKVersion();n&&0<n.length&&(t.__primetime=!0,t.__psdkVersion=n),this._ahPlugin.configure(t),this._plugins.push(this._ahPlugin)},o.prototype._configureVideoPlayerPlugin=function(){this._playerPlugin=new h(new f(this));var e=new d;e.debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(e),this._plugins.push(this._playerPlugin)},o.prototype._configureOtherPlugins=function(){var e;a.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo&&(this._nielsenPlugin=new a.plugins.nielsen.NielsenPlugin(new a._NielsenPluginDelegate(this,this._logger)),(e=new a.plugins.nielsen.NielsenPluginConfig).debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,e.appInfo=this._config.nielsenAppInfo,e.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(e),this._plugins.push(this._nielsenPlugin))},o.prototype._configureHeartbeat=function(){var e=new c;e.debugLogging=a.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new s(new u(this),this._plugins),this._heartbeat.configure(e)},o.prototype._resetState=function(){this._taskScheduler.clearTasks(),this._mediaState={},this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._heartbeat=null,this._currentMediaObject=null,this._currentAdBreakObject=null,this._currentAdObject=null,this._currentChapterObject=null,this._videoInfo=null,this._adBreakInfo=null,this._adInfo=null,this._chapterInfo=null,this._prerollWaitEnabled=!0,this._prerollWaitTime=F,this._playReceived=!1,this._playTaskHandle=null,this._playAfterAdStart=!1},o.prototype._primetimeTVSDKVersion=function(){return this._currentMediaObject?this._currentMediaObject.getValue(R):null},o.prototype._cleanContextData=function(e){if(null==e||"object"!=typeof e)return null;var t,n,a={};for(t in e){e.hasOwnProperty(t)&&("number"!=typeof(n=e[t])&&"string"!=typeof n&&"boolean"!=typeof n||(a[t]=n))}return a},o.prototype._prepareMetadata=function(e,t){var n,a={};return t&&T.append(a,t),e&&(n=this._cleanContextData(e),T.append(a,n)),delete a[O],a},o.prototype._onDelegateError=function(e){this._logger.error(D,e.getMessage()+" | "+e.getDetails())},o.prototype._disableHBTracking=function(){var e=b.createContext();this._processRule(x.DisableTracking,e),this._processRule(x.SessionEnd,e)};var P={Session:0,Media:1,AdBreak:2,Ad:3,Chapter:4,PlayPause:5,Buffer:6,Seek:7,FPlayPause:8},x={SessionStart:0,SessionEnd:1,VideoComplete:2,Play:3,Pause:4,Error:5,AdBreakStart:6,AdBreakComplete:7,AdStart:8,AdComplete:9,AdSkip:10,ChapterStart:11,ChapterComplete:12,ChapterSkip:13,SeekStart:14,SeekComplete:15,BufferStart:16,BufferComplete:17,BitrateChange:18,TimedMetadataUpdate:19,DisableTracking:20},C={ErrUnSupportedPlatform:"MediaHeartbeat does not support tracking due to AppMeasurement or VisitorAPI not supporting the browser.",ErrNotInSession:'MediaHeartbeat is not in active tracking session, call "API:trackSessionStart" to begin a new tracking session.',ErrInSession:'MediaHeartbeat is in active tracking session, call "API:trackSessionEnd" to end current tracking session.',ErrTrackingDisabled:"MediaHeartbeat tracking is disabled for this publisher. Please contact Adobe Representative to enable tracking.",ErrNotInMedia:'MediaHeartbeat has completed tracking session, call "API:trackSessionEnd" first to end current session and then begin a new tracking session.',ErrInBuffer:'MediaHeartbeat is tracking buffer events, call "API:trackEvent(BufferComplete)" first to stop tracking buffer events.',ErrNotInBuffer:'MediaHeartbeat is not tracking buffer events, call "API:trackEvent(BufferStart)" before "API:trackEvent(BufferComplete)".',ErrInSeek:'MediaHeartbeat is tracking seek events, call "API:trackEvent(SeekComplete)" first to stop tracking seek events.',ErrNotInSeek:'MediaHeartbeat is not tracking seek events, call "API:trackEvent(SeekStart)" before "API:trackEvent(SeekComplete)".',ErrNotInAdBreak:'MediaHeartbeat is not tracking any AdBreak, call "API:trackEvent(AdBreakStart)" to begin tracking AdBreak',ErrNotInAd:'MediaHeartbeat is not tracking any Ad, call "API:trackEvent(AdStart)" to begin tracking Ad',ErrNotInChapter:'MediaHeartbeat is not tracking any Chapter, call "API:trackEvent(ChapterStart)" to begin tracking Chapter',ErrInvalidMediaObject:'MediaInfo passed into "API:trackSessionStart" is invalid.',ErrInvalidAdBreakObject:'AdBreakInfo passed into "API:trackEvent(AdBreakStart)" is invalid.',ErrDuplicateAdBreakObject:'MediaHeartbeat is currently tracking the AdBreak passed into "API:trackEvent(AdBreakStart)".',ErrInvalidAdObject:'AdInfo passed into "API:trackEvent(AdStart)" is invalid.',ErrDuplicateAdObject:'MediaHeartbeat is currently tracking the Ad passed into "API:trackEvent(AdStart)".',ErrInvalidChapterObject:'ChapterInfo passed into "API:trackEvent(ChapterStart)" is invalid.',ErrDuplicateChapterObject:'MediaHeartbeat is currently tracking the Chapter passed into "API:trackEvent(ChapterStart)".',ErrInvalidTimedMetadataObject:'TimedMetadata passed into "API:trackEvent(TimedMetadataUpdate)" is invalid.',ErrInvalidPlayerState:"MediaHeartbeat is tracking an AdBreak but not tracking any Ad and will drop any calls to track player state (Play, Pause, Buffer or Seek) in this state.",ErrAudioTrackingNotSupported:"Upgrade your AppMeasurement library to version >= '2.11.0' to support tracking audio content."},D="MediaHeartbeat",E="key_media_object",A="key_adbreak_object",k="key_ad_object",I="key_chapter_object",M="key_timed_metadata_object",$="key_custom_metadata",L="key_error_id",O="a.media.streamType",R="a.__pttvsdkVersion",N="granular_ad_tracking",F=250;a._MediaHeartbeatErrorMessage=C,a.MediaHeartbeatDelegate=t,a.MediaHeartbeat=o,a.MediaHeartbeat._debugLogging=!1}(B.ADB.core,B.ADB.va),B.ADB||(B.ADB={}),B.ADB.core||(B.ADB.core=core),B.ADB.va||(B.ADB.va=va),B.ADB.va.plugins||(B.ADB.va.plugins={})}).call(t),e.va=t.ADB.va,e.core=t.ADB.core}),angular.module("nba-ng-hana-services",[]).service("HanaService",["$http","$q",function(o,l){function c(e){var t="resultSets",n={params:e.parameters,resource:e.resource,sets:[],datasets:{}};return e.resultSet&&(e[t]=e.resultSet),!!e[t]&&(e[t]=Array.isArray(e[t])?e[t]:[e[t]],n.sets=e[t].map(a),n.sets.forEach(function(e){n.datasets[e.name]=e}),n)}function a(e,t){if(e)return{id:t,name:e.name,rows:e.rowSet.map(function(e,t,n){var a,i={};for(a in e){var r=e[a],s=t[a];i[r]=s}return i.id=n,i.$hash=n+Math.random().toString(36).substring(2),i}.bind("",e.headers))}}return{get:function(e,t,a,n,i){var r=l.defer(),s=window.statsSource||"";return o({url:s+"/stats/"+e,method:"GET",params:t,cache:!0!==n,headers:{"x-nba-stats-origin":"stats","x-nba-stats-token":"true"}}).then(function(e){var t=e.data,n=a(i?t:c(t));n?r.resolve(n):r.reject("No Result Sets Returned")}).catch(function(e){r.reject(e)}),r.promise},parse:c}}]).service("AlltimeLeadersGridService",["HanaService",function(t){return{endpoint:"alltimeleadersgrids",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("AssistLeadersService",["HanaService",function(t){return{endpoint:"assistleaders",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("AssistTrackerService",["HanaService",function(t){return{endpoint:"assisttracker",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.AssistTracker.rows[0]}}}]).service("AssistTrackerService",["HanaService",function(t){return{endpoint:"assisttracker",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.AssistTracker.rows[0]}}}]).service("BoxscoreAdvancedService",["HanaService",function(t){return{endpoint:"boxscoreadvancedv2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets,n={};return t.TeamStats.rows.forEach(function(e){n[e.TEAM_ID]={id:e.TEAM_ID,datafooter:e,datatable:[],title:e.TEAM_CITY+" "+e.TEAM_NAME}}),t.PlayerStats.rows.forEach(function(e){e.SECONDS=function(e){if(null==e)return null;var t=e.toString().split(":"),n=+t[0]||0,a=+t[1]||0;return 60*n+a}(e.MIN),n[e.TEAM_ID]&&n[e.TEAM_ID].datatable.push(e)}),n}}}]).service("BoxscoreDefenseService",["HanaService",function(t){return{endpoint:"boxscoredefensive",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("BoxscoreFanduelStatsService",["HanaService",function(t){return{endpoint:"infographicfanduelplayer",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.sets}}}]).service("BoxscoreFourFactorsService",["HanaService",function(t){return{endpoint:"boxscorefourfactorsv2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets,n={};return t.sqlTeamsFourFactors.rows.forEach(function(e){n[e.TEAM_ID]={id:e.TEAM_ID,datafooter:e,datatable:[],title:e.TEAM_CITY+" "+e.TEAM_NAME}}),t.sqlPlayersFourFactors.rows.forEach(function(e){e.SECONDS=function(e){if(null==e)return null;var t=e.toString().split(":"),n=+t[0]||0,a=+t[1]||0;return 60*n+a}(e.MIN),n[e.TEAM_ID]&&n[e.TEAM_ID].datatable.push(e)}),n}}}]).service("BoxscoreHustleService",["HanaService",function(t){return{endpoint:"hustlestatsboxscore",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets,n={};return t.TeamStats.rows.forEach(function(e){n[e.TEAM_ID]={id:e.TEAM_ID,datafooter:e,datatable:[],title:e.TEAM_CITY+" "+e.TEAM_NAME}}),t.PlayerStats.rows.forEach(function(e){e.SECONDS=function(e){if(null==e)return null;var t=e.toString().split(":"),n=+t[0]||0,a=+t[1]||0;return 60*n+a}(e.MINUTES),n[e.TEAM_ID]&&n[e.TEAM_ID].datatable.push(e)}),n}}}]).service("BoxscoreMatchupService",["HanaService",function(t){return{endpoint:"boxscorematchups",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("BoxscoreMiscService",["HanaService",function(t){return{endpoint:"boxscoremiscv2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets,n={};return t.sqlTeamsMisc.rows.forEach(function(e){n[e.TEAM_ID]={id:e.TEAM_ID,datafooter:e,datatable:[],title:e.TEAM_CITY+" "+e.TEAM_NAME}}),t.sqlPlayersMisc.rows.forEach(function(e){e.SECONDS=function(e){if(null==e)return null;var t=e.toString().split(":");return 60*(+t[0]||0)+(+t[1]||0)}(e.MIN),n[e.TEAM_ID]&&n[e.TEAM_ID].datatable.push(e)}),n}}}]).service("BoxscorePlayByPlayService",["HanaService",function(t){return{endpoint:"playbyplayv2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.sets[0].rows}}}]).service("BoxscorePlayerTrackingService",["HanaService",function(t){return{endpoint:"boxscoreplayertrackv2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets,n={};return t.TeamStats.rows.forEach(function(e){n[e.TEAM_ID]={id:e.TEAM_ID,datafooter:e,datatable:[],title:e.TEAM_CITY+" "+e.TEAM_NAME}}),t.PlayerStats.rows.forEach(function(e){e.SECONDS=function(e){if(null==e)return null;var t=e.toString().split(":"),n=+t[0]||0,a=+t[1]||0;return 60*n+a}(e.MIN),n[e.TEAM_ID]&&n[e.TEAM_ID].datatable.push(e)}),n}}}]).service("BoxscorePlayoffSeriesService",["HanaService",function(t){return{endpoint:"commonplayoffseries",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("BoxscoreScoringService",["HanaService",function(t){return{endpoint:"boxscorescoringv2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets,n={};return t.sqlTeamsScoring.rows.forEach(function(e){n[e.TEAM_ID]={id:e.TEAM_ID,datafooter:e,datatable:[],title:e.TEAM_CITY+" "+e.TEAM_NAME}}),t.sqlPlayersScoring.rows.forEach(function(e){e.SECONDS=function(e){if(null==e)return null;var t=e.toString().split(":"),n=+t[0]||0,a=+t[1]||0;return 60*n+a}(e.MIN),n[e.TEAM_ID]&&n[e.TEAM_ID].datatable.push(e)}),n}}}]).service("BoxscoreSeriesService",["HanaService",function(t){return{endpoint:"commonplayoffseries",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("BoxscoreSummaryService",["$filter","HanaService",function(i,t){return{endpoint:"boxscoresummaryv2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.sets,n={},a={};return n.summary=t[0].rows[0],n.gameInfo=t[4].rows[0],n.officials=t[2].rows,n.seasonSeries=t[7].rows[0],n.lastMeeting=t[6].rows[0],n.teams=a,n.av={hasVideo:1===t[8].rows[0].VIDEO_AVAILABLE_FLAG,hasXYZ:1<=t[8].rows[0].PT_XYZ_AVAILABLE,hasTracking:1<=t[8].rows[0].PT_AVAILABLE,hasAdvancedStats:1===t[8].rows[0].WH_STATUS,hasHustle:1===t[8].rows[0].HUSTLE_STATUS,hasWarehouse:1===t[8].rows[0].WH_STATUS},a.vtm={id:n.summary.VISITOR_TEAM_ID,linescore:i("filter")(t[5].rows,{TEAM_ID:n.summary.VISITOR_TEAM_ID})[0],otherStats:i("filter")(t[1].rows,{TEAM_ID:n.summary.VISITOR_TEAM_ID})[0],inactive:i("filter")(t[3].rows,{TEAM_ID:n.summary.VISITOR_TEAM_ID})},a.htm={id:n.summary.HOME_TEAM_ID,linescore:i("filter")(t[5].rows,{TEAM_ID:n.summary.HOME_TEAM_ID})[0],otherStats:i("filter")(t[1].rows,{TEAM_ID:n.summary.HOME_TEAM_ID})[0],inactive:i("filter")(t[3].rows,{TEAM_ID:n.summary.HOME_TEAM_ID})},n}}}]).service("BoxscoreTraditionalService",["HanaService",function(t){return{endpoint:"boxscoretraditionalv2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets,n={};return t.TeamStats.rows.forEach(function(e){n[e.TEAM_ID]={id:e.TEAM_ID,datafooter:e,datatable:[],title:e.TEAM_CITY+" "+e.TEAM_NAME}}),t.PlayerStats.rows.forEach(function(e){e.SECONDS=function(e){if(null==e)return null;var t=e.toString().split(":"),n=+t[0]||0,a=+t[1]||0;return 60*n+a}(e.MIN),n[e.TEAM_ID]&&n[e.TEAM_ID].datatable.push(e)}),n}}}]).service("BoxscoreUsageService",["HanaService",function(t){return{endpoint:"boxscoreusagev2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets,n={};return t.sqlTeamsUsage.rows.forEach(function(e){n[e.TEAM_ID]={id:e.TEAM_ID,datafooter:e,datatable:[],title:e.TEAM_CITY+" "+e.TEAM_NAME}}),t.sqlPlayersUsage.rows.forEach(function(e){e.SECONDS=function(e){if(null==e)return null;var t=e.toString().split(":"),n=+t[0]||0,a=+t[1]||0;return 60*n+a}(e.MIN),n[e.TEAM_ID]&&n[e.TEAM_ID].datatable.push(e)}),n}}}]).service("BoxscoreWinProbabilityService",["HanaService",function(t){return{endpoint:"winprobabilitypbp",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return{boxscore:(e.datasets.Table1||e.datasets.GameInfo).rows[0],events:e.datasets.WinProbPBP.rows}}}}]).service("CumeStatsPlayerGamesService",["HanaService",function(t){return{endpoint:"cumestatsplayergames",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("CumeStatsPlayerListService",["$q","HanaService",function(e,t){return{endpoint:"cumestatsplayerlist",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("CumeStatsPlayerService",["HanaService",function(t){return{endpoint:"cumestatsplayer",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("CumeStatsSeasonListService",["$q","HanaService",function(e,t){return{endpoint:"cumestatsseasonlist",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("CumeStatsTeamGamesService",["HanaService",function(t){return{endpoint:"cumestatsteamgames",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("CumeStatsTeamListService",["$q","HanaService",function(e,t){return{endpoint:"cumestatsteamlist",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("CumeStatsTeamService",["HanaService",function(t){return{endpoint:"cumestatsteam",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("DraftCombineAgilityService",["HanaService",function(n){return{endpoint:"draftcombinedrillresults",get:function(e,t){return t=t||{},n.get(this.endpoint,e,this.transform,t.dontCache,t.dontParse)},transform:function(e){return e.sets[0]}}}]).service("DraftCombineAllService",["$q","DraftCombineAgilityService","DraftCombineAnthroService","DraftCombineNonStationaryService","DraftCombineSpotUpService",function(n,i,r,s,o){return{get:function(e,t){t=t||{};var a=n.defer();return n.all([i.get(e,t),r.get(e,t),s.get(e,t),o.get(e,t)]).then(function(e){var t,n=(t={},e.forEach(function(e){e.rows&&e.rows.length&&e.rows.forEach(function(e){t[e.TEMP_PLAYER_ID]?angular.extend(t[e.TEMP_PLAYER_ID],e):t[e.TEMP_PLAYER_ID]=e})}),Object.keys(t).map(function(e){return t[e]}));a.resolve(n)}),a.promise}}}]).service("DraftCombineAnthroService",["HanaService",function(n){return{endpoint:"draftcombineplayeranthro",get:function(e,t){return t=t||{},n.get(this.endpoint,e,this.transform,t.dontCache,t.dontParse)},transform:function(e){return e.sets[0]}}}]).service("DraftCombineNonStationaryService",["HanaService",function(n){return{endpoint:"draftcombinenonstationaryshooting",get:function(e,t){return t=t||{},n.get(this.endpoint,e,this.transform,t.dontCache,t.dontParse)},transform:function(e){return e.sets[0]}}}]).service("DraftCombineSpotUpService",["HanaService",function(n){return{endpoint:"draftcombinespotshooting",get:function(e,t){return t=t||{},n.get(this.endpoint,e,this.transform,t.dontCache,t.dontParse)},transform:function(e){return e.sets[0]}}}]).service("DraftHistoryService",["HanaService",function(t){return{endpoint:"drafthistory",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.sets[0]}}}]).service("DraftboardService",["HanaService",function(n){return{endpoint:"draftboard",get:function(e,t){return t=t||{},n.get(this.endpoint,e,this.transform,t.dontCache)},transform:function(e){return e.datasets.DraftBoard}}}]).service("FantasyCompareService",["HanaService",function(t){return{endpoint:"playercompare",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("FantasyWidgetService",["HanaService",function(t){return{endpoint:"fantasywidget",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("FranchiseHistoryService",["HanaService",function(t){return{endpoint:"franchisehistory",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets,n={active:{title:"Active Franchises",rows:t.FranchiseHistory.rows},defunct:{title:"Inactive Franchises",rows:t.DefunctTeams.rows}},a="";return n.active.rows.forEach(function(e,t){e.TEAM_ID===a?e.isActive=!1:(e.isActive=!0,a=e.TEAM_ID)}),n}}}]).service("FranchiseLeadersRankService",["$filter","HanaService",function(e,t){return{endpoint:"franchiseleaderswrank",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.FranchiseLeaderswRank}}}]).service("GameRotationService",["HanaService",function(t){return{endpoint:"gamerotation",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("HomepageLeadersService",["HanaService",function(t){return{endpoint:"homepagev2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.resultSets}}}]).service("LeagueDefenseService",["HanaService",function(t){return{endpoint:"defensehub",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.sets}}}]).service("LeagueGamelogsService",["$filter","HanaService",function(n,t){return{endpoint:"leaguegamelog",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets.LeagueGameLog;return t.rows.forEach(function(e){e.DATE=e.GAME_DATE,e.gdate=n("date")(e.GAME_DATE,"MM/dd/yyyy"),e.udate=new Date(e.gdate)}),t}}}]).service("LeagueLeadersService",["HanaService",function(t){return{endpoint:"leagueLeaders",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("LeagueLineupVizService",["HanaService",function(t){return{endpoint:"leaguelineupviz",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("LeagueLineupsService",["HanaService",function(t){return{endpoint:"leaguedashlineups",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.sets}}}]).service("LeagueMatchupsService",["HanaService",function(t){return{endpoint:"leagueseasonmatchups",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.SeasonMatchups}}}]).service("LeaguePlayerBioService",["HanaService",function(t){return{endpoint:"leaguedashplayerbiostats",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets.LeagueDashPlayerBioStats;return t.rows.forEach(function(e){e.DRAFT_NUMBER_PADDED="Undrafted"===e.DRAFT_NUMBER?9999:parseInt(e.DRAFT_NUMBER,10)}),t}}}]).service("LeaguePlayerClutchService",["HanaService",function(t){return{endpoint:"leaguedashplayerclutch",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.sets}}}]).service("LeaguePlayerEstimatedMetricsService",["HanaService",function(t){return{endpoint:"playerestimatedmetrics",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.PlayerEstimatedMetrics}}}]).service("LeaguePlayerGeneralService",["HanaService",function(t){return{endpoint:"leaguedashplayerstats",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.LeagueDashPlayerStats}}}]).service("LeaguePlayerHustleLeadersService",["HanaService",function(t){return{endpoint:"leaguehustlestatsplayerleaders",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("LeaguePlayerHustleService",["HanaService",function(t){return{endpoint:"leaguehustlestatsplayer",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.HustleStatsPlayer}}}]).service("LeaguePlayerOnCourtService",["HanaService",function(t){return{endpoint:"leagueplayerondetails",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.PlayersOnCourtLeaguePlayerDetails}}}]).service("LeaguePlayerShootingService",["HanaService",function(t){return{endpoint:"leaguedashplayershotlocations",get:function(e){return t.get(this.endpoint,e,this.transform,!0,!0)},transform:function(e){var t,n=e.resultSets,a=n.headers[0],i=a.columnsToSkip,r=a.columnNames,s=n.rowSet,o=[];for(t in s){var l,c=s[t],u={PLAYER_ID:c[0],PLAYER_NAME:c[1],TEAM_ID:c[2],TEAM_ABBREVIATION:c[3],AGE:c[4]};for(l in r){var h=r[l],d=i+3*l;u[h+" FGM"]=c[d+0],u[h+" FGA"]=c[d+1],u[h+" FG PCT"]=c[d+2]}var f="Corner 3 FGM",p="Corner 3 FGA",m="Corner 3 FG PCT";u[f]=u["Left Corner 3 FGM"]+u["Right Corner 3 FGM"],u[p]=u["Left Corner 3 FGA"]+u["Right Corner 3 FGA"],u[m]=u[f]/u[p],u[m]=isNaN(u[m])||u[m]===Number.POSITIVE_INFINITY?null:u[m],o.push(u)}return[{name:"shots",datatable:o}]}}}]).service("LeaguePlayerTrackingDefenseService",["HanaService",function(t){return{endpoint:"leaguedashptdefend",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets.LeagueDashPTDefend;return t.rows.forEach(function(e){e.FREQ_WHOLE_NUM=100*e.FREQ}),t}}}]).service("LeaguePlayerTrackingShotsService",["HanaService",function(t){return{endpoint:"leaguedashplayerptshot",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.LeagueDashPTShots}}}]).service("LeagueTeamClutchService",["HanaService",function(t){return{endpoint:"leaguedashteamclutch",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.LeagueDashTeamClutch}}}]).service("LeagueTeamEstimatedMetricsService",["HanaService",function(t){return{endpoint:"teamestimatedmetrics",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.TeamEstimatedMetrics}}}]).service("LeagueTeamGeneralService",["HanaService",function(t){return{endpoint:"leaguedashteamstats",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.LeagueDashTeamStats}}}]).service("LeagueTeamHustleLeadersService",["HanaService",function(t){return{endpoint:"leaguehustlestatsteamleaders",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("LeagueTeamHustleService",["HanaService",function(t){return{endpoint:"leaguehustlestatsteam",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.HustleStatsTeam}}}]).service("LeagueTeamShootingService",["HanaService",function(t){return{endpoint:"leaguedashteamshotlocations",get:function(e){return t.get(this.endpoint,e,this.transform,!0,!0)},transform:function(e){var t,n=e.resultSets,a=n.headers[0],i=a.columnsToSkip,r=a.columnNames,s=n.rowSet,o=[];for(t in s){var l,c=s[t],u={TEAM_ID:c[0],TEAM_NAME:c[1]};for(l in r){var h=r[l],d=i+3*l;u[h+" FGM"]=c[d+0],u[h+" FGA"]=c[d+1],u[h+" FG PCT"]=c[d+2]}u["Corner 3 FGM"]=u["Left Corner 3 FGM"]+u["Right Corner 3 FGM"],u["Corner 3 FGA"]=u["Left Corner 3 FGA"]+u["Right Corner 3 FGA"],u["Corner 3 FG PCT"]=u["Corner 3 FGM"]/u["Corner 3 FGA"],o.push(u)}return[{name:"shots",datatable:o}]}}}]).service("LeagueTeamTrackingDefensiveService",["$filter","HanaService",function(n,t){return{endpoint:"leaguedashptteamdefend",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets.LeagueDashPtTeamDefend;return t.rows.forEach(function(e){for(var t in e)e[t+"_WHOLE_NUM"]=parseFloat(n("percent")(e[t],!1))}),t}}}]).service("LeagueTeamTrackingOppShotsService",["HanaService",function(t){return{endpoint:"leaguedashoppptshot",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.LeagueDashPTShots}}}]).service("LeagueTeamTrackingShotsService",["HanaService",function(t){return{endpoint:"leaguedashteamptshot",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.LeagueDashPTShots}}}]).service("LeagueWideShotchartService",["$filter","HanaService",function(e,t){return{endpoint:"shotchartleaguewide",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("MatchupRollups",["HanaService",function(t){return{endpoint:"matchupsrollup",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("OnOffCompareService",["HanaService",function(t){return{endpoint:"playervsplayer",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerAwardsService",["HanaService",function(t){return{endpoint:"playerawards",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerCareerByCollegeRollupService",["HanaService",function(t){return{endpoint:"playercareerbycollegerollup",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerCareerByCollegeService",["HanaService",function(t){return{endpoint:"playercareerbycollege",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerCareerService",["HanaService",function(t){return{endpoint:"playercareerstats",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets;return t.SeasonTotalsRegularSeason.rows.forEach(function(e){e.isTrade=0===e.TEAM_ID?1:0}),[{name:"Regular Season",rows:t.SeasonTotalsRegularSeason.rows,datafooter:t.CareerTotalsRegularSeason.rows,isSchool:!1,hasData:0<t.SeasonTotalsRegularSeason.rows.length},{name:"Playoffs",rows:t.SeasonTotalsPostSeason.rows,datafooter:t.CareerTotalsPostSeason.rows,isSchool:!1,hasData:0<t.SeasonTotalsPostSeason.rows.length},{name:"All Star",rows:t.SeasonTotalsAllStarSeason.rows,datafooter:t.CareerTotalsAllStarSeason.rows,isSchool:!1,hasData:0<t.SeasonTotalsAllStarSeason.rows.length},{name:"College",rows:t.SeasonTotalsCollegeSeason.rows,datafooter:t.CareerTotalsCollegeSeason.rows,isSchool:!0,hasData:0<t.SeasonTotalsCollegeSeason.rows.length},{name:"League Rankings",datatable:t.SeasonRankingsRegularSeason.rows}]}}}]).service("PlayerFantasyBarGraphService",["HanaService",function(t){return{endpoint:"playerfantasyprofilebargraph",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerFantasySplitsService",["HanaService",function(t){return{endpoint:"playerfantasyprofile",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerGamelogService",["HanaService",function(t){return{endpoint:"playergamelog",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerGamelogSplitsService",["$filter","HanaService",function(n,t){return{endpoint:"playergamelogs",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets.PlayerGameLogs;return t.rows.forEach(function(e){e.DATE=e.GAME_DATE,e.gdate=n("date")(e.GAME_DATE,"MM/dd/yyyy"),e.udate=new Date(e.gdate)}),t}}}]).service("PlayerHighsService",["HanaService",function(t){return{endpoint:"playerprofilev2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerListService",["HanaService",function(t){function n(e){var t=e.datasets.CommonAllPlayers;return t.rows.forEach(function(e){var t=e.DISPLAY_LAST_COMMA_FIRST.split(",");e.FIRST_NAME=t[1],e.LAST_NAME=t[0]}),t}var a="commonallplayers";return{endpoint:a,get:function(e){return t.get(a,e,n)},transform:n}}]).service("PlayerShootingSplitstService",["HanaService",function(t){return{endpoint:"playerdashboardbyshootingsplits",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.sets}}}]).service("PlayerSplitsService",["HanaService",function(t){var e=[{text:"General Splits",val:"general",endpoint:"playerdashboardbygeneralsplits"},{text:"Opponent Splits",val:"opp",endpoint:"playerdashboardbyopponent"},{text:"Last N Games Splits",val:"lastn",endpoint:"playerdashboardbylastngames"},{text:"In Game Splits",val:"ingame",endpoint:"playerdashboardbygamesplits"},{text:"Clutch Splits",val:"clutch",endpoint:"playerdashboardbyclutch"},{text:"Team Performance Splits",val:"teamperf",endpoint:"playerdashboardbyteamperformance"},{text:"Year Over Year Splits",val:"yoy",endpoint:"playerdashboardbyyearoveryear"}];return{endpoints:e,endpoint:e[0].endpoint,get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.sets}}}]).service("PlayerSummaryService",["HanaService",function(t){return{endpoint:"commonplayerinfo",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=(e.sets,{headlineStats:e.sets[1].rows[0],playerInfo:e.sets[0].rows[0],seasons:e.sets[2].rows});t.playerInfo.POS=t.playerInfo.POSITION.split("-").map(function(e){return e.charAt(0)}).join("-"),t.playerInfo.TO_YEAR=+t.playerInfo.TO_YEAR,t.playerInfo.FROM_YEAR=+t.playerInfo.FROM_YEAR;var n=new Date(t.playerInfo.BIRTHDATE),a=new Date,i=a.getTime()-n.getTime(),r=new Date(i),s=t.playerInfo.BIRTHDATE.replace(/^\d\d\d\d/,(new Date).getFullYear()),o=new Date(s);a<o&&o.setFullYear((new Date).getFullYear()-1);var l=Math.floor(Math.abs(o-a)/864e5);return t.playerInfo.AGE=Math.abs(r.getUTCFullYear()-1970),t.playerInfo.AGE_DAYS=("000"+l).substr(-3),t}}}]).service("PlayerTrackingDashDefenseService",["HanaService",function(t){return{endpoint:"playerdashptshotdefend",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerTrackingDashPassesService",["HanaService",function(t){return{endpoint:"playerdashptpass",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return[{name:"Passes Made",datatable:e.datasets.PassesMade.rows},{name:"Passes Received",datatable:e.datasets.PassesReceived.rows}]}}}]).service("PlayerTrackingDashReboundsService",["HanaService",function(t){return{endpoint:"playerdashptreb",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerTrackingDashShotsService",["HanaService",function(t){return{endpoint:"playerdashptshots",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerTrackingReboundLogService",["HanaService",function(t){return{endpoint:"playerdashptreboundlogs",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerTrackingShotLogService",["HanaService",function(t){return{endpoint:"playerdashptshotlog",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayerUpcomingGamesService",["HanaService",function(t){return{endpoint:"playernextngames",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("PlayoffPictureService",["$filter","$q","HanaService",function(e,t,n){return{endpoint:"playoffpicture",get:function(e){return n.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("ProjectionsService",["HanaService",function(t){return{endpoint:"dleaguepredictor",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.LeaguePredictions}}}]).service("ScoresService",["$filter","$q","HanaService",function(g,e,t){return{endpoint:"scoreboardV2",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t,n=e.sets,a=["","pre","live","post"],i=n[0].rows,r=n[6].rows,s=n[3].rows,o=n[2].rows,l=n[1].rows,c=n[7].rows,u=n[8].rows,h=[n[4],n[5]];for(t in i){var d=i[t],f=d.GAME_ID,p=d.HOME_TEAM_ID,m=d.VISITOR_TEAM_ID;d.teamLeaders={},d.available=g("filter")(r,{GAME_ID:f})[0],d.lastMeeting=g("filter")(s,{GAME_ID:f})[0],d.series=g("filter")(o,{GAME_ID:f})[0],d.seasonid=g("seasonyear")(d.SEASON),d.ticketlinks=g("filter")(u,{GAME_ID:f})[0],d.linescores={htm:g("filter")(l,{TEAM_ID:p})[0],vtm:g("filter")(l,{TEAM_ID:m})[0]},d.lineScoresArray=[d.linescores.vtm,d.linescores.htm],d.teamLeaders={htm:g("filter")(c,{TEAM_ID:p})[0],vtm:g("filter")(c,{TEAM_ID:m})[0]},d.gamestate=a[d.GAME_STATUS_ID],d.linescores.htm.isWinner=d.linescores.htm.PTS>d.linescores.vtm.PTS,d.linescores.vtm.isWinner=!d.linescores.htm.isWinner,d.linescores.htm.TEAM_ABBREVIATION=d.linescores.htm.TEAM_ABBREVIATION.trim(),d.linescores.vtm.TEAM_ABBREVIATION=d.linescores.vtm.TEAM_ABBREVIATION.trim(),d.broadcasterAbbr=(d.NATL_TV_BROADCASTER_ABBREVIATION||"lp").toLowerCase().replace(" ","")}return{games:i,standings:h}}}}]).service("ShotchartLeagueAveragesService",["HanaService",function(t){return{endpoint:"shotchartleaguewide",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.League_Wide}}}]).service("ShotchartService",["$filter","HanaService",function(e,t){function r(e,t,n){for(var a in e[n]){var i=e[n][a],r=t[n][a],s="FG_PCT";i.leagueFG_PCT=r[s];var o=(i[s]-r[s])/r[s]*100;(i.calcPctDiff=o)<-10?(i.traditionalPerf=1,i.extendedPerf=1):o<-5?(i.traditionalPerf=3,i.extendedPerf=2):10<o?(i.traditionalPerf=5,i.extendedPerf=5):5<o?(i.traditionalPerf=3,i.extendedPerf=4):(i.traditionalPerf=3,i.extendedPerf=3),i.zPerf=o<-9?"q0":o<-3?"q1":3<o?"q3":9<o?"q4":"q2"}}function s(e){var t,n={basic:{},advanced:{}},a="SHOT_ATTEMPTED_FLAG",i="SHOT_MADE_FLAG";for(t in e){var r=e[t],s=r.SHOT_ZONE_BASIC,o=r.SHOT_ZONE_AREA+" | "+r.SHOT_ZONE_RANGE;n.basic[s]||(n.basic[s]={},n.basic[s].shots=[],n.basic[s].FGM=0,n.basic[s].FGA=0),n.advanced[o]||(n.advanced[o]={},n.advanced[o].shots=[],n.advanced[o].FGM=0,n.advanced[o].FGA=0),n.basic[s].shots.push(r),n.advanced[o].shots.push(r),r[a]?(n.basic[s].FGA+=r[a],n.basic[s].FGM+=r[i],n.advanced[o].FGA+=r[a],n.advanced[o].FGM+=r[i]):(n.basic[s].FGA+=r.FGA||0,n.basic[s].FGM+=r.FGM||0,n.advanced[o].FGA+=r.FGA||0,n.advanced[o].FGM+=r.FGM||0)}for(t in n.basic)n.basic[t].FG_PCT=n.basic[t].FGM/n.basic[t].FGA;for(t in n.advanced)n.advanced[t].FG_PCT=n.advanced[t].FGM/n.advanced[t].FGA;return n}var n={Shotchart:{name:"Shotchart",endpoint:"shotchartdetail"},Lineup:{name:"Lineup",endpoint:"shotchartlineupdetail"},Impact:{name:"Impact",endpoint:"teamplayersvsplayersshotchart"}};return{endpoints:n,endpoint:n.Shotchart,get:function(e){return t.get(this.endpoint.endpoint,e,this.transform)},transform:function(e){var t="shotchartlineupdetail"===e.resource,n={shots:t?e.datasets.ShotChartLineupDetail.rows:e.datasets.Shot_Chart_Detail.rows,league:t?e.datasets.ShotChartLineupLeagueAverage.rows:e.datasets.LeagueAverages.rows},a=s(n.shots),i=s(n.league);return r(a,i,"advanced"),r(a,i,"basic"),{shots:n.shots,league:n.league,groupedShots:a,groupedLeague:i}},parseShotchartData:r,groupShotsByZone:s}}]).service("SimilarityBoxscoreGLeagueAlum",["HanaService",function(t){return{endpoint:"glalumboxscoresimilarityscore",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.GLeagueAlumBoxScoreSimilarityScores}}}]).service("SimilarityBoxscoreService",["HanaService",function(t){return{endpoint:"boxscoresimilarityscore",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.BoxScoreSimilarityScores}}}]).service("SimilarityPlayerTrackingBucketService",["HanaService",function(t){return{endpoint:"playertrackbucketsimilarityscore",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.PlayerTrackBucketSimilarityScores}}}]).service("SimilarityPlayerTrackingRankService",["HanaService",function(t){return{endpoint:"playertrackranksimilaritycomp",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.PlayerTrackRankSimilarityComp}}}]).service("SimilarityPlayerTrackingService",["HanaService",function(t){return{endpoint:"playertracksimilarityscore",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.PlayerTrackSimilarityScores}}}]).service("SimilarityPlayerTrackingUniquenessService",["HanaService",function(t){return{endpoint:"playertracksimilarityuniqueness",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.PlayerTrackSimilarityUniqueness}}}]).service("SimilaritySynergyBucketService",["HanaService",function(t){return{endpoint:"synergybucketsimilarityscore",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.SynergyBucketSimilarityScores}}}]).service("SimilaritySynergyService",["HanaService",function(t){return{endpoint:"synergysimilarityscore",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.SynergySimilarityScores}}}]).service("StandingsService",["HanaService",function(t){return{endpoint:"leaguestandingsv3",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.Standings}}}]).service("SynergyPlaytypesService",["HanaService",function(t){return{endpoint:"synergyplaytypes",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TeamFranchiseRosterService",["HanaService",function(t){return{endpoint:"franchiseplayers",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.FranchisePlayers}}}]).service("TeamGamelogSplitsService",["$filter","HanaService",function(n,t){return{endpoint:"teamgamelogs",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets.TeamGameLogs;return t.rows.forEach(function(e){e.DATE=e.GAME_DATE,e.gdate=n("date")(e.GAME_DATE,"MM/dd/yyyy"),e.udate=new Date(e.gdate)}),t}}}]).service("TeamGamelogsService",["HanaService",function(t){return{endpoint:"teamgamelog",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.TeamGameLog}}}]).service("TeamLineupsService",["HanaService",function(t){return{endpoint:"teamdashlineups",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TeamOnOffCourtService",["HanaService",function(t){return{endpoint:"teamplayeronoffdetails",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TeamOnOffCourtSummaryService",["HanaService",function(t){return{endpoint:"teamplayeronoffsummary",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){var t=e.datasets,i=["VS_PLAYER_ID","VS_PLAYER_NAME","TEAM_NAME","TEAM_ID","TEAM_ABBREVIATION","$hash"],r=i[0],s=["DEF_RATING","GP","MIN","NET_RATING","OFF_RATING","PLUS_MINUS"],n=t.PlayersOnCourtTeamPlayerOnOffSummary.rows,o=t.PlayersOffCourtTeamPlayerOnOffSummary.rows,a=n.map(function(t){var n={},a=o.find(function(e){return e[r]===t[r]});return i.forEach(function(e){n[e]=t[e]}),s.forEach(function(e){n["ON_"+e]=t[e],n["OFF_"+e]=a?a[e]:null,n["DIFF_"+e]=a?t[e]-a[e]:null}),n});return t.PlayersDiffCourtTeamPlayerOnOffSummary={name:"PlayersDiffCourtTeamPlayerOnOffSummary",id:3,rows:a},t}}}]).service("TeamPlayersService",["HanaService",function(t){return{endpoint:"teamplayerdashboard",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TeamProfileService",["HanaService",function(t){return{endpoint:"teamdetails",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TeamRecordsService",["HanaService",function(t){return{endpoint:"franchiseleaders",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TeamRosterService",["HanaService",function(t){return{endpoint:"commonteamroster",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TeamSeasonsService",["HanaService",function(t){return{endpoint:"teamyearbyyearstats",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TeamShootingSplitsService",["HanaService",function(t){return{endpoint:"teamdashboardbyshootingsplits",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.sets}}}]).service("TeamSplitsService",["HanaService",function(t){var e=[{text:"General Splits",val:"general",endpoint:"teamdashboardbygeneralsplits"},{text:"Opponent Splits",val:"opp",endpoint:"teamdashboardbyopponent"},{text:"Last N Games Splits",val:"lastn",endpoint:"teamdashboardbylastngames"},{text:"In Game Splits",val:"ingame",endpoint:"teamdashboardbygamesplits"},{text:"Clutch Splits",val:"clutch",endpoint:"teamdashboardbyclutch"},{text:"Team Performance Splits",val:"teamperf",endpoint:"teamdashboardbyteamperformance"},{text:"Year Over Year Splits",val:"yoy",endpoint:"teamdashboardbyyearoveryear"}];return{endpoints:e,endpoint:e[0].endpoint,get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.sets}}}]).service("TeamSummaryService",["HanaService",function(t){return{endpoint:"teaminfocommon",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TeamTrackingDashPassesService",["HanaService",function(t){return{endpoint:"teamdashptpass",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TeamTrackingDashReboundsService",["HanaService",function(t){return{endpoint:"teamdashptreb",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TeamTrackingDashShotsService",["HanaService",function(t){return{endpoint:"teamdashptshots",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("TrackingDataService",["$q","HanaService",function(e,t){return{endpoint:"leaguedashptstats",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]).service("VideoEventsService",["HanaService",function(t){var e={Details:{name:"Details",endpoint:"videodetails"},Assets:{name:"Asset",endpoint:"videodetailsasset"},DetailsAsset:{name:"DetailsAsset",endpoint:"videodetailsasset"},EventsAsset:{name:"EventsAsset",endpoint:"videoeventsasset"},LineupAsset:{name:"LineupAsset",endpoint:"videolineupdetailasset"},Events:{name:"Events",endpoint:"videoevents"},Shotzone:{name:"Shotzone",endpoint:"videoshotzone"},ShotzoneContext:{name:"ShotzoneContext",endpoint:"videoshotzonecontext"},Lineup:{name:"Lineup",endpoint:"videolineupdetail"},Impact:{name:"Impact",endpoint:"teamplayersvsplayersvideo"}};return{endpoint:e.Details,endpoints:e,get:function(e){return t.get(this.endpoint.endpoint,e,this.transform,!0,!0)},transform:function(e){return e.resultSets}}}]).service("VideoStatusService",["HanaService",function(t){return{endpoint:"videoStatus",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets.VideoStatus}}}]).service("WithOrWithoutYouService",["HanaService",function(t){return{endpoint:"teamandplayersvsplayers",get:function(e){return t.get(this.endpoint,e,this.transform)},transform:function(e){return e.datasets}}}]);var stats=angular.module("stats",["ngAria","ngRoute","ngCookies","nba-ng-hana-services","rzModule"]);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);function a(){}var i=0;return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.statsSource="https://stats.nba.com",stats.config(["$compileProvider",function(e){e.commentDirectivesEnabled(!1),e.cssClassDirectivesEnabled(!1),e.debugInfoEnabled(window.statsDebugInfoEnabled||!1)}]),stats.config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","http://*.nba.com/**","http://api.bitly.com/**"])}]),stats.run(["$document","ReferrerService",function(e,t){t.country;var i=t.isMobile,n=(t.isDomestic,"https://www.sap.com/corporate/en/company/global-sponsorships.html"),r={mobile:{sap:n,btn:n},desktop:{sap:n,btn:n}};e.find("body").addClass("has-sap-sponser"),e.find(".show-for-sap").on("click","img",function(e){var t=$(this).hasClass("beyondthenumbers"),n=t?"sapbeyondthenumbers":"sapheader",a=r[i?"mobile":"desktop"][t?"btn":"sap"];"undefined"!=typeof _nba&&_nba.analytics.click({focus:n}),window.open(a,"_blank")})}]),stats.run(["$rootScope","$location","$routeParams",function(e,t,n){var r={url:t.url(),absUrl:t.absUrl(),hash:t.hash(),host:t.host(),protocol:t.protocol(),port:t.port(),search:t.search(),path:location.pathname},a=location.pathname.split("/");r.section=a[1]||"homepage",r.subSection=a[2],"player"!==r.section&&"team"!==r.section&&"game"!==r.section||(r.isRoute=!0,r.sectionID=r.url.split("/")[1],r.subSection=r.url.split("/")[2]),e.$on("$routeChangeSuccess",function(e,t){var n={},a=location.hash.split("/"),i=location.pathname.split("/");n.params=t.params,0!==Object.keys(n.params).length&&(n.section=i[1],n.sectionID=a[1],n.subSection=a[2],n.url=r.absUrl,"undefined"!=typeof ga&&ga("send","pageview",n.section,{title:document.title,page:"/"+n.section+"/"+n.sectionID+"/"+n.subSection}))})}]),stats.constant("CMSENV",function(){var e,t=document.location.host;e="stats.nba.com"==t||"www.nba.com"==t?"https://stats-prod.nba.com/":"https://stats-dev.nba.com/";return{prefix:e}}()),stats.constant("QuerytoolSplits",{LeagueID:{name:"LeagueID",label:"League",default:[""],type:"multi",desc:"",options:[{val:"00",text:"NBA"},{val:"10",text:"WNBA"},{val:"20",text:"D-League"}],selected:[]},Season:{name:"Season",label:"Season",default:[""],type:"multi",desc:"",options:function(){for(var e=[{}],t=2019;1983<=t;--t){var n=t.toString()+"-"+(t+1).toString().slice(2);e.push({val:n,text:n})}return e}(),selected:[]},SeasonType:{name:"SeasonType",label:"Season Type",default:[""],type:"multi",desc:"",options:[{val:"Pre Season",text:"Preseason"},{val:"Regular Season",text:"Regular Season"},{val:"Playoffs",text:"Playoffs"},{val:"All-Star",text:"All Star"}],selected:[]},StatCategory:{name:"StatCategory",label:"Stat Category",default:"PTS",type:"select",desc:"",options:[{val:"PTS",text:"PTS"},{val:"REB",text:"REB"},{val:"AST",text:"AST"},{val:"STL",text:"STL"},{val:"BLK",text:"BLK"},{val:"OREB",text:"OREB"},{val:"DREB",text:"DREB"},{val:"DD",text:"DD"},{val:"TD",text:"TD"},{val:"MINUTES",text:"MIN"},{val:"TOV",text:"TOV"},{val:"PF",text:"PF"},{val:"FGM",text:"FGM"},{val:"FGA",text:"FGA"},{val:"FG_PCT",text:"FG%"},{val:"FG3M",text:"3PM"},{val:"FG3A",text:"3PA"},{val:"FG3_PCT",text:"3P%"},{val:"FTM",text:"FTM"},{val:"FTA",text:"FTA"},{val:"FT_PCT",text:"FT%"},{val:"PTSPAINT",text:"PITP"},{val:"PTSFB",text:"FB PTS"},{val:"PTS2NDCHANCE",text:"2ND PTS"},{val:"PTSOFFTOV",text:"PTS OFF TOV"}]},GameScope:{name:"Game Scope",label:"Game Scope",type:"select",description:"",default:"",options:[{val:"",text:"Season"},{val:"Yesterday",text:"Yesterday"},{val:"Last10",text:"Last 10 Games"}]},GameSegment:{name:"GameSegment",label:"By Half",type:"select",description:"The option to view a player or team's stats in either the first half or the second half of a game.",default:"",options:[{val:"",text:"Entire Game"},{val:"First Half",text:"First Half"},{val:"Second Half",text:"Second Half"},{val:"Overtime",text:"Overtime"}]},PaceAdjust:{name:"PaceAdjust",label:"Pace Adjust",default:"N",type:"select",desc:"",options:[{val:"Y",text:"Pace Adjust On"},{val:"N",text:"Pace Adjust Off"}]},Period:{name:"Period",label:"Quarter",default:"0",type:"select",desc:"",options:[{val:"0",text:"All Quarters"},{val:"1",text:"1st Quarter"},{val:"2",text:"2nd Quarter"},{val:"3",text:"3rd Quarter"},{val:"4",text:"4th Quarter"},{val:"5",text:"OT 1"},{val:"6",text:"OT 2"},{val:"7",text:"OT 3"},{val:"8",text:"OT 4"},{val:"9",text:"OT 5"},{val:"10",text:"OT 6"},{val:"11",text:"OT 7"},{val:"12",text:"OT 8"},{val:"13",text:"OT 9"},{val:"14",text:"OT 10"}]},PlusMinus:{name:"Plus_Minus",label:"Plus Minus",default:"N",type:"select",desc:"",options:[{val:"Y",text:"+/- On"},{val:"N",text:"+/- Off"}]},Rank:{name:"Rank",label:"Rank",default:"N",type:"select",desc:"",options:[{val:"Y",text:"Rank On"},{val:"N",text:"Rank Off"}]},RookieYear:{name:"RookieYear",label:"Rookie Year",default:[""],type:"multi",desc:"",options:[{val:"2019",text:"2019-20"},{val:"2018",text:"2018-19"},{val:"2017",text:"2017-18"},{val:"2016",text:"2016-17"},{val:"2015",text:"2015-16"},{val:"2014",text:"2014-15"},{val:"2013",text:"2013-14"},{val:"2012",text:"2012-13"},{val:"2011",text:"2011-12"},{val:"2010",text:"2010-11"},{val:"2009",text:"2009-10"},{val:"2008",text:"2008-09"},{val:"2007",text:"2007-08"}],selected:[]},VsConference:{name:"VsConference",label:"VS Conference",default:"",type:"select",desc:"",options:[{val:"",text:"VS All Conferences"},{val:"East",text:"East"},{val:"West",text:"West"}]},VsDivision:{name:"VsDivision",label:"VS Division",default:[""],type:"multi",desc:"Stats for team or player against a selected division",options:[{val:"Atlantic",text:"Atlantic"},{val:"Central",text:"Central"},{val:"Northwest",text:"Northwest"},{val:"Pacific",text:"Pacific"},{val:"Southeast",text:"Southeast"},{val:"Southwest",text:"Southwest"}],selected:[]},Conference:{name:"Conference",label:"Conference",default:"",type:"select",desc:"",options:[{val:"",text:"All Conferences"},{val:"East",text:"East"},{val:"West",text:"West"}]},Division:{name:"Division",label:"Division",default:[""],type:"multi",desc:"Stats for team or player against a selected division",options:[{val:"Atlantic",text:"Atlantic"},{val:"Central",text:"Central"},{val:"Northwest",text:"Northwest"},{val:"Pacific",text:"Pacific"},{val:"Southeast",text:"Southeast"},{val:"Southwest",text:"Southwest"}],selected:[]},Outcome:{name:"Outcome",label:"Outcome",default:"",type:"select",desc:"",options:[{val:"",text:"All Outcomes"},{val:"W",text:"Wins"},{val:"L",text:"Losses"}]},Location:{name:"Location",label:"Location",default:"",type:"select",desc:"",options:[{val:"",text:"All Locations"},{val:"H",text:"Home"},{val:"A",text:"Road"}]},SeasonSegment:{name:"SeasonSegment",label:"Season Segment",default:"",type:"select",desc:"",options:[{val:"",text:"Entire Season"},{val:"Pre All-Star",text:"Pre All-Star"},{val:"Post All-Star",text:"Post All-Star"}]},LastNGames:{name:"LastNGames",label:"Last N Games",default:"0",type:"select",desc:"",options:[{val:"0",text:"All Games"},{val:"1",text:"Last Game"},{val:"2",text:"Last 2 Games"},{val:"3",text:"Last 3 Games"},{val:"4",text:"Last 4 Games"},{val:"5",text:"Last 5 Games"},{val:"6",text:"Last 6 Games"},{val:"7",text:"Last 7 Games"},{val:"8",text:"Last 8 Games"},{val:"9",text:"Last 9 Games"},{val:"10",text:"Last 10 Games"},{val:"11",text:"Last 11 Games"},{val:"12",text:"Last 12 Games"},{val:"13",text:"Last 13 Games"},{val:"14",text:"Last 14 Games"},{val:"15",text:"Last 15 Games"}]},VsTeamID:{name:"VsTeamID",label:"VS Team",default:[""],type:"multi",desc:"",options:[{val:"1610612737",text:"Atlanta Hawks"},{val:"1610612738",text:"Boston Celtics"},{val:"1610612751",text:"Brooklyn Nets"},{val:"1610612766",text:"Charlotte Hornets"},{val:"1610612741",text:"Chicago Bulls"},{val:"1610612739",text:"Cleveland Cavaliers"},{val:"1610612742",text:"Dallas Mavericks"},{val:"1610612743",text:"Denver Nuggets"},{val:"1610612765",text:"Detroit Pistons"},{val:"1610612744",text:"Golden State Warriors"},{val:"1610612745",text:"Houston Rockets"},{val:"1610612754",text:"Indiana Pacers"},{val:"1610612746",text:"LA Clippers"},{val:"1610612747",text:"Los Angeles Lakers"},{val:"1610612763",text:"Memphis Grizzlies"},{val:"1610612748",text:"Miami Heat"},{val:"1610612749",text:"Milwaukee Bucks"},{val:"1610612750",text:"Minnesota Timberwolves"},{val:"1610612740",text:"New Orleans Pelicans"},{val:"1610612752",text:"New York Knicks"},{val:"1610612760",text:"Oklahoma City Thunder"},{val:"1610612753",text:"Orlando Magic"},{val:"1610612755",text:"Philadelphia 76ers"},{val:"1610612756",text:"Phoenix Suns"},{val:"1610612757",text:"Portland Trail Blazers"},{val:"1610612758",text:"Sacramento Kings"},{val:"1610612759",text:"San Antonio Spurs"},{val:"1610612761",text:"Toronto Raptors"},{val:"1610612762",text:"Utah Jazz"},{val:"1610612764",text:"Washington Wizards"}]},TeamID:{name:"TeamID",label:"Team",default:[""],type:"multi",desc:"",options:[{val:"1610612737",text:"Atlanta Hawks"},{val:"1610612738",text:"Boston Celtics"},{val:"1610612751",text:"Brooklyn Nets"},{val:"1610612766",text:"Charlotte Hornets"},{val:"1610612741",text:"Chicago Bulls"},{val:"1610612739",text:"Cleveland Cavaliers"},{val:"1610612742",text:"Dallas Mavericks"},{val:"1610612743",text:"Denver Nuggets"},{val:"1610612765",text:"Detroit Pistons"},{val:"1610612744",text:"Golden State Warriors"},{val:"1610612745",text:"Houston Rockets"},{val:"1610612754",text:"Indiana Pacers"},{val:"1610612746",text:"LA Clippers"},{val:"1610612747",text:"Los Angeles Lakers"},{val:"1610612763",text:"Memphis Grizzlies"},{val:"1610612748",text:"Miami Heat"},{val:"1610612749",text:"Milwaukee Bucks"},{val:"1610612750",text:"Minnesota Timberwolves"},{val:"1610612740",text:"New Orleans Pelicans"},{val:"1610612752",text:"New York Knicks"},{val:"1610612760",text:"Oklahoma City Thunder"},{val:"1610612753",text:"Orlando Magic"},{val:"1610612755",text:"Philadelphia 76ers"},{val:"1610612756",text:"Phoenix Suns"},{val:"1610612757",text:"Portland Trail Blazers"},{val:"1610612758",text:"Sacramento Kings"},{val:"1610612759",text:"San Antonio Spurs"},{val:"1610612761",text:"Toronto Raptors"},{val:"1610612762",text:"Utah Jazz"},{val:"1610612764",text:"Washington Wizards"}],selected:[]},DraftTeamID:{name:"DraftTeamID",label:"Drafted By",default:"0",type:"select",desc:"",options:[{val:"0",text:"Drafted By All Teams"},{val:"1610612737",text:"Atlanta Hawks"},{val:"1610612738",text:"Boston Celtics"},{val:"1610612751",text:"Brooklyn Nets"},{val:"1610612766",text:"Charlotte Hornets"},{val:"1610612741",text:"Chicago Bulls"},{val:"1610612739",text:"Cleveland Cavaliers"},{val:"1610612742",text:"Dallas Mavericks"},{val:"1610612743",text:"Denver Nuggets"},{val:"1610612765",text:"Detroit Pistons"},{val:"1610612744",text:"Golden State Warriors"},{val:"1610612745",text:"Houston Rockets"},{val:"1610612754",text:"Indiana Pacers"},{val:"1610612746",text:"LA Clippers"},{val:"1610612747",text:"Los Angeles Lakers"},{val:"1610612763",text:"Memphis Grizzlies"},{val:"1610612748",text:"Miami Heat"},{val:"1610612749",text:"Milwaukee Bucks"},{val:"1610612750",text:"Minnesota Timberwolves"},{val:"1610612740",text:"New Orleans Pelicans"},{val:"1610612752",text:"New York Knicks"},{val:"1610612760",text:"Oklahoma City Thunder"},{val:"1610612753",text:"Orlando Magic"},{val:"1610612755",text:"Philadelphia 76ers"},{val:"1610612756",text:"Phoenix Suns"},{val:"1610612757",text:"Portland Trail Blazers"},{val:"1610612758",text:"Sacramento Kings"},{val:"1610612759",text:"San Antonio Spurs"},{val:"1610612761",text:"Toronto Raptors"},{val:"1610612762",text:"Utah Jazz"},{val:"1610612764",text:"Washington Wizards"}]},Month:{name:"Month",label:"Month",default:"0",type:"select",desc:"",options:[{val:"0",text:"All Months"},{val:"4",text:"January"},{val:"5",text:"February"},{val:"6",text:"March"},{val:"7",text:"April"},{val:"8",text:"May"},{val:"9",text:"June"},{val:"10",text:"July"},{val:"11",text:"August"},{val:"12",text:"September"},{val:"1",text:"October"},{val:"2",text:"November"},{val:"3",text:"December"}]},PlayerPosition:{name:"PlayerPosition",label:"Position",default:"",type:"select",desc:"Filter out players by position to view either only Guards, Forwards, or Centers.",options:[{val:"",text:"All Positions"},{val:"F",text:"Forward"},{val:"C",text:"Center"},{val:"G",text:"Guard"}]},StarterBench:{name:"StarterBench",label:"Starter Bench",default:"",type:"select",description:"The option to view stats by either the starters or the bench of a team.",options:[{val:"",text:"All Players"},{val:"Starters",text:"Starters"},{val:"Bench",text:"Bench"}]},PlayerExperience:{name:"PlayerExperience",label:"Experience",default:"",type:"select",description:"The option to view either only rookies, or to exclude rookies from the data set.",options:[{val:"",text:"All Experience"},{val:"Rookie",text:"Rookie"},{val:"Sophomore",text:"Sophomore"},{val:"Veteran",text:"Veteran"}]},GroupQuantity:{name:"GroupQuantity",label:"Line Ups",default:"5",type:"select",description:"",options:[{val:"5",text:"5 Man Lineups"},{val:"4",text:"4 Man Lineups"},{val:"3",text:"3 Man Lineups"},{val:"2",text:"2 Man Lineups"}]},ClutchTime:{name:"ClutchTime",label:"Clutch Time",default:"Last 5 Minutes",type:"select",description:"",options:[{val:"Last 5 Minutes",text:"Last 5 Minutes"},{val:"Last 4 Minutes",text:"Last 4 Minutes"},{val:"Last 3 Minutes",text:"Last 3 Minutes"},{val:"Last 2 Minutes",text:"Last 2 Minutes"},{val:"Last 1 Minute",text:"Last 1 Minute"},{val:"Last 30 Seconds",text:"Last 30 Seconds"},{val:"Last 10 Seconds",text:"Last 10 Seconds"}]},AheadBehind:{name:"AheadBehind",label:"Ahead or Behind",default:"Ahead or Behind",type:"select",description:"",options:[{val:"Ahead or Behind",text:"Ahead or Behind"},{val:"Behind or Tied",text:"Behind or Tied"},{val:"Ahead or Tied",text:"Ahead or Tied"}]},PointDiff:{name:"PointDiff",label:"PointDiff",default:"5",type:"select",description:"",options:[{val:"5",text:"5 Point Diff or Less"},{val:"4",text:"4 Point Diff or Less"},{val:"3",text:"3 Point Diff or Less"},{val:"2",text:"2 Point Diff or Less"},{val:"1",text:"1 Point Diff"}]},DistanceRange:{name:"DistanceRange",label:"Distance Range",default:"5ft Range",type:"select",description:"",options:[{val:"5ft Range",text:"5ft Range"},{val:"8ft Range",text:"8ft Range"},{val:"By Zone",text:"By Zone"}]},DateFrom:{name:"DateFrom",label:"Date From",default:"",type:"datepicker",description:"",placeholder:"MM/DD/YYYY",selected:{val:""}},DateTo:{name:"DateTo",label:"Date To",default:"",type:"datepicker",description:"",placeholder:"MM/DD/YYYY",selected:{val:""}},PT:{name:"PT",label:"Players or Teams",default:"player",type:"select",desc:"",options:[{val:"player",text:"Player Stats"},{val:"team",text:"Team Stats"}]},OD:{name:"OD",label:"Offensive or Defensive",default:"offensive",type:"select",desc:"",options:[{val:"offensive",text:"Offensive"},{val:"defensive",text:"Defensive"}]},ShotClockRange:{name:"ShotClockRange",label:"Shot Clock Range",default:"",type:"select",desc:"",options:[{val:"",text:"All Shot Clock Ranges"},{val:"24-22",text:"24-22"},{val:"22-18 Very Early",text:"22-18 Very Early"},{val:"18-15 Early",text:"18-15 Early"},{val:"15-7 Average",text:"15-7 Average"},{val:"7-4 Late",text:"7-4 Late"},{val:"4-0 Very Late",text:"4-0 Very Late"},{val:"ShotClock Off",text:"ShotClock Off"}]},PORound:{name:"PORound",label:"Playoff Round",default:"0",type:"select",desc:"",options:[{val:"0",text:"All Playoff Rounds"},{val:"1",text:"Conference Quarter-Finals"},{val:"2",text:"Conference Semi-Finals"},{val:"3",text:"Conference Finals"},{val:"4",text:"Finals"}]},DraftYear:{name:"DraftYear",label:"Draft Year",default:[""],type:"multi",desc:"",options:function(){for(var e=[{}],t=2019;1947<=t;--t)e.push({val:t+"",text:t+""});return e}(),selected:[]},DraftNumber:{name:"DraftNumber",label:"Draft Number",default:[""],type:"multi",desc:"",options:[{val:"1",text:"1st Pick"},{val:"Lottery Pick",text:"Lottery Pick"},{val:"1,2,3,4,5",text:"Top 5 Pick"},{val:"1,2,3,4,5,6,7,8,9,10",text:"Top 10 Pick"},{val:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15",text:"Top 15 Pick"},{val:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20",text:"Top 20 Pick"},{val:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25",text:"Top 25 Pick"},{val:"11,12,13,14,15,16,17,18,19,20",text:"Picks 11 Thru 20"},{val:"21,22,23,24,25,26,27,28,29,30",text:"Picks 21 Thru 30"},{val:"0",text:"Undrafted"}],selected:[]},DraftRound:{name:"DraftRound",label:"Draft Round",default:[""],type:"multi",desc:"",options:[{val:"1",text:"1st Round"},{val:"2",text:"2nd Round"}],selected:[]},College:{name:"College",label:"College",default:"",type:"select",desc:"",options:function(){var e,t=[{val:"",text:"All Affiliations"},{val:"High School",text:"High School"},{val:"D-League",text:"D-League"},{val:"None",text:"No College"},{val:"",text:"---"}],n=["Acadia (CAN)","Adams State","Adelphi","Air Force","Akron","Alabama","Alabama A&M","Alabama-Birmingham","Alabama-Huntsville","Alabama State","Albany","Albany State (GA)","Alcorn State","Alliance","American","American International","Angelo State","Appalachian State","Arizona","Arizona State","Arkansas","Arkansas-Fort Smith","Arkansas-Little Rock","Arkansas-Pine Bluff","Arkansas State","Army","Assumption","Auburn","Auburn-Montgomery","Augsburg","Augustana (IL)","Augustana (SD)","Augusta State","Aurora","Austin Peay","Averett","Azusa Pacific","Ball State","Baltimore","Barton","Barton Community College","Baylor","Belmont","Belmont Abbey","Beloit","Bemidji State","Benedict","Bethel (TN)","Binghamton","Biola","Blinn","Bloomfield","Bloomsburg","Bluefield","Boise State","Boston College","Boston University","Bowie State","Bowling Green","Bradley","Brevard Community College","Brewton-Parker","Bridgeport","Brigham Young","Brigham Young-Hawaii","Brooklyn","Brown","Bryant","Bucknell","Buffalo","Buffalo State","Butler","Butler Community College","C.W. Post","California","California (PA)","California-Berkeley","California-Davis","California-Irvine","California-Los Angeles","California-Riverside","California-Santa Barbara","Cal State-Bakersfield","Cal State-Dominguez Hills","Cal State-Fullerton","Cal State-Los Angeles","Cal State-Northridge","Cal State-Poly Pomona","Cal State-San Bernardino","Campbell","Campbellsville","Canisius","Case Western","Catholic","Centenary (LA)","Central Arkansas","Central Connecticut State","Central Florida","Central Michigan","Central Missouri","Central Oklahoma","Central State (OH)","Central Washington","Charleston (WV)","Cheyney","Chicago State","Christopher Newport","Cincinnati","City College of New York","Claflin","Clark Atlanta","Clayton State","Clemson","Cleveland State","Colgate","College of Charleston","College of New Jersey","Colorado","Colorado Christian","Colorado State","Colorado State-Pueblo","Columbia","Columbus State","Concordia","Concordia-Irvine","Connecticut","Coppin State","Cornell","Corpus Christi","Creighton","Culver-Stockton","Dakota Wesleyan","Dartmouth","Davidson","Davis & Elkins","Dayton","Delaware","Delaware State","Delta State","Denver","DePaul","DePauw","Detroit Mercy","Dillard","District of Columbia","Drake","Drexel","Duke","Duquesne","East Carolina","East Central","Eastern Illinois","Eastern Kentucky","Eastern Michigan","Eastern New Mexico","Eastern Oklahoma State (Junior College)","Eastern Washington","East Tennessee State","Eckerd","Elizabeth City State","Elon","Evangel","Evansville","Fairfield","Fairleigh Dickinson","Fayetteville State","Ferris State","Findlay","Florida","Florida A&M","Florida Atlantic","Florida Community College","Florida Gulf Coast","Florida International","Florida State","Fordham","Fort Valley State","Franklin","Fresno State","Friends","Furman","Gannon","Gardner-Webb","George Mason","Georgetown","Georgetown College","George Washington","Georgia","Georgia Southern","Georgia State","Georgia Tech","Gonzaga","Grambling","Grand Canyon","Green Bay","Grinnell College","Guilford","Hamline","Hampton","Hardin-Simmons","Hartford","Harvard","Hawaii","High Point","Hillsborough Community College","Hillsdale","Hofstra","Holy Cross","Holy Family","Houston","Houston Baptist","Howard","Humboldt State","Huntington","Idaho","Idaho State","Illinois","Illinois-Chicago","Illinois State","Illinois Wesleyan","Incarnate Word","Indiana","Indianapolis","Indiana Purdue-Fort Wayne","Indiana Purdue-Indianapolis","Indiana State","Indiana Tech","Indian Hills Community College","Iona","Iowa","Iowa State","Jackson State","Jacksonville","Jacksonville State","James Madison","Johnson C. Smith","Kansas","Kansas State","Kennesaw State","Kent State","Kentucky","Kentucky State","Kentucky Wesleyan","Kenyon","King's (NY)","Lafayette","Lamar","La Salle","Lawrence Tech","Lebanon Valley","Lee","Lehigh","Le Moyne","Lewis","Liberty","Lincoln (MO)","Lipscomb","Long Beach State","Long Island-Brooklyn","Longwood","Los Angeles Community College","Louisiana-Lafayette","Louisiana-Monroe","Louisiana State","Louisiana Tech","Louisville","Loyola-Chicago","Loyola-Maryland","Loyola-Marymount","Maine","Manhattan","Marist","Marquette","Marshall","Maryland","Maryland-Eastern Shore","Massachusetts","Master's","McNeese State","Memphis","Mercer","Meridian Community College","Merrimack","Metro State","Miami (FL)","Miami (OH)","Michigan","Michigan State","Middle Tennessee State","Midland","Midwestern State","Miles","Millersville","Minnesota","Minnesota-Duluth","Minnesota State-Mankato","Mississippi","Mississippi Gulf Community College","Mississippi State","Mississippi Valley State","Missouri","Missouri-Kansas City","Missouri State","Missouri Western State","Monmouth","Montana","Montana State","Montevallo","Morehead State","Morehouse","Morgan State","Mountain State","Mount St. Mary's","Mount Union","Mt. San Antonio","Muhlenberg","Murray State","Navy","Nebraska","Nebraska-Kearney","Nebraska-Omaha","Nevada","Nevada-Las Vegas","Nevada-Reno","New Jersey Institute of Technology","New Mexico","New Mexico Highlands","New Mexico State","New Mexico Tech","New Orleans","New York University","Niagara","Nicholls State","Norfolk State","North Carolina","North Carolina A&T","North Carolina-Asheville","North Carolina Central","North Carolina-Charlotte","North Carolina-Greensboro","North Carolina State","North Carolina-Wilmington","North Dakota","North Dakota State","Northeastern","Northeastern State","Northeast Mississippi Community College","Northern Arizona","Northern Colorado","Northern Illinois","Northern Iowa","Northern Kentucky","North Park","North Texas","Northwestern","Northwestern Oklahoma","Northwestern Oklahoma State","Northwestern State","Northwest Florida State","Northwest Nazarene","Northwood","Notre Dame","Oakland","Ohio","Ohio State","Ohio Wesleyan","Oklahoma","Oklahoma Baptist","Oklahoma City","Oklahoma Science and Arts","Oklahoma State","Oklahoma Wesleyan","Old Dominion","Oral Roberts","Oregon","Oregon State","Ouachita Baptist","Pacific","Paine","Penn State","Pennsylvania","Pennsylvania-Kutztown","Pepperdine","Pfeiffer","Phillips","Pikeville","Pittsburgh","Portland","Portland State","Potsdam","Prairie View A&M","Princeton","Providence","Puget Sound","Purdue","Queens (NY)","Quincy","Rhode Island","Rice","Richmond","Rider","Robert Morris (IL)","Rochester (NY)","Rockhurst","Rutgers","Sacramento State","Sacred Heart","Saginaw Valley","Saint Augustine's","Saint Francis (PA)","Saint Joseph's","Saint Louis","Saint Mary's (CA)","Saint Mary's (MN)","Saint Peter's","Saint Rose","Saint Vincent","Salem International","Sam Houston State","San Diego","San Diego State","San Francisco","San Jose State","Santa Clara","Scranton","Seattle","Seton Hall","Seward County Community College","Shaw","Shippensburg","Siena","Slippery Rock","South Alabama","South Carolina","South Carolina-Aiken","South Carolina State","South Carolina Upstate","South Dakota","South Dakota State","Southeastern Illinois","Southeastern Louisiana","Southeastern Oklahoma State","Southeast Missouri State","Southern","Southern California","Southern Illinois","Southern Methodist","Southern Mississippi","Southern Nazarene","Southern Utah","South Florida","Southwest Baptist","Springfield","St. Ambrose","St. Anselm","St. Bonaventure","St. Cloud State","St. Francis Brooklyn","St. John's (NY)","St. Mary's (CA)","St. Mary's (TX)","St. Peter's","St. Thomas (FL)","Stanford","Stephen F. Austin","Stetson","Stony Brook","Syracuse","Tampa","Tarleton State","Temple","Tennessee","Tennessee-Chattanooga","Tennessee-Martin","Tennessee State","Tennessee Tech","Texas","Texas A&M","Texas A&M-Commerce","Texas A&M-Corpus Christi","Texas-Arlington","Texas Christian","Texas-El Paso","Texas-Pan American","Texas-San Antonio","Texas Southern","Texas State","Texas Tech","Texas Wesleyan","Thomas More","Toledo","Towson","Trinity Valley Community College","Troy State","Truman State","Tulane","Tulsa","Tuskegee","UCLA","Utah","Utah State","Utah Valley","Valdosta State","Valparaiso","Vanderbilt","Venezuela","Vermont","Villanova","Virginia","Virginia Commonwealth","Virginia Military Institute","Virginia Tech","Virginia Union","Voorhees","Vorhees","Wake Forest","Walsh","Washington","Washington & Jefferson","Washington State","Wayne State (MI)","Weber State","Western Carolina","Western Illinois","Western Kentucky","Western Michigan","Western Washington","West Florida","West Georgia","Westminster (PA)","West Texas A&M","West Virginia","West Virginia State","West Virginia Tech","West Virginia Wesleyan","Wheaton (IL)","Whitworth","Wichita State","Wilberforce","William & Mary","William Jessup","William Paterson","William Penn","Wingate","Winona State","Winston-Salem State","Winthrop (SC)","Wisconsin","Wisconsin-Eau Claire","Wisconsin-Green Bay","Wisconsin-Milwaukee","Wisconsin-Parkside","Wisconsin-River Falls","Wisconsin-Stevens Point","Wisconsin-Whitewater","Wofford","Wooster","Wright State","Wyoming","Xavier","Xavier (LA)","Yale","Yonsei (KOR)","Youngstown State"];for(e in n)t.push({val:n[e],text:n[e]});return t}()},Country:{name:"Country",label:"Country",default:"",type:"select",desc:"",options:function(){var e,t=[{val:"",text:"All Countries"}],n=["International","Angola","Argentina","Australia","Belize","Boznia & Herzegovina","Brazil","Cameroon","Canada","China","Congo","Croatia","Czech Republic","Democratic Republic of Congo","Dominican Republic","England","Finland","France","Georgia","Germany","Great Britain","Greece","Haiti","Iran","Ireland","Israel","Italy","Jamaica","Latvia","Lithuania","Macedonia","Mali","Mexico","Montenegro","Netherlands","New Zealand","Nigeria","Panama","Poland","Puerto Rico","Russia","Scotland","Senegal","Serbia","Serbia and Montenegro","Slovenia","South Korea","Spain","St. Vincent & Grenadines","Sudan","Sudan (UK)","Sweden","Switzerland","Tanzania","Turkey","U.S. Virgin Islands","Ukraine","Uruguay","USA","USSR","Venezuela","Yugoslavia"];for(e in n)t.push({val:n[e],text:n[e]});return t}()},Height:{name:"Height",label:"Height",default:"",type:"select",desc:"",options:[{val:"",text:"All Heights"},{val:"LT 6-0",text:"< 6-0"},{val:"GT 6-0",text:"> 6-0"},{val:"LT 6-4",text:"< 6-4"},{val:"GT 6-4",text:"> 6-4"},{val:"LT 6-7",text:"< 6-7"},{val:"GT 6-7",text:"> 6-7"},{val:"LT 6-10",text:"< 6-10"},{val:"GT 6-10",text:"> 6-10"},{val:"LT 7-0",text:"< 7-0"},{val:"GT 7-0",text:"> 7-0"}]},DefenseCategory:{name:"DefenseCategory",label:"Defense Category",default:"Overall",type:"select",desc:"",options:[{val:"Overall",text:"Overall"},{val:"3 Pointers",text:"3 Pointers"},{val:"2 Pointers",text:"2 Pointers"},{val:"Less Than 6Ft",text:"Less Than 6Ft"},{val:"Less Than 10Ft",text:"Less Than 10Ft"},{val:"Less Than 10Ft",text:"Less Than 10Ft"},{val:"Greater Than 15Ft",text:"Greater Than 15Ft"}]},ActiveStreaksOnly:{name:"ActiveStreaksOnly",label:"Active Streaks Only",default:"",type:"select",desc:"",options:[{val:"",text:"All Streaks"},{val:"YES",text:"Active Streaks Only"}]},YearsExperience:{name:"YearsExperience",label:"Years of Experience",default:"",type:"select",desc:"",options:[{val:"",text:"Any Experience"},{val:"1",text:"1 Year"},{val:"2",text:"2 Years"},{val:"3",text:"3 Years"},{val:"4",text:"4 Years"},{val:"5",text:"5 Years"},{val:"10",text:"10 Years"}]},MinGames:{name:"MinGames",label:"Minimum Length",default:"",type:"number",desc:"The minimum number of games played",validation:/\d*/,selected:{val:""}},PlayerID:{name:"PlayerID",label:"Player",default:"",type:"async",isLoaded:!1,description:"",placeholder:"Player Name",options:[{val:"",text:"All Players"}],selected:[]}}),stats.constant("SPLITS",{LeagueID:{name:"LeagueID",label:"League",order:550,literal:"",default:"00",desc:"",type:"select",options:[{val:"00",text:"NBA"},{val:"09",text:"NDC",disp:"DRAFT COMBINE"},{val:"10",text:"WNBA"},{val:"12",text:"2KLEAGUE"},{val:"13",text:"SACRAMENTO"},{val:"14",text:"ORLANDO"},{val:"15",text:"VEGAS"},{val:"16",text:"UTAH"},{val:"20",text:"DLEAGUE",disp:"GLEAGUE"},{val:"99",text:"TEST"}]},Season:{name:"Season",label:"Season",order:2e3,default:"2019-20",desc:"",type:"select",options:[{val:"2019-20",text:"2019-20"},{val:"2018-19",text:"2018-19"},{val:"2017-18",text:"2017-18"},{val:"2016-17",text:"2016-17"},{val:"2015-16",text:"2015-16"},{val:"2014-15",text:"2014-15"},{val:"2013-14",text:"2013-14"},{val:"2012-13",text:"2012-13"},{val:"2011-12",text:"2011-12"},{val:"2010-11",text:"2010-11"},{val:"2009-10",text:"2009-10"},{val:"2008-09",text:"2008-09"},{val:"2007-08",text:"2007-08"}]},SeasonType:{name:"SeasonType",label:"Season Type",order:2001,default:"Regular Season",type:"select",desc:"",options:[{val:"Pre Season",text:"Preseason",st:1},{val:"Regular Season",text:"Regular Season",st:2},{val:"Playoffs",text:"Playoffs",st:4},{val:"All Star",text:"All-Star",st:3}]},PerMode:{name:"PerMode",label:"Per Mode",order:470,default:"PerGame",type:"select",desc:"",options:[{val:"Totals",text:"Totals"},{val:"PerGame",text:"Per Game"}]},StatCategory:{name:"StatCategory",label:"Stat Category",order:480,default:"PTS",type:"select",desc:"",options:[{val:"MIN",text:"MIN"},{val:"FGM",text:"FGM"},{val:"FGA",text:"FGA"},{val:"FG_PCT",text:"FG%"},{val:"FG3M",text:"3PM"},{val:"FG3A",text:"3PA"},{val:"FG3_PCT",text:"3P%"},{val:"FTM",text:"FTM"},{val:"FTA",text:"FTA"},{val:"FT_PCT",text:"FT%"},{val:"OREB",text:"OREB"},{val:"DREB",text:"DREB"},{val:"REB",text:"REB"},{val:"AST",text:"AST"},{val:"STL",text:"STL"},{val:"BLK",text:"BLK"},{val:"TOV",text:"TOV"},{val:"EFF",text:"EFF"},{val:"PTS",text:"PTS"},{val:"AST_TOV",text:"AST/TO"},{val:"STL_TOV",text:"STL/TOV"},{val:"PF",text:"PF"}]},GameScope:{name:"Game Scope",label:"Game Scope",type:"select",description:"",default:"",options:[{val:"",text:"Season"},{val:"Yesterday",text:"Yesterday"},{val:"Last10",text:"Last 10 Games"}]},GameSegment:{name:"GameSegment",label:"By Half",order:220,type:"select",description:"The option to view a player or team's stats in either the first half or the second half of a game.",default:"",options:[{val:"",text:"Entire Game"},{val:"First Half",text:"First Half"},{val:"Second Half",text:"Second Half"},{val:"Overtime",text:"Overtime"}]},Period:{name:"Period",label:"Quarter",order:210,default:"0",type:"select",desc:"",options:[{val:"0",text:"All Quarters"},{val:"1",text:"1st Quarter"},{val:"2",text:"2nd Quarter"},{val:"3",text:"3rd Quarter"},{val:"4",text:"4th Quarter"},{val:"5",text:"OT 1"},{val:"6",text:"OT 2"},{val:"7",text:"OT 3"},{val:"8",text:"OT 4"},{val:"9",text:"OT 5"},{val:"10",text:"OT 6"},{val:"11",text:"OT 7"},{val:"12",text:"OT 8"},{val:"13",text:"OT 9"},{val:"14",text:"OT 10"}]},PaceAdjust:{name:"PaceAdjust",label:"Pace Adjust",order:440,default:"N",type:"select",desc:"",options:[{val:"Y",text:"Pace Adjust On"},{val:"N",text:"Pace Adjust Off"}]},PlusMinus:{name:"PlusMinus",label:"Differentials",order:520,default:"N",type:"select",desc:"",options:[{val:"Y",text:"Differentials On"},{val:"N",text:"Differentials Off"}]},Rank:{name:"Rank",label:"Rank",order:530,default:"N",type:"select",desc:"",options:[{val:"Y",text:"Rank On"},{val:"N",text:"Rank Off"}]},Scope:{name:"Scope",label:"Scope",order:350,default:"S",type:"select",desc:"",options:[{val:"S",text:"All Players"},{val:"Rookies",text:"Rookies"}]},VsConference:{name:"VsConference",label:"VS Conference",order:310,default:"",type:"select",desc:"",options:[{val:"",text:"VS All Conferences"},{val:"East",text:"VS East"},{val:"West",text:"VS West"}]},VsDivision:{name:"VsDivision",label:"VS Division",order:320,default:"",type:"select",desc:"Stats for team or player against a selected division",options:[{val:"",text:"VS All Divisions"},{val:"Atlantic",text:"VS Atlantic"},{val:"Central",text:"VS Central"},{val:"Southeast",text:"VS Southeast"},{val:"Northwest",text:"VS Northwest"},{val:"Pacific",text:"VS Pacific"},{val:"Southwest",text:"VS Southwest"}]},Conference:{name:"Conference",label:"Conference",order:280,default:"",type:"select",desc:"",options:[{val:"",text:"All Conferences"},{val:"East",text:"East"},{val:"West",text:"West"}]},ReportType:{name:"ReportType",label:"Report-Type",order:340,default:"Team",type:"select",description:"The option to select player or team",options:[{val:"Team",text:"Team"},{val:"Player",text:"Player"}]},Division:{name:"Division",label:"Division",order:290,default:"",type:"select",desc:"Stats for team or player against a selected division",options:[{val:"",text:"All Divisions"},{val:"Atlantic",text:"Atlantic"},{val:"Central",text:"Central"},{val:"Southeast",text:"Southeast"},{val:"Northwest",text:"Northwest"},{val:"Pacific",text:"Pacific"},{val:"Southwest",text:"Southwest"}]},Outcome:{name:"Outcome",label:"Outcome",order:200,default:"",type:"select",desc:"",options:[{val:"",text:"All Outcomes"},{val:"W",text:"Wins"},{val:"L",text:"Losses"}]},Location:{name:"Location",label:"Location",order:190,default:"",type:"select",desc:"",options:[{val:"",text:"All Locations"},{val:"Home",text:"Home"},{val:"Road",text:"Road"}]},SeasonSegment:{name:"SeasonSegment",label:"Season Segment",order:170,default:"",type:"select",desc:"",options:[{val:"",text:"Entire Season"},{val:"Pre All-Star",text:"Pre All-Star"},{val:"Post All-Star",text:"Post All-Star"}]},LastNGames:{name:"LastNGames",label:"Last N Games",order:180,default:"0",type:"select",desc:"",options:[{val:"0",text:"All Games"},{val:"1",text:"Last Game"},{val:"2",text:"Last 2 Games"},{val:"3",text:"Last 3 Games"},{val:"4",text:"Last 4 Games"},{val:"5",text:"Last 5 Games"},{val:"6",text:"Last 6 Games"},{val:"7",text:"Last 7 Games"},{val:"8",text:"Last 8 Games"},{val:"9",text:"Last 9 Games"},{val:"10",text:"Last 10 Games"},{val:"11",text:"Last 11 Games"},{val:"12",text:"Last 12 Games"},{val:"13",text:"Last 13 Games"},{val:"14",text:"Last 14 Games"},{val:"15",text:"Last 15 Games"}]},VsOpponents:{name:"VsOpponents",label:"Vs Opponents",default:"",type:"select",desc:"",options:[{val:"",text:"All"},{val:"Conference",text:"Conference"},{val:"Divisions",text:"Divisions"},{val:"Team",text:"Team"}]},OpponentTeamID:{name:"OpponentTeamID",label:"VS Opponent",order:330,default:"0",type:"select",desc:"",options:[{val:"0",text:"VS All Teams"},{val:"1610612737",text:"VS Atlanta Hawks"},{val:"1610612738",text:"VS Boston Celtics"},{val:"1610612751",text:"VS Brooklyn Nets"},{val:"1610612766",text:"VS Charlotte Hornets"},{val:"1610612741",text:"VS Chicago Bulls"},{val:"1610612739",text:"VS Cleveland Cavaliers"},{val:"1610612742",text:"VS Dallas Mavericks"},{val:"1610612743",text:"VS Denver Nuggets"},{val:"1610612765",text:"VS Detroit Pistons"},{val:"1610612744",text:"VS Golden State Warriors"},{val:"1610612745",text:"VS Houston Rockets"},{val:"1610612754",text:"VS Indiana Pacers"},{val:"1610612746",text:"VS LA Clippers"},{val:"1610612747",text:"VS Los Angeles Lakers"},{val:"1610612763",text:"VS Memphis Grizzlies"},{val:"1610612748",text:"VS Miami Heat"},{val:"1610612749",text:"VS Milwaukee Bucks"},{val:"1610612750",text:"VS Minnesota Timberwolves"},{val:"1610612740",text:"VS New Orleans Pelicans"},{val:"1610612752",text:"VS New York Knicks"},{val:"1610612760",text:"VS Oklahoma City Thunder"},{val:"1610612753",text:"VS Orlando Magic"},{val:"1610612755",text:"VS Philadelphia 76ers"},{val:"1610612756",text:"VS Phoenix Suns"},{val:"1610612757",text:"VS Portland Trail Blazers"},{val:"1610612758",text:"VS Sacramento Kings"},{val:"1610612759",text:"VS San Antonio Spurs"},{val:"1610612761",text:"VS Toronto Raptors"},{val:"1610612762",text:"VS Utah Jazz"},{val:"1610612764",text:"VS Washington Wizards"}]},TeamID:{name:"TeamID",label:"Team",order:300,default:"0",type:"select",desc:"",options:[{val:"0",text:"All Teams"},{val:"1610612737",text:"Atlanta Hawks"},{val:"1610612738",text:"Boston Celtics"},{val:"1610612751",text:"Brooklyn Nets"},{val:"1610612766",text:"Charlotte Hornets"},{val:"1610612741",text:"Chicago Bulls"},{val:"1610612739",text:"Cleveland Cavaliers"},{val:"1610612742",text:"Dallas Mavericks"},{val:"1610612743",text:"Denver Nuggets"},{val:"1610612765",text:"Detroit Pistons"},{val:"1610612744",text:"Golden State Warriors"},{val:"1610612745",text:"Houston Rockets"},{val:"1610612754",text:"Indiana Pacers"},{val:"1610612746",text:"LA Clippers"},{val:"1610612747",text:"Los Angeles Lakers"},{val:"1610612763",text:"Memphis Grizzlies"},{val:"1610612748",text:"Miami Heat"},{val:"1610612749",text:"Milwaukee Bucks"},{val:"1610612750",text:"Minnesota Timberwolves"},{val:"1610612740",text:"New Orleans Pelicans"},{val:"1610612752",text:"New York Knicks"},{val:"1610612760",text:"Oklahoma City Thunder"},{val:"1610612753",text:"Orlando Magic"},{val:"1610612755",text:"Philadelphia 76ers"},{val:"1610612756",text:"Phoenix Suns"},{val:"1610612757",text:"Portland Trail Blazers"},{val:"1610612758",text:"Sacramento Kings"},{val:"1610612759",text:"San Antonio Spurs"},{val:"1610612761",text:"Toronto Raptors"},{val:"1610612762",text:"Utah Jazz"},{val:"1610612764",text:"Washington Wizards"}]},Month:{name:"Month",label:"Month",order:140,default:"0",type:"select",desc:"",options:[{val:"0",text:"All Months"},{val:"4",text:"January"},{val:"5",text:"February"},{val:"6",text:"March"},{val:"7",text:"April"},{val:"8",text:"May"},{val:"9",text:"June"},{val:"10",text:"July"},{val:"11",text:"August"},{val:"12",text:"September"},{val:"1",text:"October"},{val:"2",text:"November"},{val:"3",text:"December"}]},PlayerID:{name:"PlayerID",label:"Player",order:305,default:0,type:"select",desc:"",options:function(){var e=(window.stats_ptsd?window.stats_ptsd.data.players:[]).slice(0).map(function(e){return{val:e[0],text:e[1]}});return e.unshift({val:0,text:"All Players"}),e}()},PlayerPosition:{name:"PlayerPosition",label:"Position",order:355,default:"",type:"select",desc:"Filter out players by position to view either only Guards, Forwards, or Centers.",options:[{val:"",text:"All Positions"},{val:"F",text:"Forward"},{val:"C",text:"Center"},{val:"G",text:"Guard"}]},StarterBench:{name:"StarterBench",label:"Starter Bench",default:"",type:"select",description:"The option to view stats by either the starters or the bench of a team.",options:[{val:"",text:"All Players"},{val:"Starters",text:"Starters"},{val:"Bench",text:"Bench"}]},PlayerExperience:{name:"PlayerExperience",label:"Experience",order:340,default:"",type:"select",description:"The option to view either only rookies, or to exclude rookies from the data set.",options:[{val:"",text:"All Experience"},{val:"Rookie",text:"Rookie"},{val:"Sophomore",text:"Sophomore"},{val:"Veteran",text:"Veteran"}]},TwoWay:{name:"TwoWay",label:"Two-Way",order:340,default:"0",type:"select",description:"The option to view only players with Two-Way Contracts",options:[{val:"0",text:"All Players"},{val:"1",text:"Two-Way Contract"}]},GroupQuantity:{name:"GroupQuantity",label:"Lineups",order:130,default:"5",type:"select",description:"",options:[{val:"5",text:"5 Player Lineups"},{val:"4",text:"4 Player Lineups"},{val:"3",text:"3 Player Lineups"},{val:"2",text:"2 Player Lineups"}]},ClutchTime:{name:"ClutchTime",label:"Clutch Time",order:250,default:"Last 5 Minutes",type:"select",description:"",options:[{val:"Last 5 Minutes",text:"Last 5 Minutes"},{val:"Last 4 Minutes",text:"Last 4 Minutes"},{val:"Last 3 Minutes",text:"Last 3 Minutes"},{val:"Last 2 Minutes",text:"Last 2 Minutes"},{val:"Last 1 Minute",text:"Last 1 Minute"},{val:"Last 30 Seconds",text:"Last 30 Seconds"},{val:"Last 10 Seconds",text:"Last 10 Seconds"}]},AheadBehind:{name:"AheadBehind",label:"Ahead or Behind",order:230,default:"Ahead or Behind",type:"select",description:"",options:[{val:"Ahead or Behind",text:"Ahead or Behind"},{val:"Behind or Tied",text:"Behind or Tied"},{val:"Ahead or Tied",text:"Ahead or Tied"}]},PointDiff:{name:"PointDiff",label:"PointDiff",order:240,default:"5",type:"select",description:"",options:[{val:"5",text:"5 Point Diff or Less"},{val:"4",text:"4 Point Diff or Less"},{val:"3",text:"3 Point Diff or Less"},{val:"2",text:"2 Point Diff or Less"},{val:"1",text:"1 Point Diff"}]},DistanceRange:{name:"DistanceRange",label:"Distance Range",order:490,default:"5ft Range",type:"select",description:"",options:[{val:"5ft Range",text:"5ft Range"},{val:"8ft Range",text:"8ft Range"},{val:"By Zone",text:"By Zone"}]},DateFrom:{name:"DateFrom",label:"Date From",order:150,default:"",type:"datepicker",description:"",placeholder:"MM/DD/YYYY",selected:{val:"",text:""}},DateTo:{name:"DateTo",label:"Date To",order:160,default:"",type:"datepicker",description:"",placeholder:"MM/DD/YYYY",selected:{val:"",text:""}},PT:{name:"PT",label:"Players or Teams",default:"player",type:"select",desc:"",options:[{val:"player",text:"Player Stats"},{val:"team",text:"Team Stats"}]},OD:{name:"OD",label:"Offensive or Defensive",order:510,default:"offensive",type:"select",desc:"",options:[{val:"offensive",text:"Offensive"},{val:"defensive",text:"Defensive"}]},ShotClockRange:{name:"ShotClockRange",label:"Shot Clock Range",order:270,default:"",type:"select",desc:"",options:[{val:"",text:"All Shot Clock Ranges"},{val:"24-22",text:"24-22"},{val:"22-18 Very Early",text:"22-18 Very Early"},{val:"18-15 Early",text:"18-15 Early"},{val:"15-7 Average",text:"15-7 Average"},{val:"7-4 Late",text:"7-4 Late"},{val:"4-0 Very Late",text:"4-0 Very Late"},{val:"ShotClock Off",text:"ShotClock Off"}]},PORound:{name:"PORound",label:"Playoff Round",order:120,default:"0",type:"select",desc:"",options:[{val:"0",text:"All Playoff Rounds"},{val:"1",text:"Conference Quarter-Finals"},{val:"2",text:"Conference Semi-Finals"},{val:"3",text:"Conference Finals"},{val:"4",text:"Finals"}]},DraftYear:{name:"DraftYear",label:"Draft Year",order:370,default:"",type:"select",desc:"",options:function(){for(var e=[{val:"",text:"All Draft Years"}],t=2019;1947<=t;--t)e.push({val:t+"",text:t+""});return e}()},DraftPick:{name:"DraftPick",label:"Draft Pick",order:360,default:"",type:"select",desc:"",options:[{val:"",text:"All Draft Rounds"},{val:"1st Round",text:"1st Round"},{val:"2nd Round",text:"2nd Round"},{val:"1st Pick",text:"1st Pick"},{val:"Lottery Pick",text:"Lottery Pick"},{val:"Top 5 Pick",text:"Top 5 Pick"},{val:"Top 10 Pick",text:"Top 10 Pick"},{val:"Top 15 Pick",text:"Top 15 Pick"},{val:"Top 20 Pick",text:"Top 20 Pick"},{val:"Top 25 Pick",text:"Top 25 Pick"},{val:"Picks 11 Thru 20",text:"Picks 11 Thru 20"},{val:"Picks 21 Thru 30",text:"Picks 21 Thru 30"},{val:"Undrafted",text:"Undrafted"}]},College:{name:"College",label:"College",order:390,default:"",type:"select",searchFields:["text"],placeholder:"Search for a school",desc:"",options:function(){var e,t=[{val:"",text:"All Affiliations"},{val:"High School",text:"High School"},{val:"None",text:"No College"},{val:"",text:"---"}],n=["Acadia (CAN)","Adams State","Adelphi","Air Force","Akron","Alabama","Alabama A&M","Alabama-Birmingham","Alabama-Huntsville","Alabama State","Albany","Albany State (GA)","Alcorn State","Alliance","American","American International","Angelo State","Appalachian State","Arizona","Arizona State","Arkansas","Arkansas-Fort Smith","Arkansas-Little Rock","Arkansas-Pine Bluff","Arkansas State","Army","Assumption","Auburn","Auburn-Montgomery","Augsburg","Augustana (IL)","Augustana (SD)","Augusta State","Aurora","Austin Peay","Averett","Azusa Pacific","Ball State","Baltimore","Barton","Barton Community College","Baylor","Belmont","Belmont Abbey","Beloit","Bemidji State","Benedict","Bethel (TN)","Binghamton","Biola","Blinn","Bloomfield","Bloomsburg","Bluefield","Boise State","Boston College","Boston University","Bowie State","Bowling Green","Bradley","Brevard Community College","Brewton-Parker","Bridgeport","Brigham Young","Brigham Young-Hawaii","Brooklyn","Brown","Bryant","Bucknell","Buffalo","Buffalo State","Butler","Butler Community College","C.W. Post","California","California (PA)","California-Berkeley","California-Davis","California-Irvine","California-Los Angeles","California-Riverside","California-Santa Barbara","Cal State-Bakersfield","Cal State-Dominguez Hills","Cal State-Fullerton","Cal State-Los Angeles","Cal State-Northridge","Cal State-Poly Pomona","Cal State-San Bernardino","Campbell","Campbellsville","Canisius","Case Western","Catholic","Centenary (LA)","Central Arkansas","Central Connecticut State","Central Florida","Central Michigan","Central Missouri","Central Oklahoma","Central State (OH)","Central Washington","Charleston (WV)","Cheyney","Chicago State","Christopher Newport","Cincinnati","City College of New York","Claflin","Clark Atlanta","Clayton State","Clemson","Cleveland State","Colgate","College of Charleston","College of New Jersey","Colorado","Colorado Christian","Colorado State","Colorado State-Pueblo","Columbia","Columbus State","Concordia","Concordia-Irvine","Connecticut","Coppin State","Cornell","Corpus Christi","Creighton","Culver-Stockton","Dakota Wesleyan","Dartmouth","Davidson","Davis & Elkins","Dayton","Delaware","Delaware State","Delta State","Denver","DePaul","DePauw","Detroit Mercy","Dillard","District of Columbia","Drake","Drexel","Duke","Duquesne","East Carolina","East Central","Eastern Illinois","Eastern Kentucky","Eastern Michigan","Eastern New Mexico","Eastern Oklahoma State (Junior College)","Eastern Washington","East Tennessee State","Eckerd","Elizabeth City State","Elon","Evangel","Evansville","Fairfield","Fairleigh Dickinson","Fayetteville State","Ferris State","Findlay","Florida","Florida A&M","Florida Atlantic","Florida Community College","Florida Gulf Coast","Florida International","Florida State","Fordham","Fort Valley State","Franklin","Fresno State","Friends","Furman","Gannon","Gardner-Webb","George Mason","Georgetown","Georgetown College","George Washington","Georgia","Georgia Southern","Georgia State","Georgia Tech","Gonzaga","Grambling","Grand Canyon","Green Bay","Grinnell College","Guilford","Hamline","Hampton","Hardin-Simmons","Hartford","Harvard","Hawaii","High Point","Hillsborough Community College","Hillsdale","Hofstra","Holy Cross","Holy Family","Houston","Houston Baptist","Howard","Humboldt State","Huntington","Idaho","Idaho State","Illinois","Illinois-Chicago","Illinois State","Illinois Wesleyan","Incarnate Word","Indiana","Indianapolis","Indiana Purdue-Fort Wayne","Indiana Purdue-Indianapolis","Indiana State","Indiana Tech","Indian Hills Community College","Iona","Iowa","Iowa State","Jackson State","Jacksonville","Jacksonville State","James Madison","Johnson C. Smith","Kansas","Kansas State","Kennesaw State","Kent State","Kentucky","Kentucky State","Kentucky Wesleyan","Kenyon","King's (NY)","Lafayette","Lamar","La Salle","Lawrence Tech","Lebanon Valley","Lee","Lehigh","Le Moyne","Lewis","Liberty","Lincoln (MO)","Lipscomb","Long Beach State","Long Island-Brooklyn","Longwood","Los Angeles Community College","Louisiana-Lafayette","Louisiana-Monroe","Louisiana State","Louisiana Tech","Louisville","Loyola-Chicago","Loyola-Maryland","Loyola-Marymount","Maine","Manhattan","Marist","Marquette","Marshall","Maryland","Maryland-Eastern Shore","Massachusetts","Master's","McNeese State","Memphis","Mercer","Meridian Community College","Merrimack","Metro State","Miami (FL)","Miami (OH)","Michigan","Michigan State","Middle Tennessee State","Midland","Midwestern State","Miles","Millersville","Minnesota","Minnesota-Duluth","Minnesota State-Mankato","Mississippi","Mississippi Gulf Community College","Mississippi State","Mississippi Valley State","Missouri","Missouri-Kansas City","Missouri State","Missouri Western State","Monmouth","Montana","Montana State","Montevallo","Morehead State","Morehouse","Morgan State","Mountain State","Mount St. Mary's","Mount Union","Mt. San Antonio","Muhlenberg","Murray State","Navy","Nebraska","Nebraska-Kearney","Nebraska-Omaha","Nevada","Nevada-Las Vegas","Nevada-Reno","New Jersey Institute of Technology","New Mexico","New Mexico Highlands","New Mexico State","New Mexico Tech","New Orleans","New York University","Niagara","Nicholls State","Norfolk State","North Carolina","North Carolina A&T","North Carolina-Asheville","North Carolina Central","North Carolina-Charlotte","North Carolina-Greensboro","North Carolina State","North Carolina-Wilmington","North Dakota","North Dakota State","Northeastern","Northeastern State","Northeast Mississippi Community College","Northern Arizona","Northern Colorado","Northern Illinois","Northern Iowa","Northern Kentucky","North Park","North Texas","Northwestern","Northwestern Oklahoma","Northwestern Oklahoma State","Northwestern State","Northwest Florida State","Northwest Nazarene","Northwood","Notre Dame","Oakland","Ohio","Ohio State","Ohio Wesleyan","Oklahoma","Oklahoma Baptist","Oklahoma City","Oklahoma Science and Arts","Oklahoma State","Oklahoma Wesleyan","Old Dominion","Oral Roberts","Oregon","Oregon State","Ouachita Baptist","Pacific","Paine","Penn State","Pennsylvania","Pennsylvania-Kutztown","Pepperdine","Pfeiffer","Phillips","Pikeville","Pittsburgh","Portland","Portland State","Potsdam","Prairie View A&M","Princeton","Providence","Puget Sound","Purdue","Queens (NY)","Quincy","Rhode Island","Rice","Richmond","Rider","Robert Morris (IL)","Rochester (NY)","Rockhurst","Rutgers","Sacramento State","Sacred Heart","Saginaw Valley","Saint Augustine's","Saint Francis (PA)","Saint Joseph's","Saint Louis","Saint Mary's (CA)","Saint Mary's (MN)","Saint Peter's","Saint Rose","Saint Vincent","Salem International","Sam Houston State","San Diego","San Diego State","San Francisco","San Jose State","Santa Clara","Scranton","Seattle","Seton Hall","Seward County Community College","Shaw","Shippensburg","Siena","Slippery Rock","South Alabama","South Carolina","South Carolina-Aiken","South Carolina State","South Carolina Upstate","South Dakota","South Dakota State","Southeastern Illinois","Southeastern Louisiana","Southeastern Oklahoma State","Southeast Missouri State","Southern","Southern California","Southern Illinois","Southern Methodist","Southern Mississippi","Southern Nazarene","Southern Utah","South Florida","Southwest Baptist","Springfield","St. Ambrose","St. Anselm","St. Bonaventure","St. Cloud State","St. Francis Brooklyn","St. John's (NY)","St. Mary's (CA)","St. Mary's (TX)","St. Peter's","St. Thomas (FL)","Stanford","Stephen F. Austin","Stetson","Stony Brook","Syracuse","Tampa","Tarleton State","Temple","Tennessee","Tennessee-Chattanooga","Tennessee-Martin","Tennessee State","Tennessee Tech","Texas","Texas A&M","Texas A&M-Commerce","Texas A&M-Corpus Christi","Texas-Arlington","Texas Christian","Texas-El Paso","Texas-Pan American","Texas-San Antonio","Texas Southern","Texas State","Texas Tech","Texas Wesleyan","Thomas More","Toledo","Towson","Trinity Valley Community College","Troy State","Truman State","Tulane","Tulsa","Tuskegee","UCLA","Utah","Utah State","Utah Valley","Valdosta State","Valparaiso","Vanderbilt","Venezuela","Vermont","Villanova","Virginia","Virginia Commonwealth","Virginia Military Institute","Virginia Tech","Virginia Union","Voorhees","Vorhees","Wake Forest","Walsh","Washington","Washington & Jefferson","Washington State","Wayne State (MI)","Weber State","Western Carolina","Western Illinois","Western Kentucky","Western Michigan","Western Washington","West Florida","West Georgia","Westminster (PA)","West Texas A&M","West Virginia","West Virginia State","West Virginia Tech","West Virginia Wesleyan","Wheaton (IL)","Whitworth","Wichita State","Wilberforce","William & Mary","William Jessup","William Paterson","William Penn","Wingate","Winona State","Winston-Salem State","Winthrop (SC)","Wisconsin","Wisconsin-Eau Claire","Wisconsin-Green Bay","Wisconsin-Milwaukee","Wisconsin-Parkside","Wisconsin-River Falls","Wisconsin-Stevens Point","Wisconsin-Whitewater","Wofford","Wooster","Wright State","Wyoming","Xavier","Xavier (LA)","Yale","Yonsei (KOR)","Youngstown State"];for(e in n)t.push({val:n[e],text:n[e]});return t}()},Country:{name:"Country",label:"Country",order:380,default:"",type:"select",searchFields:["text"],placeholder:"Search for a country",desc:"",options:function(){var e,t=[{val:"",text:"All Countries"}],n=["International","Angola","Argentina","Australia","Belize","Boznia & Herzegovina","Brazil","Cameroon","Canada","China","Congo","Croatia","Czech Republic","Democratic Republic of Congo","Dominican Republic","England","Finland","France","Georgia","Germany","Great Britain","Greece","Haiti","Iran","Ireland","Israel","Italy","Jamaica","Latvia","Lithuania","Macedonia","Mali","Mexico","Montenegro","Netherlands","New Zealand","Nigeria","Panama","Poland","Puerto Rico","Russia","Scotland","Senegal","Serbia","Serbia and Montenegro","Slovenia","South Korea","Spain","St. Vincent & Grenadines","Sudan","Sudan (UK)","Sweden","Switzerland","Tanzania","Turkey","U.S. Virgin Islands","Ukraine","Uruguay","USA","USSR","Venezuela","Yugoslavia"];for(e in n)t.push({val:n[e],text:n[e]});return t}()},Height:{name:"Height",label:"Height",order:400,default:"",type:"select",desc:"",options:[{val:"",text:"All Heights"},{val:"LT 6-0",text:"< 6-0"},{val:"GT 6-0",text:"> 6-0"},{val:"LT 6-4",text:"< 6-4"},{val:"GT 6-4",text:"> 6-4"},{val:"LT 6-7",text:"< 6-7"},{val:"GT 6-7",text:"> 6-7"},{val:"LT 6-10",text:"< 6-10"},{val:"GT 6-10",text:"> 6-10"},{val:"LT 7-0",text:"< 7-0"},{val:"GT 7-0",text:"> 7-0"}]},Weight:{name:"Weight",label:"Weight",order:400,default:"",type:"select",desc:"",options:[{val:"",text:"All Weights"},{val:"LT 200",text:"< 200"},{val:"GT 200",text:"> 200"},{val:"LT 225",text:"< 225"},{val:"GT 225",text:"> 225"},{val:"LT 250",text:"< 250"},{val:"GT 250",text:"> 250"},{val:"LT 275",text:"< 275"},{val:"GT 275",text:"> 275"},{val:"LT 300",text:"< 300"},{val:"GT 300",text:"> 300"}]},DefenseCategory:{name:"DefenseCategory",label:"Defense Category",order:500,default:"Overall",type:"select",desc:"",options:[{val:"Overall",text:"Overall"},{val:"3 Pointers",text:"3 Pointers"},{val:"2 Pointers",text:"2 Pointers"},{val:"Less Than 6Ft",text:"Less Than 6Ft"},{val:"Less Than 10Ft",text:"Less Than 10Ft"},{val:"Less Than 10Ft",text:"Less Than 10Ft"},{val:"Greater Than 15Ft",text:"Greater Than 15Ft"}]},MinGames:{name:"MinGames",label:"Min Games",order:540,default:"",type:"number",desc:"The minimum number of games played",placeholder:"0",validation:/\d*/,selected:{val:""}},GeneralRange:{name:"GeneralRange",label:"Shot Range",order:420,type:"select",desc:"Shot range for shot dashboard.",default:"Overall",options:[{val:"Overall",text:"Overall"},{val:"Catch and Shoot",text:"Catch and Shoot"},{val:"Pullups",text:"Pullups"},{val:"Less Than 10 ft",text:"Less Than 10 ft"}]},DribbleRange:{name:"DribbleRange",label:"Dribble Range",order:430,type:"select",desc:"Dribble range for shot dashboard.",default:"0 Dribbles",options:[{val:"0 Dribbles",text:"0 Dribbles"},{val:"1 Dribble",text:"1 Dribble"},{val:"2 Dribbles",text:"2 Dribbles"},{val:"3-6 Dribbles",text:"3-6 Dribbles"},{val:"7+ Dribbles",text:"7+ Dribbles"}]},TouchTimeRange:{name:"TouchTimeRange",label:"Touch Time Range",order:450,type:"select",desc:"Touch Time range for shot dashboard.",default:"Touch < 2 Seconds",options:[{val:"Touch < 2 Seconds",text:"0 - 2 Seconds"},{val:"Touch 2-6 Seconds",text:"2-6 Seconds"},{val:"Touch 6+ Seconds",text:"6+ Seconds"}]},CloseDefDistRange:{name:"CloseDefDistRange",label:"Closest Defender Distance Range",order:460,type:"select",desc:"Closest Defender Distance Range range for shot dashboard.",default:"0-2 Feet - Very Tight",options:[{val:"0-2 Feet - Very Tight",text:"0 - 2 Feet (Very Tight)"},{val:"2-4 Feet - Tight",text:"2-4 Feet (Tight)"},{val:"4-6 Feet - Open",text:"4-6 Feet (Open)"},{val:"6+ Feet - Wide Open",text:"6+ Feet (Wide Open)"}]},RangeType:{name:"RangeType",label:"Range Type",order:700,type:"number",desc:"",skipLabel:!0,default:0,selected:{val:0}},StartPeriod:{name:"StartPeriod",label:"Start Period",order:701,type:"number",desc:"",skipLabel:!0,default:1,selected:{val:1}},EndPeriod:{name:"EndPeriod",label:"End Period",order:701,type:"number",desc:"",skipLabel:!0,default:10,selected:{val:10}},StartRange:{name:"StartRange",label:"Start Range",order:701,type:"number",desc:"",skipLabel:!0,default:0,selected:{val:0}},EndRange:{name:"EndRange",label:"End Range",order:702,type:"number",desc:"",skipLabel:!0,default:28800,selected:{val:28800}}}),function(){function e(n,e,a,i){var r=angular.element(e),s=angular.element(i);function o(e){var t=s.scrollTop()+s.height();r.offset().top+r.height()<=t+r.height()&&(n.hasFired=!0,a(n.defaults.callback.bind(this,r),n.defaults.delay)),n.hasFired&&n.defaults.triggerOnce&&(angular.element(i).off("scroll",o),angular.element(i).off("resize",o))}n.hasFired=!1,n.defaults={triggerOnce:!0,delay:500,callback:function(){}},n.$watch("inViewport",function(e){e&&(n.defaults=angular.extend({},n.defaults,e),n.hasFired=!1,o())},!0),angular.element(i).on("scroll",o),angular.element(i).on("resize",o)}stats.directive("inViewport",function(){return{restrict:"A",scope:{inViewport:"="},controller:e}}),e.$inject=["$scope","$element","$timeout","$window"]}(),function(){function e(a,e,i,r,n){function t(e,t){a.alphaText=i.find('[data-type-alpha="'+a.alpha+'"]').eq(0).text(),a.betaText=i.find('[data-type-beta="'+a.beta+'"]').eq(0).text(),a.gammaText=i.find('[data-type-gamma="'+a.gamma+'"]').eq(0).text(),a.navigationDTM&&(n.triggerEvent("navigation","Tertiary: "+[a.alphaText,a.betaText,a.gammaText].join(" ")),a.navigationDTM=!1)}a.$watch("omega",t),a.$watch("alpha",t),a.$watch("beta",t),a.$watch("gamma",t),a.$on("onCompareSearch",function(e,t){a.search="undefined"!==t.slice(1)?"#!"+t:""}),i.on("click",".tertiary-nav-component__dropdown a",function(){a.showAlpha=!1,a.showBeta=!1,a.showGamma=!1,a.showOmega=!1,a.navigationDTM=!0}),i.on("click",".tertiary-nav-overlay",function(){a.showAlpha=!1,a.showBeta=!1,a.showGamma=!1,a.showOmega=!1,a.$apply()}),i.on("click",".team-route-link",function(e){var t=$(this).data("type-omega"),n=r.absUrl().replace(/\/team\/\d+/,"/team/"+t);a.showAlpha=!1,a.showBeta=!1,a.showGamma=!1,a.showOmega=!1,window.location.href=n,a.$apply()}),i.on("click",".tertiary-nav-component:last-child",function(){var e=i.find(".tertiary-nav-component:not(.ng-hide)"),t=e.length,n=e.eq(t-2);n&&n.length&&n.find(".toggle-nav-component__button a").click()}),e.on("click",function(e){var t;(a.showAlpha||a.showBeta||a.showGamma||a.showOmega)&&(t=e.target,$.contains(i.get(0),t)||(a.showAlpha=!1,a.showBeta=!1,a.showGamma=!1,a.showOmega=!1,a.$apply()))})}stats.directive("navDropdown",function(){return{restrict:"E",template:function(e){return e.html()},scope:{alpha:"@",beta:"@",gamma:"@",omega:"@",routeId:"@",sections:"=",teams:"="},controller:e}}),e.$inject=["$scope","$document","$element","$location","DtmService"]}(),function(){function e(i,e,t){for(var n in t)"nbaWith"===n||(0===n.indexOf("nbaWithData")?function(e,t){var n=r(t.substr(11)),a=e[t];i.$watch(a,function(e){i[n]=e},!0)}(t,n):0===n.indexOf("nbaWith")&&function(e,t){var n=r(t.substr(7));e.$observe(t,function(e){i[n]=e})}(t,n))}function r(e){return e.charAt(0).toLowerCase()+e.slice(1)}stats.directive("nbaWith",function(){return{scope:!0,link:e}})}(),function(){function e(t,e,n){function a(){var e;t.fields&&t.filter&&(e=t.filter.value.split("*"),t.field=n("filter")(t.fields,{name:e[0]},!0)[0],t.field||(t.field=t.fields[0]),t.comparator=n("filter")(t.comparators,{k:e[1]})[0],t.value=e[2])}function i(){var e;t.field&&t.comparator&&(e="PLAYER_HEIGHT_INCHES"!==t.field.name||60<t.value?t.value:n("toInches")(t.value),t.filter.value=[t.field.name,t.comparator.k,e].join("*"),t.filter.text=[t.field.text,t.comparator.v,e].join(" "),t.$emit("filterUpdated",t.filter))}t.comparators=[{k:"gt",v:"â¥"},{k:"lt",v:"<"}],t.toggled=!1,t.remove=function(){t.$emit("removeFilter",t.filter)},t.$watch("filter",a),t.$watch("fields",a),t.$watch("field",i),t.$watch("comparator",i),t.$watch("value",i)}stats.directive("querytoolCustomFilter",function(){return{restrict:"A",replace:!0,scope:{filter:"=",fields:"="},template:["<table>"," <tr>",'   <td class="field"><select ng-model="field" ng-options="v.text for v in fields"></select></td>','   <td class="comparator"><select ng-model="comparator" ng-options="v.v for v in comparators"></select></td>','   <td class="val"><input type="text" pattern="[0-9]*" inputmode="numeric" ng-model="value" /></td>','   <td class="close"><button ng-click="remove()"><i class="fa fa-times"></i></button></td>'," </tr>","</div>"].join(""),controller:e}}),e.$inject=["$scope","$element","$filter"]}(),function(){function e(n,a,i){var e;n.filters||(n.filters=(e=i.search().CF)?e.split("|").map(function(e,t){return{name:"CF"+t,value:e}}):[]),n.maxFilters=8;var t=n.filters.length;n.addFilter=function(){n.filters.length>=n.maxFilters||(t+=1,n.filters.push({name:"CF"+t,value:"**"}),n.filters=n.filters.slice(0))},n.$on("removeFilter",function(e,t){n.filters=a("filter")(n.filters,{name:"!"+t.name}),r(n.filters,i)}),n.$on("filterUpdated",function(e,t){n.filters=n.filters.slice(0),r(n.filters,i)}),n.$watch("fields",function(e){n.fields=e})}function r(e,t){var n=e.map(function(e){return e.value}).join("|");t.search("CF",n||null)}stats.directive("querytoolCustomFilters",function(){return{restrict:"A",replace:!1,scope:{filters:"=",fields:"="},template:['<div ng-repeat="filter in filters">','<div querytool-custom-filter fields="fields" filter="filter"></div>',"</div>",'<button class="[ button ] add-filter" ng-show="filters.length < maxFilters" ng-click="addFilter()"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;Add Stat Filter</button>'].join(""),controller:e}}),e.$inject=["$scope","$filter","$location"]}(),function(){function e(i,r,s){function t(){var e,t,n=i.splits,a=i.params;for(e in n){"multi"!==n[e].type?t=n[e].selected.val:"multi"===n[e].type&&(t=n[e].selected.map(function(e){return e.val}).join(",")),t==n[e].default?s.search(e,null):s.search(e,t),a[e]=t}i.$emit("runit"),r.$broadcast("hideAllMultiSelects")}i.runit=t,i.$on("updateFilters",function(e){t()})}stats.directive("querytoolRunIt",function(){return{restrict:"E",replace:!1,template:['<button class="run-it" ng-click="runit();">RUN IT</button>'].join(""),controller:e}}),e.$inject=["$scope","$rootScope","$location"]}(),function(){function e(a,i,e,r,t,n,s,o){a.asyncSearch="",a.split.display=a.split.options[0].text,a.$watch("asyncData",function(e){var t,n;0<e.length&&(a.split.options=a.split.options.concat(e),t=a.split.selected.val,n=r("filter")(a.split.options,{PERSON_ID:t},!0),a.split.selected={text:n[0].DISPLAY_LAST_COMMA_FIRST,val:t},i.$broadcast("asyncSplitLoaded",{split:a.split.name,val:a.split.selected.val}),a.split.isLoaded=!0,a.allOptions="All "+a.split.label+"s",a.type&&"team"==a.type&&angular.forEach(a.split.options,function(e){var t=r("filter")(o.get(),e.val)[0];e.abbr=t.abbr}))});var l=['<div class="multiselect-box">',"<ul>",'<li class="multiselect-box__search">','<input type="text" placeholder="{{split.placeholder}}..." ng-model="asyncSearch" ng-model-options="{ debounce: 500 }" />','<span class="clear-search" ng-if="asyncSearch" ng-click="clearSearch()"><i class="fa fa-times"></i></span>',"</li>",'<li ng-click="selectAll()" ng-show="split.selected.val!==\'\'" class="multiselect-box__all" ng-class="{\'selected\': isSelected(\'\') !== false}">',"{{allOptions}}","</li>","</ul>",'<ul ng-show="showResults">','<li ng-repeat="option in asyncData | filter:asyncSearch | limitTo:resultsLimit | orderBy:\'ROSTERSTATUS\':true track by option.$hash" ng-click="toggleItem(option, $event)" class="multiselect-box__option" ng-class="{\'selected\': isSelected(option) !== false}">',"{{ option.DISPLAY_FIRST_LAST }}","</li>","</ul>","</div>"].join(""),c=angular.element(l),u=e(c),h=angular.element(n[0].parentElement),d=(h[0].offsetLeft,h[0].clientWidth,n[0].offsetTop+n[0].clientHeight);function f(){if(a.asyncSearch&&a.asyncSearch.length<3)return a.showResults=!1,void(a.split.selected={val:"",text:""});2<a.asyncSearch.length?(a.results=r("filter")(a.asyncData,a.asyncSearch),0<a.results.length&&""!==a.asyncSearch&&(a.showResults=!0)):a.showResults=!1}c.css({top:d,position:"absolute","z-index":900}),h.prepend(c),u(a),a.toggleMultiSelect=function(){i.$broadcast("hideAllMultiSelects",{caller:a.split.name}),d=n[0].offsetTop+n[0].clientHeight;var e=n[0].clientWidth;c.css({top:d,width:e}),c.toggleClass("ms-open"),n.toggleClass("multiselect--active")},a.$on("hideAllMultiSelects",function(e,t){t&&t.caller===a.split.name||(c.css({top:-99999}),c.removeClass("ms-open"),n.removeClass("multiselect--active"))}),a.$watch("split.selected",function(e){e.text&&0<e.text.length?a.split.display=a.split.selected.text:a.split.display="All "+a.split.label+"s"}),a.toggleItem=function(e,t){a.split.selected={text:e.DISPLAY_LAST_COMMA_FIRST,val:e.PERSON_ID}},a.isSelected=function(e){return a.split.selected.val===e.PERSON_ID},a.clearSearch=function(){a.asyncSearch=""},a.selectAll=function(e){a.split.selected=""},a.setFocus=function(){i.$broadcast("hideAllMultiSelects")},a.doSearch=f,a.showResults=!1,a.$watch("asyncSearch",f)}stats.directive("querytoolSplitSearchAsync",function(){return{restrict:"EA",scope:{split:"=?",asyncData:"=",resultsLimit:"="},template:['<div class="inner" ng-class="{\'inner--active\':(split.selected.val!=split.default.val)}">','   <div class="labels">{{ ::split.label }}</div>','   <div class="ms-close" ng-click="toggleMultiSelect();"><i class="fa fa-caret-up" aria-hidden="true"></i></div>','   <div class="reset" ng-click="selectAll();"><i class="fa fa-times" aria-hidden="true"></i></div>','   <div class="multiselect-info" ng-click="toggleMultiSelect()">{{split.display}}</div>',"</div>"].join(""),controller:e}}),e.$inject=["$scope","$rootScope","$compile","$filter","$attrs","$element","$location","TeamsService"]}(),stats.directive("querytoolTableAddRows",function(){return{restrict:"A",replace:!1,template:['<div class="addrows" ng-if="visibleRows < totalRows">',' <button ripple class="addrows__button">Load More Results</button>',' <div class="addrows__info">Showing 1 - {{ visibleRows }} of {{ totalRows }} Results</div>',' <p class="addrows__help" ng-if="totalRows>250">','   <span class="em">Looks like you\'ve put in a query with a large range of results.<br/>Try using additional filters to narrow down your data.</span>'," </p>","</div>"].join("")}}),function(){function e(e,t){var n="nba-stat-table",a="__overflow",i=e.find("."+n);e.append("<div querytool-table-add-rows></div>"),e.find("[sort]").attr("ripple","");var r,s=e.find("."+n+a).clone().removeClass(n+a).addClass(n+"__overlay"),o=+s.data("fixed")||0;0!==o&&(r="th:nth-child(n+"+(o+=1)+"), td:nth-child(n+"+o+")",s.find(r).remove(),i.append(s))}function t(l,a,c,i,n,r){var s,t={rowsPerPage:50,deeplink:!0,sortField:"",sortDirection:1},o=angular.extend({},t),u=(s={},a.find(".nba-stat-table__overflow thead tr:last-child th").each(function(e,t){var n=$(t),a={$elm:n,field:n.data("field"),text:n.hasClass("grouped")?n.attr("data-field"):n.text(),hasRank:void 0!==n.data("rank"),hasDir:void 0!==n.data("dir"),canSort:void 0!==n.data("sort"),canFilter:void 0!==n.data("cf"),isFilterList:void 0!==n.data("cf-list"),isGroup:n.hasClass("grouped")};a.dir=a.hasDir?+n.data("dir"):+o.dir,a.field&&(s[a.field]=a)}),s);l.currentPage=1,l.descending=1==+o.sortDirection,l.column=o.sortField,l.broadcast=y,l.$watch("rows",function(e){if(!e)return;p()},!0),l.$watch("options",function(e){if(!e)return;o=angular.extend({},t,e),p()},!0),l.$watch("filters",function(e){p()},!0),l.$watch("currentPage",m,!0),l.$watch("visibleRows",m,!0),r(function(){a.on("mousedown",".page-nav.left",e),a.on("mousedown",".page-nav.right",h),a.on("mousedown",".addrows__button",d),a.find("[sort]").on("mousedown",f)});var e=function(){1!==l.currentPage&&(--l.currentPage,y("$statsTablePageChange",{$elm:a,page:l.currentPage}),l.$apply())},h=function(){l.currentPage!==l.totalPages&&(l.currentPage+=1,y("$statsTablePageChange",{$elm:a,page:l.currentPage}),l.$apply())},d=function(e){l.visibleRows>=l.totalRows||(e.metaKey?l.visibleRows=l.totalRows:l.visibleRows=Math.min(l.visibleRows+o.rowsPerPage,l.totalRows),l.currentPage=1,y("$statsTableAddRows",{$elm:a,visibleRows:l.visibleRows}),l.$apply())};function f(e){var t=$(this),n=t.data("field"),a=void 0!==t.data("rank"),i=void 0!==t.data("dir"),r=0,r=n===l.column?0:i?+t.data("dir"):+o.dir;g(n,{apply:!0,field:n,hasRank:a,dir:r})}function p(){var e,t,n;l.rows&&(e=l.rows.slice(0),l.set=function(e,t){if(!t||0===t.length)return e;for(var n in t){var a=t[n];if(!a||!a.value)return;var i=a.value.split("*"),r=i[0],s=i[1],o=i[2];r&&s&&o&&(-1<r.indexOf("PCT")&&-1===r.indexOf("_RANK")&&(o/=100),e=c("equality")(e,s,o,r))}return e}(e,l.filters)||[],l.totalRows=l.set.length,l.visibleRows=o.rowsPerPage,l.totalPages=Math.ceil(l.totalRows/l.visibleRows),l.currentPage=1,l.descending=!0,l.column="",y("$statsTableFilter",{$elm:a,rows:l.set,filters:l.filters}),a.find("[sort]").removeClass("sorted"),(t=i.search().sort||o.sortField)&&(n={apply:!1,field:t,hasRank:!1,dir:+i.search().dir||+u[t].dir},g(t,n)),m())}function m(e){var t,n;l.rows&&l.rows.length&&(n=(t=(l.currentPage-1)*l.visibleRows)+l.visibleRows,l.page=l.set.slice(t,n))}var g=function(e,t){l.column=e,-1===t.dir?l.descending=!1:0===t.dir?l.descending=!l.descending:l.descending=!0,o.deeplink&&(i.search("sort",e),i.search("dir",l.descending?1:-1));var n=t.hasRank?e+"_RANK":e;l.set.forEach(function(e,t){var n=e+"_RANK";t.__rank=t[n]?t[n]:null}.bind("",e)),l.set.sort(function(e,t,n,a){var i=t?n[e]:a[e],r=t?a[e]:n[e];return null===n[e]||void 0===n[e]?1:null===a[e]||void 0===a[e]||r<i?-1:i<r?1:0}.bind(null,n,l.descending)),l.page=l.set.slice(0),l.currentPage=1,m(),t.apply&&l.$apply(),r(v)};function v(){var e=a.find("table").eq(0),t=e.find("th[data-field='"+l.column+"']"),n=e.find("thead tr:last-child th").index(t)+1;a.find(".sorted").removeClass("sorted asc desc").end().find("thead tr:last-child > *:nth-child("+n+")").addClass("sorted").addClass(l.descending?"desc":"asc").end().find("tbody tr > *:nth-child("+n+")").addClass("sorted").end(),y("$statsTableSort",{$elm:a,column:l.column,descending:l.descending})}function y(e,t){n.$broadcast(e,t)}r(function(){y("$statsTableLoad",{$elm:a})}),r(function(){a.on("click","tbody > tr",function(e){var t=$(e.currentTarget),n=t.attr("index")||t.attr("data-index");y("$statsTableRowClick",{$elm:a,$row:t,index:+n,data:l.page[n]})})}),r(function(){var e=a.find(".nba-stat-table__overflow [cf]").map(function(e,t){var n,a=$(t),i=a.attr("data-field"),r=a.hasClass("grouped")?a.attr("data-field"):a.text(),s=void 0!==a.attr("cf-list"),o=[];return s&&(n=c("groupBy")(l.rows,i),(o=Object.keys(n).sort()).unshift("")),{name:i,text:r,type:s?"list":"text",list:o}});l.$emit("customFields",e)})}stats.directive("querytoolStatTable",function(){return{restrict:"E",require:"nbaWith",templateUrl:function(e,t){return["/stats/templates/angular/tables/",t.template,".html"].join("")},scope:{template:"@",title:"@",rows:"<",headers:"<",footer:"<",options:"<",filters:"<",params:"<",ai:"<",limit:"="},compile:e,controller:t}}),t.$inject=["$scope","$element","$filter","$location","$rootScope","$timeout"]}(),function(){function e(e,r,t){r.on("click",function(e){0===r.find(".ink").length&&r.append("<span class='ink'></span>");var t,n=r.find(".ink");n.removeClass("animate"),n.height()||n.width()||(t=Math.max(r.outerWidth(),r.outerHeight()),n.css({height:t,width:t}));var a=e.pageX-r.offset().left-n.width()/2,i=e.pageY-r.offset().top-n.height()/2;n.css({top:i+"px",left:a+"px"}).addClass("animate")})}stats.directive("ripple",function(){return{restrict:"A",link:e}})}(),function(){function e(e,t,n){e.$watch("scrollLeft",function(e){t.scrollLeft(e)})}stats.directive("scrollLeft",function(){return{restrict:"A",replace:!1,scope:{scrollLeft:"="},link:e}})}(),function(){function e(e,t,n,a,i){var r=angular.element(window),s=angular.element(document.body),o=n.bodyClass,l=n.targetId,c="."+n.target,u=angular.element(c),h=u.offset().top;function d(){r.scrollTop()>=h?s.addClass(o):s.removeClass(o)}d(),r.on("scroll",function(e){d()}),r.on("resize",function(){d(),h=u.offset().top}),e.scrollToId=function(){var e=i.hash();t.yOffset=65,i.hash(l),t(),i.hash(e)}}stats.directive("scrollToTop",function(){return{restrict:"E",controller:e,template:'<div class="scroll-top" ng-click="scrollToId()"><div class="scroll-top__inner"><i class="fa fa-chevron-up" aria-hidden="true" title="Scroll to top"></i></div></div>'}}),e.$inject=["$scope","$anchorScroll","$attrs","$element","$location"]}(),function(){function e(e,n,a){var i,r,s=angular.element(window),o=angular.element(document.body),l=angular.element(".dropdown__base, .dropdown__category > .dropdown__category-list, .dropdown__subcategory > .dropdown__subcategory-list"),c=a.elementClass,u=a.bodyClass?a.bodyClass:null,h=n.offset().top,d=window.innerWidth|document.documentElement.clientWidth|document.body.clientWidth,f="none"!==angular.element("#header-ad").css("display"),p=Number(angular.element("#header-ad").css("height").slice(0,-2));function t(){var e,t;s.scrollTop()>=h||d<1024&&s.scrollTop()>=h-p?(n.addClass(c),e=Number(angular.element("."+a.elementClass).css("height").slice(0,-2)),t=s[0].innerHeight?s[0].innerHeight:s.height(),r=0<p-s.scrollTop()&&f?p-s.scrollTop():0,l.css("height",t-e-r),l.css("overflow-y","auto"),d<1024?(i=0<r?"relative":"fixed",angular.element(".nav-inner").css("position",i),angular.element(".dropdown__base").css("top",r)):angular.element(".nav-inner").css("position","fixed"),u&&o.addClass(u)):(n.removeClass(c),function(){Number(angular.element(".nav-inner").css("height").slice(0,-2));var e=s[0].innerHeight?s[0].innerHeight:s.height(),t=s.scrollTop();l.css("height",e+t-50-h),l.css("overflow-y","auto"),angular.element(".nav-inner").css("position","relative")}(),u&&o.removeClass(u))}t(),s.on("scroll",function(e){t()}),s.on("resize",function(){t(),h=n.offset().top,d=window.innerWidth|document.documentElement.clientWidth|document.body.clientWidth,p=Number(angular.element("#header-ad").css("height").slice(0,-2)),f="none"!==angular.element("#header-ad").css("display")})}stats.directive("setClassScrollTop",function(){return{restrict:"A",controller:e}}),e.$inject=["$scope","$element","$attrs"]}(),function(){function e(n){var a={ABC:"abc.png",ESPN:"espn.svg","ESPN 2":"espn2.png","NBA TV":"nbatv.svg",NBATV:"nbatv.svg",TNT:"tnt.svg",LP:"lp.svg"};n.$watch("bc",function(e){var t=a[e];t?(n.src="/stats/media/img/broadcast-logos/"+t,n.hasLogo=!0):n.hasLogo=!1})}stats.directive("statsBroadcasterLogo",function(){return{restrict:"E",scope:{bc:"@"},template:['<div broadcaster-logo class="broadcaster {{ bc }}">',' <img ng-if="hasLogo" class="broadcast-logo" title="bc" ng-src="{{ src }}" />',' <span ng-if="!hasLogo" class="broadcast-text">{{ bc }}</span>',"</div>"].join(""),controller:e}}),e.$inject=["$scope"]}(),function(){function e(n,e,t,u){var h=this,d="yyyy-MM-dd",a=(new Date).getFullYear()+1;h.yearRange=[];for(var i=a;1945<i;i--)h.yearRange.push(i);function r(){var e=u("date")(new Date,d),t=u("date")(h.date,d),n=h.currentDate.getFullYear(),a=h.currentDate.getMonth(),i=new Date(n,a,1).getDay(),r=new Date(n,a+1,0).getDate(),s=[];h.weeks=[];for(var o=r+(7-(i+r)%7)%7,l=-1*i;l<o;l+=1){var c={};c.offset=l+1,c.date=new Date(n,a,c.offset),c.dateString=c.date.toISOString(),c.dcode=u("date")(c.date,d),c.dom=c.date.getDate(),c.isOtherMonth=c.offset<=0||c.offset>r,c.isSelected=c.dcode==t,c.isToday=c.dcode==e,s.push(c)}for(;s.length;)h.weeks.push(s.splice(0,7))}h.setMonth=function(e){h.currentDate.setMonth(h.currentDate.getMonth()+e),r()},h.setDate=function(e,t,n){h.date=new Date(e,t,n),h.currentDate=h.date},h.setYear=function(e){h.currentDate.setYear(e),h.showYearView=!1,r()},h.setToday=function(){h.date=new Date,h.currentDate=h.date,h.isOpen=!1,n.$apply()},h.showYearView=!1,t.on("click","td",function(e){var t=$(this).data("date")||"";h.date=new Date(t),h.isOpen=!1,n.$apply()}),n.$watch("cal.date",function(e){h.currentDate=e?new Date(e):new Date,h.year=h.currentDate.getFullYear(),h.month=h.currentDate.getMonth(),r()},!0)}stats.directive("statsCalendar",function(){return{restrict:"E",templateUrl:"/stats/templates/angular/directives/stats-calendar.html",scope:{date:"=?",isOpen:"=",options:"="},controllerAs:"cal",controller:e,bindToController:!0}}),e.$inject=["$scope","$document","$element","$filter"]}(),function(){function e(i,r,s){function e(){var e=parseFloat(i.player,10),t=parseFloat(i.vs,10),n=e+t,a=Math.min(e/n*80,80);r.css({width:"0%"}),s(function(){r.css({width:a+"%"}),t<=e&&!i.invert||e<=t&&i.invert?r.addClass("leader"):r.removeClass("leader")},100)}i.$watch("player",e),i.$watch("vs",e),i.$watch("invert",e)}stats.directive("statsCompareBar",function(){return{restrict:"AE",scope:{player:"@",vs:"@",invert:"="},controller:e}}),e.$inject=["$scope","$element","$timeout"]}(),function(){function e(a,e,i){function t(){var e;a.fields&&a.filter&&(e=a.filter.value.split("*"),a.field=i("filter")(a.fields,{name:e[0]},!0)[0],a.field||(a.field=a.fields[0]),a.comparator=i("filter")(a.comparators,{k:e[1]})[0],a.value=e[2])}function n(){var e,t,n;a.field&&a.comparator&&(t=a.field.name,n=a.value,e="PLAYER_HEIGHT_INCHES"!==t||60<n?n:i("toInches")(n),a.filter.value=[a.field.name,a.comparator.k,e].join("*"),a.filter.text=[a.field.text,a.comparator.v,e].join(" "),a.$emit("filterUpdated",a.filter))}e.addClass("stats-custom-filter"),a.comparators=[{k:"E",v:"="},{k:"NE",v:"â "},{k:"G",v:">"},{k:"GE",v:"â¥"},{k:"L",v:"<"},{k:"LE",v:"â¤"},{k:"R",v:".*"}],a.toggled=!1,a.remove=function(){a.$emit("removeFilter",a.filter)},a.$watch("filter",t),a.$watch("fields",t),a.$watch("field",n),a.$watch("comparator",n),a.$watch("value",n)}stats.directive("statsCustomFilter",function(){return{restrict:"A",replace:!0,scope:{filter:"=",fields:"="},template:["<table>"," <tr>",'   <td class="field"><div class="label">Field</div><select ng-model="field" ng-options="v.text for v in fields"></select></td>','   <td class="comparator"><div class="label">Is</div><select ng-model="comparator" ng-options="v.v for v in comparators"></select></td>','   <td ng-show="field.type===\'text\'" class="val"><div class="label">Value</div><input type="text" ng-model="value" ng-model-options="{debounce: {default:500, blur:0}  }"></td>','   <td ng-show="field.type===\'list\'" class="list"><div class="label">Value</div><select ng-model="value" ng-options="v for v in field.list"></select></td>','   <td class="close"><button ng-click="remove()"><i class="fa fa-times"></i></button></td>'," </tr>","</table>"].join(""),controller:e}}),e.$inject=["$scope","$element","$filter"]}(),function(){function e(n,e,a,i,r){var t;e.addClass("stats-custom-filters"),n.filters||(n.filters=(t=i.search().CF)?t.split(":").map(function(e,t){return{name:"CF"+t,value:e}}):[]),n.maxFilters=5;var s=n.filters.length;n.addFilter=function(){n.filters.length>=n.maxFilters||(s+=1,n.filters.push({name:"CF"+s,value:"**"}),n.filters=n.filters.slice(0))},n.$on("removeFilter",function(e,t){n.filters=a("filter")(n.filters,{name:"!"+t.name}),o(n.filters,i)}),n.$on("filterUpdated",function(e,t){n.filters=n.filters.slice(0),o(n.filters,i),r.triggerEvent("setCustomFilter",r.setCustomFilterProps(n.filters))}),n.$watch("fields",function(e){n.fields=e})}function o(e,t){var n=e.map(function(e){return e.value}).join(":");t.search("CF",n||null)}stats.directive("statsCustomFilters",function(){return{restrict:"A",replace:!1,scope:{filters:"=",fields:"="},template:['<div ng-repeat="filter in filters">','   <div stats-custom-filter fields="fields" filter="filter"></div>',"</div>","<div>",'   <a class="add-filter" ng-click="addFilter()" ng-show="filters.length < maxFilters"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;Add Custom Filter</a>',"</div>"].join(""),controller:e}}),e.$inject=["$scope","$element","$filter","$location","DtmService"]}(),function(){function e(r,e,t,n,s){e.addClass("stats-video-player");var o,a=!1,i=!1,l=t(function(){if("undefined"==typeof CVP)return;t.cancel(l),(o=new CVP({id:"cvp_"+Date.now(),width:"576",height:"324",wmode:"transparent",flashVars:{wmode:"transparent",contentId:"",site:"nba",profile:"1",context:"nba",autostart:"on",aspenContext:"stats",containerUrl:"container.xml",configUrl:"config.xml"},embed:{containerSwf:"https://s.cdn.turner.com/xslo/cvp/assets/container/nba/stats/2.0.0.1/nba_stats_container.swf",expressInstallSwf:"https://i.cdn.turner.com/xslo/cvp/assets/flash/expressInstall.swf",options:{wmode:"transparent",quality:"high",bgcolor:"#000000",allowFullScreen:"true",allowScriptAccess:"always"}},onPlayerReady:m,onContentPlay:d,onContentEnd:f,onContentComplete:p,onCVPReady:g})).embedSWF("player")},100),c=0,u=document.createElement("script");function h(e){var t=e.videoid,n=e.url,a=e.m+"/"+e.d+"/"+e.y,i=e.vtm.abbr+" vs "+e.htm.abbr+" "+a+" - "+(r.currentIndex+1)+" of "+r.playlist.length;r.item=e,t+="&url="+n,t+="&he="+i,o&&o.play(t),r.$apply(),s.$broadcast("onFocusGameEvent",e)}function d(){var e=_nba.analytics.parseJson(this.getContentEntry(this.getContentId()));e.videoPlayerName="LSTCVP",e.isExpired="no",e.category="nba/statsvideo",_nba.analytics.videoStart(e)}function f(){var e=_nba.analytics.parseJson(this.getContentEntry(this.getContentId()));e.videoPlayerName="LSTCVP",e.isExpired="no",e.category="nba/statsvideo",_nba.analytics.videoEnd(e)}function p(){c+=1;var e=r.playlist[c];e&&h(e)}function m(e){i&&a&&h(r.playlist[c])}function g(e){a=!0;var t=window.parent.location.href.match(/([^/]*)\/*$/)[1];-1<window.parent.location.href.indexOf("team")&&"stats"===t&&o&&o.setAdSection("nba.com_site_stats_scores"),m()}u.src="https://s.cdn.turner.com/xslo/cvp/js/cvp/2.8.3.4/cvp.min.js",e.get(0).appendChild(u),r.$watch("playlist",function(){if(!r.playlist)return;i=!0,c=0,m()}),r.$on("$statsTableRowClick",function(e,t){r.currentIndex=t.index,h(t.data)})}stats.directive("statsCvp2Player",function(){return{restrict:"E",replace:!1,scope:{playlist:"="},templateUrl:"/stats/templates/angular/directives/stats-cvp2-player.html",controller:e}}),e.$inject=["$scope","$element","$interval","$location","$rootScope"]}(),function(){function e(a,e,t,n,i){e.addClass("stats-video-player");var r=!1,s=!1,o=t(function(){if("undefined"==typeof CVP)return;t.cancel(o)},100),l=0;a.$watch("playlist",function(){if(!a.playlist)return;s=!0,l=0,d()}),a.$on("$statsTableRowClick",u),a.$on("$shotchartShotClick",u);var c=document.createElement("script");function u(e,t){a.currentIndex=t.index,h(t.data)}function h(e){var t="video/wsc/league/"+e.uuid,n=(e.url,e.m+"/"+e.d+"/"+e.y);e.vtm.abbr,e.htm.abbr,a.currentIndex,a.playlist.length;a.item=e,a.$apply(),_nba.cvp&&_nba.cvp.play({instanceName:"embed_statsPlayer",contentId:t}),i.$broadcast("onFocusGameEvent",e)}function d(){s&&r&&h(a.playlist[l])}c.src="https://s.cdn.turner.com/nba/tmpl_asset/static/nba-cms3-base/latest/js/pkgCvpExternalScout-min.js",c.setAttribute("data-analytics-league","nba"),c.setAttribute("data-analytics-section","stats"),c.setAttribute("data-cvp-adfree","true"),c.setAttribute("data-cvp-adsection","nba.com_video_homepage"),c.setAttribute("data-cvp-autostart","true"),c.setAttribute("data-cvp-autoplay","true"),c.setAttribute("data-cvp-context","nba_league_wsc"),c.setAttribute("data-cvp-contentid","/video/wsc/league/"),c.setAttribute("data-cvp-domid","statsPlayer"),c.setAttribute("data-cvp-videoplayername","LUCVP"),c.setAttribute("data-cvp-headline","false"),c.setAttribute("data-cvp-videoplayertype","main"),c.setAttribute("data-cvp-description","true"),e.find(".nbaCvpWrapper").get(0).appendChild(c),_nba.PubSub.subscribe("cvp.cvp.ready",function(){_nba.cvp.createInstance({domId:"statsPlayer",autoplay:!0,autostart:!0,adFree:!0,instanceName:"embed_statsPlayer",context:"nba_league",analytics:{videoPlayerName:"LUCVP",videoPlayerType:"main"}})}),_nba.PubSub.subscribe("cvp.player.ready",function(e){r=!0;window.parent.location.href.match(/([^/]*)\/*$/)[1];window.parent.location.href.indexOf("team"),0;d()}),_nba.PubSub.subscribe("cvp.content.end",function(){l+=1;var e=a.playlist[l];e&&h(e);var t=_nba.analytics.parseJson(this.getContentEntry(this.getContentId()));t.videoPlayerName="LSTCVP",t.isExpired="no",t.category="nba/statsvideo",_nba.analytics.videoEnd(t)}),_nba.PubSub.subscribe("cvp.content.play",function(){var e=_nba.analytics.parseJson(this.getContentEntry(this.getContentId()));e.videoPlayerName="LSTCVP",e.isExpired="no",e.category="nba/statsvideo",_nba.analytics.videoStart(e)}),_nba.PubSub.subscribe("cvp.content.complete",function(){l+=1;var e=a.playlist[l];e&&h(e)})}stats.directive("statsCvp3Player",function(){return{restrict:"E",replace:!1,scope:{playlist:"="},templateUrl:"/stats/templates/angular/directives/stats-cvp3-player.html",controller:e}}),e.$inject=["$scope","$element","$interval","$location","$rootScope"]}(),function(){function e(n,e,t,a){function i(e){var t;n.selected=null,e&&void 0!==e[0]&&(t=e.map(function(e){return e.options}),n.options=[].concat.apply([],t),e.slice(0).reverse().forEach(function(e){e.selected.val!==e.default&&(n.selected=e.selected)}),n.default=a.findDefault(e[0]),n.selected||(n.selected=n.default))}function r(t){n.splitGroup.forEach(function(e){t.key!==e.name?e.selected=a.findDefault(e):(e.selected=t,n.selected=t)}),"true"===n.autorun&&n.$emit("updateFilters")}e.addClass("stats-filter-select"),n.setSplit=r,n.resetSplit=function(){r(n.default)},n.$watch("splitGroup",i,!0),i(n.splitGroup)}stats.directive("statsFilterCombo",function(){return{restrict:"A",scope:{splitGroup:"=",label:"@",autorun:"@"},template:['<div class="inner" ng-class="{toggled: (split.selected.val!=split.default)}">'," <label>",'   <div class="label">{{ ::label }}</div>','   <div class="reset" ng-click="resetSplit();"><i class="fa fa-times" aria-hidden="true"></i></div>','   <select ng-model="selected" ng-change="setSplit(selected)" ng-options="v.text group by v.label for v in options"></select>'," </label>","</div>"].join(""),controller:e}}),e.$inject=["$scope","$element","$location","SplitsService"]}(),function(){function e(n,e,a,t,i){a.addClass("stats-filter-date"),n.showCal=!1,n.$watch("dt",function(e){e&&(n.split.selected.val=t("date")(n.dt,"MM/dd/yyyy")||"",n.split.selected.text=n.split.label+" : "+n.split.selected.val)}),n.$watch("split",function(e){e&&(e.selected.label=e.label,e.selected.key=e.name,n.dt=e.selected.val,"true"===n.autorun&&n.$emit("updateFilters"))}),n.$watch("split.selected.val",function(e){"true"===n.autorun&&n.$emit("updateDateFilters")}),e.on("click",function(e){var t;n.showCal&&(t=e.target,$.contains(a.get(0),t)||(n.showCal=!1,n.$apply()))})}stats.directive("statsFilterDate",function(){return{restrict:"AE",scope:{split:"=?",autorun:"@"},template:['<div class="inner">','  <div class="label">{{ ::split.label }}</div>','  <input type="text" placeholder="{{ ::split.placeholder }}" name="{{ ::split.name }}" class="form-control" ng-click="showCal=!showCal;" ng-model="split.selected.val" />','  <div class="stats-calendar-dropdown" ng-show="showCal==true">','    <div class="date-picker-splash">','      <stats-calendar data-date="dt" data-is-open="showCal"></stats-calendar>',"    </div>","  </div>","</div>"].join(""),controller:e}}),e.$inject=["$scope","$document","$element","$filter","SplitsService"]}(),function(){function e(t,e,n){function a(e){"true"===t.autorun&&t.$emit("updateFilters")}t.setSplit=a,t.resetSplit=function(){t.split.selected=n.findDefault(t.split),a()}}stats.directive("statsFilterNumber",function(){return{restrict:"A",scope:{split:"=?",autorun:"@",min:"@"},template:['<div class="inner">','   <div class="label">{{ ::split.label }}</div>','   <div class="reset" ng-if="split.selected.val!==split.default" ng-click="resetSplit();"><i class="fa fa-times" aria-hidden="true"></i></div>','   <input type="number" class="form-control" min="{{ ::min }}" placeholder="{{ ::split.placeholder }}" name="{{ ::split.name }}" ng-model="split.selected.val" ng-change="setSplit(split.selected)" />',"</div>"].join(""),controller:e}}),e.$inject=["$scope","$location","SplitsService"]}(),function(){function e(o,e,n){o.activeFilters=[],o.activeParams=[],o.resetParam=function(e){var t=o.splits[e.key];if(!t)return;t.selected=n.findDefault(t),o.$emit("updateFilters")},o.resetFilter=function(e){o.$broadcast("removeFilter",e)},o.$watch("params",function(e){if(!e||!o.splits)return;o.activeParams=Object.keys(e).reduce(function(e,t,n){var a,i=e[n],r=o.splits[n];if(!r)return t;if(r.default===i)return t;if(!0===r.skipLabel)return t;{var s;"select"===r.type||"search"===r.type?((a=r.options.find(function(e){return e.val==i})).key=n,a.order=r.order,t.push(a)):"datepicker"===r.type||"number"===r.type||"text"===r.type?(a={key:n,val:r.selected.val,text:r.label+" : "+r.selected.val,order:r.order},t.push(a)):"pseudo"===r.type&&r.selected&&(s=void 0===r.label?"":r.label,s+=""!==s?": ":"",a={key:n,val:r.selected.text,text:s+r.selected.text},t.push(a))}return t}.bind("",e),[])},!0),o.$watch("filters",function(e){o.activeFilters=e},!0)}stats.directive("statsFilterPills",function(){return{restrict:"E",replace:!1,template:['<a class="stats-filter-pill stats-filter-pill--param" href="" ng-repeat="p in activeParams | orderBy:\'order\'" ng-click="resetParam(p)">',' <span class="stats-filter-pill__text">{{ ::p.text }}</span>',' <i class="fa fa-angle-right" aria-hidden="true"></i>',' <i class="fa fa-angle-left" aria-hidden="true"></i>',"</a>",'<a class="stats-filter-pill stats-filter-pill--filter" href="" ng-repeat="f in activeFilters" ng-click="resetFilter(f)">',' <span class="stats-filter-pill__text">{{ f.text }}</span>',' <i class="fa fa-angle-right" aria-hidden="true"></i>',' <i class="fa fa-angle-left" aria-hidden="true"></i>',"</a>"].join(""),controller:e}}),e.$inject=["$scope","$location","SplitsService"]}(),function(){function e(n,a,e,t){n.onMouseDown=function(e,t){i=n.handles[t],s=e.screenX,a.on("mousemove",o),a.on("mouseup",l)};var i,r=e.find(".track"),s=0;function o(e){var t;i&&(t=(e.screenX-s)/r.width()*100,i.style.left=i.pct+t+"%",n.$apply())}function l(e){i=null,a.off("mousemove",o),a.off("mouseup",l)}n.handles={left:{side:"left",pct:0,style:{left:"0%"},val:0,display:""},right:{side:"right",pct:100,style:{left:"100%"},val:0,display:""}}}stats.directive("statsFilterRangeOld",function(){return{restrict:"A",scope:{min:"=",max:"=",marks:"=",formatter:"=",autorun:"@"},template:['<div class="range">','  <div class="inner">','    <div ng-repeat="m in marks track by $index" class="mark" ng-style="{ \'left\': (m.pct*100)+\'%\' }"></div>','    <div class="mark" style="left:100%;"></div>','    <div class="track"></div>','    <div class="bar"></div>','    <div ng-mousedown="onMouseDown($event, \'left\');" ng-style="handles.left.style" class="handle handle--left"></div>','    <div ng-mousedown="onMouseDown($event, \'right\');" ng-style="handles.right.style" class="handle handle--right"></div>',"  </div>","</div>"].join(""),controller:e}}),e.$inject=["$scope","$document","$element","SplitsService"]}(),function(){function e(i,e,r,s){i.reset=function(){var e,t=i.splits;for(e in t){var n=t[e],a=s.findDefault(n);n.selected=a}r.googs("reset-filters","use",document.location.pathname),i.$emit("updateFilters")}}stats.directive("statsFilterReset",function(){return{restrict:"E",replace:!1,template:['<a href="" ng-click="reset();"><i class="fa fa-refresh" aria-hidden="true"></i> Reset Filters</a>'].join(""),controller:e}}),e.$inject=["$scope","$location","AnalyticsService","SplitsService"]}(),function(){function e(t,e,n,a,i){function r(e){t.split.selected=e,t.search=e.text,t.showResults=!1,"true"===t.autorun&&t.$emit("updateFilters")}t.setSplit=r,t.resetSplit=function(){r(i.findDefault(t.split))},t.doSearch=function(){t.results=e("filter")(t.split.options,t.search)},t.onBlur=function(){t.showResults=!1,a(function(){t.search=t.split.selected.text},1e3)},t.onFocus=function(){t.showResults=!0},t.search=t.split.selected.text}stats.directive("statsFilterSearch",function(){return{restrict:"A",scope:{split:"=?",autorun:"@"},template:['<div class="inner">','   <div class="label">{{ ::split.label }}</div>','   <div class="reset" ng-if="split.selected.val!==split.default" ng-click="resetSplit();"><i class="fa fa-times" aria-hidden="true"></i></div>','   <input type="text" class="form-control" placeholder="{{ ::split.placeholder }}" name="{{ ::split.name }}" ng-model="search" ng-change="doSearch()" ng-focus="onFocus()" />','   <div class="search-results" ng-show="showResults">',"     <ul>",'       <li ng-repeat="r in results">','         <a ng-click="setSplit(r)" href="">{{ ::r.text }}</a>',"       </li>","     </ul>","   </div>","</div>"].join(""),controller:e}}),e.$inject=["$scope","$filter","$location","$timeout","SplitsService"]}(),function(){function e(t,e,n,a){function i(e){"true"===t.autorun&&t.$emit("updateFilters")}e.addClass("stats-filter-select"),t.setSplit=i,t.resetSplit=function(){t.split.selected=a.findDefault(t.split),i()}}stats.directive("statsFilterSelect",function(){return{restrict:"A",scope:{split:"=?",autorun:"@"},template:['<div class="inner" ng-class="{toggled: (split.selected.val!=split.default)}">',"   <label>",'     <div class="label">{{ ::split.label }}</div>','     <div class="reset" ng-click="resetSplit();"><i class="fa fa-times" aria-hidden="true"></i></div>','     <select name="{{ ::split.name }}" ng-model="split.selected" ng-change="setSplit(split.selected)" ng-options="v.text for v in split.options"></select>',"   </label>","</div>"].join(""),controller:e}}),e.$inject=["$scope","$element","$location","SplitsService"]}(),function(){function e(e,t,n,a){t.addClass("stats-filter-toggle"),e.setSplit=function(){"true"===e.autorun&&e.$emit("updateFilters")}}stats.directive("statsFilterToggle",function(){return{restrict:"A",scope:{split:"=?",autorun:"@"},template:['<div class="inner" ng-class="{toggled: (split.selected.val!=split.default)}">','   <div class="label">{{ ::split.label }}</div>','   <div class="reset" ng-click="resetSplit();"><i class="fa fa-times" aria-hidden="true"></i></div>','   <label class="outer-label" for="split_{{ ::split.name }}">','     <div class="switch tiny">','       <input class="switch-input" type="checkbox" ng-change="setSplit()" ng-attr-id="split_{{ ::split.name }}" ng-model="split.selected.val" ng-true-value="\'{{ split.val.true }}\'" ng-false-value="\'{{ split.val.false }}\'">','       <label class="switch-paddle" for="split_{{ ::split.name }}">','         <span class="show-for-sr">{{ ::split.label }}</span>',"       </label>","     </div>","   </label>","</div>"].join(""),controller:e}}),e.$inject=["$scope","$element","$location","SplitsService"]}(),function(){function e(e,t){var n=angular.element(window),a=angular.element(".dropdown__base, .dropdown__category > .dropdown__category-list, .dropdown__subcategory > .dropdown__subcategory-list");a.css("overflow-y","auto");var i=t[0].getBoundingClientRect().bottom;function r(){var e;e=n[0].innerHeight?n[0].innerHeight:n.height(),a.css("height",e-i)}r(),n.on("resize",function(){r()})}stats.directive("statsFixedNav",function(){return{restrict:"A",controller:e}}),e.$inject=["$scope","$element"]}(),function(){function e(e,t,n){t.addClass("stats-glossary-toggle"),e.$watch("toggle",function(){e.toggle&&n.googs("stat-glossary","open",document.location.pathname)})}stats.directive("statsGlossaryToggle",function(){return{restrict:"E",replace:!1,template:[' <a class="stats-glossary-toggle__link" ng-class="{\'stats-glossary-toggle__link--opened\':toggle}"  ng-click="toggle=!toggle;">','   <i class="fa fa-book" aria-hidden="true"></i> Glossary'," </a>"].join(""),scope:{toggle:"="},controller:e}}),e.$inject=["$scope","$element","AnalyticsService"]}(),function(){function e(e,n,a){function i(){var e=a.location!=a.parent.location?document.referrer:document.location,t={command:"resize",path:a.location.pathname,height:n.outerHeight(),"width:":n.outerWidth()};parent.postMessage(angular.toJson(t),e)}e.$watch(function(){return n.outerHeight()},function(e,t){i()}),a.addEventListener("resize",function(){i()})}stats.directive("statsIframeDirective",function(){return{restrict:"A",scope:{},controller:e}}),e.$inject=["$scope","$element","$window"]}(),stats.directive("statsLoader",function(){return{restrict:"A",template:['<div ng-if="statsLoader" class="loader">','<img src="/stats/media/img/pacifier.svg" />',"</div>"].join(""),scope:{statsLoader:"="}}}),stats.directive("statsNoDataMsg",function(){return{restrict:"A",replace:!1,template:['<div ng-if="text && statsNoDataMsg">{{ text }}</div>','<div ng-if="!text && statsNoDataMsg">No statistics are currently available for the selected filters.</div>'].join(""),scope:{statsNoDataMsg:"=",text:"@"}}}),function(){function e(d,f,p,m,e,t,n){var g=p.data("field");!function(e){if(!e||null===e[g]||0===e[g])return;if(d.ai&&d.ai.disablePopup)return;var t=angular.extend({CFID:d.row.CFID||"",CFPARAMS:d.row.CFPARAMS||"",PlayerID:d.row.PLAYER_ID||"0",TeamID:d.row.TEAM_ID||"0",GameID:d.row.GAME_ID||d.row.Game_ID||"",ContextMeasure:g,Season:"",SeasonType:""},d.params);d.row.TEAM_ID&&(t.TeamID=d.row.TEAM_ID);{var n;t.GameID&&(n=m("gameIdToObject")(t.GameID),t.Season=n.Season,t.SeasonType=n.SeasonType)}var a=document.location.pathname.split("/")[2];switch(t.section=a){case"game":case"leaders":break;case"teams":case"players":t.CFID="",t.CFPARAMS="";break;case"lineups":t.CFID="",t.CFPARAMS="",t.islineup=1,t.GroupID=t.GROUP_ID=d.row.GROUP_ID;break;case"team":case"player":break;case"vs":"0"===t.PlayerID?t.CFID="":(t.CFID="",t.TeamID="0");break;case"impact":t.OnOff=d.row.GROUP_SET||"","TeamVsPlayers"===d.ai?t.GroupMode="TEAM":"PlayersVsPlayers"===d.ai?t.GroupMode="PLAYERS":t.GroupMode=null}var i=parseInt(t.Season.substring(0,4),10),r=!!t.Split&&"yoy"==t.Split.toLowerCase(),s="Pre Season"==t.SeasonType,o=!s||s&&2013<i,l=2013<i,c=!s||s&&2016<i,u=[{type:"video",state:(!d.ai||void 0===d.ai.hasVideo||1==d.ai.hasVideo)&&l&&o,value:1},{type:"shotchart",state:void 0!==f.shotchart&&2e3<i&&c,value:2},{type:"tracking",state:!1,value:4},{type:"movement",state:!1,value:8}].reduce(function(e,t){return e+(t.state?t.value:0)},0);r&&t.CFPARAMS&&(t.Season=t.CFPARAMS);var h=m("param")(t);t.GameID&&d.row.EVENTNUM&&(h="GameID="+t.GameID+"&GameEventID="+d.row.EVENTNUM+"&Season="+t.Season+"&title="+d.title);0<u&&p.parent().wrapInner('<a target="_blank" rel="noopener nofollow" href="/stats/events/?flag='+u+"&"+h+'"></a>')}(d.row)}stats.directive("statsPopup",function(){return{restrict:"AE",scope:{eventid:"@",params:"<",row:"<",ai:"<",title:"@"},controller:e}}),e.$inject=["$scope","$attrs","$element","$filter","$location","$timeout","ReferrerService"]}(),function(){function e(i,e,n,t,r,a,s){function o(t){var e,n=i.splits[t.key];n&&("select"===n.type||"search"===n.type?(e=n.options.find(function(e){return e.val==t.val}))&&(n.selected=e):"datepicker"!==n.type&&"number"!==n.type&&"text"!==n.type||(n.selected.text=t.text,n.selected.val=t.val,delete n.selected.$$hashKey))}n.addClass("stats-recent-filters"),i.showRecent=!1,i.recentFilters=a.get(),i.runRecent=function(e){var t,n=i.splits;for(t in n){var a=n[t];a.selected=s.findDefault(a)}e.forEach(o),i.$emit("updateFilters"),r.googs("recent-filters","use"),i.showRecent=!1},i.$on("runit",function(e){i.recentFilters=a.get()}),e.on("click",function(e){var t;i.showRecent&&(t=e.target,$.contains(n.get(0),t)?r.googs("recent-filters","open",document.location.pathname):(i.showRecent=!1,i.$apply()))})}stats.directive("statsRecentFilters",function(){return{restrict:"E",replace:!1,template:[' <a class="stats-recent-filters__toggle" ng-click="showRecent=!showRecent;">','   <i class="fa fa-clock-o" aria-hidden="true"></i> Recent Filters'," </a>",' <div class="stats-recent-filters__list" ng-if="showRecent">','    <div class="stats-recent-filters__link" ng-repeat="fs in recentFilters">','     <a ng-click="runRecent(fs);">','      <span ng-repeat="f in fs">{{ ::f.text }} <span ng-if="!$last"> - </span></span>',"    </a>","   </div>"," </div>"].join(""),controller:e}}),e.$inject=["$scope","$document","$element","$location","AnalyticsService","RecentFiltersService","SplitsService"]}(),function(){function e(t,e,n,a,i,r){function s(){var e=r.runSplits(t.splits,t.params);i.add(e),n.googs("run-it","use",document.location.pathname),a.triggerEvent("setFilter",a.setFilterProps(t.splits)),t.$emit("runit")}t.runit=s,t.$on("updateFilters",function(e){s()})}stats.directive("statsRunIt",function(){return{restrict:"E",replace:!1,template:['<a href="" class="run-it" ripple ng-click="runit();">Run It</a>'].join(""),controller:e}}),e.$inject=["$scope","$location","AnalyticsService","DtmService","RecentFiltersService","SplitsService"]}(),function(){function e(e,t,n,a,i,r,s){t.addClass("stats-share-button");var o=this,l={};function c(){o.showSharePanel&&u()}function u(){var t=decodeURIComponent(n.absUrl());if(l[t])return l[t];s.getLinks(t).then(function(e){l[t]=e,o.url=e.link})}e.$watch("vm.showSharePanel",function(){o.showSharePanel&&(u(),o.title=t.attr("title"),i.googs("stat-share","open",document.location.pathname),r.triggerEvent("share",document.location.href))}),e.$on("$locationChangeSuccess",function(e,t,n){a.cancel(void 0),a(c,1e3)})}stats.directive("statsShareButton",function(){return{restrict:"E",replace:!1,template:[' <a class="stats-share-button__link" ng-class="{\'stats-share-button__link--opened\':vm.showSharePanel}" ng-click="vm.showSharePanel = !vm.showSharePanel;">','   <i class="fa fa-share-alt" aria-hidden="true"></i> Share'," </a>",' <div class="stats-share-button__panel" ng-show="vm.showSharePanel">','   <div class="stats-share-button__inner">','     <span class="stats-share-button__label">Share on:</span>','     <a class="stats-share-button__icon" target="_blank" rel="noopener nofollow" href="http://www.facebook.com/sharer/sharer.php?u={{ vm.url }}&title={{ vm.title }}"><i class="fa fa-facebook"></i></a>','     <a class="stats-share-button__icon" target="_blank" rel="noopener nofollow" href="https://twitter.com/intent/tweet?url={{ vm.url }}&via=nbastats&text={{ vm.title }}"><i class="fa fa-twitter"></i></a>','     <input class="stats-share-button__text-input" type="text" ng-value="vm.url" />',"   </div>"," </div>"].join(""),controller:e,controllerAs:"vm"}}),e.$inject=["$scope","$element","$location","$timeout","AnalyticsService","DtmService","SocialService"]}(),function(){function e(a,t,e,n,i,r,s,o){a.multiSearch="";var l=o.get();a.allOptions="All "+a.split.label.replace("VS","")+"s",a.type&&"team"==a.type&&angular.forEach(a.split.options,function(e){var t=n("filter")(l,e.val)[0];e.abbr=t.abbr});var c=['<div class="multiselect-box">',"<ul>",'<li class="multiselect-box__search" ng-hide="!hasSearch">','<input type="text" placeholder="Search..." ng-model="multiSearch" />','<span class="clear-search" ng-if="multiSearch" ng-click="clearSearch()"><i class="fa fa-times"></i></span>',"</li>",'<li ng-click="selectAll()" class="multiselect-box__all" ng-class="{\'selected\': !split.selected.length}">',"{{allOptions}}","</li>",'<li ng-repeat="option in split.options | filter:multiSearch" ng-click="toggleItem(option, $event)" class="multiselect-box__option" ng-class="{\'selected\': isSelected(option) !== false}">',"{{ option.text }}","</li>","</ul>","</div>"].join(""),u=['<div class="multiselect-box">',"<ul>",'<li class="multiselect-box__search" ng-hide="!hasSearch">','<input type="text" placeholder="Search..." ng-model="multiSearch" />','<span class="clear-search" ng-if="multiSearch" ng-click="clearSearch()"><i class="fa fa-times"></i></span>',"</li>",'<li ng-click="selectAll()" class="multiselect-box__all" ng-class="{\'selected\': !split.selected.length}">',"{{allOptions}}","</li>",'<li ng-repeat="option in split.options | filter:multiSearch" ng-click="toggleItem(option, $event)" class="multiselect-box__option" ng-class="{\'selected\': isSelected(option) !== false}">',"{{ option.text }}","</li>","</ul>","</div>"].join(""),h={default:c,range:u,years:u,team:['<div class="multiselect-box">',"<ul>",'<li class="multiselect-box__search" ng-hide="!hasSearch">','<input type="text" placeholder="Search..." ng-model="multiSearch" />','<span class="clear-search" ng-if="multiSearch" ng-click="clearSearch()"><i class="fa fa-times"></i></span>',"</li>",'<li ng-click="selectAll()" class="multiselect-box__all" ng-class="{\'selected\': !split.selected.length}">',"{{allOptions}}","</li>",'<li ng-repeat="option in split.options | filter:multiSearch" ng-click="toggleItem(option, $event)" class="multiselect-box__option" ng-class="{\'selected\': isSelected(option) !== false}">',"{{ option.text }}","</li>","</ul>","</div>"].join("")},d=a.type?h[a.type]:h.default,f=angular.element(d),p=e(f),m=angular.element(r[0].parentElement),g=(m[0].offsetLeft,m[0].clientWidth,r[0].offsetTop+r[0].clientHeight);f.css({top:g,position:"absolute","z-index":999}),m.prepend(f),p(a),a.toggleMultiSelect=function(){t.$broadcast("hideAllMultiSelects",{caller:a.split.name}),g=r[0].offsetTop+r[0].clientHeight;var e=r[0].clientWidth;f.css({top:g,width:e}),f.toggleClass("ms-open"),r.toggleClass("multiselect--active")},a.$on("hideAllMultiSelects",function(e,t){t&&t.caller===a.split.name||(f.css({top:-99999}),f.removeClass("ms-open"),r.removeClass("multiselect--active"))}),a.$watch("split.selected.length",function(e){0===e?-1===a.split.label.indexOf("VS")?a.split.display="All "+a.split.label+"s":a.split.display=a.split.label.replace("VS","VS All")+"s":a.split.display=1==e?a.split.selected[0].text:e+" "+a.split.label.replace("VS ","")+"s"}),a.toggleItem=function(e,t){var n=a.isSelected(e);!1!==n?a.split.selected.splice(n,1):a.split.selected.push(e)},a.isSelected=function(e){var t;return a.split.selected&&(t=a.split.selected.indexOf(e)),-1<t&&t},a.clearSearch=function(){a.multiSearch=""},a.selectAll=function(e){a.split.selected=[]}}stats.directive("statsSplitMultiselect",function(){return{restrict:"EA",scope:{split:"=?",hasSearch:"@search",type:"@type"},template:['<div class="inner" ng-class="{\'inner--active\':(split.selected.length>0)}">','   <div class="labels" ng-click="toggleMultiSelect()">{{ ::split.label }}</div>','   <div class="ms-close" ng-click="toggleMultiSelect();"><i class="fa fa-caret-up" aria-hidden="true"></i></div>','   <div class="reset" ng-click="selectAll();"><i class="fa fa-times" aria-hidden="true"></i></div>','   <div class="multiselect-info" ng-click="toggleMultiSelect()">{{split.display}}</div>',"</div>"].join(""),controller:e}}),e.$inject=["$scope","$rootScope","$compile","$filter","$attrs","$element","$location","TeamsService"]}(),function(){function e(e,t){var n="nba-stat-table",a="__overflow",i=e.find("."+n);e.addClass("stats-table-next"),e.prepend('<div stats-table-pagination data-location="top"></div>'),e.append('<div stats-table-pagination data-location="bottom"></div>'),e.find("[sort]").attr("ripple","");var r,s=e.find("."+n+a).clone().removeClass(n+a).addClass(n+"__overlay"),o=+s.data("fixed")||0;0!==o&&(r="th:nth-child(n+"+(o+=1)+"), td:nth-child(n+"+o+")",s.find(r).remove(),i.append(s))}function t(l,i,c,a,n,r){var s,o,t={rowsPerPage:50,deeplink:!0,sortField:"",sortDirection:1},u=angular.extend({},t),h=(s={},i.find(".nba-stat-table__overflow thead tr:last-child th").each(function(e,t){var n=$(t),a={$elm:n,field:n.data("field"),text:n.hasClass("grouped")?n.attr("data-field"):n.text(),hasRank:void 0!==n.data("rank"),hasDir:void 0!==n.data("dir"),canSort:void 0!==n.data("sort"),canFilter:void 0!==n.data("cf"),isFilterList:void 0!==n.data("cf-list"),isGroup:n.hasClass("grouped")};a.dir=a.hasDir?+n.data("dir"):+u.dir,a.field&&(s[a.field]=a)}),s);l.currentPage=1,l.rowsPerPage=u.rowsPerPage,l.descending=1==+u.sortDirection,l.column=u.sortField,l.broadcast=_,l.$watch("rows",function(e){if(!e)return;m()},!0),l.$watch("options",function(e){if(!e)return;u=angular.extend({},t,e),m()},!0),l.$watch("filters",function(e){m()},!0),l.$watch("currentPage",g,!0),l.$watch("visibleRows",g,!0),r(function(){i.on("mousedown",".page-nav.left",e),i.on("mousedown",".page-nav.right",d),i.on("mousedown",".table-addrows__button",f),i.find("[sort]").on("mousedown",p)});var e=function(){1!==l.currentPage&&("All"===l.currentPage?l.currentPage=1:--l.currentPage,_("$statsTablePageChange",{$elm:i,page:l.currentPage}),l.$apply())},d=function(){l.currentPage!==l.totalPages&&("All"===l.currentPage?l.currentPage=1:l.currentPage+=1,_("$statsTablePageChange",{$elm:i,page:l.currentPage}),l.$apply())},f=function(e){l.visibleRows>=l.totalRows||(e.metaKey?l.visibleRows=l.totalRows:l.visibleRows=Math.min(l.visibleRows+u.rowsPerPage,l.totalRows),l.currentPage=1,_("$statsTableAddRows",{$elm:i,visibleRows:l.visibleRows}),l.$apply())};function p(e){var t=$(this),n=t.data("field"),a=void 0!==t.data("rank"),i=void 0!==t.data("dir"),r=0,r=n===l.column?0:i?+t.data("dir"):+u.dir;v(n,{apply:!0,field:n,hasRank:a,dir:r})}function m(){var e,t,n;l.rows&&(e=l.rows.slice(0),l.set=function(e,t){if(!t||0===t.length)return e;for(var n in t){var a=t[n];if(!a||!a.value)return;var i=a.value.split("*"),r=i[0],s=i[1],o=i[2];r&&s&&o&&(-1<r.indexOf("PCT")&&-1===r.indexOf("_RANK")&&(o/=100),e=c("equality")(e,s,o,r))}return e}(e,l.filters)||[],l.totalRows=l.set.length,l.visibleRows=u.rowsPerPage,l.totalPages=Math.ceil(l.totalRows/l.visibleRows),l.currentPage=1,l.descending=!0,l.column="",_("$statsTableFilter",{$elm:i,rows:l.set,filters:l.filters}),i.find("[sort]").removeClass("sorted"),(t=a.search().sort||u.sortField)&&h[t]&&(n={apply:!1,field:t,hasRank:h[t].hasRank||!1,dir:+a.search().dir||+h[t].dir},v(t,n)),g())}function g(e){var t,n;l.rows&&l.rows.length&&(n="All"===l.currentPage?(t=0,l.totalRows):(t=(l.currentPage-1)*l.visibleRows)+l.visibleRows,l.page=l.set.slice(t,n),r.cancel(o),o=r(y))}var v=function(e,t){l.column=e,-1===t.dir?l.descending=!1:0===t.dir?l.descending=!l.descending:l.descending=!0,u.deeplink&&(a.search("sort",e),a.search("dir",l.descending?1:-1));var n=t.hasRank?e+"_RANK":e;l.set.forEach(function(e,t){var n=e+"_RANK";t.__rank=t[n]?t[n]:null}.bind("",e)),c("statsSort")(l.set,n,l.descending),l.page=l.set.slice(0),l.currentPage=1,g(),t.apply&&l.$apply(),r.cancel(o),o=r(y)};function y(){var e=i.find("table").eq(0),t=e.find("th[data-field='"+l.column+"']"),n=e.find("thead tr:last-child th").index(t)+1;i.find(".sorted").removeClass("sorted asc desc").end().find("thead tr:last-child > *:nth-child("+n+")").addClass("sorted").addClass(l.descending?"desc":"asc").end().find("tbody tr > *:nth-child("+n+")").addClass("sorted").end(),_("$statsTableSort",{$elm:i,column:l.column,descending:l.descending,rows:l.set})}function _(e,t){n.$broadcast(e,t)}r(function(){_("$statsTableLoad",{$elm:i})}),r(function(){i.on("click","tbody > tr",function(e){var t=$(e.currentTarget),n=t.attr("index")||t.attr("data-index"),a=t.attr("paged-index")||t.attr("data-paged-index");_("$statsTableRowClick",{$elm:i,$row:t,index:+n,pagedIndex:+a,data:l.page[n]})})}),r(function(){var e=i.find(".nba-stat-table__overflow [cf]").map(function(e,t){var n,a=$(t),i=a.attr("data-field"),r=a.hasClass("grouped")?a.attr("data-field"):a.text(),s=void 0!==a.attr("cf-list"),o=[];return s&&(n=c("groupBy")(l.rows,i),(o=Object.keys(n).sort()).unshift("")),{name:i,text:r,type:s?"list":"text",list:o}});l.$emit("customFields",e)})}stats.directive("nbaStatTable",function(){return{restrict:"E",require:"nbaWith",templateUrl:function(e,t){return["/stats/templates/angular/tables/",t.template,".html"].join("")},scope:{template:"@",title:"@",rows:"<",footer:"<",options:"<",filters:"<",params:"<",ai:"<",season:"@"},compile:e,controller:t}}),t.$inject=["$scope","$element","$filter","$location","$rootScope","$timeout"]}(),function(){function e(t,e,n,a){var i="stats-table-pagination";e.addClass(i),a(function(){e.find("."+i+"__inner").addClass(i+"__inner--"+e.data("location"))});var r=this;r.data={page:1,pages:[]},t.nav=function(e){if("All"===r.data.page)return;r.data.page=Math.min(Math.max(1,r.data.page+e),t.totalPages)},t.$watch("totalPages",function(){r.data.pages=n("range")(1,t.totalPages),r.data.pages.unshift("All")}),t.$watch("currentPage",function(){r.data.page=t.currentPage}),t.$watch("vm.data.page",function(){t.currentPage=r.data.page})}stats.directive("statsTablePagination",function(){return{restrict:"A",replace:!1,template:['<div class="stats-table-pagination__inner" ng-if="totalPages > 1">','   <div class="stats-table-pagination__info">',"     {{ totalRows }} Rows | Page ",'     <select class="stats-table-pagination__select" ng-model="vm.data.page" ng-options="p for p in vm.data.pages"></select>',"     of {{totalPages}}",'     <a class="stats-table-pagination__prev" href="" alt="Previous Page" ng-click="nav(-1)">','       <i class="fa fa-angle-left" aria-hidden="true"></i>',"     </a>",'     <a class="stats-table-pagination__next" href="" alt="Next Page" ng-click="nav(1)">','       <i class="fa fa-angle-right" aria-hidden="true"></i>',"     </a>","   </div>","</div>"].join(""),controller:e,controllerAs:"vm"}}),e.$inject=["$scope","$element","$filter","$timeout"]}(),function(){function e(m,e,t,a,r,n){e.bind("contextmenu",function(){return!1}),e.addClass("stats-video-player");var i=!1;m.currentIndex=0,n.yOffset=100;var s=e,o="https://videos.nba.com/nba/static/missing.mp4",l="https://videos.nba.com/nba/static/nba-logo_1280x720.jpg",c="https://videos.nba.com/nba/static/nba-logo_960x540.jpg",u="https://videos.nba.com/nba/static/nba-logo_320x180.jpg",h="stats_video_quality",d="stats_cc_mode",f={low:320,med:960,high:1280};m.$watch("playlist",function(){if(!m.playlist)return;i=!0,function(){if(!i)return;C(m.playlist)}()}),m.$on("$statsTableRowClick",P),m.$on("$shotchartShotClick",P);var p=window.videojs("stats-videojs-player",{textTrackSettings:!1,autoplay:!0,muted:!1,controls:!0,liveui:!1,preload:"auto",fluid:!0,plugins:{videoJsResolutionSwitcher:{default:x().video,dynamicLabel:!0}},controlBar:{pictureInPictureToggle:!0===document.pictureInPictureEnabled}}),g=window.ADB.va.MediaHeartbeat,v=window.ADB.va.MediaHeartbeatConfig,y=window.ADB.va.MediaHeartbeatDelegate,_=new v;_.trackingServer="nbaprop.hb.omtrdc.net",_.playerName="HTML5 Basic",_.channel="Video Channel",_.debugLogging=!1,_.appVersion="2.0",_.ssl=!0,_.ovp="HTML5";var b=new y;b.getCurrentPlaybackTime=function(){return p.currentTime()||0};var S=window.s_digital?new g(b,_,window.s_digital):null;function T(e){var t=m.playlist[m.currentIndex],n=t.dsc,a=t.videos.uuid,i=t.htm.city||"",r=t.htm.name||"",s=t.vtm.city||"",o=t.vtm.name||"",l="".concat(i," ").concat(r).trim(),c="".concat(s," ").concat(o).trim(),u=t.gdate,h=t.gi,d="".concat(c," @ ").concat(l,", ").concat(u),f=g.createMediaObject(n,a,e||0,g.StreamType.VOD),p={"nba.matchup":d,"nba.gameid":h,"nba.digitalproduct":"nba-stats"};f.setValue(g.MediaObjectKey.StandardVideoMetadata,{}),S.trackSessionStart(f,p),S.trackPlay()}function w(){var e=document.cookie.split("; ").map(function(e){return e}).map(function(e){return e.split("=")}),t={};return e.map(function(e){return t[e[0]]=e[1]}),t}function P(e,t){"$shotchartShotClick"===e.name?m.currentIndex=t.data?t.data.idx:t.index:m.currentIndex=t.pagedIndex,window.s_digital&&(S.trackSessionEnd(),T(p.duration())),s&&s[0]&&(document.pictureInPictureElement||n("stats-video-player_container")),C(m.playlist)}function x(){var e=window.outerWidth,t={};if(w()&&w()[h])switch(+w()[h]){case 1280:t={video:f.high,poster:"lth",label:"high",src:"lurl"};break;case 960:t={video:f.med,poster:"mth",label:"med",src:"murl"};break;case 320:t={video:f.low,poster:"sth",label:"low",src:"surl"}}else t=e<640?{video:f.low,poster:"sth",label:"high",src:"lurl"}:e<960?{video:f.med,poster:"mth",label:"med",src:"murl"}:{video:f.high,poster:"lth",label:"high",src:"surl"};return t}function C(n){var i;m.item=n,$("body .stats-events-page tr.events-current-playing-video").length&&$("body .stats-events-page tr.events-current-playing-video").each(function(e,t){$(t).removeClass("events-current-playing-video")}),$('[data-paged-index="'+m.currentIndex+'"]').length&&$('[data-paged-index="'+m.currentIndex+'"]').addClass("events-current-playing-video"),n[m.currentIndex]&&n[m.currentIndex].hasVideos?(i=[{type:"video/mp4",src:n[m.currentIndex].videos?n[m.currentIndex].videos.lurl:n[m.currentIndex].lurl,label:"high",res:f.high},{type:"video/mp4",src:n[m.currentIndex].videos?n[m.currentIndex].videos.murl:n[m.currentIndex].murl,label:"med",res:f.med},{type:"video/mp4",src:n[m.currentIndex].videos?n[m.currentIndex].videos.surl:n[m.currentIndex].surl,label:"low",res:f.low}],n.length<2&&p.poster(n[m.currentIndex].videos?n[m.currentIndex].videos[x().poster]:n[m.currentIndex][x().poster]),r(function(){m.videoDesc=t("eventDesc")(m.item[m.currentIndex].dsc)},0),p.ready(function(){var e,t,a;e=p,t=i,a=m.playlist[m.currentIndex],e.updateSrc(t),e.on("resolutionchange",function(){var e=p.remoteTextTracks();e&&e.tracks_&&e.tracks_.length&&e.tracks_.forEach(function(e){p.removeRemoteTextTrack(e)});var t=p.currentResolution().sources[0].res;document.cookie="".concat(h,"=").concat(t,"; Path=/"),m.playlist.length<2&&p.poster(a[x().poster]),p.addRemoteTextTrack({kind:"captions",label:"English",language:"en",srclang:"en",id:a.uuid,src:a.vtt},!1);var n=p.remoteTextTracks();n&&n.length&&(w()&&w()[d]&&(n[0].mode="showing"),$("li.vjs-menu-item.vjs-captions-menu-item").on("click",function(e){document.cookie="".concat(d,"=",!0,"; Path=/")}),$("li.vjs-menu-item").on("click",function(e){"captions off"===$(e.currentTarget).children()[0].innerHTML&&(document.cookie="".concat(d,"=","; Path=/"))}))}),p.currentResolution(x().label,function(e,t){return e.src(t[0])}),p.addRemoteTextTrack({kind:"captions",label:"English",language:"en",srclang:"en",id:n[m.currentIndex].videos?n[m.currentIndex].videos.uuid:n[m.currentIndex].uuid,src:n[m.currentIndex].videos?n[m.currentIndex].videos.vtt:n[m.currentIndex].vtt},!1).addEventListener("load",function(e){var t=p.remoteTextTracks();t&&t.length&&(w()&&w()[d]&&(t[0].mode="showing"),$(".vjs-subs-caps-button .vjs-menu-item-text").on("click",function(e){var t=$(e.currentTarget).text();document.cookie="captions off"===t?"".concat(d,"=","; Path=/"):"".concat(d,"=",!0,"; Path=/")}))}),p.play()})):n[m.currentIndex]&&!n[m.currentIndex].hasVideos?p.ready(function(){switch(x().poster){case"lth":p.poster(l);break;case"mth":p.poster(c);break;default:p.poster(u)}r(function(){m.videoDesc="Video Loading"},0),p.play()}):p.ready(function(){p.src(o),r(function(){m.videoDesc="Video Not Available"},0),p.play()}),a.$broadcast("onFocusGameEvent",n)}p.on("loadedmetadata",function(){S&&T(p.duration())}),p.on("play",function(){!isNaN(p.duration())&&S&&S.trackPlay()}),p.on("pause",function(){S&&S.trackPause(),$(".vjs-subs-caps-button .vjs-menu-item-text").on("click",function(e){var t=$(e.currentTarget).text();document.cookie="captions off"===t?"".concat(d,"=","; Path=/"):"".concat(d,"=",!0,"; Path=/")})}),p.on("ended",function(){var e,n,t=1<m.playlist.length,a=void 0!==m.playlist[m.currentIndex+1];t&&a&&(m.currentIndex=m.currentIndex+1,m.playlist[m.currentIndex].hasVideos||(e=m.playlist.slice(m.currentIndex),n=null,e.forEach(function(e,t){!n&&e.hasVideos&&(n=t+m.currentIndex)}),n&&(m.currentIndex=n)),C(m.playlist),S&&(S.trackComplete(),S.trackSessionEnd()))})}stats.directive("statsVideoPlayer",function(){return{restrict:"E",replace:!1,scope:{playlist:"="},templateUrl:"/stats/templates/angular/directives/stats-video-player.html",controller:e}}),e.$inject=["$scope","$element","$filter","$rootScope","$timeout","$anchorScroll"]}(),function(){function e(t,e,n){var a=n.statsWith.split(" as ");2==a.length&&t.$watch(a[0],function(e){t[a[1]]=e},!0)}stats.directive("statsWith",function(){return{scope:!0,link:e}})}(),function(){function e(e,n,t,a,i){var r=angular.element(window),s=angular.element(".nav-container"),o="none"!==s.css("display")?Number(s.css("height").slice(0,-2)):0,l=n.parent().offset().top-o,c=Number(n.css("height").slice(0,-2));n.parent().css("min-height",c);var u=window.innerWidth|document.documentElement.clientWidth|document.body.clientWidth;function h(){r.scrollTop()>=l?d("fixed",o.toString()+"px"):d("relative","auto")}function d(e,t){n.css({position:e,top:t})}function f(){u=window.innerWidth|document.documentElement.clientWidth|document.body.clientWidth,c=Number(n.css("height").slice(0,-2)),n.parent().css("min-height",c),l=n.parent().offset().top-o}i(function(){f(),h();var e=0,t=setInterval(function(){f(),h(),5<=++e&&clearInterval(t)},1500)},0),r.on("scroll",function(e){750<=u&&h()}),r.on("resize",function(e){f(),750<=u&&h()})}stats.directive("stickyHeader",function(){return{restrict:"A",controller:e}}),e.$inject=["$scope","$element","$attrs","$location","$timeout"]}(),function(){function t(e){return e%1!=0&&(e=Math.round(e)),9<e?e:"0"+e}stats.filter("convertMin",function(){return function(e){return!e.minutes&&!e.seconds||0==e.minutes&&0==e.seconds?0:t(Number(e.minutes))+":"+t(Number(e.seconds))}})}(),stats.filter("countdownClock",function(){return function(e){if(null==e)return e;var t,n,a="",i=0;e<=7200&&(a="Q1",i=7200-e),7200<e&&e<=14400&&(a="Q2",i=7200-e+7200),14400<e&&e<=21600&&(a="Q3",i=7200-e+14400),21600<e&&e<=28800&&(a="Q4",i=7200-e+21600),28800<e&&(n=e-28800,i=3e3*(t=Math.ceil(n/3e3))-e+28800,a="OT"+t);var r=i/10;return[a,[("0"+Math.floor(r/60)).substr(-2),("0"+Math.floor(r%60)).substr(-2)].join(":")].join(" - ")}}),stats.filter("decimalTime",function(){return function(e,t){var n=0,a=Math.min(e,4),i=Math.max(e-4,0);if(!t)return n=7200*a+3e3*i;var r=t.split(":"),s=+r[0],o=+r[1];return e<=4?n=7200*(e-1)+(7200-(600*s+10*o)):(n=3e3*(i-1)+(3e3-(600*s+10*o)),n+=28800),n}}),stats.filter("equality",function(){return function(e,t,n,a){if(e&&t){var i={E:function(e){return a&&"string"==typeof e[a]?-1<e[a].toLowerCase().indexOf(n.toLowerCase()):a?e[a]==n:"string"==typeof e?-1<e.toLowerCase().indexOf(n.toLowerCase()):e==n},NE:function(e){return a&&"string"==typeof e[a]?-1===e[a].toLowerCase().indexOf(n.toLowerCase()):a?e[a]!=n:"string"==typeof e?-1===e.toLowerCase().indexOf(n.toLowerCase()):e!=n},G:function(e){return a?e[a]>n:n<e},GE:function(e){return a?e[a]>=n:n<=e},L:function(e){return a?e[a]<n:e<n},LE:function(e){return a?e[a]<=n:e<=n},R:function(e){try{var t=new RegExp(n,"ig");return a?t.test(e[a]):t.test(e)}catch(e){return!0}}}[t.toUpperCase()];if(i)return e.filter(i)}}}),stats.filter("eventDesc",function(){return function(e){return e.length?e.replace("#@#"," & "):e}}),function(){function e(a){return function(e,t,n){return a(t)(e,n)}}stats.filter("format",e),e.$inject=["$filter"]}(),function(){function e(n){return function(e){if(!e)return e;var t={GameID:e=e.toString(),LeagueID:e.substr(0,2),st:+e.substr(2,1),yearid:e.substr(3,2)};return t.isPre=1===t.st,t.isReg=2===t.st,t.isAllstar=3===t.st,t.isPlayoffs=4===t.st,t.isPlayin=5===t.st,t.isFinals=t.isPlayoffs&&"4"===e.charAt(7),t.league=n("leagueIdToName")(t.LeagueID),t.SeasonType=n("seasonTypeIdToSeasonType")(t.st),4===t.st||5===t.st?(t.round=+e.substr(7,1),t.series=+e.substr(8,1),t.game=+e.substr(9,1)):t.gamenumber=+e.substr(-4),t.seasonyear=(45<=parseInt(t.yearid,10)?"19":"20")+t.yearid,t.seasonyear=+t.seasonyear,t.Season=n("seasonyear")(t.seasonyear),t}}stats.filter("gameIdToObject",e),e.$inject=["$filter"]}(),stats.filter("gameStateClockFilter",function(){return function(e,t){return/(start|end|final|halftime)/gi.test(t)?"":e}}),stats.filter("gameStateStatusFilter",function(){return function(e,t,n){return 3==+t&&4<+n?"Final/OT":e}}),stats.filter("groupBy",function(){var c={asArray:!1,isCaseSensitive:!0};return function(e,t,n){if(e){var a,i=angular.extend({},c,n),r={},s=[];for(a in e){var o=e[a],l="";angular.isString(t)?l=o[t]:angular.isFunction(t)&&(l=t(o)),r[l]||(r[l]={group:l,items:[]},s.push(r[l])),r[l].items.push(o)}return i.asArray?s:r}}}),function(){function e(e,n){return function(t){if(!t)return t;var e=n.LeagueID.options.find(function(e){return e.val==t});return e?e.text:t}}stats.filter("leagueIdToName",e),e.$inject=["$filter","SPLITS"]}(),stats.filter("leagueRanking",function(){return function(e){return e&&"NR"!=e?"#"+e:"NR"}}),stats.filter("lineupToolFilter",function(){return function(e){return e.split("_").filter(function(e){return"_"!==e}).join(" ")}}),stats.filter("lineup",function(){return function(e){return e.split(" - ").map(function(e){var t=e.split(","),n=t[1]||"",a=t[0];return n.charAt(0)+"."+a}).join(", ")}}),stats.filter("minutesToSeconds",function(){return function(e){if(!e)return null;var t=(e+"").split(":");return 2!==t.length?null:60*t[0]+ +t[1]}}),stats.filter("notFirst",function(){return function(e){return e.shift(),e}}),stats.filter("ordinal",function(){return function(e,t){if(!e)return"-";var n=["th","st","nd","rd"],a=e%100,i=n[(a-20)%10]||n[a]||n[0];return t?i:e+i}}),stats.filter("padLeft",function(){return function(e,t,n){if(null==e)return"-";if(t=parseInt(t,10)||0,e=(n=n.toString())+e.toString(),!t)return e;for(;e.length<t;)e=n+e;return e.slice(-t)}}),stats.filter("param",function(){return function(t,e){return(e?"?":"")+Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")}}),stats.filter("percent",function(){return function(e,t){if(1===e)return t?"100%":100;if(null==e||isNaN(e)||e===1/0)return"-";var n=(100*e).toFixed(1);return t?n+"%":n}}),stats.filter("periodToText",function(){return function(e){return e<=4?"Q"+e:"OT"+(e-4)}}),stats.filter("permode",function(){return function(e,t,n,a){if(null===e)return"-";if(""===e)return"";if(!e&&0!==e)return e;var i={MIN:{PerGame:1,Per100Possessions:1,Per100Plays:1,PerPossession:3,PerPlay:3,default:0},DIST_MILES:{default:1},NBA_FANTASY_PTS:{PerMinute:2,PerPlay:3,PerPossession:3,default:1},PARTIAL_POSS:{default:0},CHARGES_DRAWN:{Totals:0,default:2},default:{Total:0,Totals:0,PerMinute:2,PerPlay:3,PerPossession:3,default:a?+a:1}},r=i[n]||i.default,s=void 0!==r[t]?r[t]:r.default;return e.toFixed(s)}}),stats.filter("playerFirstLast",function(){return function(e,t){var n={fn:"",ln:""};return e&&"string"==typeof e&&(n.fn=e.match(/([a-zA-Z\-.]+)(.*)/)[1],n.ln=e.match(/([a-zA-Z\-.]+)(.*)/)[2]),t?n[t]:n}}),function(){function e(i,e){return function(e,t){var n=e.map(function(e){var t={type:parseInt(e.SEASON_ID.substr(0,1),10),year:parseInt(e.SEASON_ID.substr(1,4),10)};return t.Season=i("seasonyear")(t.year),t.SeasonType=i("seasonTypeIdToSeasonType")(t.type),t}).filter(function(e){return 3!==e.type}),a=n[n.length-1];if(a.year!==t.SeasonYear)return t;if(a.SeasonType===t.SeasonType)return t;if("Playoffs"===a.SeasonType&&"Regular Season"===t.SeasonType)return t;switch(t.SeasonType){case"Playoffs":case"All Star":t.SeasonType="Regular Season";break;case"Regular Season":t.SeasonType="Pre Season";break;case"Pre Season":t.SeasonType="Regular Seaspon",t.SeasonYear=t.SeasonYear-1,t.Season=i("seasonyear")(t.SeasonYear)}return t}}stats.filter("playerSeason",e),e.$inject=["$filter","SPLITS"]}(),function(){function e(r){return function(e,t,n){for(var a=[],i=e;i<=t;i+=1)n?a.push(r(n)(i)):a.push(i);return a}}stats.filter("range",e),e.$inject=["$filter"]}(),stats.filter("reverse",function(){return function(e){if(e&&Array.isArray(e))return e.slice().reverse()}}),stats.filter("seasonToSeasonYear",function(){return function(e){if(e){var t=parseInt(e.substr(0,4),10);return isNaN(t)?e:t}}}),function(){function e(i){return function(e){var t=parseInt(e,10),n=i.SeasonType.options;if(!t)return"";4<t&&(t=2);var a=n.find(function(e){return e.st===t});return a?a.val:""}}stats.filter("seasonTypeIdToSeasonType",e),e.$inject=["SPLITS"]}(),stats.filter("seasonyear",function(){return function(e){return e+"-"+(+e+1).toString().slice(-2)}}),function(){function t(e,t){1!==e.etype&&2!==e.etype||(e.SHOT_ATTEMPTED_FLAG=1,e.SHOT_DISTANCE=Math.sqrt(e.locX*e.locX+e.locY*e.locY),3===e.opt1&&(e.locY<88&&e.locX<0?e.SHOT_ZONE_BASIC="Left Corner 3":e.locY<88&&0<e.locX?e.SHOT_ZONE_BASIC="Right Corner 3":418<e.locY?e.SHOT_ZONE_BASIC="Backcourt":e.SHOT_ZONE_BASIC="Above the Break 3"),2===e.opt1&&(-80<e.locX&&e.locX<80&&e.locY<139?e.SHOT_DISTANCE<40&&-12<e.locY?e.SHOT_ZONE_BASIC="Restricted Area":e.SHOT_ZONE_BASIC="In The Paint (Non-RA)":e.SHOT_ZONE_BASIC="Mid-Range"),e.SHOT_DISTANCE=Math.floor(e.SHOT_DISTANCE/10))}stats.filter("shotZone",function(){return function(e){if(!e)return e;e.forEach(t)}})}(),stats.filter("slice",function(){return function(e,t,n){return e&&Array.isArray(e)?e.slice(t,n):e}}),function(){function e(i){return function(e,t){if(null===e)return"-";var n=/_fmtD(\d+)$/;if(-1<(t+="").indexOf("_fmtPCT"))return(100*e).toFixed(1);if(-1<t.indexOf("_PG"))return e.toFixed(1);if(-1<t.indexOf("_RATING"))return e.toFixed(1);if(null===n.exec(t))return-1<t.indexOf("PCT")?(100*e).toFixed(1):-1<t.indexOf("JERSEY")?"#"+e:-1<t.indexOf("_fmtINT")?i("number")(e,0):e;var a=n.exec(t)[1];return e.toFixed(a)}}stats.filter("statFieldFormatter",e),e.$inject=["$filter"]}(),stats.filter("statFieldToText",function(){return function(e){return e=(e+="").replace(/_fmt.*$/," ").replace("PCT","%").replace("_NUM"," ").replace(/_/g," ").replace("Regular_Season"," Regular Season")}}),function(){function e(i){return function(e,t,n){parseInt(t,10);var a=isNaN(+t)?"percent"===t||-1<n.indexOf("PCT")?i("percent")(e):"winPct"===t?i("winPct")(e):"none"===t?e:i("permode")(e,t,n):i("number")(e,t);return""===a||null===a?"-":a}}stats.filter("statNumber",e),e.$inject=["$filter"]}(),function(){function e(s){return function(e,t,n){if(!e)return e;var a=e.slice(0),i=!1,r=parseInt(n);return"-"===t.substr(0,1)&&(t=t.substr(1),i=!0),s("statsSort")(a,t,i),r&&(a=a.slice(0,n)),a}}stats.filter("statOrder",e),e.$inject=["$filter"]}(),stats.filter("statRank",function(){return function(n,a,i){return n&&n.forEach(function(e,t){0===t?e[i]=1:e[a]===n[t-1][a]?e[i]=n[t-1][i]:e[i]=t+1}),n}}),function(){function e(n){return function(e){var t=document.createElement("textarea");return t.innerHTML=e,n.trustAsHtml(t.value)}}stats.filter("statsTrusted",e),e.$inject=["$sce"]}(),stats.filter("statsSort",function(){return function(e,t,n){e.sort(function(e,t,n,a){var i=t?n[e]:a[e],r=t?a[e]:n[e];return null===n[e]||void 0===n[e]?1:null===a[e]||void 0===a[e]||r<i?-1:i<r?1:0}.bind(null,t,n))}}),stats.filter("teamnameToCode",function(){return function(e){return e?e.toString().replace(/ /g,"_").toLowerCase():e}}),stats.filter("toFeetAndInches",function(){return function(e){return e=parseInt(e,10),[Math.floor(e/12),e%12].join("-")}}),stats.filter("toInches",function(){return function(e){var t=e.split("-"),n=12*(parseInt(t[0],10)||0)+(parseInt(t[1],10)||0);return isNaN(n)||0===n?null:n}}),function(){function e(r){return function(e,t,n,a){if(!e||!t)return e;var i=r.getById(e[t]);return i?"".concat(i.city," ").concat(i.name):"".concat(e[n]," ").concat(e[a])}}stats.filter("toTeamName",e),e.$inject=["TeamsService"]}(),stats.filter("uniqueKey",function(){return function(e,n){var a={};return e.filter(function(e){var t=e[n];return!a[t]&&(a[t]=!0)})}}),stats.filter("winPct",function(){return function(e){return(e=+e).toFixed(3).substr(1===e?0:1)}}),stats.config(["$locationProvider","$routeProvider",function(e,n){if(!window.nbaStatsRoute)return;e.html5Mode(!0);var a=window.location.pathname;[["/game/","/","angular/views/game/game-traditional.html"],["/game/","/advanced/","angular/views/game/game-advanced.html"],["/game/","/four-factors/","angular/views/game/game-four-factors.html"],["/game/","/misc/","angular/views/game/game-misc.html"],["/game/","/scoring/","angular/views/game/game-scoring.html"],["/game/","/usage/","angular/views/game/game-usage.html"],["/game/","/hustle/","angular/views/game/game-hustle.html"],["/game/","/defense/","angular/views/game/game-defense.html"],["/game/","/matchups/","angular/views/game/game-matchups.html"],["/game/","/playbyplay/","angular/views/game/game-playbyplay.html"],["/game/","/tracking/","angular/views/game/game-playertracking.html"],["/game/","/charts/","angular/views/game/game-charts.html"],["/game/","/shotchart/","angular/views/game/game-shotchart.html"],["/game/","/rotations/","angular/views/game/game-rotations.html"],["/player/","/","angular/views/player/player-stats-profile.html"],["/player/","/stats/","angular/views/player/player-stats-profile.html"],["/player/","/fantasy/","angular/views/player/player-fantasy.html"],["/player/","/traditional/","angular/views/player/player-traditional.html"],["/player/","/advanced/","angular/views/player/player-advanced.html"],["/player/","/misc/","angular/views/player/player-misc.html"],["/player/","/scoring/","angular/views/player/player-scoring.html"],["/player/","/shooting/","angular/views/player/player-shooting.html"],["/player/","/usage/","angular/views/player/player-usage.html"],["/player/","/career/","angular/views/player/player-career.html"],["/player/","/boxscores/","angular/views/player/player-boxscores.html"],["/player/","/boxscores-traditional/","angular/views/player/player-boxscores-traditional.html"],["/player/","/boxscores-advanced/","angular/views/player/player-boxscores-advanced.html"],["/player/","/boxscores-misc/","angular/views/player/player-boxscores-misc.html"],["/player/","/boxscores-scoring/","angular/views/player/player-boxscores-scoring.html"],["/player/","/boxscores-usage/","angular/views/player/player-boxscores-usage.html"],["/player/","/shots-dash/","angular/views/player/player-shots-dash.html"],["/player/","/rebounds-dash/","angular/views/player/player-rebounds-dash.html"],["/player/","/passes-dash/","angular/views/player/player-passes-dash.html"],["/player/","/defense-dash/","angular/views/player/player-defense-dash.html"],["/player/","/news/","angular/views/player/player-news.html"],["/player/","/head-to-head/","angular/views/player/player-matchups-head-to-head.html"],["/player/","/by-position/","angular/views/player/player-matchups-by-position.html"],["/team/","/","angular/views/team/team-profile.html"],["/team/","/stats/","angular/views/team/team-profile.html"],["/team/","/traditional/","angular/views/team/team-traditional.html"],["/team/","/advanced/","angular/views/team/team-advanced.html"],["/team/","/four-factors/","angular/views/team/team-four-factors.html"],["/team/","/misc/","angular/views/team/team-misc.html"],["/team/","/scoring/","angular/views/team/team-scoring.html"],["/team/","/opponent/","angular/views/team/team-opponent.html"],["/team/","/shooting/","angular/views/team/team-shooting.html"],["/team/","/lineups-traditional/","angular/views/team/team-lineups-traditional.html"],["/team/","/lineups-advanced/","angular/views/team/team-lineups-advanced.html"],["/team/","/lineups-four-factors/","angular/views/team/team-lineups-four-factors.html"],["/team/","/lineups-misc/","angular/views/team/team-lineups-misc.html","lineups-misc"],["/team/","/lineups-scoring/","angular/views/team/team-lineups-scoring.html","lineups-scoring"],["/team/","/lineups-opponent/","angular/views/team/team-lineups-opponent.html","lineups-opponent"],["/team/","/players-traditional/","angular/views/team/team-players-traditional.html"],["/team/","/players-advanced/","angular/views/team/team-players-advanced.html"],["/team/","/players-misc/","angular/views/team/team-players-misc.html"],["/team/","/players-scoring/","angular/views/team/team-players-scoring.html"],["/team/","/players-usage/","angular/views/team/team-players-usage.html"],["/team/","/onoffcourt-traditional/","angular/views/team/team-onoffcourt-traditional.html"],["/team/","/onoffcourt-advanced/","angular/views/team/team-onoffcourt-advanced.html"],["/team/","/onoffcourt-four-factors/","angular/views/team/team-onoffcourt-four-factors.html"],["/team/","/onoffcourt-misc/","angular/views/team/team-onoffcourt-misc.html"],["/team/","/onoffcourt-scoring/","angular/views/team/team-onoffcourt-scoring.html"],["/team/","/onoffcourt-opponent/","angular/views/team/team-onoffcourt-opponent.html"],["/team/","/onoffcourt-summary/","angular/views/team/team-onoffcourt-summary.html"],["/team/","/boxscores/","angular/views/team/team-boxscores.html"],["/team/","/boxscores-traditional/","angular/views/team/team-boxscores-traditional.html"],["/team/","/boxscores-advanced/","angular/views/team/team-boxscores-advanced.html"],["/team/","/boxscores-four-factors/","angular/views/team/team-boxscores-four-factors.html"],["/team/","/boxscores-misc/","angular/views/team/team-boxscores-misc.html"],["/team/","/boxscores-scoring/","angular/views/team/team-boxscores-scoring.html"],["/team/","/seasons/","angular/views/team/team-seasons.html"],["/team/","/franchise-leaders/","angular/views/team/team-franchise-leaders.html"],["/team/","/yearoveryear/","angular/views/team/team-yearoveryear.html"],["/team/","/shots-dash/","angular/views/team/team-shots-dash.html"],["/team/","/rebounds-dash/","angular/views/team/team-rebounds-dash.html"],["/team/","/passes-dash/","angular/views/team/team-passes-dash.html"],["/team/","/matchups/","angular/views/team/team-matchups.html"],["/summer-league/","/team/:LeagueID/:TeamName/","angular/views/summerleague/team.html"]].filter(function(e){var t="/stats"+e[0];return 0===a.indexOf(t)}).forEach(function(e){var t=e[1];n.when(t,{templateUrl:"/stats/templates/"+e[2],reloadOnSearch:!1})})}]),function(){function e(n,e,t,a,i,r,s){n.isLoading=!0,n.hasBoxscore=!1,n.hasRoster=!1,n.activeSection="boxscore";var o={league:e.data("league"),leagueid:e.data("league-id"),season:e.data("season"),gameid:e.data("game-id")};n.data={vtm:{tid:e.data("vtm-id")},htm:{tid:e.data("htm-id")}};var l,c=6e4,u=1e4;function h(){var e,t=n.boxscore&&n.boxscore.st?n.boxscore.st:1;3!==t&&(e=2===t?u:c,a(d.bind("",o),e))}function d(e){i.get(e.gameid,e).then(function(e){n.isLoading=!1,n.boxscore=e,n.hasBoxscore=e.st&&1<e.st,h()}).catch(function(e){console.error("error getting game detail",e),h()}),r.get(e.gameid,e).then(function(e){n.events=e}).catch(function(e){console.error("error getting play by play",e)})}d(o),l=o,s.get(l).then(function(e){n.players=e,n.hasRoster=!0,n.data.vtm.pls=t("filter")(e,{tid:n.data.vtm.tid}),n.data.htm.pls=t("filter")(e,{tid:n.data.htm.tid})}).catch(function(e){console.error("error getting players")})}stats.controller("AfricaGameController",e),e.$inject=["$scope","$element","$filter","$timeout","MobileGameDetailService","MobilePlayByPlayService","MobilePlayerInfoService"]}(),function(){function e(u,e,a,s,t,n,i,r,o,l,c,h){var d=s.get(["LeagueID",{name:"LeagueID",include:[{val:"20",text:"G League"},{val:"09",text:"Draft Combine"}],without:["20","09","99","14","12"]},{name:"SeasonType",without:["All Star"]},{name:"ReportType",initial:"Team"}]),f=s.get([{name:"Location",include:[{val:"Away",text:"Road"}],without:["Road"]},"VsConference","VsDivision","OpponentTeamID","Outcome","VsOpponents",{name:"Disabled",label:"Select Opponent Type",default:"Select VS Opponent",type:"pseudo",desc:"Opponent"}]);function p(){u.movedGames.length&&u.movedPlayerGames&&u.movedPlayerGames.length&&(u.movedGames=u.movedGames.filter(function(e){return!u.movedPlayerGames.includes(e)})),u.movedGames.length&&u.movedTeamGames&&u.movedTeamGames.length&&(u.movedGames=u.movedGames.filter(function(e){return!u.movedTeamGames.includes(e)})),u.movedGames.length||(u.cumeStats={}),v()}function m(){var e={LeagueID:u.splits.LeagueID.selected.val,SeasonType:u.splits.SeasonType.selected.val};h.get(e).then(function(e){var t,n;u.selectedSeason?s.runSplits(u._splits.Season):(u._splits.Season=e.CumeStatsSeasonList,t=e.CumeStatsSeasonList.rows.map(function(e){return{val:e.SEASON_ID,text:a("seasonyear")(e.SEASON_ID)}}),n=s.get([{name:"Season",label:"Season",default:e.CumeStatsSeasonList.rows[0].SEASON_ID,initial:e.CumeStatsSeasonList.rows[0].SEASON_ID,order:e.CumeStatsSeasonList.rows.length,type:"select",desc:"Select Cume Stats Season",options:t}]).splits,u._splits.Season=n.Season,u.selectedSeason=u._splits.Season.selected)}).then(function(){s.findDefault(u._splits.Season);var r,e={LeagueID:u.splits.LeagueID.selected.val,Season:u._splits.Season?u._splits.Season.selected.val:u.selectedSeason.val,SeasonType:u.splits.SeasonType.selected.val};switch(u.splits.ReportType.selected.val){case"Player":r=n;break;case"Team":r=i;break;default:return}u.teams=[],u.players=[],u.teamMatchUps=[],u.playerMatchUps=[],u.cumeStats={},u.movedGames=[],r.get(e).then(function(e){var t,n,a,i;"cumestatsteamlist"===r.endpoint&&(u.teams=e.CumeStatsTeamList.rows,(t=(u._splits.CumeStatsTeamList=e).CumeStatsTeamList.rows.map(function(e){return{val:e.TEAM_ID,text:e.TEAM}})).unshift({val:"",text:"Select A Team"}),n=s.get([{name:e.CumeStatsTeamList.name,label:"Teams",order:e.CumeStatsTeamList.rows.length,default:"",type:"select",desc:"Select Cume Stats Team",options:t}]).splits,u._splits.CumeStatsTeamList=n.CumeStatsTeamList,u.selectedTeam=u._splits.CumeStatsTeamList.selected),"cumestatsplayerlist"===r.endpoint&&(u.players=e.CumeStatsPlayerList.rows,(a=e.CumeStatsPlayerList.rows.map(function(e){return{val:e.PERSON_ID,text:e.PLAYER}}).sort(function(e,t){return e.text.split(" ").shift()<t.text.split(" ").shift()?-1:0})).unshift({val:"",text:"Select A Player"}),i=s.get([{name:e.CumeStatsPlayerList.name,label:"Players",order:e.CumeStatsPlayerList.rows.length,default:"",type:"select",desc:"Select Cume Stats Player",options:a}]).splits,u._splits.CumeStatsPlayerList=i.CumeStatsPlayerList,u.selectedPlayer=u._splits.CumeStatsPlayerList.selected),u.isLoadingPage=!1})})}function g(){var t,e={LeagueID:u.splits.LeagueID.selected.val,Season:u._splits.Season.selected.val,SeasonType:u.splits.SeasonType.selected.val,Outcome:u._splits.Outcome.selected.val,Location:u._splits.Location.selected.val,VsTeamID:"0"===u._splits.OpponentTeamID.selected.val?"":u._splits.OpponentTeamID.selected.val,VsDivision:u._splits.VsDivision.selected.val,VsConference:u._splits.VsConference.selected.val};switch(u.splits.ReportType.selected.val){case"Player":e.PlayerID=u._splits.CumeStatsPlayerList.selected.val,t=o;break;case"Team":e.TeamID=u._splits.CumeStatsTeamList.selected.val,t=r;break;default:return}u.teamMatchUps=[],u.playerMatchUps=[],u.cumeStats={},t.get(e).then(function(e){if("cumestatsplayergames"===t.endpoint){if(!e.CumeStatsPlayerGames.rows.length)return void(u.noData=!0);u.playerMatchUps=e.CumeStatsPlayerGames.rows}if("cumestatsteamgames"===t.endpoint){if(!e.CumeStatsTeamGames.rows.length)return void(u.noData=!0);u.teamMatchUps=e.CumeStatsTeamGames.rows}})}function v(){var e={LeagueID:u.splits.LeagueID.selected.val,Season:u._splits.Season.selected.val,SeasonType:u.splits.SeasonType.selected.val};switch(u.splits.ReportType.selected.val){case"Player":var t=u.movedGames.map(function(e){return e.GAME_ID}).reduce(function(e,t,n,a){return"".concat(e+t).concat(1<a.length&&n!==a.length-1?"|":"")},""),n=c;e.PlayerID=u._splits.CumeStatsPlayerList.selected.val,e.GameIDs=t;break;case"Team":var a=u.movedGames.map(function(e){return e.GAME_ID}).reduce(function(e,t,n,a){return"".concat(e+t).concat(1<a.length&&n!==a.length-1?"|":"")},"");n=l,e.TeamID=u._splits.CumeStatsTeamList.selected.val,e.GameIDs=a;break;default:return}u.generateCumeStatsTables=function(){u.cumeStats={},u.isLoadingGrid=!0,n.get(e).then(function(e){u.cumeStats=e,u.isLoadingGrid=!1})}}u.splits=d.splits,u.params=d.params,u._splits=f.splits,u.showSplits=!1,u.isLoadingPage=!0,u.noData=!1,u.handleTeam=function(){u.selectedTeam&&u.selectedTeam.TEAM_ID&&g()},u.handlePlayer=function(){u.selectedPlayer&&u.selectedPlayer.PERSON_ID&&g()},u.selectAllGames=function(){u.teamMatchUps.length&&(u.selectedTeamGames=u.teamMatchUps);u.playerMatchUps.length&&(u.selectedPlayerGames=u.playerMatchUps)},u.moveSelectedGames=function(){u.selectedTeam&&u.selectedTeamGames&&u.selectedTeamGames.length?(u.selectedTeamGames.forEach(function(e,t){u.movedGames.push(e)}),u.movedGames=u.movedGames.filter(function(e,t,n){return n.indexOf(e)===t})):u.selectedPlayer&&u.selectedPlayerGames&&u.selectedPlayerGames.length?(u.selectedPlayerGames.forEach(function(e,t){u.movedGames.push(e)}),u.movedGames=u.movedGames.filter(function(e,t,n){return n.indexOf(e)===t})):u.movedGames=[];v()},u.handleMovedGames=function(){u.movedGames&&(u.movedPlayerGames||u.movedTeamGames)&&(u.removeSelectedGame=p)},u.removeAllGames=function(){u.movedGames=[],u.cumeStats={}},u.generateCSVFromTable=function(){var e=window.XLSX.utils.book_new();{var t,n,a,i,r;"Team"===u.splits.ReportType.selected.val&&(t=window.XLSX.utils.table_to_sheet($("table")[0],{raw:!0}),n=window.XLSX.utils.table_to_sheet($("table")[2],{raw:!0}),a=window.XLSX.utils.table_to_sheet($("table")[3],{raw:!0}),i=window.XLSX.utils.table_to_sheet($("table")[6],{raw:!0}),r=window.XLSX.utils.table_to_sheet($("table")[8],{raw:!0}),window.XLSX.utils.book_append_sheet(e,t,"Player Stats"),window.XLSX.utils.book_append_sheet(e,n,"Team Stats"),window.XLSX.utils.book_append_sheet(e,a,"Opponent Stats"),window.XLSX.utils.book_append_sheet(e,i,"Player Highs"),u.cumeStats&&u.cumeStats.GLeagueFreeThrows&&u.cumeStats.GLeagueFreeThrows.rows.length&&window.XLSX.utils.book_append_sheet(e,r,"Free Throws"))}{var s,o,l;"Player"===u.splits.ReportType.selected.val&&(s=window.XLSX.utils.table_to_sheet($("table")[6],{raw:!0}),o=window.XLSX.utils.table_to_sheet($("table")[8],{raw:!0}),l=window.XLSX.utils.table_to_sheet($("table")[10],{raw:!0}),window.XLSX.utils.book_append_sheet(e,s,"Opponent Stats"),window.XLSX.utils.book_append_sheet(e,o,"Player Highs"),u.cumeStats&&u.cumeStats.GLeagueFreeThrows&&u.cumeStats.GLeagueFreeThrows.rows.length&&window.XLSX.utils.book_append_sheet(e,l,"Free Throws"))}var c="NBA_Stats_CumeStats_"+(new Date).getTime()+".xlsx";window.XLSX.writeFile(e,c)},u.currentYear=(new Date).getFullYear(),u.printReport=function(){window.print()},u.label=function(e,t){return"".concat(String(e+1).padStart(2,"0")," ","â"," ").concat(t)},u.$on("updateFilters",function(e){u.noData=!1,u.selectedVsOpponents=u._splits.VsOpponents.selected,u.selectedVsDivision=u._splits.VsDivision.selected,u.selectedVsConference=u._splits.VsConference.selected,u.selectedVsTeam=u._splits.OpponentTeamID.selected,u.selectedOutcome=u._splits.Outcome.selected,u.selectedSeason=u._splits.Season.selected,u._splits.VsOpponents.selected.val||(u.selectedVsDivision=s.findDefault(u._splits.VsDivision),u.selectedVsConference=s.findDefault(u._splits.VsConference),u.selectedVsTeam=s.findDefault(u._splits.OpponentTeamID));var t="CumeStatsPlayerList"===e.targetScope.split.name,n="CumeStatsTeamList"===e.targetScope.split.name;t?u._splits.CumeStatsPlayerList.selected.val?g():u.playerMatchUps=[]:n?u._splits.CumeStatsTeamList.selected.val?g():u.teamMatchUps=[]:("Season"!==e.targetScope.split.name&&delete u.selectedSeason,m()),u.movedGames=[]}),m(),navigator.userAgent.match(/iPhone/i)&&$("select[multiple]").each(function(){var t=$(this).on({focusout:function(){var e=t.val()||[];setTimeout(function(){t.val(e.length?e:[""]).change()},1e3)}}),e='<option value="" disabled="disabled"';e+=0<(t.val()||[]).length?"":' selected="selected"',e+=">&laquo; click to select games &raquo;",e+="</option>",t.prepend(e)})}stats.controller("CumeStatsController",e),e.$inject=["$scope","$timeout","$filter","SplitsService","SeasonsService","CumeStatsPlayerListService","CumeStatsTeamListService","CumeStatsTeamGamesService","CumeStatsPlayerGamesService","CumeStatsTeamService","CumeStatsPlayerService","CumeStatsSeasonListService"]}(),function(){function e(n,e,a,t,i,r,s,o){n.isLoading=!0,n.toSlug=function(e){return e?e.toLowerCase().replace(/[.`'â]/g,"").replace(/ /g,"-"):void 0};var l=e.data("season-section"),c=s.get(l),u={LeagueID:"00",Season:c.SeasonYear};n.Season=u.Season,n.SeasonYear=a("seasonyear")(u.Season),n.flags=c.Flags;var h;function d(){r.get(u).then(function(e){var t;n.isLoading=!1,n.noData=!e.length,n.noData||((n.draftboard=e).forEach(function(e){e.round=+e.field_pick_round,e.overall=+e.field_pick_number,e.pick=e.overall-30*(e.round-1),e.field_team_traded_to&&(e.isTraded=!0,e.tradeName=e.field_team_traded_to.split(" ").pop(),o.findBy("name",e.tradeName,{isSpecial:!1}).pop(),e.tradeAbbr=e.tradeName),e.prospect_position&&(e.pos=e.prospect_position)}),n.rounds=a("groupBy")(e,"field_pick_round",{asArray:!0}),n.nextIndex=(t=e.find(function(e){return!e.field_draft_prospect}))?parseInt(t.field_pick_number,10)-1:60,0===n.nextIndex&&(n.nextIndex=1),n.last=n.draftboard[n.nextIndex-1],n.hasNext=n.nextIndex<60,n.hasNext?n.next=n.draftboard[n.nextIndex]:i.cancel(h))}).catch(function(){console.error("Draftboard Data Error")})}d(),n.flags.isLive&&(h=i(d,15e3))}stats.controller("DraftBoardController",e),e.$inject=["$scope","$element","$filter","$http","$interval","DraftboardService","SeasonsService","TeamsService"]}(),function(){function e(t,n,e,a,i,r,s,o){t.scrollTo=function(e){var t=i.hash();n.yOffset=50,i.hash(e),n(),i.hash(t)};var l=s.get("DraftCombineLanding"),c=l.Flags,u=c.activeGames?c.activeGames.split(","):[];t.liveUpdate=!0===c.liveUpdate,t.activeGames=u.map(function(e){return e.trim()});var h=o.get(["LeagueID",{name:"Season",as:"SeasonYear",initial:l.Season,default:l.Season,seasonRange:[l.SeasonYearFrom,l.SeasonYear]}]);function d(){r.get(t.params,{dontCache:!0}).then(function(e){e.length&&(t.players=e,t.centers=f(e,"C"),t.guards=f(e,"G"),t.forwards=f(e,"F"))})}function f(e,t){return e.filter(function(e){return-1<e.POSITION.indexOf(t)})}t.splits=h.splits,t.params=h.params,t.isLoading=!0,t.noData=!1,r.get(t.params).then(function(e){t.liveUpdate&&a(d,6e4),t.isLoading=!1,t.players=e,t.centers=f(e,"C"),t.guards=f(e,"G"),t.forwards=f(e,"F"),t.noData=0===e.length}).catch(function(e){t.isLoading=!1,t.noData=!0})}stats.controller("DraftCombineHomepageController",e),e.$inject=["$scope","$anchorScroll","$element","$interval","$location","DraftCombineAllService","SeasonsService","SplitsService"]}(),function(){function e(n,e,t,a,i,r,s,o){var l=i(function(){o.get(n.GameID).then(function(e){3===(n.boxscore=e).game.st&&i.cancel(l)}).catch(function(e){console.error("error loading boxscore")})},3e4);n.setPeriod=function(e){var t=angular.element("#qtr"+e);t.length&&$("html, body").animate({scrollTop:t.offset().top-50},250)},n.scrollTop=function(){r.hash(""),e()},n.isLoading=!0,n.$on("$routeChangeSuccess",function(e,t){s.GameID&&s.GameID!=n.GameID&&(n.GameID=s.GameID,n.gameObject=a("gameIdToObject")(n.GameID),n.isLoading=!0,o.get(n.GameID).then(function(e){n.isLoading=!1,3===(n.boxscore=e).game.st&&i.cancel(l)}).catch(function(e){console.error("error loading boxscore"),n.isLoading=!1,n.noData=!0}))})}stats.controller("DraftCombineScrimmageController",e),e.$inject=["$scope","$anchorScroll","$element","$filter","$interval","$location","$routeParams","CombineScrimmageService"]}(),function(){function e(n,e,t,a,i,r,s,o){var l={agility:{service:i,seasons:"DraftCombineAgility"},anthro:{service:r,seasons:"DraftCombineAnthro"},nonstationary:{service:s,seasons:"DraftCombineNonstationary"},spotup:{service:o,seasons:"DraftCombineSpotUp"}}[e.data("section")],c=a.get(l.seasons),u=t.get(["LeagueID",{name:"Season",as:"SeasonYear",initial:c.Season,default:c.Season,seasonRange:[c.SeasonYearFrom,c.SeasonYear]}]);function h(){n.isLoading=!0,l.service.get(n.params).then(function(e){n.playerStats=e,n.isLoading=!1,n.noData=0===e.rows.length})}n.splits=u.splits,n.params=u.params,n.isLoading=!1,n.showSplits=!1,n.tableOptions={rowsPerPage:100},n.$on("runit",function(e){h()}),n.$on("customFields",function(e,t){n.customFields=t}),h()}stats.controller("DraftCombineController",e),e.$inject=["$scope","$element","SplitsService","SeasonsService","DraftCombineAgilityService","DraftCombineAnthroService","DraftCombineNonStationaryService","DraftCombineSpotUpService"]}(),function(){function e(n,e,t,a,i,r){n.isLoading=!1,n.showSplits=!1;var s=i.get("DraftHistory"),o=a.get(["LeagueID",{name:"Season",default:s.SeasonYear,initial:s.SeasonYear,range:[s.SeasonYearFrom,s.SeasonYear],includeBefore:[{val:"",text:"All Time"}]},"College",{name:"TeamID",include:[{val:"1610610035",text:"Toronto Huskies"},{val:"1610610030",text:"Indianapolis Olympians"},{val:"1610610036",text:"Washington Capitols"},{val:"1610610025",text:"Chicago Stags"},{val:"1610610034",text:"St. Louis Bombers"},{val:"1610610031",text:"Pittsburgh Ironmen"},{val:"1610610029",text:"Indianapolis Jets"},{val:"1610610024",text:"Baltimore Bullets"},{val:"1610610032",text:"Providence Steamrollers"}]}]);function l(){n.isLoading=!0,t.get(n.params).then(function(e){n.isLoading=!1,n.datasets=e,n.noData=0===e.rows.length,n.noData&&"2016"==n.params.Season&&(n.params.Season="2015",l())})}n.splits=o.splits,n.params=o.params,n.splits.TeamID.options[0].text="All Franchises",n.params.OverallPick="",n.params.RoundNum="",n.params.RoundPick="",n.params.TopX="",n.options={rowsPerPage:+e.data("rows-per-page")},n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){l()}),n.isDefunctTeam=function(e){return 0===r.findBy("id",e).length},l()}stats.controller("DraftHistoryController",e),e.$inject=["$scope","$element","DraftHistoryService","SplitsService","SeasonsService","TeamsService"]}(),function(){function e(e,t,n,a,i,r,s){e.$on("$routeChangeSuccess",function(e,t){})}stats.controller("ArticlesCtrl",e),e.$inject=["$scope","$http","$location","$routeParams","$route"]}(),function(){function e(i,r,t,n,a){function e(){var e=t.search().Team;i.team=a.getByCode(e),n.get(e).then(function(e){var t=new Date,n=new Date(t.getTime()-864e5),a=r("date")(n,"MM/dd/yyyy h:mm:ss a");i.items=e.filter(function(e){return e.ListItemPubDate>=a}),i.isLoaded=!0,i.hasData=i.items.length}).catch(function(e){i.isLoaded=!0,i.hasData=!1})}i.isLoaded=!1,i.hasData=!1,i.$on("$locationChangeSuccess",e),e()}stats.controller("FantasyNewsCtrl",e),e.$inject=["$scope","$filter","$location","FantasyNewsService","TeamsService"]}(),function(){function e(l,c,e,u,t,n){l.isLoading=!0,l.trustAsHtml=t.trustAsHtml,l.seeMore=function(){l.itemsPerPage=l.itemsPerPage+10,l.noMoreData=l.itemsPerPage>=l.items.length};var a=e.path();a&&(document.location="/stats/articles"+a);var h=n.prefix+"wp-json/statscms/v1/type/beyondthenumber/?limit=100";c({method:"GET",url:h}).then(function(e){var t=e.data,n=t.count;l.totalItems=n,l.items=t.posts,l.currentPage=0,l.itemsPerPage=10,l.noMoreData=!1,l.numberOfPages=Math.ceil(l.totalItems/l.itemsPerPage);for(var a,i=h+"&offset=",r=[],s=100;s<n;){var o=c.get(i+s);r.push(o),s+=100}a=r,l.isLoading=!0,u.all(a).then(function(e){e.forEach(function(e){l.items=l.items.concat(e.data.posts)}),l.isLoading=!1})})}stats.controller("FeaturedArchiveCtrl",e),e.$inject=["$scope","$http","$location","$q","$sce","CMSENV"]}(),function(){function e(l,c,e,u,t,n){l.isLoading=!0,l.trustAsHtml=t.trustAsHtml,l.seeMore=function(){l.itemsPerPage=l.itemsPerPage+10};var h=n.prefix+"wp-json/statscms/v1/type/spotlight/?limit=100";c({method:"GET",url:h}).then(function(e){var t=e.data,n=t.count;l.totalItems=n,l.items=t.posts,l.currentPage=0,l.itemsPerPage=10,l.numberOfPages=Math.ceil(l.totalItems/l.itemsPerPage);for(var a,i=h+"&offset=",r=[],s=100;s<n;){var o=c.get(i+s);r.push(o),s+=100}a=r,l.isLoading=!0,u.all(a).then(function(e){angular.forEach(e,function(e){var t=e.data.posts;angular.forEach(t,function(e){l.items.push(e)})}),l.isLoading=!1})})}stats.controller("SpotlightArchiveCtrl",e),e.$inject=["$scope","$http","$location","$q","$sce","CMSENV"]}(),function(){function e(c,i,n,e,t,a,r,s){c.currentSet=null;var o=a.get(["LeagueID",{name:"Season",default:"",includeBefore:[{val:"",text:""}]},"SeasonType","Conference","DateFrom","DateTo","Division","EndPeriod","EndRange","GameSegment","LastNGames","Location","Month","OpponentTeamID","Outcome","Period","PlayerPosition","PORound",{name:"PlayerPosition",as:"Position"},"RangeType",{name:"PlayerExperience",as:"RookieYear"},"SeasonSegment","ShotClockRange","StartPeriod","StartRange","StarterBench","TeamID","VsConference","VsDivision","PlayerID","GroupQuantity",{name:"ClutchTime",default:"",includeBefore:[{val:"",text:"Clutch Time Off"}]},{name:"AheadBehind",default:"",includeBefore:[{val:"",text:"Ahead or Behind Off"}]},{name:"PointDiff",default:"",includeBefore:[{val:"",text:"Point Diff Off"}]},{name:"GameID",label:"",default:"",type:"pseudo"},{name:"GameEventID",label:"Event #",default:"",skipLabel:!0,type:"pseudo"},{name:"CFID",label:"",default:"",skipLabel:!0,order:2,type:"pseudo"},{name:"CFPARAMS",label:"",default:"",skipLabel:!0,order:2,type:"pseudo"},{name:"ContextFilter",label:"",default:"",skipLabel:!0,order:2,type:"pseudo"},{name:"ContextMeasure",label:"",default:"FG_PCT",order:2,type:"pseudo"},{name:"GroupID",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"GROUP_ID",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"OnOff",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"GroupMode",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"PlayerID1",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"PlayerID2",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"PlayerID3",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"PlayerID4",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"PlayerID5",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"VsPlayerID1",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"VsPlayerID2",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"VsPlayerID3",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"VsPlayerID4",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"VsPlayerID5",label:"",default:"",skipLabel:!0,type:"pseudo"},{name:"VsTeamID",label:"",default:"",skipLabel:!0,type:"pseudo"}]);c.splits=o.splits,c.params=o.params,c.Season=i("seasonToSeasonYear")(c.params.Season),c.CFPARAMS=i("seasonToSeasonYear")(c.params.CFPARAMS);var l,u,h,d,f,p=c.Season,m=c.CFPARAMS;c.isCvp2=!1,c.isCvp3=!1,c.isNbaVideoPlayer=!1,(2013<p||2013<m)&&(c.isNbaVideoPlayer=!0),c.eventTitle="",l=s,u=c.params,h=l.endpoints,u.ZoneMode?l.endpoint=h.ShotzoneContext:u.GameEventID?c.isNbaVideoPlayer?l.endpoint=h.EventsAsset:l.endpoint=h.Events:u.EventList?l.endpoint=h.Shotzone:u.GroupID?l.endpoint=h.LineupAsset:u.GroupMode?l.endpoint=h.Impact:c.isNbaVideoPlayer?l.endpoint=h.DetailsAsset:l.endpoint=h.Details,d=t,c.params,f=d.endpoints,c.params.GROUP_ID?d.endpoint=f.Lineup:c.params.GroupMode?d.endpoint=f.Impact:d.endpoint=f.Shotchart;var g=parseInt(n.search().flag);function v(){var e;c.flags.video&&(c.isLoading=!0,e=c.params,c.params.GameEventID&&(e={GameEventID:c.params.GameEventID,GameID:c.params.GameID}),s.get(e).then(function(e){c.hasVideos=!0,c.isLoading=!1,c.meta=e.Meta.videoUrls,c.videos=e.playlist,c.videos.forEach(function(e,t,n,a){var i={};i=2014<=t?e[a]:e.find(function(e){return e.gi===n.gi});i&&i.ldur&&i.lth&&i.lurl&&(n.hasVideos=!0);n=c.CFPARAMS<2015||c.Season<2015?angular.extend(n,i):angular.extend(n,{videos:i})}.bind("",c.meta,c.Season)),c.videos.forEach(S),_(),b()}))}function y(){c.flags.shotchart&&(c.isLoading=!1,t.get(c.params).then(function(e){var t,n;e&&(c.hasShots=!0,c.zones=e.groupedShots,c.league=e.groupedLeague,c.shots=e.shots,c.gametitle="",c.params.GameID&&c.shots.length&&(n=(t=c.shots[0]).GAME_DATE,c.gametitle=[t.VTM," vs ",t.HTM," - ",n.substr(4,2),"/",n.substr(6,2),"/",n.substr(0,4)].join("")),_(),b())}))}function _(){var e;(c.hasShots||c.hasVideos)&&(c.hasVideos||!c.hasShots?!c.hasVideos||c.hasShots?(c.events=c.videos.map(function(t){var e=c.shots.find(function(e){return e.GAME_ID===t.gi&&e.GAME_EVENT_ID===t.ei});return angular.extend({},t,e)}),c.events.length&&(c.events[0].isActive=!0),""!==c.params.GameID&&c.events.length&&(e=c.events[0],c.splits.GameID.selected.text=e.vtm.abbr+" vs "+e.htm.abbr+" - "+e.date)):c.events=c.videos:c.events=c.shots)}function b(){var e,t;n.search().title?c.eventTitle=n.search().title:(e=Object.keys(c.splits).map(function(e){return c.splits[e]}),t=(e=i("orderBy")(e,"order")).reduce(function(e,t){var n="",a="";if(!t||!t.selected)return e;var i=t.selected.val===t.default,r="Season"===t.name||"SeasonType"===t.name,s=c.params.GameID,o=c.params.PlayerID,l=!!t.skipLabel;return i&&!r||r&&s||o&&"TeamID"===t.name||l?e:("ContextMeasure"===t.name&&(a=" for"),"GameID"===t.name&&c.gametitle?e+("during "+c.gametitle)+" ":("Season"===t.name&&(n="during the "),"TeamID"===t.name&&(n="the "),e+=n+t.selected.text+a+" "))},""),c.eventTitle=t)}function S(e){var t=e.gc.substr(11,3),n=e.gc.substr(14,3),a=e.gc.substr(0,10);e.vtm=r.getByAbbr(t),e.htm=r.getByAbbr(n),e.vtmid=e.vtm.id,e.vtmta=e.vtm.abbr,e.htmid=e.htm.id,e.htmta=e.htm.abbr,e.date=i("date")(a,"yyyy-MM-dd"),e.gdate=a}c.flags={video:0<(1&g),shotchart:0<(2&g),tracking:!1,movement:!1},c.$on("$statsTableRowClick",function(e,t,n){c.events.forEach(function(e){e.isActive=!1})}),c.$on("$statsTableFilter",function(e,t){c.filteredEvents=t.rows}),c.$on("$statsTableSort",function(e,t){c.filteredEvents=t.rows}),c.$on("customFields",function(e,t){c.customFields=t}),c.$on("runit",function(e){v(),y()}),v(),y(),b()}stats.controller("EventsController",e),e.$inject=["$scope","$filter","$location","PlayersService","ShotchartService","SplitsService","TeamsService","VideoEventsService"]}(),function(){function e(e,t,n){"https:"==n.location.protocol?e.draftUrl=t.trustAsResourceUrl("https://dwnba.fantasypros.com/n/"):e.draftUrl=t.trustAsResourceUrl("http://dwnba.fantasypros.com/n/")}stats.controller("FantasyDraftCtrl",e),e.$inject=["$scope","$sce","$window"]}(),function(){function e(n,a,e,t,i){"use strict";var r,s=i.get("playerVsPlayerStats"),o=e.get([{name:"Season",initial:s.Season,seasonRange:a.search().range},{name:"SeasonType",initial:s.SeasonType,without:["All Star"]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","DateFrom","DateTo","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames"]);for(r in n.splits=o.splits,n.params=o.params,n.params.MeasureType="Advanced",n.params.PerMode="Totals",n.params.PlayerIDList=0,n.params.VsPlayerIDList=0,n.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},OFF_RATING:{visible:!1,index:1,label:"OFF RATING",format:"number",invert:!1},DEF_RATING:{visible:!1,index:2,label:"DEF RATING",format:"number",invert:!0},NET_RATING:{visible:!0,index:3,label:"NET RATING",format:"number",invert:!1},AST_PCT:{visible:!1,index:4,label:"AST %",format:"percent",invert:!1},AST_TO:{visible:!1,index:5,label:"AST TO",format:"number",invert:!1},AST_RATIO:{visible:!0,index:6,label:"AST RATIO",format:"number",invert:!1},OREB_PCT:{visible:!1,index:7,label:"OREB %",format:"percent",invert:!1},DREB_PCT:{visible:!1,index:8,label:"DREB %",format:"percent",invert:!1},REB_PCT:{visible:!0,index:9,label:"REB %",format:"percent",invert:!1},TM_TOV_PCT:{visible:!1,index:10,label:"TO RATIO",format:"percent",invert:!0},EFG_PCT:{visible:!0,index:11,label:"EFG %",format:"percent",invert:!1},TS_PCT:{visible:!1,index:12,label:"TS %",format:"percent",invert:!1},USG_PCT:{visible:!1,index:13,label:"USG %",format:"percent",invert:!1},PACE:{visible:!1,index:14,label:"PACE",format:"number",invert:!1},PIE:{visible:!0,index:15,label:"PIE",format:"percent",invert:!1}},n.columns=[],n.showCol)n.showCol[r].name=r,n.columns.push(n.showCol[r]);function l(){t.getStats(n)}n.$on("runit",function(e){for(var t in a.search().Split=[],n.splits)n.params[t]=n.splits[t].selected.val;l(),a.search()}),n.$watch("compare",function(){var e,t;n.compare.isReady&&(e=n.compare.left.lineupIDs,e=JSON.stringify(e).replace("[","").replace("]","").replace(/"/g,""),t=n.compare.right.lineupIDs,t=JSON.stringify(t).replace("[","").replace("]","").replace(/"/g,""),n.params.PlayerIDList=e,n.params.VsPlayerIDList=t,l(),n.splits=o.splits)},!0)}stats.controller("FantasyComparePlayerAdvancedController",e),e.$inject=["$scope","$location","SplitsService","VsFantasyCompareService","SeasonsService"]}(),function(){function e(n,t,e,a,i){var r,s=a.get("playerVsPlayerStats"),o=i.get(["LeagueID",{name:"Season",initial:s.Season},{name:"SeasonType",initial:s.SeasonType,without:["All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo"]);for(r in n.splits=o.splits,n.params=o.params,n.params.MeasureType="Opponent",n.params.PerMode="Totals",n.params.PlayerIDList=0,n.params.VsPlayerIDList=0,n.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},OPP_FGM:{visible:!1,index:1,label:"OPP FGM",format:"number",invert:!0},OPP_FGA:{visible:!1,index:2,label:"OPP FGA",format:"number",invert:!0},OPP_FG_PCT:{visible:!0,index:3,label:"OPP FG%",format:"percent",invert:!0},OPP_FG3M:{visible:!1,index:4,label:"OPP 3PM",format:"number",invert:!0},OPP_FG3A:{visible:!1,index:5,label:"OPP 3PA",format:"number",invert:!0},OPP_FG3_PCT:{visible:!0,index:6,label:"OPP 3P%",format:"percent",invert:!0},OPP_FTM:{visible:!1,index:7,label:"OPP FTM",format:"number",invert:!0},OPP_FTA:{visible:!1,index:8,label:"OPP FTA",format:"number",invert:!0},OPP_FT_PCT:{visible:!0,index:9,label:"OPP FT%",format:"percent",invert:!0},OPP_OREB:{visible:!1,index:10,label:"OPP OREB",format:"number",invert:!0},OPP_DREB:{visible:!1,index:11,label:"OPP DREB",format:"number",invert:!0},OPP_REB:{visible:!0,index:12,label:"OPP REB",format:"number",invert:!0},OPP_AST:{visible:!0,index:13,label:"OPP AST",format:"number",invert:!0},OPP_TOV:{visible:!1,index:14,label:"OPP TOV",format:"number",invert:!1},OPP_STL:{visible:!0,index:15,label:"OPP STL",format:"number",invert:!0},OPP_BLK:{visible:!0,index:16,label:"OPP BLK",format:"number",invert:!0},OPP_PF:{visible:!1,index:17,label:"OPP PF",format:"number",invert:!0},OPP_PTS:{visible:!1,index:18,label:"OPP PTS",format:"number",invert:!0}},n.columns=[],n.showCol)n.showCol[r].name=r,n.columns.push(n.showCol[r]);function l(){e.getStats(n)}n.onrunit=function(){for(var e in t.search().Split=[],n.splits)n.params[e]=n.splits[e].selected.val;l(),t.search()},n.$watch("compare",function(){var e,t;n.compare.isReady&&(e=n.compare.left.lineupIDs,e=JSON.stringify(e).replace("[","").replace("]","").replace(/"/g,""),t=n.compare.right.lineupIDs,t=JSON.stringify(t).replace("[","").replace("]","").replace(/"/g,""),n.params.PlayerIDList=e,n.params.VsPlayerIDList=t,l(),n.splits=o.splits)},!0)}stats.controller("FantasyCompareOpponentController",e),e.$inject=["$scope","$location","VsFantasyCompareService","SeasonsService","SplitsService"]}(),function(){function e(n,a,e,t,i){var r,s=i.get("playerVsPlayerStats"),o=e.get([{name:"Season",initial:s.Season,seasonRange:a.search().SeasonRange},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","DateFrom","DateTo","VsConference","VsDivision","GameSegment","Period","LastNGames"]);for(r in n.splits=o.splits,n.params=o.params,n.params.MeasureType="Misc",n.params.SeasonType="Regular Season",n.params.PerMode="Totals",n.params.PlayerIDList=0,n.params.VsPlayerIDList=0,n.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},PTS_OFF_TOV:{visible:!0,index:1,label:"PTS OFF TOV",format:"number",invert:!1},PTS_2ND_CHANCE:{visible:!0,index:2,label:"PTS 2ND CHANCE",format:"number",invert:!1},PTS_FB:{visible:!0,index:3,label:"PTS FB",format:"number",invert:!1},PTS_PAINT:{visible:!1,index:4,label:"PTS PAINT",format:"number",invert:!1},OPP_PTS_OFF_TOV:{visible:!1,index:5,label:"OPP PTS OFF TOV",format:"number",invert:!0},OPP_PTS_2ND_CHANCE:{visible:!1,index:6,label:"OPP PTS 2ND CHANCE",format:"number",invert:!0},OPP_PTS_FB:{visible:!1,index:7,label:"OPP PTS FB",format:"number",invert:!0},OPP_PTS_PAINT:{visible:!0,index:8,label:"OPP PTS PAINT",format:"number",invert:!0},BLK:{visible:!1,index:9,label:"BLK",format:"number",invert:!1},BLKA:{visible:!1,index:10,label:"BLKA",format:"number",invert:!0},PF:{visible:!1,index:11,label:"PF",format:"number",invert:!0},PFD:{visible:!1,index:12,label:"PFD",format:"number",invert:!0}},n.columns=[],n.showCol)n.showCol[r].name=r,n.columns.push(n.showCol[r]);function l(){t.getStats(n)}n.$on("runit",function(e){for(var t in a.search().Split=[],n.splits)n.params[t]=n.splits[t].selected.val;l(),a.search()}),n.$watch("compare",function(){var e,t;n.compare.isReady&&(e=n.compare.left.lineupIDs,e=JSON.stringify(e).replace("[","").replace("]","").replace(/"/g,""),t=n.compare.right.lineupIDs,t=JSON.stringify(t).replace("[","").replace("]","").replace(/"/g,""),n.params.PlayerIDList=e,n.params.VsPlayerIDList=t,l(),n.splits=o.splits)},!0)}stats.controller("FantasyComparePlayerMiscController",e),e.$inject=["$scope","$location","SplitsService","VsFantasyCompareService","SeasonsService"]}(),function(){function e(n,a,e,t,i){"use strict";var r=i.get("playerVsPlayerStats"),s="Totals"===(s=a.search().PerMode)||"PerGame"===s?s:"PerGame";a.search("PerMode",s);var o,l=e.get([{name:"Season",initial:r.Season,seasonRange:a.search().range},{name:"SeasonType",initial:r.SeasonType,without:["All Star"]},"PerMode","PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","DateFrom","DateTo","VsConference","VsDivision","GameSegment","Period","LastNGames"]);for(o in n.splits=l.splits,n.params=l.params,n.params.MeasureType="Scoring",n.params.PlayerIDList=0,n.params.VsPlayerIDList=0,n.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},PCT_FGA_2PT:{visible:!1,index:1,label:"% FGA 2PT",format:"percent",invert:!1},PCT_FGA_3PT:{visible:!1,index:2,label:"% FGA 3PT",format:"percent",invert:!1},PCT_PTS_2PT:{visible:!1,index:3,label:"% PTS 2PT",format:"percent",invert:!1},PCT_PTS_2PT_MR:{visible:!0,index:4,label:"% PTS 2PT MR",format:"percent",invert:!1},PCT_PTS_3PT:{visible:!0,index:5,label:"% PTS 3PT",format:"percent",invert:!1},PCT_PTS_FB:{visible:!0,index:6,label:"% PTS FB",format:"percent",invert:!1},PCT_PTS_FT:{visible:!0,index:7,label:"% PTS FT",format:"percent",invert:!1},PCT_PTS_OFF_TOV:{visible:!1,index:8,label:"% PTS OFF TOV",format:"percent",invert:!1},PCT_PTS_PAINT:{visible:!0,index:9,label:"% PTS PAINT",format:"percent",invert:!1},PCT_AST_2PM:{visible:!1,index:10,label:"% AST 2PM",format:"percent",invert:!1},PCT_UAST_2PM:{visible:!1,index:11,label:"% UAST 2PM",format:"percent",invert:!1},PCT_AST_3PM:{visible:!1,index:12,label:"% AST 3PM ",format:"percent",invert:!1},PCT_UAST_3PM:{visible:!1,index:13,label:"% UAST 3PM",format:"percent",invert:!1},PCT_AST_FGM:{visible:!1,index:14,label:"% AST FGM",format:"percent",invert:!1},PCT_UAST_FGM:{visible:!1,index:15,label:"% UAST FGM",format:"percent",invert:!1}},n.columns=[],n.showCol)n.showCol[o].name=o,n.columns.push(n.showCol[o]);function c(){t.getStats(n)}n.$on("runit",function(e){for(var t in a.search().Split=[],n.splits)n.params[t]=n.splits[t].selected.val;c(),a.search()}),n.$watch("compare",function(){var e,t;n.compare.isReady&&(e=n.compare.left.lineupIDs,e=JSON.stringify(e).replace("[","").replace("]","").replace(/"/g,""),t=n.compare.right.lineupIDs,t=JSON.stringify(t).replace("[","").replace("]","").replace(/"/g,""),n.params.PlayerIDList=e,n.params.VsPlayerIDList=t,c(),n.splits=l.splits)},!0),n.$on("$locationChangeStart",function(){})}stats.controller("FantasyComparePlayerScoringController",e),e.$inject=["$scope","$location","SplitsService","VsFantasyCompareService","SeasonsService"]}(),function(){function e(n,a,e,t,i){"use strict";var r,s=i.get("playerVsPlayerStats"),o=e.get([{name:"Season",initial:s.Season,seasonRange:a.search().seasonRange},{name:"SeasonType",initial:s.SeasonType,without:["All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","DateFrom","DateTo","VsConference","VsDivision","GameSegment","Period","LastNGames"]);for(r in n.splits=o.splits,n.params=o.params,n.params.MeasureType="Base",n.params.PlayerIDList=0,n.params.VsPlayerIDList=0,n.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},FGM:{visible:!1,index:1,label:"FGM",format:"number",invert:!1},FGA:{visible:!1,index:2,label:"FGA",format:"number",invert:!1},FG_PCT:{visible:!1,index:3,label:"FG%",format:"percent",invert:!1},FG3M:{visible:!1,index:4,label:"3PM",format:"number",invert:!1},FG3A:{visible:!1,index:5,label:"3PA",format:"number",invert:!1},FG3_PCT:{visible:!1,index:6,label:"3P%",format:"percent",invert:!1},FTM:{visible:!1,index:7,label:"FTM",format:"number",invert:!1},FTA:{visible:!1,index:8,label:"FTA",format:"number",invert:!1},FT_PCT:{visible:!1,index:9,label:"FT%",format:"percent",invert:!1},OREB:{visible:!1,index:10,label:"OREB",format:"number",invert:!1},DREB:{visible:!1,index:11,label:"DREB",format:"number",invert:!1},REB:{visible:!0,index:12,label:"REB",format:"number",invert:!1},AST:{visible:!0,index:13,label:"AST",format:"number",invert:!1},TOV:{visible:!1,index:14,label:"TOV",format:"number",invert:!0},STL:{visible:!0,index:15,label:"STL",format:"number",invert:!1},BLK:{visible:!0,index:16,label:"BLK",format:"number",invert:!1},BLKA:{visible:!0,index:17,label:"BLKA",format:"number",invert:!1},PF:{visible:!1,index:18,label:"PF",format:"number",invert:!1},PFD:{visible:!1,index:19,label:"PFD",format:"number",invert:!1},PTS:{visible:!0,index:20,label:"PTS",format:"number",invert:!1}},n.columns=[],n.showCol)n.showCol[r].name=r,n.columns.push(n.showCol[r]);function l(){t.getStats(n)}n.$on("runit",function(e){for(var t in a.search().Split=[],n.splits)n.params[t]=n.splits[t].selected.val;l(),a.search()}),n.$watch("compare",function(){var e,t;n.compare.isReady&&(e=n.compare.left.lineupIDs,e=JSON.stringify(e).replace("[","").replace("]","").replace(/"/g,""),t=n.compare.right.lineupIDs,t=JSON.stringify(t).replace("[","").replace("]","").replace(/"/g,""),n.params.PlayerIDList=e,n.params.VsPlayerIDList=t,l(),n.splits=o.splits)},!0),n.$on("$locationChangeStart",function(){})}stats.controller("FantasyCompareBaseController",e),e.$inject=["$scope","$location","SplitsService","VsFantasyCompareService","SeasonsService"]}(),function(){function e(s,e,o,a,t,l,c,n,i,r,u){"use strict";s.isLoading=!0,s.noHTH=!0,s.limit=5,s.showPlayersFiltered=!0,s.showPlayers2Filtered=!0;var h=r.get("playerVsPlayerStats");function d(t){var n=a.defer();return i.get(s.params).then(function(e){s.params.PerMode="Totals",t.info=e.playerInfo,t.lineup.push(e.playerInfo),s.isLoading=!1,t.team=u.getById(t.info.TEAM_ID),t.type="lineup",s.params.PlayerID=t.info.PERSON_ID,angular.isUndefined(o.search().vsLineupIDs)&&(t.lineupShow=!0),n.resolve(t.lineup),t.lineupChosenParams&&0!==t.lineupChosenParams.length||s.checkChange(t.info,t)}),n.promise}function f(t){var n=a.defer();return i.get(s.params).then(function(e){s.params.PerMode="Totals",t.info=e.playerInfo,s.isLoading=!1,t.hasPlayer=!0,t.team=u.getById(t.info.TEAM_ID),t.type="player",s.params.PlayerID=t.info.PERSON_ID,n.resolve()}),n.promise}s.params={Season:h.Season,LeagueID:"00",IsOnlyCurrentSeason:"0",SeasonType:"Regular Season",lineupIDs:0,vsLineupIDs:0,PlayerID:0,lineupsPassed:!1},s.compare={isReady:!1,left:{type:"",hasPlayer:!1,hasTeam:!1,hasLineup:!1,isLoading:!0,lineup:[],lineupChosen:[],lineupNamesIDs:[],lineupIDs:[],lineupShow:!1,lineupChosenParams:[],info:{},checked:0,tag:"left",opp:"right",showDropdown:!1,showPlayersFiltered:!1,query:""},right:{type:"",hasPlayer:!1,hasTeam:!1,hasLineup:!1,isLoading:!0,lineup:[],lineupShow:!1,lineupChosen:[],lineupNamesIDs:[],lineupIDs:[],lineupChosenParams:[],info:{},checked:0,tag:"right",opp:"left",showDropdown:!1,showPlayersFiltered:!1,query:""}},s.switchSides=function(){var e=s.compare.left;s.compare.left=s.compare.right,s.compare.right=e},s.setStatType=function(e,t){t.type=e,t.lineup=[],t.lineupChosen=[],t.lineupChosenParams=[],t.lineupIDs=[],t.lineupNamesIDs=[],t.checked=0,t.hasTeam=!1,t.hasLineup=!1,t.hasPlayer=!1,s.params.lineupsPassed=!1,s.compare.isReady=!1,s.compare.left.showDropdown=!1,s.compare.right.showDropdown=!1},s.setLineup=function(e){0!==e.lineup.length&&(e.lineupShow=!1,e.hasLineup=!0,e.isReady=!0,e.type="lineup")},s.chooseLineup=function(e,t){t.lineup=[],d(e),t.lineupShow=!0,t.team=e},s.checkChange=function(e,t){t.checked++,t.lineupChosen.length<5&&(t.lineupChosen.push(e),t.lineupNamesIDs.push({first_last:e.DISPLAY_FIRST_LAST,id:e.PERSON_ID}),s.params.lineupsPassed||t.lineupIDs.push(e.PERSON_ID))},s.onSelect=function(e,t,n,a,i){s.$item=e,s.$model=t,s.$label=n,s.params.PlayerID=s.$model.id,("lineup"==a.type?d:f)(a),a.lineupRoutes=[],a.info=s.$model,a.info.paramID=s.params.PlayerID,a.isReady=!0,a.showPlayersFiltered=!1,angular.element(".input-"+i).focus(),a.query=""},s.filterOut=function(a){return function(e){var t,n=!1;for(t in a)if(n=e.id===a[t].PERSON_ID)break;return!n}},s.change=function(e){var t="left"===e?"right":"left";s.compare[e].showPlayersFiltered=!0,s.compare[t].showPlayersFiltered=!1},s.searchPlayerName=function(t){return function(e){return-1!==(e.fn+" "+e.ln).toLowerCase().indexOf(t.toLowerCase())}},s.$watch("compare",function(){var e,t,n,a,i,r;s.compare.left.hasLineup&&s.compare.right.hasLineup&&(e=s.compare.left.lineupIDs,"object"===_typeof(e)&&(e=e.map(function(e,t){return e}).join(",")),t=s.compare.right.lineupIDs,"object"===_typeof(t)&&(t=t.map(function(e,t){return e}).join(",")),n=s.compare.left.lineupNamesIDs,"object"===_typeof(n)&&(n=n.map(function(e,t){return e.first_last}).join(",")),a=s.compare.right.lineupNamesIDs,"object"===_typeof(a)&&(a=a.map(function(e,t){return e.first_last}).join(",")),s.compare.isReady=!0,l.setSearchURL({lineupIDs:e,vsLineupIDs:t,PlayerNames:n,VsPlayerNames:a}),s.search="?"+o.url().split("?")[1],s.$broadcast("onCompareSearch",s.search),i=s.compare.left.lineupNamesIDs.map(function(e){return e.first_last}).join("|"),r=s.compare.right.lineupNamesIDs.map(function(e){return e.first_last}).join("|"),c.triggerEvent("fantasyCompareTool",i+"VS"+r))},!0),s.$on("$locationChangeStart",function(){var e,t,n,a;if(s.search="?"+o.url().split("?")[1],s.$broadcast("onCompareSearch",s.search),angular.isUndefined(o.search().vsLineupIDs)||(s.params.lineupsPassed=!0,e=[],e=(e=o.search().lineupIDs).split(","),t=(t=o.search().vsLineupIDs).split(","),n=[],n=(n=o.search().PlayerNames).split(","),a=[],a=(a=o.search().VsPlayerNames).split(","),s.compare.left.lineupNamesIDs=e.map(function(e,t){return{id:e,first_last:n[t]}}),s.compare.left.type="lineup",s.compare.left.checked=e.length,s.compare.left.lineupIDs=e,s.compare.left.lineupShow=!1,s.compare.left.lineupChosen=e,s.compare.left.lineupChosenParams=e,s.compare.left.hasLineup=!0,s.compare.right.lineupNamesIDs=t.map(function(e,t){return{id:e,first_last:a[t]}}),s.compare.right.type="lineup",s.compare.right.checked=t.length,s.compare.right.lineupIDs=t,s.compare.right.lineupShow=!1,s.compare.right.lineupChosen=t,s.compare.right.lineupChosenParams=t,s.compare.right.hasLineup=!0,s.params.PlayerID=e[0]),!s.compare.isReady){if(o.search().lineupIDs&&o.search().vsLineupIDs)return s.params.lineupIDs=o.search().lineupIDs,s.compare.left.lineupIDs=o.search().lineupIDs,void d(s.compare.left).then(function(){s.compare.right.lineupIDs=o.search().vsLineupIDs,s.params.vsLineupIDs=o.search().vsLineupIDs,d(s.compare.right).then(function(){s.compare.isReady=!0})});if(o.search().PlayerID&&o.search().VsPlayerID)return s.params.PlayerID=o.search().PlayerID,void f(s.compare.left).then(function(){s.params.PlayerID=o.search().VsPlayerID,f(s.compare.right).then(function(){s.compare.isReady=!0})})}}),s.pages=[{value:"/advanced/",text:"Advanced"},{value:"/misc/",text:"Misc"},{value:"/scoring/",text:"Scoring"},{value:"/usage/",text:"Usage"}],s.$emit("onFantasyInfo",{}),s.players=n.get(!0),s.isLoading=!1}stats.controller("FantasyCompareSummaryController",e),e.$inject=["$scope","$filter","$location","$q","$routeParams","DeepLinksFactory","DtmService","PlayersService","PlayerSummaryService","SeasonsService","TeamsService"]}(),function(){function e(n,a,e,t,i){"use strict";var r,s=i.get("playerVsPlayerStats"),o=e.get([{name:"Season",initial:s.Season,seasonRange:a.search().range},{name:"SeasonType",initial:s.SeasonType,without:["All Star"]}]);for(r in n.splits=o.splits,n.params={MeasureType:"Usage",LeagueID:"00",Season:n.splits.Season.selected.val,SeasonType:n.splits.SeasonType.selected.val,PerMode:"Totals",PlusMinus:"N",PaceAdjust:"N",Rank:"N",Outcome:"",Location:"",Month:0,SeasonSegment:"",OpponentTeamID:0,VsConference:"",VsDivision:"",GameSegment:"",Period:0,LastNGames:0,DateFrom:"",DateTo:"",PlayerIDList:0,VsPlayerIDList:0},n.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},USG_PCT:{visible:!0,index:1,label:"USG%",format:"percent",invert:!1},PCT_FGM:{visible:!0,index:2,label:"%FGM",format:"percent",invert:!1},PCT_FGA:{visible:!0,index:3,label:"%FGA",format:"percent",invert:!1},PCT_FG3M:{visible:!0,index:4,label:"%3PM",format:"percent",invert:!1},PCT_FG3A:{visible:!0,index:5,label:"%3PA",format:"percent",invert:!1},PCT_FTM:{visible:!0,index:6,label:"%FTM",format:"percent",invert:!1},PCT_FTA:{visible:!1,index:7,label:"%FTA",format:"percent",invert:!1},PCT_OREB:{visible:!1,index:8,label:"%OREB",format:"percent",invert:!1},PCT_DREB:{visible:!1,index:9,label:"%DREB",format:"percent",invert:!1},PCT_REB:{visible:!1,index:10,label:"%REB",format:"percent",invert:!0},PCT_AST:{visible:!1,index:11,label:"%AST",format:"percent",invert:!1},PCT_TOV:{visible:!1,index:12,label:"%TOV",format:"percent",invert:!1},PCT_STL:{visible:!1,index:13,label:"%STL",format:"percent",invert:!1},PCT_BLK:{visible:!1,index:14,label:"%BLK",format:"percent",invert:!1},PCT_BLKA:{visible:!1,index:15,label:"%BLKA",format:"percent",invert:!1},PCT_PF:{visible:!1,index:15,label:"%PF",format:"percent",invert:!1},PCT_PFD:{visible:!1,index:15,label:"%PFD",format:"percent",invert:!1},PCT_PTS:{visible:!1,index:15,label:"%PTS",format:"percent",invert:!1}},n.columns=[],n.showCol)n.showCol[r].name=r,n.columns.push(n.showCol[r]);function l(){t.getStats(n)}n.$on("runit",function(e){for(var t in a.search().Split=[],n.splits)n.params[t]=n.splits[t].selected.val;l(),a.search()}),n.$watch("compare",function(){var e,t;n.compare.isReady&&(e=n.compare.left.lineupIDs,e=JSON.stringify(e).replace("[","").replace("]","").replace(/"/g,""),t=n.compare.right.lineupIDs,t=JSON.stringify(t).replace("[","").replace("]","").replace(/"/g,""),n.params.PlayerIDList=e,n.params.VsPlayerIDList=t,l(),n.splits=o.splits)},!0)}stats.controller("FantasyCompareUsageController",e),e.$inject=["$scope","$location","SplitsService","VsFantasyCompareService","SeasonsService"]}(),function(){function e(n,e,t,a,i,r){var s=r.get("finals");n.isLoaded=!1,n.hasData=!1,n.season=t.search().Season||s.SeasonYear,i.get(n.season).then(function(e){n.isLoaded=!0,n.hasData=!0,n.games=e;var t="Finals Infographic "+n.season;e.length&&e[0].name&&(t=t+" "+e[0].name),a.triggerEvent("viewInfographic",t)}).catch(function(e){n.isLoaded=!0,n.hasData=!1,n.games=[]})}stats.controller("FinalsController",e),e.$inject=["$scope","$filter","$location","DtmService","FinalsInfographicService","SeasonsService"]}(),function(){function e(a,e,n,i,t,r,s,o,l,c,u,h,d){var f,p,m,g=!1,v={advanced:r,"four-factors":s,misc:o,tracking:l,scoring:c,traditional:u,usage:h},y=v[e.data("section")]||v.traditional,_=d.get([{name:"bench",default:"Y",initial:"Y",type:"toggle",label:"Show Bench",val:{true:"Y",false:"N"}}]);a.splits=_.splits,a.setPeriod=function(e){var t={RangeType:e.RangeType,StartRange:e.startTime,EndRange:e.endTime};a.params=angular.extend({},a.params,t),i.search("RangeType",e.RangeType),i.search("StartRange",e.startTime),i.search("EndRange",e.endTime),T()};var b=i.search().StartRange||0,S=i.search().EndRange||28800;function T(){a.isLoading=!0;var t=a.params.bench;delete a.params.bench,y.get(a.params,p,f).then(function(e){a.isLoading=!1,"N"===t&&(e[f].datatable=e[f].datatable.filter(w),e[p].datatable=e[p].datatable.filter(w)),a.linescores={vtm:e[f],htm:e[p]},a.teamTitles={vtm:e[f].datafooter.TEAM_CITY+" "+e[f].datafooter.TEAM_NAME,htm:e[p].datafooter.TEAM_CITY+" "+e[p].datafooter.TEAM_NAME},g=!0,a.noData=0===e[f].datatable.length||0===e[p].datatable.length,a.isAllStarGame="All Star"===a.params.SeasonType&&20==+a.params.Season.slice(-2)})}function w(e){return""!==e.START_POSITION}function P(e){var t,n=a.slider;g&&(n.minValue===n.options.floor&&n.maxValue===n.options.ceil?(i.search("StartRange",null),i.search("EndRange",null)):(i.search("StartRange",n.minValue),i.search("EndRange",n.maxValue),i.search("RangeType",2),t={RangeType:2,StartRange:n.minValue,EndRange:n.maxValue},a.params=angular.extend({},a.params,t)))}a.slider={minValue:b,maxValue:S,options:{floor:0,ceil:28800,showTicksValues:!1,noSwitching:!1,draggableRange:!0,translate:function(e){return n("countdownClock")(e)}}},a.$watch("slider",P,!0),a.$watch("boxscore",function(e){if(!e||e.isLive)return;a.slider.options.ceil=a.boxscore.periods.max||a.slider.options.ceil,a.slider.maxValue=void 0===i.search().EndRange?a.slider.options.ceil:a.slider.maxValue,m=e.summary.GAME_ID,p=e.teamInfo.htm.id,f=e.teamInfo.vtm.id,a.periods=e.periods.ps.slice(0),a.selectedPeriod=a.periods.find(function(e){return i.search().StartRange==e.startTime&&i.search().EndRange==e.endTime}),a.selectedPeriod||(a.selectedPeriod=a.periods[0]);var t=n("gameIdToObject")(m);a.slider.showSlider=1996<=t.seasonyear,a.params={GameID:m,Season:t.Season,SeasonType:t.SeasonType,RangeType:i.search().RangeType||0,StartPeriod:i.search().StartPeriod||1,EndPeriod:i.search().EndPeriod||10,StartRange:i.search().StartRange||a.selectedPeriod.startTime,EndRange:i.search().EndRange||a.selectedPeriod.endTime,bench:a.splits.bench.selected.val},a.ai=angular.extend(a.ai,{gamedate:e.gameInfo.GAME_DATE,gamename:e.teams.vtm.TEAM_CITY_NAME+" "+e.teams.vtm.TEAM_NICKNAME+" @ "+e.teams.htm.TEAM_CITY_NAME+" "+e.teams.htm.TEAM_NICKNAME}),T()}),a.$watch("showSplits",function(){t(function(){a.$broadcast("rzSliderForceRender")})},!0),a.$on("runit",function(e){P(a.slider),T()})}stats.controller("GameBoxscoreController",e),e.$inject=["$scope","$element","$filter","$location","$timeout","BoxscoreAdvancedService","BoxscoreFourFactorsService","BoxscoreMiscService","BoxscorePlayerTrackingService","BoxscoreScoringService","BoxscoreTraditionalService","BoxscoreUsageService","SplitsService"]}(),function(){function e(t,n,e,a,i){var r,s,o;t.$watch("boxscore",function(e){if(!e)return;o=e.summary.GAME_ID,s=e.teamInfo.htm.id,r=e.teamInfo.vtm.id,t.params={GameID:o},t.isLoading=!0,a.get(t.params,s,r).then(function(e){t.isLoading=!1,t.noData=!e.PlayerDefensiveStats||!e.PlayerDefensiveStats.rows.length,t.noData||(e.PlayerDefensiveStats.rows.forEach(function(e){e.SECONDS=n("minutesToSeconds")(e.MIN)}),t.linescores={vtm:n("filter")(e.PlayerDefensiveStats.rows,{TEAM_ID:r}),htm:n("filter")(e.PlayerDefensiveStats.rows,{TEAM_ID:s})},t.teamTitles={vtm:t.linescores.vtm[0].TEAM_CITY+" "+(t.linescores.vtm[0].TEAM_NICKNAME||""),htm:t.linescores.htm[0].TEAM_CITY+" "+(t.linescores.htm[0].TEAM_NICKNAME||"")})})})}stats.controller("GameDefenseStatsController",e),e.$inject=["$scope","$filter","$location","BoxscoreDefenseService","SplitsService"]}(),function(){function e(a,i,r,s,o,e,l){function c(e){return e}function u(e){return""!==e.START_POSITION}function h(e){return""===e.START_POSITION}function d(e,t){return t.FAN_DUEL_PTS-e.FAN_DUEL_PTS}function f(e,t){var n,a,i,r="PTS REB AST STL BLK TO FGA FGM FG3A FG3M FTA FTM".split(" "),s="PTS REB AST STL BLK TOV FG% 3P% FT%".split(" "),o=["vtm","htm"],l={vtm:e,htm:t},c=[],u={};for(n in o)for(var h in u[a=o[n]]={},r){var d,f=r[h];for(d in u[a][f]=0,l[a]){var p=l[a][d];u[a][f]+=p[f]||0}}for(n in o)u[a=o[n]].TOV=u[a].TO,u[a]["FG%"]=u[a].FGM/u[a].FGA*100,u[a]["3P%"]=u[a].FG3M/u[a].FG3A*100,u[a]["FT%"]=u[a].FTM/u[a].FTA*100;for(i in s){var m=s[i],g={label:m};for(n in o)g[a=o[n]]=u[a][m];c.push(g)}return c}a.noData=!1,a.hasFanduel=!1,a.hasBoxscore=!1,a.hasLinescore=!1,a.hasGameflow=!1,a.$watch("boxscore",function(e){var t,n;e&&(a.hasBoxscore=!0,a.imgSeason=a.boxscore.season.substr(0,4),a.GameID=e.summary.GAME_ID,a.vtm=angular.extend({},a.boxscore.teamInfo.vtm),a.htm=angular.extend({},a.boxscore.teamInfo.htm),a.pitpStats={label:"PTS IN THE PAINT",vtm:angular.extend({},a.boxscore.teamInfo.vtm,{value:a.boxscore.teams.vtm.otherStats.PTS_PAINT}),htm:angular.extend({},a.boxscore.teamInfo.htm,{value:a.boxscore.teams.htm.otherStats.PTS_PAINT})},a.scStats={label:"SECOND CHANCE PTS",vtm:angular.extend({},a.boxscore.teamInfo.vtm,{value:a.boxscore.teams.vtm.otherStats.PTS_2ND_CHANCE}),htm:angular.extend({},a.boxscore.teamInfo.htm,{value:a.boxscore.teams.htm.otherStats.PTS_2ND_CHANCE})},a.fbStats={label:"FASTBREAK PTS",vtm:angular.extend({},a.boxscore.teamInfo.vtm,{value:a.boxscore.teams.vtm.otherStats.PTS_FB}),htm:angular.extend({},a.boxscore.teamInfo.htm,{value:a.boxscore.teams.htm.otherStats.PTS_FB})},t=i("gameIdToObject")(a.GameID),a.params={GameID:a.GameID,SeasonType:t.SeasonType,Season:t.Season,RangeType:0,StartPeriod:1,EndPeriod:10,StartRange:0,EndRange:1e4},a.isLoading=!0,a.hasLinescore=!1,r.get(a.params).then(function(e){a.hasLinescore=!0,a.linescores={vtm:e[a.boxscore.summary.VISITOR_TEAM_ID],htm:e[a.boxscore.summary.HOME_TEAM_ID]},a.vtm.players=a.linescores.vtm.datatable.map(c),a.vtm.starters=i("filter")(a.linescores.vtm.datatable,u),a.vtm.bench=i("filter")(a.linescores.vtm.datatable,h),a.vtm.linescore=a.linescores.vtm.datafooter[0],a.htm.players=a.linescores.htm.datatable.map(c),a.htm.starters=i("filter")(a.linescores.htm.datatable,u),a.htm.bench=i("filter")(a.linescores.htm.datatable,h),a.htm.linescore=a.linescores.htm.datafooter[0],a.starterStats=f(a.vtm.starters,a.htm.starters),a.benchStats=f(a.vtm.bench,a.htm.bench),a.teamStats=f(a.vtm.players,a.htm.players),a.playerStatsBasic={vtm:angular.extend({},a.boxscore.teamInfo.vtm,{players:a.linescores.vtm.datatable}),htm:angular.extend({},a.boxscore.teamInfo.htm,{players:a.linescores.htm.datatable})}}),function(){a.hasGameflow=!1;var e={GameID:a.GameID,RunType:"each second"};s.get(e).then(function(e){a.hasGameflow=!0,a.summary=e,a.summary.otherStats={vtm:a.boxscore.teams.vtm.otherStats,htm:a.boxscore.teams.htm.otherStats};var t=l.getById(a.boxscore.summary.VISITOR_TEAM_ID),n=l.getById(a.boxscore.summary.HOME_TEAM_ID);a.summary.colors={vtm:t.color,htm:n.color}})}(),n={GameID:a.GameID},a.hasFanduel=!1,o.get(n).then(function(e){var t=e[0].rows;a.hasFanduel=0<t.length,a.vtm.fanduelPlayers=i("filter")(t,{TEAM_ID:a.vtm.id}),a.htm.fanduelPlayers=i("filter")(t,{TEAM_ID:a.htm.id}),a.vtm.fanduelLeader=a.vtm.fanduelPlayers.sort(d)[0],a.htm.fanduelLeader=a.htm.fanduelPlayers.sort(d)[0],a.fanduelStats={vtm:{player:a.vtm.fanduelLeader,team:a.vtm},htm:{player:a.htm.fanduelLeader,team:a.htm}}}))})}stats.controller("GameGameChartsController",e),e.$inject=["$scope","$filter","BoxscoreTraditionalService","BoxscoreWinProbabilityService","BoxscoreFanduelStatsService","PlayersService","TeamsService"]}(),function(){function e(n,e,t,a,i){var r,s,o,l=i.get([{name:"bench",default:"Y",initial:"Y",type:"toggle",label:"Show Bench",val:{true:"Y",false:"N"}}]);function c(){n.isLoading=!0,n.ai={};var t=n.params.bench;delete n.params.bench,a.get(n.params,s,r).then(function(e){n.isLoading=!1,n.ai.seasoncode=+n.params.GameID.substr(2,3),"N"===t&&(e[r].datatable=e[r].datatable.filter(u),e[s].datatable=e[s].datatable.filter(u)),n.linescores={vtm:e[r],htm:e[s]},n.teamTitles={vtm:e[r].datafooter.TEAM_CITY+" "+e[r].datafooter.TEAM_NAME,htm:e[s].datafooter.TEAM_CITY+" "+e[s].datafooter.TEAM_NAME},n.noData=0===e[r].datatable.length||0===e[s].datatable.length})}function u(e){return""!==e.START_POSITION}n.splits=l.splits,n.$watch("boxscore",function(e){if(!e)return;o=e.summary.GAME_ID,s=e.teamInfo.htm.id,r=e.teamInfo.vtm.id,n.params={GameID:o,bench:n.splits.bench.selected.val},c()}),n.$on("runit",function(e){c()})}stats.controller("GameHustleStatsController",e),e.$inject=["$scope","$filter","$location","BoxscoreHustleService","SplitsService"]}(),function(){function e(a,n,i,t,e){var r,s,o,l,c;function u(){var e=a.selectedPlayerOff?a.selectedPlayerOff.OFF_PLAYER_ID:"",t=a.selectedPlayerDef?a.selectedPlayerDef.DEF_PLAYER_ID:"";i.search("OFF_PLAYER_ID",e),i.search("DEF_PLAYER_ID",t),a.matchups=n("filter")(a.allPlayers,{DEF_PLAYER_ID:t,OFF_PLAYER_ID:e})}a.$watch("boxscore",function(e){if(!e)return;o=e.summary.GAME_ID,s=e.teamInfo.htm.id,r=e.teamInfo.vtm.id,l=i.search().OFF_PLAYER_ID||"",c=i.search().DEF_PLAYER_ID||"",a.params={GameID:o},a.isLoading=!0,t.get(a.params,s,r).then(function(e){var t;a.isLoading=!1,a.noData=!e.PlayerMatchupsStats||!e.PlayerMatchupsStats.rows.length,a.noData||(e.PlayerMatchupsStats.rows.forEach(function(e){e.SECONDS=n("minutesToSeconds")(e.MIN)}),a.allPlayers=e.PlayerMatchupsStats.rows,a.defensivePlayers=n("uniqueKey")(a.allPlayers,"DEF_PLAYER_ID"),a.offensivePlayers=n("uniqueKey")(a.allPlayers,"OFF_PLAYER_ID"),t={OFF_PLAYER_NAME:"All Players",OFF_PLAYER_ID:"",OFF_TEAM_ABBREVIATION:"All",DEF_PLAYER_NAME:"All Players",DEF_PLAYER_ID:"",DEF_TEAM_ABBREVIATION:"All"},a.offensivePlayers.unshift(t),a.defensivePlayers.unshift(t),a.selectedPlayerOff=a.offensivePlayers.find(function(e){return+e.OFF_PLAYER_ID==+l}),a.selectedPlayerDef=a.defensivePlayers.find(function(e){return+e.DEF_PLAYER_ID==+c}),a.selectedPlayerOff||(a.selectedPlayerOff=a.offensivePlayers[0]),a.selectedPlayerDef||(a.selectedPlayerDef=a.defensivePlayers[0]),a.matchups=n("filter")(a.allPlayers,{DEF_PLAYER_ID:a.selectedPlayerDef.DEF_PLAYER_ID,OFF_PLAYER_ID:a.selectedPlayerOff.OFF_PLAYER_ID}))})}),a.setPlayer=u,a.swapSides=function(e){e.preventDefault();var t=a.selectedPlayerOff.OFF_PLAYER_ID,n=a.selectedPlayerDef.DEF_PLAYER_ID;a.selectedPlayerOff=a.offensivePlayers.find(function(e){return e.OFF_PLAYER_ID===n}),a.selectedPlayerDef=a.defensivePlayers.find(function(e){return e.DEF_PLAYER_ID===t}),a.selectedPlayerOff||(a.selectedPlayerOff=a.offensivePlayers[0]);a.selectedPlayerDef||(a.selectedPlayerDef=a.defensivePlayers[0]);u()},a.selectedPlayerOff={},a.selectedPlayerDef={},a.offensivePlayers=[],a.defensivePlayers=[]}stats.controller("GameMatchupController",e),e.$inject=["$scope","$filter","$location","BoxscoreMatchupService","SplitsService"]}(),function(){function e(o,e,l,t,n,a,i){var r=l("range")(1,14);o.hasData=!1,o.isLoaded=!1,o.setPeriod=function(e){var t=angular.element("#qtr"+e);t.length&&$("html, body").animate({scrollTop:t.offset().top-50},250)},o.pbpPeriods={},o.$watch("boxscore",function(e){if(o.isLoaded=!0,e){var t=e.summary.GAME_ID,n=l("gameIdToObject")(t);if(o.isNewLink=2013<l("seasonToSeasonYear")(n.Season),o.hideVideoIcon=+n.Season.substring(0,4)<2015,o.params={GameID:t,SeasonType:n.SeasonType,Season:n.Season,RangeType:2,StartPeriod:1,EndPeriod:10,StartRange:0,EndRange:55800},o.av=e.av,o.vtm=e.teamInfo.vtm,o.htm=e.teamInfo.htm,e.isLive)return o.periods=r.slice(0,e.game.p),o.hasData=e.plays&&e.plays.length,o.isLoaded=!1,void i.get(o.params.GameID,o.params).then(function(s){o.plays=s.map(function(e,t){var n={},a=0===t?0:t===s.length-1?s.length-1:t-1;n.homeScore=e.hs,n.visitorScore=e.vs;var i=n.homeScore+n.visitorScore!==s[a].hs+s[a].vs,r=e.tid==o.htm.id;return angular.extend({},e,{PERIOD:e.p,SCORE:i?n.visitorScore+" - "+n.homeScore:null,GAME_ID:o.params.GameID,EVENTMSGTYPE:e.etype,EVENTNUM:e.evt,PCTIMESTRING:e.cl,HOMEDESCRIPTION:r?l("eventDesc")(e.de):null,VISITORDESCRIPTION:r?null:l("eventDesc")(e.de)})}),o.hasData=s&&s.length,o.isLoaded=!0;var e=o.plays.slice(-1)[0].PERIOD;o.periods=r.slice(0,e)}).catch(function(e){o.plays=[],o.hasData=!1,o.isLoaded=!0});o.ai={gamedate:e.gameInfo.GAME_DATE,gamename:e.teams.vtm.TEAM_CITY_NAME+" "+e.teams.vtm.TEAM_NICKNAME+" @ "+e.teams.htm.TEAM_CITY_NAME+" "+e.teams.htm.TEAM_NICKNAME},e.isLive||(o.isLoaded=!1,a.get(o.params).then(function(e){o.plays=e,o.hasData=e&&e.length,o.isLoaded=!0;var t=e.slice(-1)[0].PERIOD;o.periods=r.slice(0,t)}).catch(function(e){o.plays=[],o.hasData=!1,o.isLoaded=!0}))}}),o.scrollTop=function(){t.hash(""),e()}}stats.controller("GamePlayByPlayController",e),e.$inject=["$scope","$anchorScroll","$filter","$location","$window","BoxscorePlayByPlayService","MobilePlayByPlayService"]}(),function(){function e(k,I,e,t,n,a,i,M,r){k.$watch("boxscore",function(e,t,n){if(!e)return;k.params.GameID=e.summary.GAME_ID,k.boxscore=e,k.vls=e.vls,k.hls=e.hls,o(k.boxscore),k.$on("runit",function(e){o(k.boxscore)})});var s=i.get([{name:"RotationStat",label:"View Stats",default:"PLAYER_PTS",inital:"PLAYER_PTS",type:"select",options:[{val:"PLAYER_PTS",text:I("statFieldToText")("PLAYER_PTS")},{val:"PT_DIFF",text:I("statFieldToText")("PLUS/MINUS")},{val:"USG_PCT",text:I("statFieldToText")("USG_PCT")}]},"LeagueID"]);function o(A){k.isLoading=!0,d3.selectAll("svg").remove(),t.get(k.params).then(function(e){k.isLoading=!1,k.rotations=e;A.periods.ps[1].endTime,A.periods.ps[0].startTime;var t=A.periods.ps[0].endTime,i=A.periods.ps.slice(1,-2),a=0,n=k.rotations.AwayTeam.rows.sort(l).concat(k.rotations.HomeTeam.rows.sort(l))||[],r=k.rotations.AwayTeam.rows.sort(l),s=k.rotations.HomeTeam.rows.sort(l);k.vls&&k.hls?k.teamScores={home:k.hls,away:k.vls}:k.teamScores={home:{s:s.reduce(function(e,t){return e+t.PLAYER_PTS},0),q1:A.teams.htm.linescore.PTS_QTR1,q2:A.teams.htm.linescore.PTS_QTR2,q3:A.teams.htm.linescore.PTS_QTR3,q4:A.teams.htm.linescore.PTS_QTR4,ot1:A.teams.htm.linescore.PTS_OT1,ot2:A.teams.htm.linescore.PTS_OT2,ot3:A.teams.htm.linescore.PTS_OT3,ot4:A.teams.htm.linescore.PTS_OT4,ot5:A.teams.htm.linescore.PTS_OT5},away:{s:r.reduce(function(e,t){return e+t.PLAYER_PTS},0),q1:A.teams.vtm.linescore.PTS_QTR1,q2:A.teams.vtm.linescore.PTS_QTR2,q3:A.teams.vtm.linescore.PTS_QTR3,q4:A.teams.vtm.linescore.PTS_QTR4,ot1:A.teams.vtm.linescore.PTS_OT1,ot2:A.teams.vtm.linescore.PTS_OT2,ot3:A.teams.vtm.linescore.PTS_OT3,ot4:A.teams.vtm.linescore.PTS_OT4,ot5:A.teams.vtm.linescore.PTS_OT5}};var o=M.get().reduce(function(e,t){return e[t.id]=t,e},{});function l(e,t){return e.IN_TIME_REAL-t.IN_TIME_REAL}var c=d3.nest().key(function(e){return e.PERSON_ID}).entries(n),u=d3.nest().key(function(e){return e.TEAM_NAME}).key(function(e){return e.PERSON_ID}).entries(n),h=Object.keys(c).length+6,d={top:10,right:125,bottom:10,left:125},f=18,p=document.querySelector(".game-rotations").offsetWidth-200,m=f*h+50,g=k.splits.RotationStat.selected.val,v=d3.scaleLinear().range([0,p]).domain([0,t]),y=n.sort(function(e,t){return e.PLAYER_PTS-t.PLAYER_PTS}),_=[y[0].PLAYER_PTS,10*Math.ceil(y[y.length-1].PLAYER_PTS/10)],b=n.sort(function(e,t){return e.PT_DIFF-t.PT_DIFF}),S=[b[0].PT_DIFF,10*Math.ceil(b[b.length-1].PT_DIFF/10)],T=n.sort(function(e,t){return e.USG_PCT-t.USG_PCT}),w={PT_DIFF:S,PLAYER_PTS:_,USG_PCT:[T[0].USG_PCT,T[T.length-1].USG_PCT]};function P(e){return o[e]?o[e].color:"#666"}var x=d3.select(".rotations-chart").append("svg").attr("width",function(e){return p+d.left+d.right}).attr("height",m+d.top+d.bottom+50*u.length+30).attr("class","rotations-chart_container");x.append("rect").attr("width","100%").attr("height","100%").attr("fill","#fff");var C={startTime:t,text:"FINAL"},D=i.concat(C).filter(function(e){return 0!=e.lp});function E(e){var t=e.append("g").attr("class",function(e){return"".concat(e.key.toLowerCase(),"-players")}).selectAll(".row.teams-row").data(function(e){return e.values}).enter().append("g").attr("class","row player-row").attr("transform",function(e,t){return"translate(-1, ".concat(t*f,")")}).attr("data-pid",function(e){return e.values[0].PERSON_ID}).attr("data-team",function(e,t){return e.values[0].TEAM_ID});t.append("text").attr("x",d.left-2).attr("text-anchor","end").attr("font-family","Roboto, sans-serif").attr("font-size",12).attr("font-weight",function(e,t){return 0===e.values[0].IN_TIME_REAL?"bold":"normal"}).text(function(e){return e.values[0].PLAYER_FIRST.slice(0,1)+". "+e.values[0].PLAYER_LAST});var n=t.selectAll(".session").data(function(e){return e.values}).enter().append("g");n.append("line").attr("stroke",function(e){return P(e.TEAM_ID)}).attr("x1",function(e){return v(e.IN_TIME_REAL)+d.left+1}).attr("y1",-13).attr("x2",function(e){return v(e.IN_TIME_REAL)+d.left+1}).attr("y2",5).attr("stroke-width",a),n.append("line").attr("stroke",function(e){return P(e.TEAM_ID)}).attr("x1",function(e){return v(e.OUT_TIME_REAL)+d.left+1}).attr("y1",-13).attr("x2",function(e){return v(e.OUT_TIME_REAL)+d.left+1}).attr("y2",5).attr("stroke-width",a),n.append("rect").attr("class","session session-rotations").attr("x",function(e){return v(e.IN_TIME_REAL)+d.left+3.5}).attr("y",-13).attr("width",function(e){return v(e.OUT_TIME_REAL)-v(e.IN_TIME_REAL)-2}).attr("height",f).attr("rx",0).attr("fill",function(e){var t,n,a,i,r=e[g];return(t=e.TEAM_ID,n=g,a=P(t),i=w[n],d3.scaleLinear().domain(i).range(["#eee",a]))(r)}).append("title").text(function(e){var t="USG_PCT"===g?"".concat(I("percent")(e[g])," ").concat(I("statFieldToText")(g)," in ").concat((e.OUT_TIME_REAL-e.IN_TIME_REAL)/600|"decimalTime"," min"):"PT_DIFF"===g?"".concat(e[g]," Plus/Minus in ").concat((e.OUT_TIME_REAL-e.IN_TIME_REAL)/600|"decimalTime"," min"):"".concat(e[g]," ").concat(I("statFieldToText")(g)," in ").concat((e.OUT_TIME_REAL-e.IN_TIME_REAL)/600|"decimalTime"," min");return t}).transition().duration(100)}x.append("g").attr("class","x-axis").attr("transform","translate(".concat(d.left,", ").concat(m-d.bottom,")")).call(d3.axisBottom(v).tickSizeOuter(0).tickSize(-m+d.top+d.bottom+50).tickValues(D.map(function(e){return e.startTime}))).call(function(e){return e.select(".domain").remove()}),x.selectAll("text").data(D).text(function(e){return e.text}).attr("font-family","Roboto, sans-serif").attr("text-anchor","start"),x.append("g").attr("class","chart").attr("transform","translate(0, ".concat(m-f*(h-3),")")).selectAll("g.row").data(u).enter().append("g").call(function(e){e.append("text").attr("dy",-20).attr("dx",-5).attr("text-anchor","end").attr("font-weight",800).attr("font-size",14).attr("font-family","Roboto, sans-serif").attr("fill",function(e){return P(e.values[0].values[0].TEAM_ID)}).attr("x",d.left).text(function(e,t){0===t?k.teamScores.away.s:k.teamScores.home.s;return"".concat(e.key)}),e.attr("class",function(e){return"row teams-row teams-row-".concat(e.key.toLowerCase())}).attr("transform",function(e,t){return"translate(-1, ".concat(1<=t?t*f*u[0].values.length+52:t*f*u[0].values.length,")")}).call(E),e.append("g").attr("class",function(e){return"".concat(e.key.toLowerCase(),"-score")}).attr("transform",function(e){return"translate(".concat(d.left,", -18)")}).attr("width",p).attr("fill","black").selectAll(".row.teams-score").data(function(e,t,n){var a=D.slice(0,-1).map(function(e,t,n){return angular.extend({},e,{away:k.teamScores.away[e.text.toLowerCase()],TEAM_ID:u[0].values[0].values[0].TEAM_ID})}),i=D.slice(0,-1).map(function(e){return angular.extend({},e,{home:k.teamScores.home[e.text.toLowerCase()],TEAM_ID:u[1].values[0].values[0].TEAM_ID})}).map(function(e,t,n){if(0===t)return e;var a=n[t-1].home;return e.home=e.home+a,e}),r=a.map(function(e,t,n){if(0===t)return e;var a=n[t-1].away;return e.away=e.away+a,e});return 1<=t?i:r}).enter().append("g").attr("class",function(e){return"row team-row-score-".concat(e.text)}).attr("transform",function(e,t,n){var a=v(e.endTime)||0;return"translate(".concat(a,", 0)")}).attr("width",function(e,t){return"".concat(p/i.length*t+d.left)}).attr("height",f).append("text").text(function(e,t,n){return e.home?e.home:e.away}).attr("font-size",14).attr("font-weight",800).attr("text-anchor","end").attr("font-family","Roboto, sans-serif").attr("dy",-2).attr("fill",function(e){return P([e.TEAM_ID])}).attr("width",function(e,t){return"".concat(p/i.length*t+d.left)})}),x.selectAll("g.view-stat").data([g]).enter().append("text").attr("x",0).attr("y",0).attr("dx",5).attr("dy",30).attr("transform",function(e,t){var n=d.left,a=h*f+50+d.top;return"translate(".concat(n,", ").concat(a,")")}).attr("text-anchor","start").attr("font-weight",800).attr("font-family","Roboto, sans-serif").attr("font-size",12).text(function(e){var t=g.split("_").join(" ");return"USG PCT"===t?"USG %":"PT DIFF"===t?"Plus/Minus":"".concat(t)}),x.append("g").attr("class","legend").attr("height",50).attr("width",p/i.length).attr("transform",function(e){return"translate(0, ".concat(f*h+50*u.length,")")}).selectAll(".legend").data(u).enter().call(function(e){var t=e.append("g").attr("class",function(e){return"".concat(e.key.toLowerCase(),"-legend")}).attr("transform",function(e,t){return 1<=t?"translate(".concat(d.left,", ").concat(t*f+0,")"):"translate(".concat(d.left,", 0 )")}).append("g").attr("class",function(e){return"".concat(e.key.toLowerCase(),"-legend-block")}),n=t.append("defs").append("linearGradient").attr("id","svgGradient0").attr("x1","0%").attr("x2","85%");n.append("stop").attr("class","start").attr("offset","0%").attr("stop-color","#eeeaea").attr("stop-opacity",1),n.append("stop").attr("class","end").attr("offset","100%").attr("stop-color",function(e,t){return P(u[0].values[0].values[0].TEAM_ID)}).attr("stop-opacity",1);var a=t.append("defs").append("linearGradient").attr("id","svgGradient1").attr("x1","0%").attr("x2","85%");a.append("stop").attr("class","start").attr("offset","0%").attr("stop-color","#eeeaea").attr("stop-opacity",1),a.append("stop").attr("class","end").attr("offset","100%").attr("stop-color",function(e,t){return P(u[1].values[0].values[0].TEAM_ID)}).attr("stop-opacity",1),t.append("rect").attr("class","legend-block").attr("x",0).attr("y",0).attr("height",18).attr("width",function(e){return"".concat(p/i.length)}).attr("transform",function(e){return"translate(0, 0)"}).attr("fill",function(e,t){d3.scaleLinear().domain(w[g]).range(["white",P(e.values[0].values[0].TEAM_ID)]);return"url(#svgGradient".concat(t,")")}),t.selectAll("text.legend-block-copy").data(function(e){return"USG_PCT"===g?w[g].map(function(e){return I("percent")(e)}):w[g]}).enter().append("text").text(function(e){return"PLAYER_PTS"===g&&+e<0?0:e}).attr("x",0).attr("y",0).attr("text-anchor",function(e,t){return 0===t?"start":"end"}).attr("font-weight",500).attr("font-family","Roboto, sans-serif").attr("font-size",12).attr("transform",function(e,t){return 1<=t?"translate(".concat(p/i.length,", 0)"):"translate(0, 0)"}).attr("dy",12.5).attr("dx",function(e,t){return 0===t?5:-5}).attr("fill",function(e,t){return 0===t?"#000":"#fff"}).attr("font-family","Roboto, sans-serif")}),x.append("g").attr("transform",function(e){var t=d.left+p/i.length,n=f*h+50*u.length;return"translate(".concat(t,", ").concat(n,")")}).append("text").attr("dy",function(e){return 10}).attr("dx",function(e){return 30}).text("* Bold = Starter").attr("font-size",12).attr("font-weight","bold").attr("font-family","Roboto, sans-serif").attr("text-anchor","start"),x.append("g").attr("class","nba-stats-svg-copy").attr("transform",function(e){var t=m+u.length+50+30+d.top+36;return"translate(".concat(p,", ").concat(t,")")}).append("text").attr("text-anchor","start").attr("font-weight",800).attr("fill","#1a477b").attr("font-family","Roboto, sans-serif").attr("font-size",20).text(function(e){return"NBA.com/Stats"})})}k.splits=s.splits,k.params=s.params,k.isLoading=!0,d3.select(window).on("resize.updatesvg",function(e){o(k.boxscore)})}stats.controller("GameRotationsController",e),e.$inject=["$scope","$filter","$location","GameRotationService","LeagueLineupVizService","PlayersService","SplitsService","TeamsService","BoxscoreScoringService"]}(),function(){function e(s,o,l,i,c,n,a){s.setPeriod=function(e){s.slider.minValue=e.startTime,s.slider.maxValue=e.endTime},s.setShotChart=function(e){"Plot"!==e.ShotChart&&"Zone"===e.ShotChart?(s.showShotPlot=!1,s.showShotZone=!0):(s.showShotPlot=!0,s.showShotZone=!1)},s.showSplits=!0,s.isLoaded=!1,s.hasData=!1,s.showShotPlot=!0;var e={minValue:0,maxValue:1,options:{floor:0,ceil:1,showTicksValues:s.showShotZone=!1,noSwitching:!0,draggableRange:!0,translate:function(e){return o("countdownClock")(e)}}};s.slider=e,s.vtm={type:"vtm",showAll:!0,players:[],shots:[],selectedShots:[],fgm:0,fga:0,fgp:null,title:""},s.htm={type:"htm",showAll:!0,players:[],shots:[],selectedShots:[],fgm:0,fga:0,fgp:null,title:""};var r,u,h=!(s.shotCharts=[{ShotChart:"Plot",text:"Shot Plot"},{ShotChart:"Zone",text:"Shot Zone"}]);function d(e,t){var n=e.type,a=e.players.reduce(v,[]);e.showAll=0===a.length|t,e.showAll?(e.players.forEach(function(e){e.show=!1}),e.selectedShots=e.shots):(e.showAll=!1,e.selectedShots=e.shots.filter(function(e,t){return!e.length||-1<e.indexOf(t.pid)}.bind("",a)));var i=s.slider.minValue,r=s.slider.maxValue;e.selectedShots=e.selectedShots.filter(function(e,t,n){return n.decimalTime>=e&&n.decimalTime<=t}.bind("",i,r)),e.fga=e.selectedShots.length,e.fgm=e.selectedShots.reduce(y,0),e.fgp=e.fgm/e.fga,h&&(e.showAll?l.search(n,null):l.search(n,a.join(","))),f()}function t(e){var t,n,a;e&&e.hls&&e.hls.pstsg&&e.plays?(h||(s.isLoaded=!0,s.hasData=!0,s.vtm.players=e.vls.pstsg.filter(function(e){return""===e.memo}),s.htm.players=e.hls.pstsg.filter(function(e){return""===e.memo}),p(s.vtm.players,l.search().vtm),p(s.htm.players,l.search().htm),s.vtm.title=g("vls",e,o),s.htm.title=g("hls",e,o),s.periods=e.periods.ps.slice(0),n=+l.search().StartRange,a=+l.search().EndRange,s.selectedPeriod=s.periods.find(function(e){return n==e.startTime&&a==e.endTime}),s.selectedPeriod||(s.selectedPeriod=s.periods[0]),n&&(s.slider.minValue=n),a&&(s.slider.options.ceil=+a,s.slider.maxValue=+a),s.selectedShotChart||(s.selectedShotChart=s.shotCharts[0]),(t=m(e))&&(a||(s.slider.maxValue=t.decimalTime),s.slider.options.ceil=t.decimalTime),h=!0),e.summary.GAME_ID,u=e.teamInfo.htm.id,r=e.teamInfo.vtm.id,(t=m(e))&&(s.slider.maxValue===s.slider.options.ceil&&(s.slider.maxValue=t.decimalTime),s.slider.options.ceil=t.decimalTime),i(function(){s.$broadcast("rzSliderForceRender")}),s.vtm.shots=e.plays.filter(_.bind("",r)),s.htm.shots=e.plays.filter(_.bind("",u)),f()):s.hasData=!1}function f(){var e,t,r;e=n.get(["Season","LeagueID"]),t={Season:e.splits.Season.selected.val,LeagueID:e.splits.LeagueID.selected.val},r=t.Season.split("-").shift()<2015,a.get(t).then(function(e){var t,n,a;function i(e){Object.entries(e).forEach(function(t){var e=t[1],n=e.group,a=e.items;t[1].FGA=a.length,t[1].FGM=a.filter(function(e){return e.madeflag}).length,t[1].FG_PCT=t[1].FGM/t[1].FGA,t[1].shots=a.map(function(e){return e.GRID_TYPE="Shot Chart Detail",e}),s.leagueAvg.map(function(e){return e.SHOT_ZONE_BASIC===n&&(t[1].leagueFG_PCT=.01*e.FG_PCT),e}),t[1].FG_PCT>=t[1].leagueFG_PCT+.1*t[1].leagueFG_PCT?t[1].traditionalPerf=5:t[1].FG_PCT<=t[1].leagueFG_PCT-.1*t[1].leagueFG_PCT?t[1].traditionalPerf=1:t[1].traditionalPerf=3})}e.League_Wide.rows.length&&!r||(t=c.find(".svg-color-scale:not(.shotzone__legend-footer)"),n=c.find(".shotzone__legend-item > text:first-child"),a=c.find(".shotzone__legend-footer"),n.each(function(e,t){t.style.display="none"}),a.each(function(e,t){t.style.display="none"}),t.each(function(e,t){t.classList.remove("svg-color-scale")})),s.leagueAvg=e.League_Wide.rows.reduce(function(e,t){var n,a=_createForOfIteratorHelper(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.SHOT_ZONE_BASIC===t.SHOT_ZONE_BASIC)return i.FGA+=t.FGA,i.FGM+=t.FGM,e}}catch(e){a.e(e)}finally{a.f()}return e.push(t),e},[]).map(function(e){return e.FG_PCT=+(e.FGM/e.FGA*100).toFixed(1),e}),o("shotZone")(s.vtm.selectedShots),o("shotZone")(s.htm.selectedShots),s.vtm.zones={basic:o("groupBy")(s.vtm.selectedShots,"SHOT_ZONE_BASIC")},s.htm.zones={basic:o("groupBy")(s.htm.selectedShots,"SHOT_ZONE_BASIC")},s.vtm.madeShots=s.vtm.selectedShots.filter(function(e){return e.madeflag}),s.htm.madeShots=s.htm.selectedShots.filter(function(e){return e.madeflag}),s.vtm.options={scaletype:"rg",zonetype:"Basic"},s.htm.options={scaletype:"rg",zonetype:"Basic"},i(s.vtm.zones.basic),i(s.htm.zones.basic)})}s.$watch("vtm",d,!0),s.$watch("htm",d,!0),s.$watch("slider",function(e){d(s.vtm),d(s.htm);var t=s.slider;h&&(t.minValue===t.options.floor&&t.maxValue===t.options.ceil?(l.search("StartRange",null),l.search("EndRange",null)):(l.search("StartRange",t.minValue),l.search("EndRange",t.maxValue)))},!0),s.$watch("boxscore",t,!0),s.$watch("showSplits",function(){i(function(){s.$broadcast("rzSliderForceRender")})},!0),s.showAllPlayersFor=function(e){d(s[e],!0)},t(s.boxscore)}function p(e,t){var n=(t||"").split(",");n&&0!==n.length?e.forEach(function(e){e.show=-1<n.indexOf(e.pid+"")}):e.showAll=!0}function m(e){return e.plays[e.plays.length-1]}function g(e,t,n){return[t[e].tc," during ",t.vls.ta," vs ",t.hls.ta," on ",n("date")(t.game.gdte,"MM/dd/yyyy","UTC")].join("")}function v(e,t){return t.show&&e.push(t.pid),e}function y(e,t){return e+=1===t.etype?1:0}function _(e,t){var n=+t.tid==+e,a=1===t.etype||2===t.etype;return n&&a}stats.controller("GameShotchartController",e),e.$inject=["$scope","$filter","$location","$timeout","$element","SplitsService","LeagueWideShotchartService"]}(),function(){function e(o,a,i,l,e,t,c,n,r,u,h,d,s){var f,p,m=e.absUrl();-1<m.indexOf("/#!/")&&(document.location=m.replace("/#!/","/"));var g=!1,v=!1,y=e.path().split("/")[2];o.isLoading=!0,o.hasHanaBoxscore=!1,o.gameInfo={},o.GameID=a.data("game-id"),o.params={GameID:o.GameID},o.round=function(e){return Math.round(10*e)/10},o.hasEsi=!(!window.esi_||"US"!==window.esi_.country),o.pointsBetLink="https://join.pointsbet.com/nba-win-probability/?utm_source=Unbounce_NBA&utm_medium=NBA&utm_campaign=Risk_Free_2_200_NBA_Win_Probability&utm_term=Unbounce&utm_content=NBA&promo=NBAWIN";var _=h.get().SeasonYear;function b(){n.get(o.params).then(T,w)}function S(){var e={league:o.gameObject.league,season:o.gameObject.seasonyear};r.get(o.params.GameID,e).then(P)}function T(e){var t,n,a;l.cancel(f),e&&e.summary&&3===e.summary.GAME_STATUS_ID&&1===e.summary.WH_STATUS?(2016<=o.gameObject.seasonyear&&!v&&S(),l.cancel(p),o.isLoading=!1,o.hasHanaBoxscore=!0,o.isLive=!1,t=2018<=(o.boxscore=e).summary.SEASON||2018<=e.summary.SEASON,n=2010<=e.summary.SEASON&&e.summary.SEASON<2018,a=2==e.summary.GAME_STATUS_ID||3==e.summary.GAME_STATUS_ID,o.summary=angular.extend(e.summary,{gameLinks:{gameBook:{lessThan2018:{display:n&&a,url:"http://www.nba.com/data/html/nbacom/"+e.summary.SEASON+"/gameinfo/"+e.summary.GAMECODE.substr(0,8)+"/"+e.summary.GAME_ID+"_Book.pdf"},greaterThan2018:{display:t&&a,url:"https://statsdmz.nba.com/pdfs/"+e.summary.GAMECODE.substr(0,8)+"/"+e.summary.GAMECODE.replace("/","_")+"_book.pdf"}},pdf:{display:a,url:"https://statsdmz.nba.com/pdfs/"+e.summary.GAMECODE.substr(0,8)+"/"+e.summary.GAMECODE.replace("/","_")+".pdf"}}}),o.officials=e.officials,o.gameInfo=e.gameInfo,o.ai=e.av,o.teams=e.teams,o.linescores=e.teams,o.otherStats=e.otherStats,o.seasonType=o.gameObject.SeasonType,o.isAllStarGame="All Star"===o.gameObject.SeasonType,e.seasonYear=o.gameObject.seasonyear,e.season=o.gameObject.Season,e.isPlayoffs=o.gameObject.isPlayoffs,e.isFinals=o.gameObject.isFinals,e.seasonType=o.seasonType,e.teamInfo={vtm:d.getById(e.summary.VISITOR_TEAM_ID),htm:d.getById(e.summary.HOME_TEAM_ID)},o.teamInfo=e.teamInfo,o.availableStats={advancedStats:e.av.hasAdvancedStats||!1,playerTracking:e.av.hasTracking||!1,playByPlay:1996<=o.gameObject.seasonyear,gameCharts:2015<=o.gameObject.seasonyear,hustle:e.av.hasHustle||!1,shotchart:2016<=o.gameObject.seasonyear,defenesePt:2017<=o.gameObject.seasonyear,rotations:!o.isAllStarGame||20!=+o.gameObject.Season.slice(-2)},o.boxscore.periods=D(e.summary.LIVE_PERIOD),o.$emit("onGameInfo",{id:e.summary.GAME_ID,info:e.teamInfo.vtm.abbr+" vs "+e.teamInfo.htm.abbr,sections:o.availableStats}),c.document.title="NBA.com/Stats - "+e.teamInfo.vtm.abbr+" vs "+e.teamInfo.htm.abbr):w()}function w(e){o.isLoading=!1,g||(S(),f=l(S,1e4))}function P(e){var t,n,a,i,r,s;o.isLoading=!1,o.isLive=!0,v=!0,3==+e.st&&(g=!0,o.hasHanaBoxscore||(p=l(b,1e4),l.cancel(f))),o.hasHanaBoxscore||(o.availableStats={advancedStats:!1,playerTracking:!1,playByPlay:!0,gameCharts:!1,hustle:!1,shotchart:!0,rotations:!0},o.$emit("onGameInfo",{id:e.gid,info:e.vls.ta+" vs "+e.hls.ta,sections:o.availableStats})),c.document.title="NBA.com/Stats - "+e.vls.ta+" vs "+e.hls.ta,e.hls.tstsg||(e.hls.tstsg={}),e.vls.tstsg||(e.vls.tstsg={}),e.hls.tstsg.tid=e.hls.tid,e.vls.tstsg.tid=e.vls.tid,e.hls.tstsg.pts=e.hls.s,e.vls.tstsg.pts=e.vls.s,e.hls.tstsg.pm=e.hls.tstsg.pts-e.vls.tstsg.pts,e.vls.tstsg.pm=e.vls.tstsg.pts-e.hls.tstsg.pts,o.boxscore?(o.boxscore.game=e,o.boxscore.hls=e.hls,o.boxscore.vls=e.vls,o.boxscore.periods=D(e.p||4)):(t={isLive:!0,teamInfo:{vtm:d.getById(e.vls.tid),htm:d.getById(e.hls.tid)},summary:{GAME_ID:e.gid,GAMECODE:e.gcode},hls:e.hls,vls:e.vls,game:e,periods:D(e.p||4),gid:e.gid},o.boxscore=t,a=2018<=(n=h.get(t.gid).SeasonYear)||2018<=n,i=2010<=n&&n<2018,r=t.isLive,o.summary=angular.extend(t.summary,{gameLinks:{gameBook:{lessThan2018:{display:i&&r,url:"http://www.nba.com/data/html/nbacom/"+t.summary.SEASON+"/gameinfo/"+t.summary.GAMECODE.substr(0,8)+"/"+t.summary.GAME_ID+"_Book.pdf"},greaterThan2018:{display:a&&r,url:"https://statsdmz.nba.com/pdfs/"+t.summary.GAMECODE.substr(0,8)+"/"+t.summary.GAMECODE.replace("/","_")+"_book.pdf"}},pdf:{display:r,url:"https://statsdmz.nba.com/pdfs/"+t.summary.GAMECODE.substr(0,8)+"/"+t.summary.GAMECODE.replace("/","_")+".pdf"}}}),o.teamTitles={vtm:e.vls.tc+" "+e.vls.tn,htm:e.hls.tc+" "+e.hls.tn}),o.boxscore.teamInfo.htm||(o.boxscore.teamInfo.htm={abbr:e.hls.ta,id:e.hls.tid+"",city:e.hls.tc,name:e.hls.tn,special:!0}),o.boxscore.teamInfo.vtm||(o.boxscore.teamInfo.vtm={abbr:e.vls.ta,id:e.vls.tid+"",city:e.vls.tc,name:e.vls.tn,special:!0}),s={league:o.gameObject.league,season:o.gameObject.seasonyear},u.get(o.params.GameID,s).then(x).catch(C)}function x(e){o.boxscore.plays||(o.boxscore.plays=[]);var t=e.slice(o.boxscore.plays.length);o.boxscore.plays=o.boxscore.plays.concat(t)}function C(e){o.boxscore.plays=o.boxscore.plays||[]}function D(e){var n=e<5?7200*e:3e3*(e-4)+28800,t=i("range")(1,e).map(function(e){var t={RangeType:2,lp:e,isOT:4<e,text:e<5?"Q"+e:"OT"+(e-4),startTime:e<5?7200*(e-1):3e3*(e-5)+28800,endTime:e<5?7200*e:3e3*(e-4)+28800};return t.val=t.endTime,t.pct=t.startTime/n,t}),a={min:0,max:n,ps:t};return a.ps.unshift({RangeType:0,lp:0,isOT:!1,text:"All Periods",startTime:0,endTime:n}),a.ps.push({RangeType:2,lp:0,isOT:!1,text:"1st Half",startTime:0,endTime:14400},{RangeType:2,lp:0,isOT:!1,text:"2nd Half",startTime:14400,endTime:28800}),5<e&&a.ps.push({RangeType:2,lp:0,isOT:!0,text:"All OT",startTime:28800,endTime:n}),a}function E(){o.isLoading=!0;var e={seasonYear:h.get().SeasonYear,gameDate:o.boxscore.game?o.boxscore.game.gdte.split("-").join(""):o.summary.GAMECODE.substring(0,8)};s.get(e).then(function(e){o.isLoading=!1,e&&(o.pointsBetGames=e)})}o.isAbove2018=2018<+_,o.GameID||(document.location=m.replace("/game","/scores")),o.currentRoute=""===y?"boxscore":y,o.currentSearchString=i("param")(e.search(),!0),o.gameObject=i("gameIdToObject")(o.GameID),"0031600002"==o.GameID&&(document.location="http://www.nba.com/games/20170217/WLDUSA"),b(),o.$on("$viewContentLoaded",function(e,t){var n=a.find(".game-view");o.pageCat=n.data("cat"),o.pageSection=n.data("section")}),o.$watch("boxscore",function(e,t){e&&(E(),o.boxscore.isLive?o.fetchPointsInterval=l(E,6e4):l.cancel(o.fetchPointsInterval))})}stats.controller("GameSummaryController",e),e.$inject=["$scope","$element","$filter","$interval","$location","$routeParams","$window","BoxscoreSummaryService","MobileGameDetailService","MobilePlayByPlayService","SeasonsService","TeamsService","StatsPointsBetService"]}(),function(){function e(o,e,l,t,n,a,i,c,r,s,u,h,d,f,p){var m=e.data("season-section"),g=(r.get(m).Flags,u.get([{name:"LeagueID",type:"select",label:"League",without:["99","14","12","09","20"],include:[{val:"20",text:"G League",disp:"GLEAGUE"}],default:"All-Leagues",includeBefore:[{val:"All-Leagues",text:"All Leagues"}]},{name:"LeagueIDByTeam",type:"select",label:"League",default:"00",options:[{val:"00",text:"NBA"},{val:"10",text:"WNBA"},{val:"13",text:"SACRAMENTO"},{val:"15",text:"VEGAS"},{val:"16",text:"UTAH"},{val:"20",text:"G League"}]},"Season",{name:"SeasonByDate",label:"Season",order:2e3,default:"2019-20",desc:"",type:"select",options:[{val:"2019-20",text:"2019-20"},{val:"2018-19",text:"2018-19"}]},{name:"SeasonType",without:["All Star"]},{name:"GameBookOptions",type:"select",label:"Options",default:"date",options:[{val:"date",text:"Schedule By Date"},{val:"team",text:"Schedule By Team"}]}]));function v(e){e.gdte=o.selectedDate.replace(/\//g,"-").split("-").reverse().join("-"),e.gameObj=l("gameIdToObject")(e.GAME_ID),e.league=e.gameObj.league.toLowerCase()}function y(){var e,n;o.games&&(e=o.games.slice(0),o.params.League&&(e=e.filter(function(e){return e.lid===o.params.League})),n=s.gameDate,"Y"===o.params.PD&&(e=e.filter(function(e){var t=new Date(e.gdte+"T00:00:00Z");return t.setUTCHours(5),n.setUTCHours(5),t.getTime()>=n.getTime()})),o.numGames=e.length,o.noMoreData=o.itemsPerPage>=o.numGames,o.gamesByDay=l("groupBy")(e,"gdte",{asArray:!0}),o.noData=0===o.gamesByDay.length)}function _(e){var t,n,a,i,r=o.splits.Season.selected.val.substring(0,4),s=o.splits.SeasonType.selected.val;n=r,a=s,(t=e)&&n&&a&&(i={LeagueID:t,Season:n,SeasonType:a},f.get(i).then(function(e){var t=e.CumeStatsTeamList.rows.map(function(e){return{val:e.TEAM_ID,text:e.TEAM}}),n=u.get([{name:"Teams",label:"Teams",type:"select",includeBefore:[{val:"",text:"Select A Team"}],default:"",options:t}]);o.splits.Teams=n.splits.Teams,o.params.Teams=n.params.Teams}).catch(function(e){return console.error(e)}))}function b(e){o.isLoading=!0;var s=[];e.forEach(function(e){var t,n,a,i,r;"All-Leagues"!==e.val&&(t=o.selectedDate,"date"===o.splits.GameBookOptions.selected.val&&(t?(n=o.selectedDate.slice(6),a=o.splits.SeasonByDate.selected.val.substring(0,4)):o.splits.SeasonByDate.selected.val.substring(0,4)),i={LeagueID:e.val,GameDate:o.selectedDate,DayOffset:"0"},s.push((r=i,new Promise(function(t,n){p.get(r).then(function(e){t(e)}).catch(function(e){n(e)})}))))}),Promise.allSettled(s).then(function(e){if(e&&e.length){var n=[];return e.forEach(function(t){"fulfilled"===t.status&&t.value.games.forEach(function(e){e.league=t.league,e.lid=t.leagueId,n.push(e)})}),n.forEach(v),o.games=n,y(),"date"===o.splits.GameBookOptions.selected.val&&(o.selectedGamesByDate=o.games.reduce(function(e,t){return Object.keys(e).length&&e[t.league]?e[t.league].push(t):e[t.league]=[t],e},{}),Object.keys(o.selectedGamesByDate).length||(o.noData=!0)),o.isLoading=!1,o.selectedGamesByTeam="",o.$apply(),o.games}console.error("no games returned")}).catch(function(e){console.error(e)})}o.splits=g.splits,o.params=g.params,o.isLoading=!1,o.noData=!1,o.selectedDate=n.search().Date,o.$on("runit",function(e){y(),b(o.splits.LeagueID.options)}),o.$on("updateFilters",function(e){var t,n,a,i,r,s;o.selectedGamesByDate="",o.selectedGamesByTeam="","LeagueID"===e.targetScope.split.name||"GameBookOptions"===e.targetScope.split.name&&"date"===o.splits.GameBookOptions.selected.val?(t=o.splits.LeagueID.selected,b("All-Leagues"===o.splits.LeagueID.selected.val?o.splits.LeagueID.options:[t])):(n=o.splits.LeagueIDByTeam.selected.val,("GameBookOptions"===e.targetScope.split.name&&"team"===o.splits.GameBookOptions.selected.val||"LeagueIDByTeam"===e.targetScope.split.name)&&(o.noData=!0,_(n))),"Teams"!==e.targetScope.split.name&&"SeasonType"!==e.targetScope.split.name&&"SeasonByDate"!==e.targetScope.split.name||(a=o.splits.SeasonByDate.selected.val.substring(0,4),i={league:o.splits.LeagueIDByTeam.selected.text.toLowerCase(),leagueId:o.splits.LeagueIDByTeam.selected.val},o.noData=!1,o.isLoading=!0,r=a,s=i,c.get(r,s).then(function(e){e.length||(o.noData=!0);var t=e.filter(function(e){e.gameObj=l("gameIdToObject")(e.gid),e.gameObj.league=e.gameObj.league.toLowerCase(),"dleague"===e.gameObj.league&&(e.gameObj.league="gleague");var t=o.splits.SeasonType.selected.val,n=o.splits.Teams.selected.val;return"Regular Season"===t?e.gameObj.isReg&&(n===e.v.tid||n===e.h.tid):"Pre Season"===t?e.gameObj.isPre&&(n===e.v.tid||n===e.h.tid):"Playoffs"===t?e.gameObj.isPlayoffs&&(n===e.v.tid||n===e.h.tid):e}).reduce(function(e,t){return Object.keys(e).length&&e[t.gameObj.league]?e[t.gameObj.league].push(t):e[t.gameObj.league]=[t],e},{});o.selectedGamesByTeam=t,Object.keys(t).length||(o.noData=!0),o.isLoading=!1}))}),o.$on("gameDateQueryChange",function(e,t){o.selectedDate=t;var n=o.splits.LeagueID.selected;b("All-Leagues"===o.splits.LeagueID.selected.val?o.splits.LeagueID.options:[n])}),b(o.splits.LeagueID.options)}stats.controller("GamebooksController",e),e.$inject=["$scope","$element","$filter","$interval","$location","$q","$timeout","MobileSeasonScheduleService","SeasonsService","ReferrerService","SplitsService","TeamsService","TodaysScoresService","CumeStatsTeamListService","ScoresService"]}(),function(){function e(a,e,t){e(),function(){var e=angular.element(document).find(".stats-glossary-page__item");a.json=[];for(var t={obj:{},title:""},n=0;n<e.length;n++)t.obj=e[n],t.title=e[n].children[0].innerText,a.json.push(t),t={}}();angular.element(window);var n=angular.element(".nav-container");a.isFrozen=!1,a.search="",a.searched=!1,a.onChange=function(e){!function(e){if(e.length<3)return a.searched=!1;a.searched=!0,a.results=[];var t=e.toLowerCase();a.json.forEach(function(e){-1!==e.title.toLowerCase().indexOf(t)?a.results.unshift(e):-1!==e.obj.innerText.toLowerCase().indexOf(t)&&a.results.push(e)}),angular.element(document).find(".search-results").html(""),a.results.forEach(function(e){var t=angular.element(e.obj).clone();angular.element(document).find(".search-results").append(t)}),a.results.length?a.noData=!1:a.noData=!0;a.results=[]}(a.search)},angular.element(window).on("scroll",function(e){var t=n.hasClass("nav-container--fixed");t!=a.isFrozen&&(a.isFrozen=t,a.$apply())})}stats.controller("GlossaryCtrl",e),e.$inject=["$scope","$anchorScroll","$element"]}(),function(){function e(t,n,e,a){t.isLoading=!0,t.hasGames=!1,t.params={LeagueID:"00",gameDate:""},t.$watch(function(){return e.path()},function(){e.path().slice(1)&&(t.params.gameDate=e.path().slice(1),t.isLoading=!0,a.get(t.params).then(function(e){t.isLoading=!1,t.videoStatus=e,n.$emit("numberOfGames",t.videoStatus.rows.length),t.hasGames=!!e.rows.length},function(e){t.isLoading=!1,t.hasGames=!1}))})}stats.controller("VideoStatusCtrl",e),e.$inject=["$scope","$rootScope","$location","VideoStatusService"]}(),function(){function e(n,e,t){var a=t.get("site");n.params={LeagueID:a.LeagueID},n.tableOptions={rowsPerPage:500},n.$on("customFields",function(e,t){n.customFields=t}),n.isLoading=!0,e.get(n.params).then(function(e){n.isLoading=!1,n.datasets=e}).catch(function(e){n.isLoading=!1,n.noData=!0})}stats.controller("FranchiseHistoryCtrl",e),e.$inject=["$scope","FranchiseHistoryService","SeasonsService"]}(),function(){function e(l,n,e,t,a,i,r,s,o,c,u){l.isLoading=!0,l.trustAsHtml=i.trustAsHtml,l.modules={},l.alerts=[],l.scrollTo=function(e){var t=a.hash();n.yOffset=50,a.hash(e),n(),a.hash(t)},l.dailyLeadersTitle="Daily Leaders";var h=o.get("site");l.flags=h.Flags;var d=["home_daily","home_editorial","home_season","home_sidebar"],f=["home_daily_players","home_daily_teams","season_players","season_teams"];l.isTeamsDaily=!!h.Flags.showDailyLeaders,l.isTeamsSeason=!h.Flags.showDailyLeaders,l.headersSwitchTeams=function(){h.Flags.showDailyLeaders&&(l.isTeamsDaily=!l.isTeamsDaily,l.isTeamsSeason=!l.isTeamsSeason,r.triggerEvent("homeSeasonLeadersTab",l.isPlayers?"season leaders_players":"season leaders_teams"))},l.isPlayersDaily=!!h.Flags.showDailyLeaders,l.isPlayersSeason=!h.Flags.showDailyLeaders,l.headersSwitchPlayers=function(){h.Flags.showDailyLeaders&&(l.isPlayersDaily=!l.isPlayersDaily,l.isPlayersSeason=!l.isPlayersSeason,r.triggerEvent("homeDailyLeadersTab",l.isPlayersDaily?"daily leaders_players":"daily leaders_teams"))};var p={loaded:0,total:d.length};function m(a){f.forEach(function(e){var t,n,s;(t=a)[n=e]&&t[n].items.forEach(function(e){e.playerstats?s="playerstats":e.teamstats&&(s="teamstats");for(var t=0;t<e[s].length;t++){var n=e.name,a=t+1,i=e[s][t],r=e[s][t-1];!r||!i.rank&&0===t||i[n]<r[n]?i.rank=a:i[n]==r[n]&&(i.rank=r.rank)}})});var e,t=new Date,n="".concat(t.getMonth()+1).padStart(2,0),i="".concat(t.getDate()).padStart(2,0),r=t.getFullYear(),s=18<=t.getHours(),o="".concat(n,"/").concat(i,"/").concat(r);o!==a.home_daily_players.items[0].gamedate&&(e=new Date(o).getTime()-new Date(a.home_daily_players.items[0].gamedate).getTime(),l.dailyLeadersTitle=864e5<e?"Daily Leaders":"Yesterdayâs Leaders"),o!==a.home_daily_players.items[0].gamedate||s||(l.dailyLeadersTitle="Todayâs Leaders"),o===a.home_daily_players.items[0].gamedate&&s&&(l.dailyLeadersTitle="Tonight's Leaders"),l.leaders_daily={players:a.home_daily_players,teams:a.home_daily_teams,live:"N"!==a.live_game_state.items[0].livegamestate[0].LIVE_GAME_FLAG,date:a.home_daily_players.items[0].gamedate,title:a.home_daily_players.title},l.nightlyAndSeasonLeaders={players:{nightly:a.home_daily_players,season:a.season_players},teams:{nightly:a.home_daily_teams,season:a.season_teams}},l.nightlyAndSeasonPlayerLeaders={nightly:a.home_daily_players,season:a.season_players};try{l.assist_tracker={count:a.assist_tracker.items[1].resultSets[0].rowSet[0][0],player:a.assist_tracker.items[0].posts[0],title:a.assist_tracker.title},l.hasAssistTracker=!0}catch(e){l.hasAssistTracker=!1}l.leaders_daily.live?g(3e4):g(3e5)}function g(e){t.cancel(l.livePromise),l.livePromise=t(v,e)}function v(){c.get("home_daily").then(function(e){e.items.forEach(function(e){l.modules[e.uid]=e}),m(l.modules);var t=!1;try{t="N"!==e.items[2].items[0].livegamestate[0].LIVE_GAME_FLAG}catch(e){console.error(e)}g(t?3e4:3e5)}),y()}function y(){c.get("nba_stat_alerts").then(function(e){e&&e.alerts&&(l.statAlerts=e.alerts.slice(0,6),l.statAlerts.forEach(function(e){e.player=s.getById(e.PersonId),e.team=u.getById(e.TeamId),0<e.PersonId?e.isPlayerAlert=!0:e.TeamId&&(e.isTeamAlert=!0)}))}).catch(function(e){console.error("error fetching alerts")})}l.trackScoresClick=function(){r.triggerEvent("homepageLiveScoresLink")},d.forEach(function(e,t,n){c.get(e).then(function(e){var t=e.items;p.loaded++,t.forEach(function(e){l.modules[e.uid]=e}),p.loaded===p.total&&(m(l.modules),l.isLoading=!1)})}),y()}stats.controller("HomepageNextCtrl",e),e.$inject=["$scope","$anchorScroll","$http","$interval","$location","$sce","DtmService","PlayersService","SeasonsService","StatsWidgetService","TeamsService"]}(),function(){function e(i,e,r,t,n,s,a,o,l,c){var u,h=e.data("season-section"),d=a.get(h),f=d.SeasonYear,p=d.Flags,m=p.isActive.toString().split(","),g=p.hasDaily.toString().split(",");function v(e){var t=o.findOptionByValue("LeagueID",e);return!!t&&(t.options={cache:!1,season:f,league:t.text.toLowerCase(),leagueId:e,isActive:-1<p.isActive.toString().indexOf(e)},t)}function y(){var e=u.map(function(e){return n=e.options,a=s.defer(),c.get(n).then(function(e){var t=e.data.gs.g||[];t.forEach(function(e){e.lid=n.leagueId}),i.today=r("date")(e.data.gs.gdte,"MM/dd/yyyy"),a.resolve(t)}).catch(function(e){a.resolve([])}),a.promise;var n,a});s.all(e).then(function(e){e&&e.length&&(i.games=[].concat.apply([],e),i.isLive=i.games.some(function(e){return 2===e.st}))}).catch(function(e){console.error("error fetching todays scores")})}function _(){t.get("stats/js/data/widgets/home_daily_summerleague.json").then(function(e){var t=e.data,n=t.items[0].items,a=t.items[1].items;i.playerStats=b(n,"playerstats"),i.teamStats=b(a,"teamstats")}).catch(function(e){console.error("error fetching daily leaders")})}function b(e,n){var a=[];e.forEach(function(t){t[n].forEach(function(e){e.stat=t.name,e.lid=t.leagueid,e.league=o.findOptionByValue("LeagueID",e.lid),e.title=t.title,e.permode=t.permode,a.push(e)})}),a=a.filter(function(e){return 0<=g.indexOf(e.lid)});var t=r("groupBy")(a,"stat",{asArray:!0});return t.forEach(function(e){e.items&&e.items.length&&(e.title=e.items[0].title,e.stat=e.items[0].stat,e.order="-"+e.items[0].stat)}),t}p.isActive&&m.length&&(n(y,1e4),n(_,1e4),u=m.map(v).filter(function(e){return e}),g.map(v).filter(function(e){return e}),i.flags=p,i.games=[],i.isLoading=!0,i.isLive=!1,y(),_())}stats.controller("HomepageSummerleagueController",e),e.$inject=["$scope","$element","$filter","$http","$interval","$q","SeasonsService","SplitsService","TeamsService","TodaysScoresService"]}(),function(){function e(l,n,e,t,a,i,r,s,o,c,u){l.isLoading=!0,l.trustAsHtml=i.trustAsHtml,l.modules={},l.alerts=[],l.scrollTo=function(e){var t=a.hash();n.yOffset=50,a.hash(e),n(),a.hash(t)},l.dailyLeadersTitle="Daily Leaders";var h=o.get("site");l.flags=h.Flags;var d=["home_daily","home_editorial","home_season","home_sidebar"],f=["home_daily_players","home_daily_teams","season_players","season_teams"];l.isPlayers=!0,l.isTeams=!1,l.headersSwitch=function(){l.isPlayers=!l.isPlayers,l.isTeams=!l.isTeams,r.triggerEvent("homeSeasonLeadersTab",l.isPlayers?"season leaders_players":"season leaders_teams")},l.isPlayersDaily=!0,l.isTeamsDaily=!1,l.headersSwitchDaily=function(){l.isPlayersDaily=!l.isPlayersDaily,l.isTeamsDaily=!l.isTeamsDaily,r.triggerEvent("homeDailyLeadersTab",l.isPlayersDaily?"daily leaders_players":"daily leaders_teams")};var p={loaded:0,total:d.length};function m(a){f.forEach(function(e){var t,n,s;(t=a)[n=e]&&t[n].items.forEach(function(e){e.playerstats?s="playerstats":e.teamstats&&(s="teamstats");for(var t=0;t<e[s].length;t++){var n=e.name,a=t+1,i=e[s][t],r=e[s][t-1];!r||!i.rank&&0===t||i[n]<r[n]?i.rank=a:i[n]==r[n]&&(i.rank=r.rank)}})});var e,t=new Date,n="".concat(t.getMonth()+1).padStart(2,0),i="".concat(t.getDate()).padStart(2,0),r=t.getFullYear(),s=18<=t.getHours(),o="".concat(n,"/").concat(i,"/").concat(r);o!==a.home_daily_players.items[0].gamedate&&(e=new Date(o).getTime()-new Date(a.home_daily_players.items[0].gamedate).getTime(),l.dailyLeadersTitle=864e5<e?"Daily Leaders":"Yesterdayâs Leaders"),o!==a.home_daily_players.items[0].gamedate||s||(l.dailyLeadersTitle="Todayâs Leaders"),o===a.home_daily_players.items[0].gamedate&&s&&(l.dailyLeadersTitle="Tonight's Leaders"),l.leaders_daily={players:a.home_daily_players,teams:a.home_daily_teams,live:"N"!==a.live_game_state.items[0].livegamestate[0].LIVE_GAME_FLAG,date:a.home_daily_players.items[0].gamedate,title:l.dailyLeadersTitle};try{l.assist_tracker={count:a.assist_tracker.items[1].resultSets[0].rowSet[0][0],player:a.assist_tracker.items[0].posts[0],title:a.assist_tracker.title},l.hasAssistTracker=!0}catch(e){l.hasAssistTracker=!1}l.leaders_daily.live?g(3e4):g(3e5)}function g(e){t.cancel(l.livePromise),l.livePromise=t(v,e)}function v(){c.get("home_daily").then(function(e){e.items.forEach(function(e){l.modules[e.uid]=e}),m(l.modules);var t=!1;try{t="N"!==e.items[2].items[0].livegamestate[0].LIVE_GAME_FLAG}catch(e){console.error(e)}g(t?3e4:3e5)}),y()}function y(){c.get("nba_stat_alerts").then(function(e){e&&e.alerts&&(l.statAlerts=e.alerts.slice(0,6),l.statAlerts.forEach(function(e){e.player=s.getById(e.PersonId),e.team=u.getById(e.TeamId),0<e.PersonId?e.isPlayerAlert=!0:e.TeamId&&(e.isTeamAlert=!0)}))}).catch(function(e){console.error("error fetching alerts")})}l.trackScoresClick=function(){r.triggerEvent("homepageLiveScoresLink")},d.forEach(function(e,t,n){c.get(e).then(function(e){var t=e.items;p.loaded++,t.forEach(function(e){l.modules[e.uid]=e}),p.loaded===p.total&&(m(l.modules),l.isLoading=!1)})}),y()}stats.controller("HomepageCtrl",e),e.$inject=["$scope","$anchorScroll","$http","$interval","$location","$sce","DtmService","PlayersService","SeasonsService","StatsWidgetService","TeamsService"]}(),function(){function e(r,e,s,t,n,a){var i=t.get("playerVsPlayerStats"),o=n.get([{name:"SeasonType",initial:i.SeasonType,without:["All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},{name:"Season",initial:i.Season,seasonRange:[2015,i.SeasonYear]},"Month","VsConference","LastNGames","SeasonSegment","VsDivision","ShotClockRange","OpponentTeamID","GameSegment","Outcome","Location","Period","DateFrom","DateTo","PlusMinus","PaceAdjust","Rank","Conference","Division","ShotClockRange"]);function l(){r.isLoading=!0,function(){var e=s.getSearchURL();if(!e.LineupIDs||!e.VsLineupIDs)return;var t=e.LineupIDs.split("~")||[],n=e.VsLineupIDs.split("~")||[],a=e.TeamID,i=e.VsTeamID;r.params.PlayerID1=t[0]||0,r.params.PlayerID2=t[1]||0,r.params.PlayerID3=t[2]||0,r.params.PlayerID4=t[3]||0,r.params.PlayerID5=t[4]||0,r.params.TeamID=a||1,r.params.VsPlayerID1=n[0]||0,r.params.VsPlayerID2=n[1]||0,r.params.VsPlayerID3=n[2]||0,r.params.VsPlayerID4=n[3]||0,r.params.VsPlayerID5=n[4]||0,r.params.VsTeamID=i||1}(),a.get(r.params).then(function(e){r.datasets=e,r.isLoading=!1,r.noData=0===e.PlayersVsPlayers.rows.length})}r.splits=o.splits,r.params=o.params,r.params.MeasureType=e.data("measure-type"),r.$on("customFields",function(e,t){r.customFields=t}),r.$on("runit",function(e){l()})}stats.controller("ImpactGeneralController",e),e.$inject=["$scope","$element","DeepLinksFactory","SeasonsService","SplitsService","WithOrWithoutYouService"]}(),function(){function e(l,c,s,u,h,n,e,t,o,d,a){var i=e.get("playerVsPlayerStats");u.getSearchURL();l.isLoading=!0,l.limit=5,l.isLineupSet=!1,l.toggleTeamSelect=function(e){e.showTeamSelect=!e.showTeamSelect},l.toggleLineupSelect=function(e){e.lineupShow=!e.lineupShow,e.isReady=!1},l.setLineup=function(e){if(e.lineupChosen.length<1||5<e.lineupChosen.length)return;e.lineupShow=!1,e.hasLineup=!0,e.isReady=!0},l.chooseLineup=function(e,t){t.lineupChosen=[],t.lineupIDs=[],t.checked=0,t.hasLineup=!1,t.showTeamSelect=!1,t.isReady=!1,p(e.id,t,!0),t.info=e,t.team=e.id,t.type="lineup"},l.checkChange=function(e,t){{var n;e.selected?(t.checked++,t.lineupChosen.push(e),t.lineupIDs.push(e.PLAYER_ID.toString())):(n=t.lineupIDs.indexOf(e.PLAYER_ID.toString()),t.lineupIDs.splice(n,1),t.lineupChosen.splice(n,1),t.checked--)}},l.isSelected=function(e,t){return 0<t.lineupChosen.filter(function(t){return function(e){return e.PLAYER_ID===t}}(e)).length},l.swapSides=function(){if(!l.isLineupSet)return;var e={};e=l.compare.left,l.compare.left=l.compare.right,l.compare.right=e,l.compare.left.tag="left",l.compare.left.opp="right",l.compare.right.tag="right",l.compare.right.opp="left"};var r,f=t.get([{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"Month","VsConference","LastNGames","SeasonSegment","VsDivision","OpponentTeamID","GameSegment","Outcome","Location","Period","DateFrom","DateTo","PlusMinus","PaceAdjust","Rank"]);function p(e,t,n){var a=s.defer();void 0!==e&&(l.params.TeamID=e);var i="Playoffs"===l.params.SeasonType?"Regular Season":l.params.SeasonType,r=angular.extend(l.params,{SeasonType:i});return o.get(r).then(function(e){t.lineup=e.PlayersSeasonTotals.rows,t.lineupShow=n,a.resolve(t.lineup)}),a.promise}function m(e){var t=n.getById(e);return{PLAYER_ID:t.id,PLAYER:t.fn+" "+t.ln}}function g(e,t){if(-1===t)return e;var n=e.substring(t+1).indexOf("&")+t,a=e.substring(0,t),i=e.substring(n+1);return n<t?a:a+i}l.splits=f.splits,l.params=f.params,l.params.Season=i.Season,l.params.SeasonType=i.SeasonType,l.params.MeasureType="Base",l.compare={isReady:!1,left:{type:"",hasLineup:!1,lineupChosen:[],lineupIDs:[],lineupShow:!1,info:{},checked:0,tag:"left",opp:"right",showTeamSelect:!1},right:{type:"",hasLineup:!1,lineupShow:!1,lineupChosen:[],lineupIDs:[],info:{},checked:0,tag:"right",opp:"left",showTeamSelect:!1}},l.$watch("compare",function(e){if(!e.left.isReady||!e.right.isReady)return;var t={};t.LineupIDs=l.compare.left.lineupIDs.join("~"),t.VsLineupIDs=l.compare.right.lineupIDs.join("~"),t.TeamID=l.compare.left.team,t.VsTeamID=l.compare.right.team,u.setSearchURL(t)},!0),l.$on("$locationChangeSuccess",function(){var e=function(){var e=u.getSearchURL();l.isLineupSet=e.LineupIDs&&e.VsLineupIDs;var t=void 0!==l.compare.left.LineupIDs,n=void 0!==l.compare.right.LineupIDs;{if(l.isLineupSet&&t&&n)return!0;if(!l.isLineupSet)return l.compare.left.showTeamSelect=!0,!(l.compare.right.showTeamSelect=!0)}var a=e.TeamID,i=e.VsTeamID;return l.compare.left.lineupChosen=e.LineupIDs.split("~").map(m),l.compare.left.lineupIDs=e.LineupIDs.split("~"),l.compare.left.team=a,l.compare.left.info=d.getById(a),l.compare.left.type="lineup",l.compare.left.hasLineup=!0,l.compare.left.isReady=!0,l.compare.right.lineupChosen=e.VsLineupIDs.split("~").map(m),l.compare.right.lineupIDs=e.VsLineupIDs.split("~"),l.compare.right.team=i,l.compare.right.info=d.getById(i),l.compare.right.type="lineup",l.compare.right.hasLineup=!0,l.compare.right.isReady=!0,function(e,t){p(e,l.compare.left,!1).then(function(){p(t,l.compare.right,!1)})}(a,i),!0}(),t=c.url().split("?")[1]||"",n=t.indexOf("&sort="),a=(t=g(t,n)).indexOf("&dir=");{var i,r,s,o;t=g(t,a),l.$emit("onImpactInfo","?"+t),e&&(l.$broadcast("onCompareSearch","?"+t),l.$broadcast("runit"),i=l.compare.left.lineupChosen.map(function(e){return e.PLAYER}),r=l.compare.right.lineupChosen.map(function(e){return e.PLAYER}),s=[i.join("|"),"VS",r.join("|")].join(""),o=[l.compare.left.info.abbr,l.compare.right.info.abbr].join("|"),h.triggerEvent("compareImpact",[s,o]))}}),r=d.get().slice(0),l.teams=r,l.isLoading=!1}stats.controller("ImpactSummaryController",e),e.$inject=["$scope","$location","$q","DeepLinksFactory","DtmService","PlayersService","SeasonsService","SplitsService","TeamPlayersService","TeamsService","WithOrWithoutYouService"]}(),function(){function e(i,e,n,r,s,o,l,t){i.showCal=!1,i.dt=s.search().Date,i.format="MM/dd/yyyy",i.changeDate=function(e){switch(e){case"next":a(1);break;case"prev":a(-1);break;default:a(1)}},i.gamesCount="";var c=t.get("scores").Flags;function a(e){i.gamesCount="";var t=new Date(i.urlGameDate);t.setDate(t.getDate()+e);var n=r("date")(t,"MM/dd/yyyy");s.search("Date",n)}i.$watch("dt",function(e){var t=r("date")(e,"MM/dd/yyyy");s.search("Date",t)}),i.$watch(function(){return s.search().Date},function(){if(s.search().hasOwnProperty("Date")){var e=s.search().Date,t=/\d{2}\/\d{2}\/\d{4}/.test(e);if(!t&&c.gameDate)return void(i.dt=c.gameDate);if(!t)return void(i.dt=l.gameDate);var n=new Date(e);i.urlGameDate=r("date")(n,"MM/dd/yyyy"),i.gameDate=r("date")(n,"EEEE, MMM d")}else{var a;a=c.gameDate?c.gameDate:r("date")(l.gameDate,"MM/dd/yyyy"),s.search("Date",a)}o.$broadcast("gameDateQueryChange",i.urlGameDate)}),o.$on("numberOfGames",function(e,t){i.gamesCount=t}),e.on("click",function(e){var t;i.showCal&&(t=e.target,$.contains(n.get(0),t)||(i.showCal=!1,i.$apply()))})}stats.controller("GamedateCalendarQueryCtrl",e),e.$inject=["$scope","$document","$element","$filter","$location","$rootScope","ReferrerService","SeasonsService"]}(),function(){function e(i,e,n,r,s,o,l,t){i.showCal=!1,i.dt=s.path().slice(1),i.format="MM/dd/yyyy",i.changeDate=function(e){switch(e){case"next":a(1);break;case"prev":a(-1);break;default:a(1)}},i.gamesCount="";var c=t.get("scores").Flags;function a(e){i.gamesCount="";var t=new Date(i.urlGameDate);t.setDate(t.getDate()+e);var n=r("date")(t,"MM/dd/yyyy");s.path(n)}i.$watch("dt",function(e){var t=r("date")(e,"MM/dd/yyyy");s.path(t)}),i.$watch(function(){return s.path()},function(){if(s.path().slice(1)){var e=s.path().slice(1),t=/\d{2}\/\d{2}\/\d{4}/.test(e);if(!t&&c.gameDate)return void(i.dt=c.gameDate);if(!t)return void(i.dt=l.gameDate);var n=new Date(e);i.urlGameDate=r("date")(n,"MM/dd/yyyy"),i.gameDate=r("date")(n,"EEEE, MMM d")}else{var a;a=c.gameDate?c.gameDate:r("date")(l.gameDate,"MM/dd/yyyy"),s.path(a)}o.$broadcast("gameDateChange",i.urlGameDate)}),o.$on("numberOfGames",function(e,t){i.gamesCount=t}),e.on("click",function(e){var t;i.showCal&&(t=e.target,$.contains(n.get(0),t)||(i.showCal=!1,i.$apply()))})}stats.controller("GamedateCalendarCtrl",e),e.$inject=["$scope","$document","$element","$filter","$location","$rootScope","ReferrerService","SeasonsService"]}(),function(){function e(n,e,a,t,i,r,s,o){var l=o.get("site");n.flags=l.Flags,n.toggleNav=function(e){e.preventDefault(),e.stopPropagation(),n.$emit("toggleStatsNav",null)};var c=t.absUrl(),u=(c+="/"===c.substr(-1)?"":"/").split("/");5==u.length?n.activeTab="home":"advanced-leaders"===u[5]?n.activeTab="leaders":"hustle-leaders"===u[5]?n.activeTab="hustle":"allstar2018"===u[4]?n.activeTab="allstar":n.activeTab=u[4],s.isExternal&&angular.element("body").addClass("nav-hidden");var h="/allstar2020/",d={friday:{text:"All-Star 2020 Friday",url:h+"friday/"},saturday:{text:"All-Star 2020 Saturday",url:h+"saturday/"},sunday:{text:"All-Star 2020 Sunday",url:h+"sunday/"}},f=d.friday,p=[new Date(2020,1,14,6),new Date(2020,1,15,6),new Date(2020,1,16,6)],m=new Date;function g(){["players","teams","leaders","stats101","tools","draft"].forEach(function(e){var t,n=document.getElementsByClassName("nav-inner__btn-"+e)[0],a=document.getElementsByClassName("drop-"+e)[0];n&&a&&(t=n.offsetLeft,a.style.left=t+"px")})}p[2]<=m?f=d.sunday:p[1]<=m&&(f=d.saturday),n.allstarLink=f,n.isPlayersOpen=!1,n.isTeamsOpen=!1,n.isLeadersOpen=!1,n.isToolsOpen=!1,n.isStats101Open=!1,n.isDraftOpen=!1,n.togglePlayers=function(){n.isPlayersOpen=!n.isPlayersOpen,n.isTeamsOpen=!1,n.isLeadersOpen=!1,n.isToolsOpen=!1,n.isStats101Open=!1,n.isDraftOpen=!1},n.toggleTeams=function(){n.isPlayersOpen=!1,n.isTeamsOpen=!n.isTeamsOpen,n.isLeadersOpen=!1,n.isToolsOpen=!1,n.isStats101Open=!1,n.isDraftOpen=!1},n.toggleLeaders=function(){n.isTeamsOpen=!1,n.isPlayersOpen=!1,n.isLeadersOpen=!n.isLeadersOpen,n.isToolsOpen=!1,n.isStats101Open=!1,n.isDraftOpen=!1},n.toggleTools=function(){n.isTeamsOpen=!1,n.isPlayersOpen=!1,n.isLeadersOpen=!1,n.isToolsOpen=!n.isToolsOpen,n.isStats101Open=!1,n.isDraftOpen=!1},n.toggleStats101=function(){n.isTeamsOpen=!1,n.isPlayersOpen=!1,n.isLeadersOpen=!1,n.isToolsOpen=!1,n.isStats101Open=!n.isStats101Open,n.isDraftOpen=!1},n.toggleDraft=function(){n.isTeamsOpen=!1,n.isPlayersOpen=!1,n.isLeadersOpen=!1,n.isToolsOpen=!1,n.isStats101Open=!1,n.isDraftOpen=!n.isDraftOpen},e.on("click",function(e){var t;(n.isPlayersOpen||n.isTeamsOpen||n.isLeadersOpen||n.isToolsOpen||n.isStats101Open||n.isDraftOpen)&&(t=e.target,$.contains(a.get(0),t)||(n.isTeamsOpen=!1,n.isPlayersOpen=!1,n.isLeadersOpen=!1,n.isToolsOpen=!1,n.isStats101Open=!1,n.isDraftOpen=!1,n.$apply()))}),g(),i.addEventListener("resize",function(){g()}),a.on("click",".nav-inner a",function(e){r.triggerEvent("navigation","Primary: "+e.target.innerHTML)})}stats.controller("StatsHeaderController",e),e.$inject=["$scope","$document","$element","$location","$window","DtmService","ReferrerService","SeasonsService"]}(),function(){function e(a,e,n,t,i,r,s,o){var l=s.get("site");function c(n,a){a?angular.forEach(n,function(e,t){n[t]=t==a&&!n[t]}):angular.forEach(n,function(e,t){n[t]=!1})}function u(n){if(c(a.isPlayersSub),c(a.isTeamsSub),n)return h(),void angular.forEach(a.isCat,function(e,t){a.isCat[t]=!(!t||t!=n)&&!a.isCat[t]});angular.forEach(a.isCat,function(e,t){a.isCat[t]=!1})}function h(n){if(n)return u(),void angular.forEach(a.isActiveMenu,function(e,t){a.isActiveMenu[t]=!(!t||t!=n)&&!a.isActiveMenu[t]});angular.forEach(a.isActiveMenu,function(e,t){a.isActiveMenu[t]=!1})}a.flags=l.Flags,a.showSiteNavigation=!1,a.isPlayerSection=!1,a.isGameSection=!1,a.isTeamSection=!1,a.isFantasySection=!1,a.isOnOffSection=!1,a.isImpactSection=!1,a.isEventsSection=!1,a.teams=o.get(),a.isPlayersSub={general:!1,defense:!1,clutch:!1,tracking:!1,playtype:!1,shots:!1,advboxscores:!1},a.isTeamsSub={list:!1,general:!1,clutch:!1,defense:!1,playtype:!1,tracking:!1,shotdash:!1,oppshotdash:!1,advboxscores:!1},a.isEventsSub={allstar:!1},a.isCat={players:!1,teams:!1,lineups:!1,onoff:!1,draft:!1,tools:!1,other:!1,allstar:!1,franchiseleaders:!1,nbaEvents:!1,fantasySection:!1},a.isActiveMenu={player:!1,team:!1,game:!1,fantasy:!1,onoff:!1,franchiseleaders:!1,allstar:!1,nbaEvents:!1},e.on("click",".stats-dropdown a",function(e){var t;e.target.href&&(t=r.parseMenuOptions(a.isCat,a.isPlayersSub,e.target.innerText),r.triggerEvent("navigation",t))}),a.toggleSub=c,a.toggleCat=u,a.toggleActiveMenu=h,i.$on("toggleStatsNav",function(e,t){a.showSiteNavigation="boolean"==typeof t?t:!a.showSiteNavigation}),i.$on("onPlayerInfo",function(e,t){if(!t)return;a.isPlayerSection=!0,a.isActiveMenu.player=!0,a.player=t}),i.$on("onGameInfo",function(e,t){if(!t)return;a.isGameSection=!0,a.isActiveMenu.game=!0,a.game=t}),i.$on("onTeamInfo",function(e,t){if(!t)return;a.isTeamSection=!0,a.isActiveMenu.team=!0,a.team=t}),i.$on("onFantasyInfo",function(e,t){if(!t)return;a.isFantasySection=!0,a.isActiveMenu.fantasy=!0,a.fantasy=t}),i.$on("onOnOffInfo",function(e,t){if(!t)return;a.isOnOffSection=!0,a.isActiveMenu.onoff=!0,a.onoff=t}),i.$on("onImpactInfo",function(e,t){if(!t)return;a.isImpactSection=!0,a.isActiveMenu.impact=!0,a.impact=t}),i.$on("onEventsInfo",function(e,t){if(!t)return;a.isEventsSection=!0,a.isActiveMenu.allstar=!0,a.nbaEvents=t}),i.$on("$routeChangeSuccess",function(){a.showSiteNavigation=!1}),a.toggleNav=function(){u(),a.$emit("toggleStatsNav",null)},e.on("click",function(e){var t;a.showSiteNavigation&&(t=e.target,$.contains(n.get(0),t)||(a.showSiteNavigation=!1,a.$apply()))});var d=[new Date(2020,1,14,6),new Date(2020,1,15,6),new Date(2020,1,16,6)],f=new Date;a.allstarLinks={friday:!0,saturday:d[1]<=f,sunday:d[2]<=f}}stats.controller("StatsNavController",e),e.$inject=["$scope","$document","$element","$location","$rootScope","DtmService","SeasonsService","TeamsService"]}(),function(){function e(o,e,r,l,t,s,n,c,a,i){var u=n.findBy("rs",!0).slice(0),h=n.findBy("rs",!1).slice(0),d=a.get().map(function(e){return angular.extend({},e,{type:"tm"})});o.search="",o.searchResults=[],o.recentSearches=c.get(),o.maxResults=7,o.showSearch=!1,o.showResults=!1,o.hasResults=!1,o.activeIndex=-1,o.totalResults=0,o.toggleSearch=function(){if(o.showSearch=!o.showSearch,o.showResults=!1,!o.showSearch)return;o.search="",o.showRecent=!0,o.searchResults=c.get(),o.showResults=!0,s(function(){r.find(".stats-search__input").focus()},0)},o.onKeyDown=function(e){{var t,n,a,i;"38"==(e=e||window.event).keyCode?(o.activeIndex=Math.max(0,o.activeIndex-1),e.preventDefault()):"40"==e.keyCode?(o.activeIndex=Math.min(o.maxResults-1,Math.min(o.searchResults.length,o.activeIndex+1)),e.preventDefault()):"13"==e.keyCode&&(t=o.searchResults[o.activeIndex],n=r.find(".stats-search__item:eq("+o.activeIndex+") a"),o.recentSearches=c.add(t),a={focus:"search-bar",content:[t]},"undefined"!=typeof _nba&&_nba.analytics.click(a),i=n.attr("href"),document.location=i,o.search="",o.showSearch=!1,o.showResults=!1)}},o.onChange=function(e){(function(e){if(e.length<3)return;o.showRecent=!1;var t,n=e.toLowerCase().split(" ").filter(function(e){return!!e.length}),a=u.slice(0),i=h.slice(0),r=d.slice(0);for(t in n){var s=n[t];a=a.filter(p.bind("",s)),i=i.filter(p.bind("",s)),r=l("filter")(r,s,!1)}o.searchResults=[].concat(r).concat(a).concat(i),o.hasResults=!!o.searchResults.length,o.showResults=!0})(o.search),o.activeIndex=-1},o.onItemClick=function(e,t,n){e.preventDefault(),e.stopPropagation(),o.recentSearches=c.add(t);var a={focus:"search-bar",content:[t]};"undefined"!=typeof _nba&&_nba.analytics.click(a);var i=angular.element(e.target).attr("href");document.location=i,s(function(){o.showSearch=!1,o.showResults=!1},0)},o.onItemHover=function(e,t,n){o.activeIndex=n},o.onBlur=function(e){s(function(){o.showSearch=!1,o.showResults=!1},100)};var f=r.data("season-section");function p(e,t){var n="toLowerCase";return-1<t.fn[n]().indexOf(e)||-1<t.ln[n]().indexOf(e)}o.searchYear=i.get(f).Season,o.recentSearches.length,e.on("click",function(e){var t;o.showSearch&&(t=e.target,$.contains(r.get(0),t)||(o.showSearch=!1,o.showResults=!1,o.$apply()))})}stats.controller("StatsSearchController",e),e.$inject=["$scope","$document","$element","$filter","$location","$timeout","PlayersService","RecentSearchesService","TeamsService","SeasonsService"]}(),function(){function e(a,e,n,t,i,r,s){a.isLoaded=!1,a.hasData=!1,a.games=[],a.gameDate="",a.gdte="";var o,l=r.get("leagueLineups").Flags;l.gameDate?a.gameDate=l.gameDate:((o=new Date).getUTCHours()<10&&o.setUTCDate(o.getUTCDate()-1),a.gameDate=e("date")(o,"yyyy-MM-dd","utc"));var c=12e4,u={LeagueID:"00",DayOffset:"0",gameDate:e("date")(a.gameDate,"MM/dd/yyyy","utc")};function h(e,t){return n(function(){s.get(e).then(f.bind("",e,t))},c)}function d(e,t){return n(function(){s.get(e).then(p.bind("",e,t))},c)}function f(e,i,t){return t&&t.results&&t.result_count?(t.results.forEach(function(t){var e,n,a=i.find(function(e){return e.gid===t.GameID});a&&(e=t.VisitorTeam,n=t.HomeTeam,a.v.hasProjected=!0,a.h.hasProjected=!0,a.v.projected=t[e],a.h.projected=t[n])}),i.every(function(e){return e.hasStarters})?void 0:h(e,i)):h(e,i)}function p(e,a,i){return i&&Object.keys(i)?(Object.keys(i).forEach(function(t){var e=i[t],n=a.find(function(e){return e.gid===t});n&&(n.st=e.st,n.stt=e.stt,n.v.starters=e.vtm.filter(g),n.h.starters=e.htm.filter(g),n.v.bench=e.vtm.filter(v),n.h.bench=e.htm.filter(v),n.v.inactive=e.vtm.filter(y),n.h.inactive=e.htm.filter(y),n.v.hasStarters=0<n.v.starters.length,n.h.hasStarters=0<n.h.starters.length,n.v.hasBench=0<n.v.bench.length,n.h.hasBench=0<n.h.bench.length,n.v.hasInactive=0<n.v.inactive.length,n.h.hasInactive=0<n.h.inactive.length)}),a.every(m)?void 0:d(e,a)):d(e,a)}function m(e){return 1<+e.st}function g(e){return""!==e.pos&&"A"===e.status}function v(e){return!g(e)&&"A"===e.status}function y(e){return"I"===e.status}i.get(u).then(function(e){a.games=e.games.map(function(e){var t=e.linescores,n=t.vtm,a=t.htm;return{gid:e.GAME_ID,gcode:e.GAMECODE,gdte:e.GAME_DATE_EST.slice(0,10),p:e.LIVE_PERIOD,st:+e.GAME_STATUS_ID,stt:e.GAME_STATUS_TEXT,v:{ta:n.TEAM_ABBREVIATION,tn:n.TEAM_NAME,tc:n.TEAM_CITY_NAME,tid:n.TEAM_ID},h:{ta:a.TEAM_ABBREVIATION,tn:a.TEAM_NAME,tc:a.TEAM_CITY_NAME,tid:a.TEAM_ID}}}),a.isLoaded=!0,a.hasData=0<a.games.length,a.gdte=a.gameDate.replace(/-/g,"");var t="leaders/".concat(u.LeagueID,"_active_starters_").concat(a.gdte);s.get(t).then(p.bind("",t,a.games));var n="dailylineups/"+a.gdte.slice(0,4)+"/daily_lineups_"+a.gdte;s.get(n).then(f.bind("",n,a.games))}).catch(function(e){console.error("error fetching game calendar")})}stats.controller("LineupsLandingController",e),e.$inject=["$scope","$filter","$timeout","MobileGameDetailService","ScoresService","SeasonsService","StatsFlatDataService"]}(),function(){function e(_,e,b,t,n,a,i,S){var r=t.get(["LeagueID","Season",{name:"SeasonType",without:["All Star","Pre Season"]},"GroupQuantity","PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo","ShotClockRange","Conference","Division","PORound","ClutchTime",{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},{name:"MeasureType",label:"Measure Type",default:"",desc:"",type:"select",options:[{val:"Base",text:"Base"}]},{name:"MinutesMin",label:"Minutes Min",default:25,initial:25,desc:"",type:"select",options:[{val:25,text:"25"},{val:50,text:"50"},{val:75,text:"75"},{val:100,text:"100"},{val:125,text:"125"},{val:150,text:"150"},{val:175,text:"175"},{val:200,text:"200"},{val:225,text:"225"},{val:250,text:"250"}]},{name:"TeamID",label:"Team ID",includeBefore:[{val:"",text:"All Teams"}]},{name:"LineupsVisuals",label:"Lineups Visuals",description:"Lineups Visuals Graph Options",default:"NET_RATING",order:340,initial:"NET_RATING",type:"select",options:[{val:"NET_RATING",text:b("statFieldToText")("NET_RATING")},{val:"PACE",text:"PACE"},{val:"OFF_RATING",text:b("statFieldToText")("OFF_RATING")},{val:"DEF_RATING",text:b("statFieldToText")("DEF_RATING")},{val:"TS_PCT",text:b("statFieldToText")("TS_PCT")},{val:"FTA_RATE",text:b("statFieldToText")("FTA_RATE")},{val:"TM_AST_PCT",text:b("statFieldToText")("TM_AST_PCT")},{val:"PCT_FGA_2PT",text:b("statFieldToText")("PCT_FGA_2PT")},{val:"PCT_FGA_3PT",text:b("statFieldToText")("PCT_FGA_3PT")},{val:"PCT_PTS_2PT_MR",text:b("statFieldToText")("PCT_PTS_2PT_MR")},{val:"PCT_PTS_FB",text:b("statFieldToText")("PCT_PTS_FB")},{val:"PCT_PTS_FT",text:b("statFieldToText")("PCT_PTS_FT")},{val:"PCT_PTS_PAINT",text:b("statFieldToText")("PCT_PTS_PAINT")},{val:"PCT_AST_FGM",text:b("statFieldToText")("PCT_AST_FGM")},{val:"PCT_UAST_FGM",text:b("statFieldToText")("PCT_UAST_FGM")},{val:"OPP_FG3_PCT",text:b("statFieldToText")("OPP_FG3_PCT")},{val:"OPP_EFG_PCT",text:b("statFieldToText")("OPP_EFG_PCT")},{val:"OPP_FTA_RATE",text:b("statFieldToText")("OPP_FTA_RATE")},{val:"OPP_TOV_PCT",text:b("statFieldToText")("OPP_TOV_PCT")}]}]);_.splits=r.splits,_.params=r.params;var T=[{key:"East",values:[{key:"Atlantic",values:S.findBy("division","Atlantic")},{key:"Central",values:S.findBy("division","Central")},{key:"Southeast",values:S.findBy("division","Southeast")}]},{key:"West",values:[{key:"Northwest",values:S.findBy("division","Northwest")},{key:"Pacific",values:S.findBy("division","Pacific")},{key:"Southwest",values:S.findBy("division","Southwest")}]}];function s(){_.isLoading=!0,_.selectedOption=_.splits.LineupsVisuals.selected.val,i.get(_.params).then(function(e){d3.selectAll("svg").remove(),_.isLoading=!1,_.stats=e.LeagueLineupViz.rows;var t=S.get().reduce(function(e,t){return e[t.id]=t,e},{}),d=_.stats,i=document.querySelector(".section-view-overlay").offsetWidth-30,f={top:i<640?45:60,right:i<640?15:30,bottom:i<640?45:60,left:i<640?30:50},n=300;4e3<d.length?n=525:3500<d.length?n=500:3e3<d.length?n=475:2500<d.length?n=450:2e3<d.length?n=425:1500<d.length?n=390:1200<d.length&&(n=375);var a=i<640?6*n+50+100:3*n+50+100,p=i<640?d3.scaleBand().domain([1]).range([0,i]).padding(.025):d3.scaleBand().domain([0,1]).range([0,i]).padding(.025),r=d3.scaleLinear().domain(d3.extent(d,function(e){return e[_.selectedOption]})).range([f.left,p.bandwidth()-f.left]).nice(),s=i<640?d3.scaleBand().domain([0,1,2,3,4,5]).range([0,6*n]).padding(.05):d3.scaleBand().domain([0,1,2]).range([0,3*n]).padding(.05),m=d3.scaleBand().domain([0,1,2,3,4]).range([f.top,s.bandwidth()]).padding(.05),g=d3.scaleLinear().domain(d3.extent(d,function(e){return e.MIN}));2200<d.length?g.range([2,7]):2e3<d.length?g.range([3,8]):1500<d.length?g.range([3,9]):1e3<d.length?g.range([4,9]):500<d.length?g.range([4,12]):g.range([4,13]);var o=d3.select(".lineups-chart").append("svg").attr("width",i).attr("height",a).attr("class","lineups-chart_container shadow-block");function l(e){return t[e]?t[e].color:"#666"}function c(e){e.attr("class","division").attr("transform",function(e,t){if(!(i<640))return"translate(0, ".concat(s(t),")");switch(e.key){case"Northwest":return"translate(0, ".concat(s(3),")");case"Pacific":return"translate(0, ".concat(s(4),")");case"Southwest":return"translate(0, ".concat(s(5),")");default:return"translate(0, ".concat(s(t),")")}}).attr("data-div",function(e){return e.key}),e.append("g").call(v),e.append("g").append("text").text(function(e){return"".concat(e.key," Division")}).attr("transform",function(){return i<640?"translate(15, ".concat(f.top/2,")"):"translate(0, ".concat(f.top/2,")")}).attr("font-family","Roboto, Helvetica, Arial, sans-serif").attr("font-size",function(){return i<640?"14px":"20px"}),e.selectAll(".team").data(function(e){return e.values}).enter().append("g").call(u)}function u(e){e.attr("class","team").attr("data-team",function(e){return e.ta}).attr("transform",function(e,t){return"translate(0, ".concat(m(t),")")});var t=m.bandwidth(),n=p.bandwidth();e.append("line").attr("x1",f.left).attr("x2",n-f.left).attr("y1",t/2).attr("y2",t/2).attr("stroke","#aaa").attr("stroke-dasharray","2,2"),e.append("svg:image").attr("x",0).attr("y",3).attr("width",.85*t).attr("height",.85*t).attr("xlink:href",function(e){return"/stats/media/img/teams/logos/".concat(e.abbr,"_logo.svg")}).append("title").text(function(e){return"".concat(e.city," ").concat(e.name)}),e.append("g").attr("class","lineups").style("fill",function(e){return l(e.id)}).style("stroke",function(e){return l(e.id)}).selectAll(".lineup").data(function(t){return function(e){for(var t=d3.forceSimulation(e).force("x",d3.forceX(function(e){return r(e[_.selectedOption])}).strength(2)).force("y",d3.forceY(m.bandwidth()/2)).force("collide",d3.forceCollide().radius(function(e){return g(e.MIN)}).strength(2).iterations(10)).stop(),n=0;n<200;++n)t.tick();return t}(d.filter(function(e){return e.TEAM_ID===+t.id})).nodes()}).enter().call(h)}function h(e){var t=e.append("a");t.attr("href",function(e){var t=_.splits.LineupsVisuals.selected.val,n=_.splits.Season.selected.val,a=_.splits.SeasonType.selected.val,i=_.splits.GroupQuantity.selected.val,r=_.splits.MinutesMin.selected.val;return"/stats/team/".concat(e.TEAM_ID,"/lineups-advanced?sort=").concat(t,"&Season=").concat(n,"&SeasonType=").concat(a,"&GroupQuantity=").concat(i,"&CF=MIN*G*").concat(r)}).attr("target","_blank"),t.append("circle").attr("class","lineup-bubble").attr("r",function(e,t,n){return g(e.MIN)}).attr("cy",function(e){return e.y}).attr("cx",function(e){return e.x}).attr("stroke-width",1).attr("fill-opacity",.5).append("title").text(function(e){var t;switch(_.selectedOption){case"NET_RATING":t=b("number")(e[_.selectedOption],1);break;case"PACE":t=b("number")(e[_.selectedOption],2);break;case"OFF_RATING":case"DEF_RATING":t=b("number")(e[_.selectedOption],1);break;case"TS_PCT":t=b("percent")(e[_.selectedOption]);break;case"FTA_RATE":t=b("number")(e[_.selectedOption],3);break;case"TM_AST_PCT":case"PCT_FGA_2PT":case"PCT_FGA_3PT":case"PCT_PTS_2PT_MR":case"PCT_PTS_FB":case"PCT_PTS_FT":case"PCT_PTS_PAINT":case"PCT_AST_FGM":case"PCT_UAST_FGM":case"OPP_FG3_PCT":case"OPP_EFG_PCT":t=b("percent")(e[_.selectedOption]);break;case"OPP_FTA_RATE":t=b("number")(e[_.selectedOption],3);break;case"OPP_TOV_PCT":t=b("percent")(e[_.selectedOption])}return"".concat(e.GROUP_NAME,"\n").concat(b("statFieldToText")(_.selectedOption),": ").concat(t,"\nMinutes: ").concat(e.MIN)})}function v(e){e.append("g").attr("transform","translate(0, ".concat(f.top,")")).attr("class","tics-g").call(d3.axisTop(r).tickFormat(function(e){return _.selectedOption.includes("PCT")?"".concat(Math.round(100*e),"%"):e}).tickSizeInner(2)).call(function(e){return e.select(".domain").remove()}),e.selectAll(".tick line").attr("stroke","#aaa").attr("stroke-dasharray","2 2").attr("stroke-opacity",.5)}function y(e){var t=e.append("g");t.append("text").attr("text-anchor","start").text(function(e){return"".concat(b("statFieldToText")(_.selectedOption)," Minutes Range")}).attr("font-weight",function(e){return 600}).attr("font-size",function(e){return 12}).attr("font-family","Roboto, Helvetica, Arial, sans-serif").attr("transform",function(e,t){var n=f.left;return"translate(".concat(n,", ").concat(0,")")}).attr("dy",function(e){return-30});var n,a=m.bandwidth(),i=(p.bandwidth(),d3.extent(d,function(e){return e.MIN})),r=d3.extent(d,function(e){return e.MIN}),s=_slicedToArray(r,2),o=s[0],l=s[1],c=[o,(n=i).reduce(function(e,t){return e+t},0)/n.length,l],u=d3.scaleLinear().domain(d3.extent(d,function(e){return Math.floor(e.MIN)})).range([f.left,(p.bandwidth()-f.right)/3]);t.append("g").attr("class","tics-k").call(d3.axisTop(u).tickValues(c).tickSizeInner(2)).call(function(e){return e.select(".domain").remove()}),t.selectAll(".tick-k line").attr("stroke","#eee").attr("stroke-dasharray","2 2").attr("stroke-opacity",.5);var h=e.append("g").attr("class","key-bubbles");h.append("line").attr("x1",f.left).attr("x2",(p.bandwidth()-f.right)/3).attr("y1",a/2).attr("y2",a/2).attr("stroke","#aaa").attr("stroke-dasharray","2,2"),h.append("g").attr("transform","translate(".concat(0,", ",a/2,")")).selectAll(".lineup-key-bubble").data(function(e){return c}).enter().append("circle").attr("class","lineup-key-bubble").attr("cursor","help").attr("r",function(e){return g(e)}).attr("cy",0).attr("cx",function(e){return u(e)}).attr("fill","#666").attr("stroke-width",1).attr("fill-opacity",.5).append("title").text(function(e){return"".concat(Math.round(e)," Min")})}o.append("rect").attr("width","100%").attr("height","100%").attr("fill","#fff"),o.selectAll(".conf").data(T).enter().append("g").call(function(e){i<640?e.attr("transform",function(e,t){return"translate(20, ".concat(100,")")}):e.attr("transform",function(e,t){return"translate(".concat(p(t),", ").concat(100,")")});e.attr("class","conf").attr("data-conf",function(e){return e.name}).selectAll(".division").data(function(e){return e.values}).enter().append("g").call(c)}),o.append("g").attr("class","nba-stats-svg-copy").attr("height",50).attr("transform",function(e){var t=a-25;i<640&&(t=a-25+15);var n=i-f.right-f.left;return"translate(".concat(n,", ").concat(t,")")}).append("text").attr("text-anchor","start").attr("dx",function(e){return i<640?-70:-100}).attr("font-weight",800).attr("fill","#1a477b").attr("font-family","Roboto, Helvetica, Arial, sans-serif").attr("font-size",function(e){return i<640?16:20}).text(function(e){return"NBA.com/Stats"}),o.call(function(e){e.append("g").attr("class","nba-stats-svg-lineups-key").attr("height",100).attr("transform",function(e,t){var n=i<640?0:-15,a=f.top;return"translate(".concat(n,", ").concat(a,")")}).call(y)})})}s(),d3.select(window).on("resize.updatesvg",s),_.$on("runit",function(e){s()})}stats.controller("LineupsToolController",e),e.$inject=["$scope","$timeout","$filter","SplitsService","SeasonsService","GameRotationService","LeagueLineupVizService","TeamsService"]}(),function(){function e(n,e,t,a,i,r){n.isLoading=!0,n.showSplits=!1;var s=i.get("leagueLineups"),o=a.get(["LeagueID",{name:"Season",initial:s.Season,seasonRange:[s.SeasonYearFrom,s.SeasonYear]},{name:"SeasonType",initial:s.SeasonType,without:["Pre Season"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"GroupQuantity","PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound"]);function l(){n.isLoading=!0,r.get(n.params).then(function(e){n.teamLineups=e[0].rows,n.isLoading=!1,n.noData=0===e[0].rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=o.splits,n.params=o.params,n.params.MeasureType=e.data("measure-type"),n.params.GameID="",n.options={rowsPerPage:25},n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){l()}),l()}stats.controller("LineupsController",e),e.$inject=["$scope","$element","$location","SplitsService","SeasonsService","LeagueLineupsService"]}(),function(){function e(n,a,t){n.$watch("playerInfo",function(e){if(!e)return;n.params={PlayerID:e.PERSON_ID},n.isLoading=!0,t.get(n.params).then(function(e){var t=e.PlayerAwards.rows;n.noData=0===t.length,n.isLoading=!1,n.noData||(n.awards=a("groupBy")(t,"DESCRIPTION",{asArray:!0}))}).catch(function(e){n.isLoading=!1,n.noData=!0})})}stats.controller("PlayerAwardsController",e),e.$inject=["$scope","$filter","PlayerAwardsService"]}(),function(){function e(r,s,o,l,c,u,e){function h(){r.isLoading=!0,e.get(r.params).then(function(e){r.stats=e,r.noData=!e.rows.length,r.isLoading=!1}).catch(function(e){r.isLoading=!1,r.noData=!0})}r.ai={},r.ai.showTeamCol=!1,r.$watch("playerInfo",function(e){if(!e)return;r.availableStats.stats||l.path(e.PERSON_ID+"/career/");var t=o("playerSeason")(e.seasons,c.get("playerStats")),n=o("seasonyear")(Math.min(e.TO_YEAR,t.SeasonYear)),a=[Math.max(e.FROM_YEAR,1996),e.TO_YEAR];if(a[1]<a[0])return r.noData=!0,void(r.isLoading=!1);var i=u.get(["LeagueID",{name:"Season",initial:n,default:n,seasonRange:a},{name:"SeasonType",initial:t.SeasonType,without:["All Star"]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo","PORound","ShotClockRange"]);r.splits=i.splits,r.params=i.params,r.params.PlayerID=e.PERSON_ID,r.params.PerMode="Totals",r.params.MeasureType=s.data("measure-type"),h()}),r.$on("customFields",function(e,t){r.customFields=t}),r.$on("runit",function(e){h()})}stats.controller("PlayerBoxscoreSplitsController",e),e.$inject=["$scope","$element","$filter","$location","SeasonsService","SplitsService","PlayerGamelogSplitsService"]}(),function(){function e(a,i,r,s,e){function o(){a.isLoading=!0,a.noData=!1,e.get(a.params).then(function(e){a.dataset=e.PlayerGameLog,a.noData=0===e.PlayerGameLog.rows.length,a.isLoading=!1}).catch(function(e){a.isLoading=!1,a.noData=!0})}a.noData=!1,a.isLoading=!0,a.showSplits=!1,a.$on("customFields",function(e,t){a.customFields=t}),a.$on("runit",function(e){o()}),a.$watch("playerInfo",function(e){if(!e)return;e.TO_YEAR=+e.TO_YEAR,e.FROM_YEAR=+e.FROM_YEAR;var t=i("playerSeason")(e.seasons,s.get("playerGamelogs")),n=r.get(["LeagueID",{name:"Season",initial:i("seasonyear")(Math.min(e.TO_YEAR,t.SeasonYear)),seasonRange:[e.FROM_YEAR,e.TO_YEAR],includeBefore:[{val:"ALL",text:"All"}]},{name:"SeasonType",initial:t.SeasonType},"DateFrom","DateTo"]);a.splits=n.splits,a.params=n.params,a.params.PlayerID=e.PERSON_ID,o()})}stats.controller("PlayerBoxscoresController",e),e.$inject=["$scope","$filter","SplitsService","SeasonsService","PlayerGamelogService"]}(),function(){function e(n,e,a,t){function i(){n.isLoading=!0,t.get(n.params).then(function(e){n.isLoading=!1,n.datasets=e;var a=0;n.datasets.forEach(function(t,e,n){t&&t.rows&&t.rows.forEach(function(e){e.SEASONTYPE=encodeURI(t.name)}),a+=t.hasData?0:1,"League Rankings"!==t.name?t.ai={hasData:t.hasData,isSchool:t.isSchool,name:t.name}:t.ai={name:t.name}}),n.noData=a===e.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.datasets={},n.$on("runit",function(e){i()}),n.$watch("playerInfo",function(e){if(!e)return;n.Player=e;var t=a.get(["LeagueID",{name:"PerMode",include:[{val:"Per36",text:"Per 36 Minutes"}],without:["Per48"]}]);n.splits=t.splits,n.params=t.params,n.params.PlayerID=e.PERSON_ID,i()})}stats.controller("PlayerCareerController",e),e.$inject=["$scope","$location","SplitsService","PlayerCareerService"]}(),function(){function e(r,s,e,o,l,t){function c(){r.isLoading=!0,t.get(r.params).then(function(e){var t=e;0===t.DefendingShots.rows.length?(r.noData=!0,r.datasets=[]):(r.noData=!1,r.datasets=[{name:"DefendingShots",datatable:t.DefendingShots.rows}]),r.isLoading=!1}).catch(function(e){r.isLoading=!1,r.noData=!0})}r.isLoading=!0,r.showSplits=!1,r.noData=!1,r.errors={emptyData:!1},r.$on("runit",function(e){c()}),r.$watch("playerInfo",function(e){if(!e)return;var t=s("playerSeason")(e.seasons,o.get("playerTracking")),n=s("seasonyear")(Math.min(e.TO_YEAR,t.SeasonYear)),a=[Math.max(e.FROM_YEAR,t.SeasonYearFrom),Math.min(e.TO_YEAR,t.SeasonYear)];if(a[1]<a[0])return r.noData=!0,void(r.isLoading=!1);var i=l.get(["LeagueID",{name:"Season",initial:n,default:n,seasonRange:a},{name:"SeasonType",initial:t.SeasonType,without:["Pre Season"]},"PerMode","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateTo","DateFrom","TeamID","PORound"]);r.splits=i.splits,r.params=i.params,r.params.PlayerID=e.PERSON_ID,c()})}stats.controller("PlayerDefenseDashController",e),e.$inject=["$scope","$filter","$location","SeasonsService","SplitsService","PlayerTrackingDashDefenseService"]}(),function(){function e(i,e,t,n,a,r,s,o,l,c,u,h){i.PlayerID=a.PlayerID,i.isLoading=!0,i.hasStatData=!1,i.hasNews=!1,i.hasChartData=!1,i.hasUpcomingGames=!1,i.setPerMode=function(e){i.params.PerMode=e,n.search("PerMode",e),p()},i.maxBarHeight=160,i.getChartHeight=function(e,t){return e/(e+t)*i.maxBarHeight+"px"},i.scrollToMoreNews=function(){n.hash("more-news"),e()};var d=o.get("playerUpcomingGames"),f=o.get("playerFantasy");function p(){i.isLoading=!0,c.get(i.params).then(function(e){i.isLoading=!1,e&&e.Overall&&e.Overall.rows.length||(i.noData=!0),i.datasets=e})}function m(){i.hasChartData=!0,u.get(i.params).then(function(e){var t,n,a;e&&e.SeasonAvg.rows.length?(i.charts=(n=(t=e).SeasonAvg.rows[0],a=t.LastFiveGamesAvg.rows[0],[[{label:"fanduel",val:[n.FAN_DUEL_PTS,a.FAN_DUEL_PTS]},{label:"ppg",val:[n.PTS,a.PTS]},{label:"rpg",val:[n.REB,a.REB]},{label:"apg",val:[n.AST,a.AST]},{label:"3pm",val:[n.FG3M,a.FG3M]}],[{label:"ft%",val:[100*n.FT_PCT,100*a.FT_PCT]},{label:"stl",val:[n.STL,a.STL]},{label:"blk",val:[n.BLK,a.BLK]},{label:"tov",val:[n.TOV,a.TOV]},{label:"fg%",val:[100*n.FG_PCT,100*a.FG_PCT]}]]),i.inViewportOptions={delay:500,callback:function(e){var t=e.find(".player-charts__category__bar--season"),n=e.find(".player-charts__category__bar--last-five");t.css("height",t.data("bar-height")),n.css("height",n.data("bar-height"))}}):i.hasChartData=!1})}function g(e){return e.isHome=e.HOME_TEAM_ID==i.playerInfo.TEAM_ID,e}i.$on("runit",function(e){p()}),i.$watch("playerInfo",function(e){var t,n;e&&(i.playerInfo=e,t=l.get(["LeagueID",{name:"PerMode",include:[{val:"Per36",text:"Per 36 Minutes"}],without:["Per48"]}]),i.splits=t.splits,i.params=t.params,i.params.PlayerID=e.PERSON_ID,i.params.MeasureType="Base",i.params.Season=f.Season,i.params.SeasonType=f.SeasonType,i.params.PerMode="PerGame",i.params.PlusMinus="N",i.params.PaceAdjust="N",i.params.Rank="N",i.isLoading=!0,i.hasNews=!0,s.get(i.PlayerID).then(function(e){i.isLoading=!1,e?(i.news=e,i.topNews=i.news.slice(0,3),i.bottomNews=i.news.slice(3,9)):i.hasNews=!1}).catch(function(e){i.isLoading=!1,i.noData=!0}),p(),m(),n={LeagueID:"00",PlayerID:i.PlayerID,Season:d.Season,SeasonType:d.SeasonType,NumberOfGames:4},i.hasUpcomingGames=!0,h.get(n).then(function(e){i.upcomingGames=e.NextNGames.rows.map(g)}))})}stats.controller("PlayerFantasyController",e),e.$inject=["$scope","$anchorScroll","$filter","$location","$routeParams","$sce","PlayerNewsService","SeasonsService","SplitsService","PlayerFantasySplitsService","PlayerFantasyBarGraphService","PlayerUpcomingGamesService"]}(),function(){function e(t,n){t.$watch("playerInfo",function(e){if(!e)return;t.params={LeagueID:"00",PlayerID:e.PERSON_ID,PerMode:"PerGame"},n.get(t.params).then(function(e){t.isLoading=!1;var n=e.CareerHighs.rows,a=e.SeasonHighs.rows;i.forEach(function(t){t.career=n.filter(function(e){return t.stat==e.STAT}),t.season=a.filter(function(e){return t.stat==e.STAT})}),t.cats=i}).catch(function(e){t.isLoading=!1,t.noData=!0})});var i=[{display:"Points ",stat:"PTS",format:"number",param:1},{display:"Rebounds ",stat:"REB",format:"number",param:1},{display:"Assists ",stat:"AST",format:"number",param:1},{display:"Steals ",stat:"STL",format:"number",param:1},{display:"Field Goals Made",stat:"FGM",format:"number",param:1},{display:"Free Throws Made",stat:"FTM",format:"number",param:1},{display:"Three Pointers Made",stat:"FG3M",format:"number",param:1},{display:"Blocks",stat:"BLK",format:"number",param:1}]}stats.controller("PlayerHighsController",e),e.$inject=["$scope","PlayerHighsService"]}(),function(){function e(r,e,s,o,l,c,t,u){r.$watch("playerInfo",function(e){if(!e)return;if(!e)return;r.availableStats.stats||o.path("/career/");var t=s("playerSeason")(e.seasons,l.get("leagueMatchups")),n=s("seasonyear")(Math.min(e.TO_YEAR,t.SeasonYear)),a=[2017,e.TO_YEAR];if(a[1]<a[0])return r.noData=!0,void(r.isLoading=!1);var i=c.get(["LeagueID",{name:"Season",initial:n,default:n,seasonRange:a},{name:"SeasonType",initial:t.SeasonType,without:["Pre Season","All Star"]},{name:"PerMode",default:"Totals"},"Outcome","DateFrom","DateTo","PORound",{name:"Matchup",type:"select",label:"Player On",initial:"Defense",default:"Defense",options:[{val:"Offense",text:"Offense"},{val:"Defense",text:"Defense"}]}]);r.playerId=e.PERSON_ID,r.splits=i.splits,r.params=i.params,function t(){var e="Offense"===r.params.Matchup?angular.extend({},r.params,{OffPlayerID:r.playerId}):angular.extend({},r.params,{DefPlayerID:r.playerId});u.get(e).then(function(e){r.isLoading=!1,e&&(r.stats=e.MatchupsRollup.rows)});r.$on("runit",function(e){r.isLoading=!0,t()})}()})}stats.controller("PlayerMatchupsByPositionController",e),e.$inject=["$scope","$element","$filter","$location","SeasonsService","SplitsService","LeagueMatchupsService","MatchupRollups"]}(),function(){function e(r,e,s,o,l,c,t){function n(e){var t="Offense"===r.params.Matchup?"DEF":"OFF";e.SECONDS=function(e){if(null==e)return null;var t=e.toString().split(":"),n=+t[0]||0,a=+t[1]||0;return 60*n+a}(e.MATCHUP_MIN),e.MATCHUP=e[t+"_PLAYER_NAME"],e.MATCHUP_ID=e[t+"_PLAYER_ID"],e.TEAM_ABBR=e[t+"_TEAM_ABBREVIATION"],e.TEAM_ID=e[t+"_TEAM_ID"]}function u(){var e;r.isLoading=!0,delete(e="Offense"===r.params.Matchup?angular.extend({},r.params,{OffPlayerID:r.playerId}):angular.extend({},r.params,{DefPlayerID:r.playerId})).Matchup,t.get(e).then(function(e){r.dataset=e,r.dataset.rows.forEach(n),r.noData=0===e.rows.length,r.isLoading=!1}).catch(function(e){r.isLoading=!1,r.noData=!0})}r.$watch("playerInfo",function(e){if(!e)return;r.availableStats.stats||o.path("/career/");var t=s("playerSeason")(e.seasons,l.get("leagueMatchups")),n=s("seasonyear")(Math.min(e.TO_YEAR,t.SeasonYear)),a=[2017,e.TO_YEAR];if(a[1]<a[0])return r.noData=!0,void(r.isLoading=!1);var i=c.get(["LeagueID",{name:"Season",initial:n,default:n,seasonRange:a},{name:"SeasonType",initial:t.SeasonType,without:["Pre Season","All Star"]},{name:"PerMode",default:"Totals"},"Outcome","DateFrom","DateTo","PORound",{name:"Matchup",type:"select",label:"Player On",initial:"Defense",default:"Defense",options:[{val:"Offense",text:"Offense"},{val:"Defense",text:"Defense"}]}]);r.playerId=e.PERSON_ID,r.splits=i.splits,r.params=i.params,u()}),r.$on("customFields",function(e,t){r.customFields=t}),r.$on("runit",function(e){u()})}stats.controller("PlayerMatchupsHeadToHeadController",e),e.$inject=["$scope","$element","$filter","$location","SeasonsService","SplitsService","LeagueMatchupsService"]}(),function(){function e(t,n){t.$watch("playerInfo",function(e){if(!e)return;t.params={PlayerID:e.PERSON_ID},t.isLoading=!0,n.get(t.params.PlayerID).then(function(e){t.isLoading=!1,t.stories=e})})}stats.controller("PlayerNewsCtrl",e),e.$inject=["$scope","PlayerNewsService"]}(),function(){function e(r,s,o,l,e){function c(){r.isLoading=!0,e.get(r.params).then(function(e){r.noData=!1,0!==(r.datasets=e)[0].datatable.length&&0!==e[0].datatable.length||(r.noData=!0,r.datasets=[]),r.isLoading=!1}).catch(function(e){r.isLoading=!1,r.noData=!0})}r.isLoading=!0,r.showSplits=!1,r.noData=!1,r.errors={emptyData:!1},r.$on("runit",function(e){c()}),r.$watch("playerInfo",function(e){if(!e)return;var t=s("playerSeason")(e.seasons,o.get("playerTracking")),n=s("seasonyear")(Math.min(e.TO_YEAR,t.SeasonYear)),a=[Math.max(e.FROM_YEAR,t.SeasonYearFrom),Math.min(e.TO_YEAR,t.SeasonYear)];if(a[1]<a[0])return r.noData=!0,void(r.isLoading=!1);var i=l.get(["LeagueID",{name:"Season",initial:n,default:n,seasonRange:a},{name:"SeasonType",initial:t.SeasonType,without:["Pre Season"]},"PerMode","Outcome","Location","Month","TeamID","SeasonSegment","OpponentTeamID","VsConference","VsDivision","LastNGames","GameSegment","Period","PORound","DateFrom","DateTo"]);r.splits=i.splits,r.params=i.params,r.params.PlayerID=e.PERSON_ID,c()})}stats.controller("PlayerPassesDashController",e),e.$inject=["$scope","$filter","SeasonsService","SplitsService","PlayerTrackingDashPassesService"]}(),function(){function e(r,s,e,o,l,t){function c(){r.isLoading=!0,t.get(r.params).then(function(e){var t=e;0===t.OverallRebounding.rows.length?(r.noData=!0,r.datasets=[]):(r.noData=!1,r.datasets=[{name:"OverallRebounding",datatable:t.OverallRebounding.rows},{name:"NumContestedRebounding",datatable:t.NumContestedRebounding.rows},{name:"RebDistanceRebounding",datatable:t.RebDistanceRebounding.rows},{name:"ShotDistanceRebounding",datatable:t.ShotDistanceRebounding.rows},{name:"ShotTypeRebounding",datatable:t.ShotTypeRebounding.rows}]),r.isLoading=!1}).catch(function(e){r.isLoading=!1,r.noData=!0})}r.isLoading=!0,r.showSplits=!1,r.noData=!1,r.errors={emptyData:!1},r.$on("runit",function(e){c()}),r.$watch("playerInfo",function(e){if(!e)return;var t=s("playerSeason")(e.seasons,o.get("playerTracking")),n=s("seasonyear")(Math.min(e.TO_YEAR,t.SeasonYear)),a=[Math.max(e.FROM_YEAR,t.SeasonYearFrom),Math.min(e.TO_YEAR,t.SeasonYear)];if(a[1]<a[0])return r.noData=!0,void(r.isLoading=!1);var i=l.get(["LeagueID",{name:"Season",initial:n,default:n,seasonRange:a},{name:"SeasonType",initial:t.SeasonType,without:["Pre Season"]},"PerMode","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateTo","DateFrom","TeamID","PORound"]);r.splits=i.splits,r.params=i.params,r.params.PlayerID=e.PERSON_ID,c()})}stats.controller("PlayerReboundDashController",e),e.$inject=["$scope","$filter","$location","SeasonsService","SplitsService","PlayerTrackingDashReboundsService"]}(),function(){function e(r,s,e,o,l,t){function c(){r.isLoading=!0,t.get(r.params).then(function(e){var t=e;r.datasets=t.slice(0,t.length-1),r.assists=t.slice(-1)[0],r.noData=0===r.datasets.length,r.isLoading=!1}).catch(function(e){r.isLoading=!1,r.noData=!0})}r.isLoading=!0,r.showSplits=!1,r.noData=!1,r.$on("customFields",function(e,t){r.customFields=t}),r.$on("runit",function(e){c()}),r.$watch("playerInfo",function(e){if(!e)return;var t=s("playerSeason")(e.seasons,o.get("playerStats")),n=s("seasonyear")(Math.min(e.TO_YEAR,t.SeasonYear)),a=[Math.max(e.FROM_YEAR,t.SeasonYearFrom),e.TO_YEAR];if(a[1]<a[0])return r.noData=!0,void(r.isLoading=!1);var i=l.get(["LeagueID",{name:"Season",initial:n,seasonRange:a},{name:"SeasonType",initial:t.SeasonType,without:["All Star"]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo","PORound","ShotClockRange"]);r.splits=i.splits,r.params=i.params,r.params.PlayerID=e.PERSON_ID,r.params.MeasureType="Base",r.params.PerMode="Totals",c()})}stats.controller("PlayerShootingController",e),e.$inject=["$scope","$filter","$location","SeasonsService","SplitsService","PlayerShootingSplitstService"]}(),function(){function e(r,s,e,o,l,t){function c(){r.isLoading=!0,r.noData=!1,t.get(r.params).then(function(e){r.isLoading=!1;var t=e;if(0===t.Overall.rows.length)return r.noData=!0,void(r.datasets=[]);r.datasets=[{name:"Overall",datatable:t.Overall.rows},{name:"GeneralShooting",datatable:t.GeneralShooting.rows},{name:"ShotClockShooting",datatable:t.ShotClockShooting.rows},{name:"DribbleShooting",datatable:t.DribbleShooting.rows},{name:"ClosestDefenderShooting",datatable:t.ClosestDefenderShooting.rows},{name:"ClosestDefender10ftPlusShooting",datatable:t.ClosestDefender10ftPlusShooting.rows},{name:"TouchTimeShooting",datatable:t.TouchTimeShooting.rows}]}).catch(function(e){r.isLoading=!1,r.noData=!0})}r.isLoading=!0,r.showSplits=!1,r.noData=!1,r.errors={emptyData:!1},r.$on("runit",function(e){c()}),r.$watch("playerInfo",function(e){if(!e)return;var t=s("playerSeason")(e.seasons,o.get("playerTracking")),n=s("seasonyear")(Math.min(e.TO_YEAR,t.SeasonYear)),a=[Math.max(e.FROM_YEAR,t.SeasonYearFrom),Math.min(e.TO_YEAR,t.SeasonYear)];if(a[1]<a[0])return r.noData=!0,void(r.isLoading=!1);var i=l.get(["LeagueID",{name:"Season",initial:n,default:n,seasonRange:a},{name:"SeasonType",initial:t.SeasonType,without:["Pre Season"]},"TeamID","PerMode","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateTo","DateFrom"]);r.splits=i.splits,r.params=i.params,r.params.PlayerID=e.PERSON_ID,c()})}stats.controller("PlayerShotDashController",e),e.$inject=["$scope","$filter","$location","SeasonsService","SplitsService","PlayerTrackingDashShotsService"]}(),function(){function e(r,s,o,l,c,u,h){function d(){r.isLoading=!0,h.endpoint=r.splits.Split.selected.endpoint,h.get(r.params).then(function(e){r.ai.showTeamCol="yoy"===r.params.Split,r.datasets=e,r.noData=!r.datasets[0].rows.length,r.isLoading=!1}).catch(function(e){r.isLoading=!1,r.noData=!0})}r.ai={},r.ai.showTeamCol=!1,r.$watch("playerInfo",function(e){if(!e)return;r.availableStats.stats||l.path("/career/");var t=o("playerSeason")(e.seasons,c.get("playerStats")),n=o("seasonyear")(Math.min(e.TO_YEAR,t.SeasonYear)),a=[Math.max(e.FROM_YEAR,t.SeasonYearFrom),e.TO_YEAR];if(a[1]<a[0])return r.noData=!0,void(r.isLoading=!1);var i=u.get(["LeagueID",{name:"Season",initial:n,default:n,seasonRange:a},{name:"SeasonType",initial:t.SeasonType,without:["All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},{name:"Split",label:"Split",order:900,default:h.endpoints[0].val,initial:h.endpoints[0].val,type:"select",options:h.endpoints.slice(0)},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo","PORound","ShotClockRange"]);r.splits=i.splits,r.params=i.params,r.params.PlayerID=e.PERSON_ID,r.params.MeasureType=s.data("measure-type"),d()}),r.$on("customFields",function(e,t){r.customFields=t}),r.$on("runit",function(e){d()})}stats.controller("PlayerSplitsController",e),e.$inject=["$scope","$element","$filter","$location","SeasonsService","SplitsService","PlayerSplitsService"]}(),function(){function e(r,s,e,t,o,l,c){function u(){o.endpoint=r.splits.Split.selected.endpoint,n("Base"),n("Advanced"),n("Misc"),n("Scoring"),n("Usage")}function n(t){var e=angular.extend({},{MeasureType:t},r.params);r.datasets[t]={},r.datasets[t].isLoading=!0,o.get(e).then(function(e){r.isLoading[t]=!1,r.datasets[t].sets=e,r.datasets[t].noData=!e[1].rows.length,r.datasets[t].isLoading=!1}).catch(function(e){r.datasets[t].isLoading=!1,r.datasets[t].noData=!0})}r.$watch("playerInfo",function(e){if(!e)return;if(r.ai.disablePopup=!0,!r.availableStats.current||!r.availableStats.stats||e.FROM_YEAR<1996)return void(document.location="/stats/player/"+e.PERSON_ID+"/career/");var t=s("playerSeason")(e.seasons,l.get("playerStats")),n=s("seasonyear")(Math.min(e.TO_YEAR,t.SeasonYear)),a=[Math.max(e.FROM_YEAR,t.SeasonYearFrom),e.TO_YEAR];if(a[1]<a[0])return r.noData=!0,void(r.isLoading=!1);var i=c.get(["LeagueID",{name:"Season",initial:n,seasonRange:a},{name:"SeasonType",initial:t.SeasonType,default:t.SeasonType,without:["All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},{name:"Split",label:"Split",order:900,default:"yoy",initial:"yoy",type:"select",options:o.endpoints.slice(0)},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo","PORound","ShotClockRange"]);r.splits=i.splits,r.params=i.params,r.params.PlayerID=e.PERSON_ID,u()}),r.datasets={},r.ai={},r.ai.showTeamCol=!0,r.$on("runit",function(e){u()})}stats.controller("PlayerStatsProfileController",e),e.$inject=["$scope","$filter","$location","$timeout","PlayerSplitsService","SeasonsService","SplitsService"]}(),function(){function e(a,i,r,e,t,n,s,o,l){var c=e.absUrl();-1<c.indexOf("/#!/")&&(document.location=c.replace("/#!/","/")),a.isLoading=!0;var u=l.get("site"),h=l.get("playerTracking"),d=["ATL","BOS","BKN","CHA","CHI","CLE","DAL","DEN","DET","GSW","HOU","IND","LAC","LAL","MEM","MIA","MIL","MIN","NOH","NJN","NOP","NYK","OKC","ORL","PHI","PHX","POR","SAC","SAS","TOR","UTA","WAS"];a.PlayerID=r.data("player-id"),a.showAllStarBtn=u.Flags.allstarVoting;a.PlayerID;!function(){a.playerInfo=window.nbaStatsPlayerInfo,a.playerInfo.HEIGHT_INCHES=i("toInches")(a.playerInfo.HEIGHT),a.playerInfo.HEIGHT_FORMATTED=a.playerInfo.HEIGHT?a.playerInfo.HEIGHT.replace("-","'")+'"':a.playerInfo.HEIGHT,a.playerInfo.HEIGHT_METRIC=Number(.0254*a.playerInfo.HEIGHT_INCHES).toFixed(2),a.playerInfo.WEIGHT=+a.playerInfo.WEIGHT,a.playerInfo.WEIGHT_METRIC=Number(.453592*a.playerInfo.WEIGHT).toFixed(0),a.playerID=a.playerInfo.PERSON_ID,a.hasTeamTheme=-1!==d.indexOf(a.playerInfo.TEAM_ABBREVIATION),a.playerHeadlineStats=window.nbaStatsPlayerStats,a.PlayerCode=a.playerInfo.PLAYERCODE,a.ai=a.playerInfo;var e=a.playerInfo.TO_YEAR,t=a.playerInfo.FROM_YEAR;a.playerIsActive=e>=u.SeasonYear,a.playerInfo.seasons=window.nbaStatsPlayerSeasons,2403===a.playerID?(a.playerInfo.FIRST_NAME="",a.playerInfo.LAST_NAME="Nene"):2397===a.playerID?(a.playerInfo.FIRST_NAME="Yao",a.playerInfo.LAST_NAME="Ming"):201146===a.playerID&&(a.playerInfo.FIRST_NAME="Yi",a.playerInfo.LAST_NAME="Jianlian");a.availableStats={current:"Active"===a.playerInfo.ROSTERSTATUS||"Y"===a.playerInfo.GAMES_PLAYED_CURRENT_SEASON_FLAG,tracking:2013<=e&&t<=h.SeasonYear&&"Y"===a.playerInfo.GAMES_PLAYED_FLAG,stats:1996<=e&&"Y"===a.playerInfo.GAMES_PLAYED_FLAG,video:2013<=e&&"Y"===a.playerInfo.GAMES_PLAYED_FLAG,boxscores:"Y"===a.playerInfo.GAMES_PLAYED_FLAG,matchups:2017<=e},1996<=a.playerInfo.FROM_YEAR?a.availableStats.boxscoreFlag=1:1996<=a.playerInfo.TO_YEAR?a.availableStats.boxscoreFlag=2:a.availableStats.boxscoreFlag=3;a.$emit("onPlayerInfo",{id:a.playerInfo.PERSON_ID,name:a.playerInfo.FIRST_NAME+" "+a.playerInfo.LAST_NAME,sections:a.availableStats});var n=[a.playerInfo.FIRST_NAME+" "+a.playerInfo.LAST_NAME,a.playerInfo.PERSON_ID];s.triggerEvent("pageLoad",n)}(),a.$on("onPlayerSection",function(e,t){a.playerSection=t}),a.$on("$viewContentLoaded",function(e,t){var n=r.find(".player-view");a.pageCat=n.data("cat"),a.pageSection=n.data("section")}),a.trackGleagueClick=function(e){var t=[a.playerInfo.PERSON_ID+"",a.playerInfo.FIRST_NAME+" "+a.playerInfo.LAST_NAME];s.triggerEvent("playerProfileGLeagueLink",t)}}stats.controller("PlayerSummaryController",e),e.$inject=["$scope","$filter","$element","$location","$routeParams","$window","DtmService","PlayersService","SeasonsService"]}(),function(){function e(t,e){t.isLoading=!0,e.get("advanced_leaders").then(function(e){t.feed=e,t.isLoading=!1})}stats.controller("PlayersAdvancedLeadersController",e),e.$inject=["$scope","StatsWidgetService"]}(),function(){function e(n,e,a,t,i,r){var s=t.get("leadersAllTime"),o=i.get(["LeagueID",{name:"SeasonType",without:["Pre Season","All Star"],initial:s.SeasonType},{name:"PerMode",default:"PerMode",initial:"PerMode"}]);function l(){n.isLoading=!0,e.get(n.params).then(function(e){var t;n.prefix="/stats/alltime-leaders/?SeasonType="+n.params.SeasonType+"&PerMode="+n.params.PerMode,n.datasets=(t=e,Object.keys(t).forEach(function(e){t[e].rows.forEach(function(e){var t=a.getById(e.PLAYER_ID);e.active=t&&t.rs})}),t),n.isLoading=!1}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=o.splits,n.params=o.params,n.params.TopX=10,n.teams=r.get(),n.isLoading=!0,n.$on("runit",function(e){l()}),l()}stats.controller("PlayersAlltimeLandingController",e),e.$inject=["$scope","AlltimeLeadersGridService","PlayersService","SeasonsService","SplitsService","TeamsService"]}(),function(){function e(n,e,t,a){n.isLoading=!0;var i=e.get("leaguePlayerStats"),r=t.get(["LeagueID",{name:"Season",initial:i.Season,seasonRange:[i.SeasonYearFrom,i.SeasonYear]},{name:"SeasonType",initial:i.SeasonType},"PerMode","College","Conference","Country","DateFrom","DateTo","Division","DraftPick","DraftYear","GameScope","GameSegment","Height","LastNGames","Location","Month","OpponentTeamID","Outcome","Period","PlayerExperience","PlayerPosition","PORound","SeasonSegment","ShotClockRange","StarterBench","TeamID","VsDivision","VsConference","Weight"]);function s(){n.isLoading=!0,a.get(n.params).then(function(e){n.isLoading=!1,n.playerStats=e.rows,n.noData=!n.playerStats.length})}n.splits=r.splits,n.params=r.params,n.$on("runit",function(e){s()}),n.$on("customFields",function(e,t){n.customFields=t}),s()}stats.controller("PlayersBioController",e),e.$inject=["$scope","SeasonsService","SplitsService","LeaguePlayerBioService"]}(),function(){function e(n,e,t,a,i,r,s){function o(){n.isLoading=!0,s.get(n.params).then(function(e){n.stats=e,n.noData=!e.rows.length,n.isLoading=!1})}n.ai={},n.ai.showTeamCol=!1,n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()});var l=i.get("leagueGameLogs"),c=l.Season,u=[1996,l.SeasonYear];if(u[1]<u[0])return n.noData=!0,void(n.isLoading=!1);var h=r.get(["LeagueID",{name:"Season",initial:c,default:c,seasonRange:u},{name:"SeasonType",initial:l.SeasonType,without:["All Star"]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo","PORound","ShotClockRange"]);n.splits=h.splits,n.params=h.params,n.params.PerMode="Totals",n.params.MeasureType=e.data("measure-type"),o()}stats.controller("PlayersBoxscoreSplitsController",e),e.$inject=["$scope","$element","$filter","$location","SeasonsService","SplitsService","PlayerGamelogSplitsService"]}(),function(){function e(n,e,t,a,i,r){n.isLoading=!0,n.showSplits=!1,n.isAllTime=!1,e.on("click","th[zort]",function(){var e=angular.element(this).data("field");n.params.Sorter==e?n.params.Direction="DESC"===n.params.Direction?"ASC":"DESC":(n.params.Sorter=e,n.params.Direction="DESC");t.search("Sorter",n.params.Sorter),t.search("Direction",n.params.Direction),l()});var s=i.get("leagueGameLogs"),o=r.get(["LeagueID",{name:"Season",initial:s.Season,seasonRange:[s.SeasonYearFrom,s.SeasonYear],includeBefore:[{val:"ALLTIME",text:"All Seasons"}]},{name:"SeasonType",initial:s.SeasonType},"DateFrom","DateTo"]);function l(){n.isLoading=!0,a.get(n.params).then(function(e){n.playerStats=e.rows,n.noData=0===n.playerStats.length,n.isLoading=!1}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=o.splits,n.params=o.params,n.params.Sorter=t.search().Sorter||"DATE",n.params.Direction=t.search().Direction||"DESC",n.params.PlayerOrTeam="P",n.params.Counter="1000",n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){"ALLTIME"===n.params.Season?(n.isAllTime||(t.search("sort",null),t.search("dir",null)),n.isAllTime=!0):(n.isAllTime&&(t.search("Sorter",null),t.search("Direction",null)),n.isAllTime=!1),l()}),l()}stats.controller("PlayersBoxscoresController",e),e.$inject=["$scope","$element","$location","LeagueGamelogsService","SeasonsService","SplitsService"]}(),function(){function e(n,e,t,a,i){var r=i.get("leaguePlayerStats"),s=a.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","ClutchTime","AheadBehind","PointDiff","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight"]);function o(){n.isLoading=!0,t.get(n.params).then(function(e){n.datasets=e[0].rows,n.isLoading=!1,n.noData=0===n.datasets.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.params.MeasureType=e.data("measure-type"),n.options={sortField:e.data("sort-field"),sortDirection:e.data("sort-direction")},n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("PlayersClutchController",e),e.$inject=["$scope","$element","LeaguePlayerClutchService","SplitsService","SeasonsService"]}(),function(){function e(n,e,t,a,i,r){var s=a.get("trackingStats"),o=i.get(["LeagueID",{name:"Season",initial:s.Season,seasonRange:[s.SeasonYearFrom,s.SeasonYear]},{name:"SeasonType",initial:s.SeasonType,without:["Pre Season"]},"PerMode","College","Conference","Country","DateFrom","DateTo","Division","DraftPick","DraftYear","GameSegment","Height","LastNGames","Location","Month","OpponentTeamID","Outcome","PORound","Period","PlayerExperience","PlayerPosition","SeasonSegment","StarterBench","TeamID","VsConference","VsDivision","Weight"]);function l(){n.isLoading=!0,r.get(n.params).then(function(e){n.isLoading=!1,n.datasets=e,n.noData=0===n.datasets.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=o.splits,n.params=o.params,n.params.DefenseCategory=e.data("defense-category"),n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){l()}),l()}stats.controller("PlayersDefenseDashController",e),e.$inject=["$scope","$element","$location","SeasonsService","SplitsService","LeaguePlayerTrackingDefenseService"]}(),function(){function e(n,e,t,a,i){var r=a.get("leaguePlayerStats"),s=i.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType}]);function o(){n.isLoading=!0,t.get(n.params).then(function(e){n.playerStats=e,n.isLoading=!1,n.noData=0===e.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.options={sortField:e.data("sort-field"),sortDirection:e.data("sort-direction")},n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("PlayersEstimatedController",e),e.$inject=["$scope","$element","LeaguePlayerEstimatedMetricsService","SeasonsService","SplitsService"]}(),function(){function e(n,e,t,a,i){var r=a.get("leaguePlayerStats"),s=i.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight","TwoWay"]);function o(){n.isLoading=!0,t.get(n.params).then(function(e){n.playerStats=e,n.isLoading=!1,n.noData=0===e.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.params.MeasureType=e.data("measure-type"),n.options={sortField:e.data("sort-field"),sortDirection:e.data("sort-direction")},n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("PlayersGeneralController",e),e.$inject=["$scope","$element","LeaguePlayerGeneralService","SeasonsService","SplitsService"]}(),function(){function e(t,e){t.isLoading=!0,e.get("hustle_leaders").then(function(e){t.feed=e,t.isLoading=!1})}stats.controller("PlayersHustleLeadersController",e),e.$inject=["$scope","StatsWidgetService"]}(),function(){function e(n,e,t,a,i,r){n.isLoading=!0,n.showSplits=!1,n.ai={};var s=e.data("season-section"),o=i.get(s),l=a.get(["LeagueID",{name:"Season",initial:o.Season,default:o.Season,seasonRange:[o.SeasonYearFrom,o.SeasonYear]},{name:"SeasonType",initial:o.SeasonType,default:o.SeasonType,without:["Pre Season"]},{name:"PerMode",include:[{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"}]},"PlayerPosition","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight"]);function c(){n.isLoading=!0,n.ai.seasoncode=+(n.splits.SeasonType.selected.st+""+n.splits.Season.selected.num),r.get(n.params).then(function(e){n.playerStats=e.rows,n.isLoading=!1,n.noData=0===n.playerStats.length||n.ai.seasoncode<=22015}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=l.splits,n.params=l.params,n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){c()}),c()}stats.controller("PlayersHustleController",e),e.$inject=["$scope","$element","$location","SplitsService","SeasonsService","LeaguePlayerHustleService"]}(),function(){function e(r,n,a,e,t,s,i){r.isLoading=!0,r.trustAsHtml=t.trustAsHtml,r.modules={};r.scrollTo=function(e){var t=a.hash();n.yOffset=50,a.hash(e),n(),a.hash(t)};var o=0;["players_landing_inner","players_landing_sidebar"].forEach(function(a,e,i){s.get(a).then(function(e){var t,n=e.items;o++,r.modules[a]=n,o===i.length&&(r.isLoading=!1,t=r.modules,r.sidebar=t.players_landing_sidebar,r.league_leaders=t.players_landing_inner[0],r.leaders=t.players_landing_inner.slice(1),function(e){var t,n=e.items;for(t in n)for(var a=0;a<n[t].playerstats.length;a++){var i=n[t].name,r=a+1;!n[t].playerstats[a].rank&&0===a||n[t].playerstats[a][i]<n[t].playerstats[a-1][i]?n[t].playerstats[a].rank=r:n[t].playerstats[a][i]==n[t].playerstats[a-1][i]&&(n[t].playerstats[a].rank=n[t].playerstats[a-1].rank)}}(r.league_leaders))})})}stats.controller("PlayersLandingCtrl",e),e.$inject=["$scope","$anchorScroll","$location","$http","$sce","StatsWidgetService","CMSENV"]}(),function(){function e(a,e,t,n){a.isLoading=!0;var i=t.get("leadersAllTime"),r=e.get(["LeagueID",{name:"SeasonType",without:"All Star",initial:i.SeasonType},{name:"PerMode",default:"Totals",initial:"Totals"},{name:"StatCategory",without:["AST_TOV","STL_TOV","PF","EFF"]},{name:"ActiveFlag",default:"No",initial:"No",type:"toggle",label:"Only Active Players",val:{true:"Yes",false:"No"}}]);function s(){a.isLoading=!0,n.get(a.params).then(function(e){a.playerStats=e.LeagueLeaders.rows,a.isLoading=!1,a.noData=!a.playerStats.length})}a.splits=r.splits,a.params=r.params,a.params.Season="All Time",a.params.Scope="S",a.$on("customFields",function(e,t){a.customFields=t}),a.$on("runit",function(e){s()}),a.$on("$statsTableLoad",function(e,t){var n=t.$elm;$(n).find('th[data-field="'+a.params.StatCategory+'"]').addClass("sorted desc")}),s()}stats.controller("PlayersLeadersAlltimeController",e),e.$inject=["$scope","SplitsService","SeasonsService","LeagueLeadersService"]}(),function(){function e(a,e,t,n){a.isLoading=!0;var i=n.get("leadersCurrent"),r=t.get(["LeagueID",{name:"Season",initial:i.Season,seasonRange:[i.SeasonYearFrom,i.SeasonYear]},{name:"SeasonType",initial:i.SeasonType},{name:"PerMode",include:[{val:"Per48",text:"Per 48 Minutes"}]},"Scope"]),s={Per48:t.get([{name:"StatCategory",without:["MIN","FG_PCT","FG3_PCT","FT_PCT","AST_TOV","STL_TOV"]}]).splits.StatCategory,PerGame:t.get([{name:"StatCategory",without:["FGA","FGM","FG_PCT","FG3M","FG3A","FG3_PCT","FTA","FTM","FT_PCT","PF","AST_TOV","STL_TOV"]}]).splits.StatCategory,Totals:t.get([{name:"StatCategory"}]).splits.StatCategory};function o(){a.isLoading=!0,e.get(a.params).then(function(e){a.isLoading=!1,a.playerStats=e.LeagueLeaders.rows,a.noData=!a.playerStats.length}).catch(function(e){a.isLoading=!1,a.noData=!0})}a.splits=r.splits,a.params=r.params,a.splits.StatCategory=s[a.splits.PerMode.selected.val],a.params.StatCategory=a.splits.StatCategory.selected.val,a.$watch("splits.PerMode.selected",function(e){a.splits.StatCategory=s[e.val]}),a.$on("customFields",function(e,t){a.customFields=t}),a.$on("runit",function(e){o()}),a.$on("$statsTableLoad",function(e,t){var n=t.$elm;$(n).find('th[data-field="'+a.params.StatCategory+'"]').addClass("sorted desc")}),o()}stats.controller("PlayersLeadersController",e),e.$inject=["$scope","LeagueLeadersService","SplitsService","SeasonsService"]}(),function(){function e(t,n,e,a,i,r){var s="A B C D E F G H I J K L M N O P Q R S T U V W X Y Z".split(" ").map(function(e){return{text:e,val:e}});s.unshift({text:"All Players",val:""});var o=i.get([{name:"Historic",default:"N",initial:"N",type:"toggle",label:"Show Historic Players",val:{true:"Y",false:"N"}},{name:"LastInitial",label:"Last Initial",type:"select",initial:"",default:"",options:s}]);t.splits=o.splits,t.params=o.params,t.search=e.search().s||"";var l=a.get();function c(){var e;l&&(e=l.slice(0),"N"===t.params.Historic&&(e=e.filter(function(e){return e.active})),""!==t.params.LastInitial&&(e=e.filter(function(e){return e.ln.charAt(0)===t.params.LastInitial})),t.playersByLastName=n("groupBy")(e,function(e){return e.ln.charAt(0)},{asArray:!0}).sort(u))}function u(e,t){return e.group>t.group?1:-1}c(),t.$on("runit",function(e){c()})}stats.controller("PlayersListController",e),e.$inject=["$scope","$filter","$location","PlayersService","SplitsService","SeasonsService"]}(),function(){function e(n,a,e,t,i){n.isLoading=!0,n.showSplits=!1,n.setDistanceRange=function(e){var t=e===+n.splits.DistanceRange.default?null:e;a.search("DistanceRange",t),n.params.DistanceRange=e,o()};var r=t.get("leaguePlayerStats"),s=e.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType},"PerMode","DistanceRange","GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight"]);function o(){n.isLoading=!0,i.get(n.params).then(function(e){n.playerStats=e[0].datatable,n.isLoading=!1,n.noData=0===e[0].datatable.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.params.MeasureType="Opponent",n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("PlayersOpponentShootingController",e),e.$inject=["$scope","$location","SplitsService","SeasonsService","LeaguePlayerShootingService"]}(),function(){function e(n,e,t,a,i){n.isLoading=!0,n.showSplits=!1;var r=a.get("leaguePlayerStats"),s=t.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType},{name:"PerMode",initial:"Per100Possessions",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight"]);function o(){n.isLoading=!0,i.get(n.params).then(function(e){n.datasets=e.rows,n.isLoading=!1,n.noData=0===n.datasets.length})}n.splits=s.splits,n.params=s.params,n.params.MeasureType=e.data("measure-type"),n.options={sortField:e.data("sort-field"),sortDirection:e.data("sort-direction")},n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("PlayersOpponentController",e),e.$inject=["$scope","$element","SplitsService","SeasonsService","LeaguePlayerOnCourtService"]}(),function(){function e(n,e,t,a,i){var r=t.get("playtypeStats"),s=e.data("category"),o={name:"OD",as:"TypeGrouping"};-1<["transition","cut","putbacks","misc"].indexOf(s.toLowerCase())&&(o.without=["defensive"]);var l=a.get(["LeagueID",{name:"Season",as:"SeasonYear",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType,without:["Pre Season","All Star"]},o,"PerMode"]);function c(){n.isLoading=!0,i.get(n.params).then(function(e){n.playerStats=e.SynergyPlayType,n.isLoading=!1,n.noData=0===e.SynergyPlayType.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=l.splits,n.params=l.params,n.params.PlayerOrTeam="P",n.params.PlayType=s,n.$on("runit",function(e){c()}),n.$on("customFields",function(e,t){n.customFields=t}),n.$on("$routeChangeSuccess",function(e,t){c()}),c()}stats.controller("PlayersPlaytypeController",e),e.$inject=["$scope","$element","SeasonsService","SplitsService","SynergyPlaytypesService"]}(),function(){function e(n,e,t,a,i){n.isLoading=!0,n.showSplits=!1;var r=a.get("leaguePlayerStats"),s=t.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType},"PerMode","DistanceRange","GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight"]);function o(){n.isLoading=!0,i.get(n.params).then(function(e){n.playerStats=e[0].datatable,n.isLoading=!1,n.noData=0===e[0].datatable.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.params.MeasureType="Base",n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("PlayersShootingController",e),e.$inject=["$scope","$location","SplitsService","SeasonsService","LeaguePlayerShootingService"]}(),function(){function e(n,e,t,a,i,r){var s=i.get("trackingStats"),o=r.get(["LeagueID",{name:"Season",initial:s.Season,default:s.Season,seasonRange:[s.SeasonYearFrom,s.SeasonYear]},{name:"SeasonType",initial:s.SeasonType,default:s.SeasonType,without:["Pre Season"]},"PerMode","GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight","TouchTimeRange","GeneralRange","DribbleRange","CloseDefDistRange",{name:"ShotClockRange",initial:"24-22",default:"24-22",without:[""]}]);n.splits=o.splits,n.params=o.params;var l=e.data("measure-type");function c(){n.isLoading=!0,a.get(n.params).then(function(e){n.isLoading=!1,n.datasets=e,n.noData=0===n.datasets.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}"cddr"!==l&&(n.params.CloseDefDistRange="",delete n.splits.CloseDefDistRange),"ttr"!==l&&(n.params.TouchTimeRange="",delete n.splits.TouchTimeRange),"scr"!==l&&(n.params.ShotClockRange="",delete n.splits.ShotClockRange),"gr"!==l&&(n.params.GeneralRange="",delete n.splits.GeneralRange),"dr"!==l&&(n.params.DribbleRange="",delete n.splits.DribbleRange),n.params.ShotDistRange=e.data("sdr")?e.data("sdr"):"",n.$on("runit",function(e){c()}),n.$on("customFields",function(e,t){n.customFields=t}),c()}stats.controller("PlayersShotDashController",e),e.$inject=["$scope","$element","$location","LeaguePlayerTrackingShotsService","SeasonsService","SplitsService"]}(),function(){function e(n,e,t,a,i){var r=t.get("trackingStats"),s=a.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType,without:["Preseason"]},"College","Conference","Country","DateFrom","DateTo","Division","DraftPick","DraftYear","GameScope","Height","LastNGames","Location","Month","OpponentTeamID","Outcome","PerMode","PlayerExperience","PlayerPosition","PORound","SeasonSegment","StarterBench","VsConference","VsDivision","Weight","TeamID"]);function o(){n.isLoading=!0,i.get(n.params).then(function(e){n.datasets=e.LeagueDashPtStats.rows,n.noData=0===n.datasets.length,n.isLoading=!1}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.params.PlayerOrTeam="Player",n.params.PtMeasureType=e.data("measure-type"),n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("PlayersTrackingController",e),e.$inject=["$scope","$element","SeasonsService","SplitsService","TrackingDataService"]}(),function(){function e(o,l,n,i,e,t,a,r,s){o.isOpen=!1,o.navToSeries=function(e){if(!e||!e.g||!e.g[0])return;var t=e.g[0].gid.substr(0,9);o.activeSeries=o.serii[t],n.path(t)},o.hasLiveGame=!1,o.updateInterval=null,o.iv=1e4,o.serii={},o.responsiveOptions={min:300,max:1250},"/"!==document.location.pathname.slice(-1)&&(document.location.pathname+="/"),o.$on("$routeChangeSuccess",function(e,t){t?(o.SeriesID=t.params.SeriesID,o.isOpen=!!o.SeriesID):o.isOpen=!1});var c=r.get().SeasonYear.toString()||r.get("playoffBracket").SeasonYear;function u(){s.get().then(function(e){var t,n=e.data.gs.g;for(t in n){var a,i=n[t],r=i.gid.substr(0,9),s=o.serii[r];s&&(a=l("filter")(s.g,{gid:i.gid})[0],angular.extend(a,i),s.hasLiveGame=2===a.st)}o.hasLiveGame=n.some(function(e){return 2==e.st})})}o.isBracketLoading=!0,a.get(c).then(function(e){var t,n,a;o.isBracketLoading=!1,o.pb=e.data.pb,t=o.pb.r,n=function(e,t){e.ser.forEach(a.bind(null,t))},a=function(e,t){t.conf=1===e?"WEST":"EAST",t.g&&t.g[0]&&(t.sid=t.g[0].gid.substr(0,9),t.round=t.sid.substr(7,1),t.isFinals="4"==t.round,t.season=20+t.sid.substr(3,2),o.serii[t.sid]=t)},t.forEach(function(e){e.co.forEach(n)}),o.activeSeries=o.serii[o.SeriesID],u(),o.updateInterval=i(u,o.iv)},function(e){window.location.href="/stats/playoffpicture/"})}stats.controller("PlayoffsBracketCtrl",e),e.$inject=["$scope","$filter","$location","$interval","$rootScope","$routeParams","PlayoffBracketsService","SeasonsService","TodaysScoresService"]}(),function(){function e(t,e,n,a,i,r,s,o,l){t.seed={low:{},high:{}},t.onBracketBackClick=function(){i.hash("nba-playoff-bracket"),e()},t.$watch("activeSeries",function(e){e&&(t.isBracketLoading=!1,t.series=e,t.lowSeedId=e.tid2,t.highSeedId=e.tid1,t.season=e.season,t.round=e.round,t.SeriesID=e.sid,t.Season=a("seasonyear")(t.season),t.SeasonType="Regular Season",t.params={GameID:t.SeriesID.toString()+r.GameID},t.gameObject=a("gameIdToObject")(t.params.GameID),t.seed.low.info=l.getById(t.lowSeedId),t.seed.high.info=l.getById(t.highSeedId),t.isLoading=!0,s.get(t.params).then(function(e){t.isLoading=!1,t.boxscore=e,t.summary=e.summary,t.officials=e.officials,t.gameInfo=e.gameInfo,t.av=e.av,t.teams=e.teams,t.linescores=e.teams,t.otherStats=e.otherStats,t.teamInfo=e.teamInfo,t.thisSeason=e.season,t.seasonYear=t.gameObject.seasonyear,t.seasonType=e.seasontype,t.boxscore=e,t.boxscore.teamInfo={vtm:l.getById(e.summary.VISITOR_TEAM_ID),htm:l.getById(e.summary.HOME_TEAM_ID)}}))},!0)}stats.controller("PlayoffsGameCtrl",e),e.$inject=["$scope","$anchorScroll","$element","$filter","$location","$routeParams","BoxscoreSummaryService","SeasonsService","TeamsService"]}(),function(){function e(t,n,e,a,i,r,l){t.isLoading=!0,t.scrollTo=function(e){var t=a.hash();n.yOffset=50,a.hash(e),n(),a.hash(t)},t.responsiveOptions={min:300,max:1250},t.season=r.get().Season,t.params={LeagueID:r.get().LeagueID,SeasonID:"2"+r.get().SeasonYear.toString()};var s=new Date("April 18 2020 00:00:00 GMT-0400")-new Date,o=Math.ceil(s/864e5);function c(e,t){var n=l.getById(t.HIGH_SEED_TEAM_ID),a=l.getById(t.LOW_SEED_TEAM_ID),i=e.find(function(e){return e.TEAM_ID===t.HIGH_SEED_TEAM_ID}),r=e.find(function(e){return e.TEAM_ID===t.LOW_SEED_TEAM_ID}),s=i&&i.WINS?i.WINS+"-"+i.LOSSES:{},o=r&&r.WINS?r.WINS+"-"+r.LOSSES:{};t.HIGH_SEED_TEAM_ABBR=n&&n.abbr?n.abbr:"POR/MEM",t.LOW_SEED_TEAM_ABBR=a&&a.abbr?a.abbr:"POR/MEM",t.HIGH_SEED_RECORD=s||"",t.LOW_SEED_RECORD=o||""}function u(e){var t=l.getById(e.TEAM_ID);if(e.ELIMINATED_PLAYOFFS&&(e.status="o"),e.CLINCHED_PLAYOFFS&&(e.status="x"),e.CLINCHED_CONFERENCE&&(e.status=t.conference.substr(0,1).toLowerCase()),e.CLINCHED_DIVISION&&!e.CLINCHED_CONFERENCE)switch(t.division){case"Northwest":e.status="nw";break;case"Pacific":e.status="p";break;case"Southwest":e.status="sw";break;case"Southeast":e.status="se";break;case"Atlantic":e.status="a";break;case"Central":e.status="c"}}t.daysTillFinals=o,t.isLoading=!0,i.get(t.params).then(function(e){(t.datasets=e).EastConfStandings.rows.forEach(u),e.WestConfStandings.rows.forEach(u),e.EastConfPlayoffPicture.rows.forEach(c.bind("",e.EastConfStandings.rows)),e.WestConfPlayoffPicture.rows.forEach(c.bind("",e.WestConfStandings.rows)),t.isLoading=!1})}stats.controller("PlayoffsPictureCtrl",e),e.$inject=["$scope","$anchorScroll","$filter","$location","PlayoffPictureService","SeasonsService","TeamsService"]}(),function(){function e(a,e,t,n,i,r,s,o,l,c,u){var h=l.get(["LeagueID","PerMode","GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight"]);function d(e,t){return t.TEAM_ID.toString()==e.toString()}a.seed={low:{},high:{}},a.rs={teamBar:{min:300,max:1250},teamPts:{min:300,max:1250},def:{min:300,max:1250}},a.onBracketBackClick=function(){i.hash("nba-playoff-bracket"),e()},a.isDiffLoading=!0,a.isPlayerBaseLoading=!0,a.isPlayerDefLoading=!0,a.isTeamBaseLoading=!0,a.isTeamDefLoading=!0,a.isTeamScoringLoading=!0,a.$watch("activeSeries",function(e){e&&(a.isBracketLoading=!1,a.series=e,a.lowSeedId=e.tid2,a.highSeedId=e.tid1,a.season=e.season,a.round=e.round,a.SeriesID=e.sid,a.Season=n("seasonyear")(a.season),a.SeasonType="Regular Season",h.params.Season=a.Season,h.params.SeasonType=a.SeasonType,a.seed.low.info=c.getById(a.lowSeedId),a.seed.high.info=c.getById(a.highSeedId),function(){a.isPlayerBaseLoading=!0;var e=angular.extend({},h.params,{MeasureType:"Base"});s.get(e).then(function(e){a.isPlayerBaseLoading=!1,a.seed.low.playerBase=e.rows.filter(d.bind("",a.lowSeedId)),a.seed.high.playerBase=e.rows.filter(d.bind("",a.highSeedId))})}(),function(){a.isPlayerDefLoading=!0;var e=angular.extend({},h.params,{PlayerOrTeam:"Player",PtMeasureType:"Defense"});u.get(e).then(function(e){a.isPlayerDefLoading=!1,a.seed.low.playerDef=e.LeagueDashPtStats.rows.filter(d.bind("",a.lowSeedId)),a.seed.high.playerDef=e.LeagueDashPtStats.rows.filter(d.bind("",a.highSeedId))})}(),function(){a.isTeamBaseLoading=!0;var e=angular.extend({},h.params,{MeasureType:"Base"});o.get(e).then(function(e){a.isTeamBaseLoading=!1,a.seed.low.base=e.rows.filter(d.bind("",a.lowSeedId))[0],a.seed.high.base=e.rows.filter(d.bind("",a.highSeedId))[0]})}(),function(){a.isTeamScoringLoading=!0;var e=angular.extend({},h.params,{MeasureType:"Scoring"});o.get(e).then(function(e){a.isTeamScoringLoading=!1,a.seed.low.scoring=e.rows.filter(d.bind("",a.lowSeedId))[0],a.seed.high.scoring=e.rows.filter(d.bind("",a.highSeedId))[0]})}(),function(){a.isTeamDefLoading=!0;var e=angular.extend({},h.params,{PlayerOrTeam:"Team",PtMeasureType:"Defense"});u.get(e).then(function(e){a.isTeamDefLoading=!1,a.seed.low.def=e.LeagueDashPtStats.rows.filter(d.bind("",a.lowSeedId))[0],a.seed.high.def=e.LeagueDashPtStats.rows.filter(d.bind("",a.highSeedId))[0]})}(),function(){a.isDiffLoading=!0;var e="/stats/media/v2/img/playoff-series-diff/"+a.SeriesID+"h.png",t=new Image,n=angular.element(t);n.on("load",function(){a.isDiffLoading=!1,a.$apply()}).on("error",function(){a.isDiffLoading=!0}),n.attr("src",e)}())},!0)}stats.controller("PlayoffsPreviewCtrl",e),e.$inject=["$scope","$anchorScroll","$element","$filter","$location","$rootScope","LeaguePlayerGeneralService","LeagueTeamGeneralService","SplitsService","TeamsService","TrackingDataService"]}(),function(){function e(i,r,e,t,s,n){i.selectedSeries=null,i.isBracketLoading=!0,i.$on("$routeChangeSuccess",function(e,t,n){var a;t&&(a=t?t.params.SeriesID:null,n&&n.params.SeriesID,i.SeriesID=a,i.GameID=t.params.GameID,s.hash("playoff-series-content"),r())}),i.$watch("activeSeries",function(e){e&&(i.isBracketLoading=!1,i.series=e)},!0)}stats.controller("PlayoffsSeriesCtrl",e),e.$inject=["$scope","$anchorScroll","$filter","$interval","$location","$routeParams"]}(),function(){function e(o,r,e,t,s,n,l,a,i,c,u,h,d,f){var p=d.get().map(function(e,t,n){var a=e.city+" "+e.name;return angular.extend({},e,{teamName:a})});p.unshift({teamName:"Select A Team",id:0});var m={title:"Lineups",meta:[{desc:"Traditional Lineups",url:"/stats/lineups/traditional/"},{desc:"Advanced Lineups",url:"/stats/lineups/advanced/"}],teams:p};o.results={links:{left:[{title:"Essential Features",meta:[{desc:"Official League Leaders",url:"/stats/leaders/"},{desc:"Sortable Player Stats",url:"/stats/players/traditional/?sort=PTS&dir=-1"},{desc:"Sortable Team Stats",url:"/stats/teams/traditional/?sort=W_PCT&dir=-1"},{desc:"Enhanced Standings",url:"/stats/standings/"},{desc:"Video Box Scores",url:"/stats/scores/"},{desc:"Player Tracking",url:"/stats/players/shooting-efficiency/"},{desc:"Hustle Leaders",url:"/stats/players/hustle-leaders/"},{desc:"Advanced Player Leaders",url:"/stats/players/advanced-leaders/"},{desc:"Advanced Team Leaders",url:"/stats/teams/advanced-leaders/"},{desc:"All-Time Leaders",url:"/stats/alltime/"},{desc:"Glossary",url:"/stats/help/glossary/"},{desc:"Official Box Scores",url:"/stats/gamebooks/"}]},{title:"Player Tracking",meta:[{desc:"Catch and Shoot",url:"/stats/players/catch-shoot/"},{desc:"Defensive Impact",url:"/stats/players/defensive-impact/"},{desc:"Drives",url:"/stats/players/drives/"},{desc:"Passing",url:"/stats/players/passing/"},{desc:"Touches",url:"/stats/players/touches/"},{desc:"Pull Up Shooting",url:"/stats/players/pullup/"},{desc:"Rebounding",url:"/stats/players/rebounding/"},{desc:"Speed and Distance",url:"/stats/players/speed-distance/"},{desc:"Elbow Touches",url:"/stats/players/elbow-touch/"},{desc:"Post Ups",url:"/stats/players/tracking-post-ups/"},{desc:"Paint Touches",url:"/stats/players/paint-touch/"}]},{title:"Team Tracking",meta:[{desc:"Catch and Shoot",url:"/stats/teams/catch-shoot/"},{desc:"Defensive Impact",url:"/stats/teams/defensive-impact/"},{desc:"Drives",url:"/stats/teams/drives/"},{desc:"Passing",url:"/stats/teams/passing/"},{desc:"Touches",url:"/stats/teams/touches/"},{desc:"Pull Up Shooting",url:"/stats/teams/pullup/"},{desc:"Rebounding",url:"/stats/teams/rebounding/"},{desc:"Speed and Distance",url:"/stats/teams/speed-distance/"},{desc:"Elbow Touches",url:"/stats/teams/elbow-touch/"},{desc:"Post Ups",url:"/stats/teams/tracking-post-ups/"},{desc:"Paint Touches",url:"/stats/teams/paint-touch/"}]},{title:"Team / Player Shooting",meta:[{desc:"Team Shot Locations by Zone",url:"/stats/teams/shooting/?DistanceRange=By%20Zone&PerMode=Totals"},{desc:"Player Shot Locations by Zone",url:"/stats/players/shooting/?DistanceRange=By%20Zone&PerMode=Totals"},{desc:"Pull Up Shooting",url:"/stats/players/shots-general/?GeneralRange=Pullups"},{desc:"Catch and Shoot Shooting",url:"/stats/players/shots-general/?GeneralRange=Catch%20and%20Shoot"},{desc:"Shots by Shotclock",url:"/stats/players/shots-shotclock/"},{desc:"Shots by Dribbles",url:"/stats/players/shots-dribbles/"},{desc:"Shots by Closest Defender",url:"/stats/players/shots-closest-defender/"},{desc:"Opponent Shooting",url:"/stats/teams/opponent-shooting/"}]},{title:"Team Statistics",meta:[{desc:"Sortable Team Stats",url:"/stats/teams/traditional/"},{desc:"Sortable Advanced Stats",url:"/stats/teams/advanced/?sort=W&dir=-1"},{desc:"Sortable Misc Stats",url:"/stats/teams/misc/?sort=W&dir=-1"},{desc:"Sortable Clutch Stats",url:"/stats/teams/clutch-traditional/"}]},{title:"Player Statistics",meta:[{desc:"Sortable Player Stats",url:"/stats/players/traditional/"},{desc:"Sortable Advanced Stats",url:"/stats/players/advanced/?sort=W&dir=-1"},{desc:"Sortable Misc Stats",url:"/stats/players/misc/?sort=W&dir=-1"},{desc:"Sortable Clutch Stats",url:"/stats/players/clutch-traditional/"}]},{title:"Player Defense",meta:[{desc:"Defending Shots Overall",url:"/stats/players/defense-dash-overall/"},{desc:"Defending 3 Pointers",url:"/stats/players/defense-dash-3pt)"},{desc:"Defending 2 Pointers",url:"/stats/players/defense-dash-2pt/"},{desc:"Defending Less than 6 Ft",url:"/stats/players/defense-dash-lt6/"},{desc:"Defending Less than 10 Ft",url:"/stats/players/defense-dash-lt10/"},{desc:"Defending Greater than 15 Ft",url:"/stats/players/defense-dash-gt15/"}]},{title:"Team Defense",meta:[{desc:"Opponent Shooting by Zone",url:"/stats/teams/opponent-shooting/?DistanceRange=By%20Zone"},{desc:"Defending Shots Overall",url:"/stats/teams/defense-dash-overall/"},{desc:"Defending 3 Pointers",url:"/stats/teams/defense-dash-3pt/"},{desc:"Defending 2 Pointers",url:"/stats/teams/defense-dash-2pt/"},{desc:"Defending Less than 6 Ft",url:"/stats/teams/defense-dash-lt6/"},{desc:"Defending Less than 10 Ft",url:"/stats/teams/defense-dash-lt10/"},{desc:"Defending Greater than 15 Ft",url:"/stats/teams/defense-dash-gt15/"}]}],right:[m,{title:"Tools",meta:[{desc:"Impact Tool",url:"/stats/impact/"},{desc:"Player Compare Tool",url:"/stats/vs/"},{desc:"Player Box Score Search",url:"/stats/search/player-game/#?CF=PTS*gt*30"},{desc:"Team Box Score Search",url:"/stats/search/team-game/#?CF=PTS*gt*130"},{desc:"Player Streak Search",url:"/stats/player-streak/#?CF=PTS*gt*30"},{desc:"Team Streak Search",url:"/stats/search/team-streak/#?CF=PTS*gt*120"}]},{title:"Tutorials",meta:[{desc:"Shotcharts",url:"/stats/articles/off-the-charts/"},{desc:"Impact Tool",url:"/stats/articles/measuring-impact/"}]}]},teams:p},o.handleTeamLineUp=function(e){var t="/stats/team/"+e.id+"/lineups-traditional/";window.location=t},o.handleTeamOnOffCourt=function(e){var t="/stats/team/"+e.id+"/onoffcourt-summary/";window.location=t},o.selectedFranchiseLeaders=p[0],o.handleSelectFranchiseLeaders=function(e){var t="/stats/team/"+e.id+"/franchise-leaders/";window.location=t};var g=h.findBy("rs",!0).slice(0),v=h.findBy("rs",!1).slice(0),y=d.get().map(function(e){return angular.extend({},e,{type:"tm"})});o.search="",o.searchResults=[],o.recentSearches=f.get(),o.maxResults=7,o.showSearch=!1,o.showResults=!1,o.hasResults=!1,o.activeIndex=-1,o.totalResults=0,o.toggleSearch=function(){if(o.showSearch=!o.showSearch,o.showResults=!1,o.showSearchChart=!1,o.showResultsChart=!1,o.showRecentChart=!1,!o.showSearch)return;o.search="",o.showRecent=!0,o.searchResults=f.get(),o.showResults=!0,s(function(){r.find(".cheatsheet-search__input.player-input").focus()},0)},o.onKeyDown=function(e){{var t,n,a,i;"38"==(e=e||window.event).keyCode?(o.activeIndex=Math.max(0,o.activeIndex-1),e.preventDefault()):"40"==e.keyCode?(o.activeIndex=Math.min(o.maxResults-1,Math.min(o.searchResults.length,o.activeIndex+1)),e.preventDefault()):"13"==e.keyCode&&(t=o.searchResults[o.activeIndex],n=r.find(".cheatsheet-search__item:eq("+o.activeIndex+") a"),o.recentSearches=f.add(t),a={focus:"search-bar",content:[t]},"undefined"!=typeof _nba&&_nba.analytics.click(a),i=n.attr("href"),document.location=i,o.search="",o.showSearch=!1,o.showResults=!1)}},o.onChange=function(e){(function(e){if(e.length<3)return;o.showRecent=!1;var t,n=e.toLowerCase().split(" ").filter(function(e){return!!e.length}),a=g.slice(0),i=v.slice(0),r=y.slice(0);for(t in n){var s=n[t];a=a.filter(b.bind("",s)),i=i.filter(b.bind("",s)),r=l("filter")(r,s,!1)}o.searchResults=[].concat(r).concat(a).concat(i),o.hasResults=!!o.searchResults.length,o.showResults=!0})(o.search),o.activeIndex=-1},o.onItemClick=function(e,t,n){e.preventDefault(),e.stopPropagation(),o.recentSearches=f.add(t);var a={focus:"search-bar",content:[t]};"undefined"!=typeof _nba&&_nba.analytics.click(a);var i=angular.element(e.target).attr("href");document.location=i,s(function(){o.showSearch=!1,o.showResults=!1},0)},o.onItemHover=function(e,t,n){o.activeIndex=n},o.onBlur=function(e){s(function(){o.showSearch=!1,o.showResults=!1},100)};var _=r.data("season-section");function b(e,t){var n="toLowerCase";return-1<t.fn[n]().indexOf(e)||-1<t.ln[n]().indexOf(e)}o.searchYear=i.get(_).Season,o.recentSearches.length,n.on("click",function(e){var t;o.showSearch&&(t=e.target,$.contains(r.get(0),t)||(o.showSearch=!1,o.showResults=!1,o.$apply()))}),o.searchChart="",o.searchResultsChart=[],o.recentSearchesChart=f.get(),o.maxResultsChart=7,o.showSearchChart=!1,o.showResultsChart=!1,o.hasResultsChart=!1,o.activeIndexChart=-1,o.totalResultsChart=0,o.toggleSearchChart=function(){if(o.showSearchChart=!o.showSearchChart,o.showResultsChart=!1,o.showSearch=!1,o.showResults=!1,o.showRecent=!1,!o.showSearchChart)return;o.searchChart="",o.showRecentChart=!0,o.searchResultsChart=f.get(),o.showResultsChart=!0,s(function(){r.find(".cheatsheet-search__input-chart").focus()},0)},o.onKeyDownChart=function(e){{var t,n,a,i;"38"==(e=e||window.event).keyCode?(o.activeIndexChart=Math.max(0,o.activeIndexChart-1),e.preventDefault()):"40"==e.keyCode?(o.activeIndexChart=Math.min(o.maxResultsChart-1,Math.min(o.searchResultsChart.length,o.activeIndexChart+1)),e.preventDefault()):"13"==e.keyCode&&(t=o.searchResultsChart[o.activeIndexChart],n=r.find(".cheatsheet-search__item-chart:eq("+o.activeIndexChart+") a"),o.recentSearchesChart=f.add(t),a={focus:"search-bar",content:[t]},"undefined"!=typeof _nba&&_nba.analytics.click(a),i=n.attr("href"),document.location=i,o.searchChart="",o.showSearchChart=!1,o.showResultsChart=!1)}},o.onChangeChart=function(e){(function(e){if(e.length<3)return;o.showRecentChart=!1;var t,n=e.toLowerCase().split(" ").filter(function(e){return!!e.length}),a=g.slice(0),i=v.slice(0),r=y.slice(0);for(t in n){var s=n[t];a=a.filter(T.bind("",s)),i=i.filter(b.bind("",s)),r=l("filter")(r,s,!1)}o.searchResultsChart=[].concat(r).concat(a).concat(i),o.hasResultsChart=!!o.searchResultsChart.length,o.showResultsChart=!0})(o.searchChart),o.activeIndexChart=-1},o.onItemClickChart=function(e,t,n){e.preventDefault(),e.stopPropagation(),o.recentSearchesChart=f.add(t);var a={focus:"search-bar",content:[t]};"undefined"!=typeof _nba&&_nba.analytics.click(a);var i=angular.element(e.target).attr("href");document.location=i,s(function(){o.showSearchChart=!1,o.showResultsChart=!1},0)},o.onItemHoverChart=function(e,t,n){o.activeIndexChart=n},o.onBlurChart=function(e){s(function(){o.showSearchChart=!1,o.showResultsChart=!1},100)};var S=r.data("season-section");function T(e,t){var n="toLowerCase";return-1<t.fn[n]().indexOf(e)||-1<t.ln[n]().indexOf(e)}o.searchYearChart=i.get(S).Season,o.recentSearchesChart.length,n.on("click",function(e){var t;o.showSearchChart&&(t=e.target,$.contains(r.get(0),t)||(o.showSearchChart=!1,o.showResultsChart=!1,o.$apply()))})}stats.controller("QuickLinksController",e),e.$inject=["$scope","$element","$location","$interval","$timeout","$document","$filter","LeagueGamelogsService","SeasonsService","SplitsService","StatsWidgetService","PlayersService","TeamsService","RecentSearchesService"]}(),function(){function e(o,r,e,t,s,n,l,a,i,c,u,h,d,f){var p=d.get().map(function(e,t,n){var a=e.city+" "+e.name;return angular.extend({},e,{teamName:a})});p.unshift({teamName:"Select A Team",id:0});var m={title:"Lineups",meta:[{desc:"Traditional Lineups",url:"/stats/lineups/traditional/"},{desc:"Advanced Lineups",url:"/stats/lineups/advanced/"}],teams:p};o.results={links:{left:[{title:"Featured",meta:[{header:"ESSENTIALS",links:[{desc:"Player Sortable Stats",url:"/stats/players/traditional/?sort=PTS&dir=-1"},{desc:"Team Sortable Stats",url:"/stats/teams/traditional/?sort=PTS&dir=-1"},{desc:"Official Box Scores",url:"/stats/gamebooks/"},{desc:"Glossary",url:"/stats/help/glossary/"}]},{header:"LEADERS",links:[{desc:"All-Time Leaders",url:"/stats/alltime/"},{desc:"Official Leaders",url:"/stats/leaders/"},{desc:"Advanced Player Leaders",url:"/stats/players/advanced/?sort=W&dir=-1"},{desc:"Advanced Team Leaders",url:"/stats/teams/advanced/?sort=W&dir=-1"},{desc:"Hustle Leaders",url:"/stats/players/hustle-leaders/"}]},{header:"INTERACTIVE TOOLS",links:[{desc:"Impact Tool (Tutorial)",url:"/stats/articles/measuring-impact/"},{desc:"Player Compare Tool",url:"/stats/vs/"},{desc:"Player Box Score Search",url:"/stats/search/player-game/#?CF=PTS*gt*30"},{desc:"Player Streak Search",url:"/stats/player-streak/#?CF=PTS*gt*30"},{desc:"Team Box Score Search",url:"/stats/search/team-game/#?CF=PTS*gt*130"},{desc:"Team Streak Search",url:"/stats/search/team-streak/#?CF=PTS*gt*120"}]}]},{title:"Players",meta:[{header:"TRACKING",links:[{desc:"Sortable Advanced Stats",url:"/stats/players/advanced/"},{desc:"Sortable Misc. Stats",url:"/stats/players/misc/?sort=W&dir=-1"},{desc:"Clutch Stats",url:"/stats/players/clutch-traditional/?sort=W_PCT&dir=-1"},{desc:"Drives",url:"/stats/players/drives/"},{desc:"Passing",url:"/stats/players/passing/"},{desc:"Touches",url:"/stats/players/touches/"},{desc:"Rebounding",url:"/stats/players/rebounding/"},{desc:"Speed and Distance",url:"/stats/players/speed-distance/"},{desc:"Elbow Touches",url:"/stats/players/elbow-touch/"},{desc:"Post Ups",url:"/stats/players/tracking-post-ups/"},{desc:"Paint Touches",url:"/stats/players/paint-touch/"}]},{header:"SHOOTING",links:[{desc:"Shooting Efficiency",url:"/stats/players/shooting/"},{desc:"Catch and Shoot",url:"/stats/players/catch-shoot/"},{desc:"Pull Up Shooting",url:"/stats/players/pullup/"},{desc:"Shot Locations by Zone",url:"/stats/players/shooting/?DistanceRange=By%20Zone&PerMode=Totals"},{desc:"Shots by Shotclock",url:"/stats/players/shots-shotclock/"},{desc:"Shots by Dribbles",url:"/stats/players/shots-dribbles/"},{desc:"Shots by Closest Defender",url:"/stats/players/shots-closest-defender/"},{desc:"Opponent Shooting",url:"/stats/teams/opponent-shooting/"}]},{header:"DEFENSE",links:[{desc:"Opponent Shooting by Zone",url:"/stats/players/opponent-shooting/?DistanceRange=By%20Zone"},{desc:"Defensive Impact",url:"/stats/players/defensive-impact/"},{desc:"Defending Shots Overall",url:"/stats/players/defense-dash-overall/"},{desc:"Defending 3 Pointers",url:"/stats/players/defense-dash-3pt)"},{desc:"Defending 2 Pointers",url:"/stats/players/defense-dash-2pt/"},{desc:"Defending Less than 6 Ft",url:"/stats/players/defense-dash-lt6/"},{desc:"Defending Less than 10 Ft",url:"/stats/players/defense-dash-lt10/"},{desc:"Defending Greater than 15 Ft",url:"/stats/players/defense-dash-gt15/"}]}]},{title:"Teams",meta:[{header:"TRACKING",links:[{desc:"Sortable Advanced Stats",url:"/stats/teams/advanced/"},{desc:"Sortable Misc. Stats",url:"/stats/teams/misc/?sort=W&dir=-1"},{desc:"Clutch Stats",url:"/stats/teams/clutch-traditional/?sort=W_PCT&dir=-1"},{desc:"Drives",url:"/stats/teams/drives/"},{desc:"Passing",url:"/stats/teams/passing/"},{desc:"Touches",url:"/stats/teams/touches/"},{desc:"Rebounding",url:"/stats/teams/rebounding/"},{desc:"Speed and Distance",url:"/stats/teams/speed-distance/"},{desc:"Elbow Touches",url:"/stats/teams/elbow-touch/"},{desc:"Post Ups",url:"/stats/teams/tracking-post-ups/"},{desc:"Paint Touches",url:"/stats/teams/paint-touch/"}]},{header:"SHOOTING",links:[{desc:"Shooting Efficiency",url:"/stats/teams/shooting/"},{desc:"Catch and Shoot",url:"/stats/teams/catch-shoot/"},{desc:"Pull Up Shooting",url:"/stats/teams/pullup/"},{desc:"Shot Locations by Zone",url:"/stats/teams/shooting/?DistanceRange=By%20Zone&PerMode=Totals"},{desc:"Shots by Shotclock",url:"/stats/teams/shots-shotclock/"},{desc:"Shots by Dribbles",url:"/stats/teams/shots-dribbles/"},{desc:"Shots by Closest Defender",url:"/stats/teams/shots-closest-defender/"},{desc:"Opponent Shooting",url:"/stats/teams/opponent-shooting/"}]},{header:"DEFENSE",links:[{desc:"Opponent Shooting by Zone",url:"/stats/teams/opponent-shooting/?DistanceRange=By%20Zone"},{desc:"Defensive Impact",url:"/stats/teams/defensive-impact/"},{desc:"Defending Shots Overall",url:"/stats/teams/defense-dash-overall/"},{desc:"Defending 3 Pointers",url:"/stats/teams/defense-dash-3pt)"},{desc:"Defending 2 Pointers",url:"/stats/teams/defense-dash-2pt/"},{desc:"Defending Less than 6 Ft",url:"/stats/teams/defense-dash-lt6/"},{desc:"Defending Less than 10 Ft",url:"/stats/teams/defense-dash-lt10/"},{desc:"Defending Greater than 15 Ft",url:"/stats/teams/defense-dash-gt15/"}]}]}],right:[m]},teams:p},o.handleTeamLineUp=function(e){var t="/stats/team/"+e.id+"/lineups-traditional/";window.location=t},o.handleTeamOnOffCourt=function(e){var t="/stats/team/"+e.id+"/onoffcourt-summary/";window.location=t},o.selectedFranchiseLeaders=p[0],o.handleSelectFranchiseLeaders=function(e){var t="/stats/team/"+e.id+"/franchise-leaders/";window.location=t};var g=h.findBy("rs",!0).slice(0),v=h.findBy("rs",!1).slice(0),y=d.get().map(function(e){return angular.extend({},e,{type:"tm"})});o.search="",o.searchResults=[],o.recentSearches=f.get(),o.maxResults=7,o.showSearch=!1,o.showResults=!1,o.hasResults=!1,o.activeIndex=-1,o.totalResults=0,o.toggleSearch=function(){if(o.showSearch=!o.showSearch,o.showResults=!1,o.showSearchChart=!1,o.showResultsChart=!1,o.showRecentChart=!1,!o.showSearch)return;o.search="",o.showRecent=!0,o.searchResults=f.get(),o.showResults=!0,s(function(){r.find(".cheatsheet-search__input.player-input").focus()},0)},o.onKeyDown=function(e){{var t,n,a,i;"38"==(e=e||window.event).keyCode?(o.activeIndex=Math.max(0,o.activeIndex-1),e.preventDefault()):"40"==e.keyCode?(o.activeIndex=Math.min(o.maxResults-1,Math.min(o.searchResults.length,o.activeIndex+1)),e.preventDefault()):"13"==e.keyCode&&(t=o.searchResults[o.activeIndex],n=r.find(".cheatsheet-search__item:eq("+o.activeIndex+") a"),o.recentSearches=f.add(t),a={focus:"search-bar",content:[t]},"undefined"!=typeof _nba&&_nba.analytics.click(a),i=n.attr("href"),document.location=i,o.search="",o.showSearch=!1,o.showResults=!1)}},o.onChange=function(e){(function(e){if(e.length<3)return;o.showRecent=!1;var t,n=e.toLowerCase().split(" ").filter(function(e){return!!e.length}),a=g.slice(0),i=v.slice(0),r=y.slice(0);for(t in n){var s=n[t];a=a.filter(b.bind("",s)),i=i.filter(b.bind("",s)),r=l("filter")(r,s,!1)}o.searchResults=[].concat(r).concat(a).concat(i),o.hasResults=!!o.searchResults.length,o.showResults=!0})(o.search),o.activeIndex=-1},o.onItemClick=function(e,t,n){e.preventDefault(),e.stopPropagation(),o.recentSearches=f.add(t);var a={focus:"search-bar",content:[t]};"undefined"!=typeof _nba&&_nba.analytics.click(a);var i=angular.element(e.target).attr("href");document.location=i,s(function(){o.showSearch=!1,o.showResults=!1},0)},o.onItemHover=function(e,t,n){o.activeIndex=n},o.onBlur=function(e){s(function(){o.showSearch=!1,o.showResults=!1},100)};var _=r.data("season-section");function b(e,t){var n="toLowerCase";return-1<t.fn[n]().indexOf(e)||-1<t.ln[n]().indexOf(e)}o.searchYear=i.get(_).Season,o.recentSearches.length,n.on("click",function(e){var t;o.showSearch&&(t=e.target,$.contains(r.get(0),t)||(o.showSearch=!1,o.showResults=!1,o.$apply()))}),o.searchChart="",o.searchResultsChart=[],o.recentSearchesChart=f.get(),o.maxResultsChart=7,o.showSearchChart=!1,o.showResultsChart=!1,o.hasResultsChart=!1,o.activeIndexChart=-1,o.totalResultsChart=0,o.toggleSearchChart=function(){if(o.showSearchChart=!o.showSearchChart,o.showResultsChart=!1,o.showSearch=!1,o.showResults=!1,o.showRecent=!1,!o.showSearchChart)return;o.searchChart="",o.showRecentChart=!0,o.searchResultsChart=f.get(),o.showResultsChart=!0,s(function(){r.find(".cheatsheet-search__input-chart").focus()},0)},o.onKeyDownChart=function(e){{var t,n,a,i;"38"==(e=e||window.event).keyCode?(o.activeIndexChart=Math.max(0,o.activeIndexChart-1),e.preventDefault()):"40"==e.keyCode?(o.activeIndexChart=Math.min(o.maxResultsChart-1,Math.min(o.searchResultsChart.length,o.activeIndexChart+1)),e.preventDefault()):"13"==e.keyCode&&(t=o.searchResultsChart[o.activeIndexChart],n=r.find(".cheatsheet-search__item-chart:eq("+o.activeIndexChart+") a"),o.recentSearchesChart=f.add(t),a={focus:"search-bar",content:[t]},"undefined"!=typeof _nba&&_nba.analytics.click(a),i=n.attr("href"),document.location=i,o.searchChart="",o.showSearchChart=!1,o.showResultsChart=!1)}},o.onChangeChart=function(e){(function(e){if(e.length<3)return;o.showRecentChart=!1;var t,n=e.toLowerCase().split(" ").filter(function(e){return!!e.length}),a=g.slice(0),i=v.slice(0),r=y.slice(0);for(t in n){var s=n[t];a=a.filter(T.bind("",s)),i=i.filter(b.bind("",s)),r=l("filter")(r,s,!1)}o.searchResultsChart=[].concat(r).concat(a).concat(i),o.hasResultsChart=!!o.searchResultsChart.length,o.showResultsChart=!0})(o.searchChart),o.activeIndexChart=-1},o.onItemClickChart=function(e,t,n){e.preventDefault(),e.stopPropagation(),o.recentSearchesChart=f.add(t);var a={focus:"search-bar",content:[t]};"undefined"!=typeof _nba&&_nba.analytics.click(a);var i=angular.element(e.target).attr("href");document.location=i,s(function(){o.showSearchChart=!1,o.showResultsChart=!1},0)},o.onItemHoverChart=function(e,t,n){o.activeIndexChart=n},o.onBlurChart=function(e){s(function(){o.showSearchChart=!1,o.showResultsChart=!1},100)};var S=r.data("season-section");function T(e,t){var n="toLowerCase";return-1<t.fn[n]().indexOf(e)||-1<t.ln[n]().indexOf(e)}o.searchYearChart=i.get(S).Season,o.recentSearchesChart.length,n.on("click",function(e){var t;o.showSearchChart&&(t=e.target,$.contains(r.get(0),t)||(o.showSearchChart=!1,o.showResultsChart=!1,o.$apply()))})}stats.controller("QuickLinksNextController",e),e.$inject=["$scope","$element","$location","$interval","$timeout","$document","$filter","LeagueGamelogsService","SeasonsService","SplitsService","StatsWidgetService","PlayersService","TeamsService","RecentSearchesService"]}(),function(){function e(o,r,e,t,s,n,l,a,i,c,u,h,d,f){var p=d.get().map(function(e,t,n){var a=e.city+" "+e.name;return angular.extend({},e,{teamName:a})});p.unshift({teamName:"Select A Team",id:0});o.results={links:{left:[{title:"Essential Features",meta:[{desc:"Sortable Player Stats",url:"/stats/players/traditional/?sort=W&dir=-1"},{desc:"Sortable Advanced Stats",url:"/stats/players/advanced/?sort=W&dir=-1"}]},{title:"Tracking",meta:[{desc:"Drives",url:"/stats/players/drives/"},{desc:"Passing",url:"/stats/players/passing/"},{desc:"Rebounding",url:"/stats/players/rebounding/"}]},{title:"Shooting",meta:[{desc:"Player Shooting Efficiency",url:"/stats/players/shooting-efficiency/"},{desc:"Catch and Shoot",url:"/stats/players/catch-shoot/"},{desc:"Pull Up Shooting",url:"/stats/players/pullup/"},{desc:"Shot Locations by Zone",url:"/stats/players/shooting/?Season=2018-19&SeasonType=Regular%20Season&DistanceRange=By%20Zone&PerMode=Totals"}]},{title:"Defense",meta:[{desc:"Defending Shots Overall",url:"/stats/players/defense-dash-overall/"},{desc:"Defending 3 Pointers",url:"/stats/players/defense-dash-3pt)"},{desc:"Defending 2 Pointers",url:"/stats/players/defense-dash-2pt/"}]}]},teams:p},o.handleTeamLineUp=function(e){var t="/stats/team/"+e.id+"/stats/lineups-traditional/";window.location=t},o.handleTeamOnOffCourt=function(e){var t="/stats/team/"+e.id+"/stats/onoffcourt-summary/";window.location=t},o.selectedFranchiseLeaders=p[0],o.handleSelectFranchiseLeaders=function(e){var t="/stats/team/"+e.id+"/stats/franchise-leaders/";window.location=t};var m=h.findBy("rs",!0).slice(0),g=h.findBy("rs",!1).slice(0),v=d.get().map(function(e){return angular.extend({},e,{type:"tm"})});o.search="",o.searchResults=[],o.recentSearches=f.get(),o.maxResults=7,o.showSearch=!1,o.showResults=!1,o.hasResults=!1,o.activeIndex=-1,o.totalResults=0,o.toggleSearch=function(){if(o.showSearch=!o.showSearch,o.showResults=!1,o.showSearchChart=!1,o.showResultsChart=!1,o.showRecentChart=!1,!o.showSearch)return;o.search="",o.showRecent=!0,o.searchResults=f.get(),o.showResults=!0,s(function(){r.find(".cheatsheet-search__input.player-input").focus()},0)},o.onKeyDown=function(e){{var t,n,a,i;"38"==(e=e||window.event).keyCode?(o.activeIndex=Math.max(0,o.activeIndex-1),e.preventDefault()):"40"==e.keyCode?(o.activeIndex=Math.min(o.maxResults-1,Math.min(o.searchResults.length,o.activeIndex+1)),e.preventDefault()):"13"==e.keyCode&&(t=o.searchResults[o.activeIndex],n=r.find(".cheatsheet-search__item:eq("+o.activeIndex+") a"),o.recentSearches=f.add(t),a={focus:"search-bar",content:[t]},"undefined"!=typeof _nba&&_nba.analytics.click(a),i=n.attr("href"),document.location=i,o.search="",o.showSearch=!1,o.showResults=!1)}},o.onChange=function(e){(function(e){if(e.length<3)return;o.showRecent=!1;var t,n=e.toLowerCase().split(" ").filter(function(e){return!!e.length}),a=m.slice(0),i=g.slice(0),r=v.slice(0);for(t in n){var s=n[t];a=a.filter(_.bind("",s)),i=i.filter(_.bind("",s)),r=l("filter")(r,s,!1)}o.searchResults=[].concat(r).concat(a).concat(i),o.hasResults=!!o.searchResults.length,o.showResults=!0})(o.search),o.activeIndex=-1},o.onItemClick=function(e,t,n){e.preventDefault(),e.stopPropagation(),o.recentSearches=f.add(t);var a={focus:"search-bar",content:[t]};"undefined"!=typeof _nba&&_nba.analytics.click(a);var i=angular.element(e.target).attr("href");document.location=i,s(function(){o.showSearch=!1,o.showResults=!1},0)},o.onItemHover=function(e,t,n){o.activeIndex=n},o.onBlur=function(e){s(function(){o.showSearch=!1,o.showResults=!1},100)};var y=r.data("season-section");function _(e,t){var n="toLowerCase";return-1<t.fn[n]().indexOf(e)||-1<t.ln[n]().indexOf(e)}o.searchYear=i.get(y).Season,o.recentSearches.length,n.on("click",function(e){var t;o.showSearch&&(t=e.target,$.contains(r.get(0),t)||(o.showSearch=!1,o.showResults=!1,o.$apply()))}),o.searchChart="",o.searchResultsChart=[],o.recentSearchesChart=f.get(),o.maxResultsChart=7,o.showSearchChart=!1,o.showResultsChart=!1,o.hasResultsChart=!1,o.activeIndexChart=-1,o.totalResultsChart=0,o.toggleSearchChart=function(){if(o.showSearchChart=!o.showSearchChart,o.showResultsChart=!1,o.showSearch=!1,o.showResults=!1,o.showRecent=!1,!o.showSearchChart)return;o.searchChart="",o.showRecentChart=!0,o.searchResultsChart=f.get(),o.showResultsChart=!0,s(function(){r.find(".cheatsheet-search__input-chart").focus()},0)},o.onKeyDownChart=function(e){{var t,n,a,i;"38"==(e=e||window.event).keyCode?(o.activeIndexChart=Math.max(0,o.activeIndexChart-1),e.preventDefault()):"40"==e.keyCode?(o.activeIndexChart=Math.min(o.maxResultsChart-1,Math.min(o.searchResultsChart.length,o.activeIndexChart+1)),e.preventDefault()):"13"==e.keyCode&&(t=o.searchResultsChart[o.activeIndexChart],n=r.find(".cheatsheet-search__item-chart:eq("+o.activeIndexChart+") a"),o.recentSearchesChart=f.add(t),a={focus:"search-bar",content:[t]},"undefined"!=typeof _nba&&_nba.analytics.click(a),i=n.attr("href"),document.location=i,o.searchChart="",o.showSearchChart=!1,o.showResultsChart=!1)}},o.onChangeChart=function(e){(function(e){if(e.length<3)return;o.showRecentChart=!1;var t,n=e.toLowerCase().split(" ").filter(function(e){return!!e.length}),a=m.slice(0),i=g.slice(0),r=v.slice(0);for(t in n){var s=n[t];a=a.filter(S.bind("",s)),i=i.filter(_.bind("",s)),r=l("filter")(r,s,!1)}o.searchResultsChart=[].concat(r).concat(a).concat(i),o.hasResultsChart=!!o.searchResultsChart.length,o.showResultsChart=!0})(o.searchChart),o.activeIndexChart=-1},o.onItemClickChart=function(e,t,n){e.preventDefault(),e.stopPropagation(),o.recentSearchesChart=f.add(t);var a={focus:"search-bar",content:[t]};"undefined"!=typeof _nba&&_nba.analytics.click(a);var i=angular.element(e.target).attr("href");document.location=i,s(function(){o.showSearchChart=!1,o.showResultsChart=!1},0)},o.onItemHoverChart=function(e,t,n){o.activeIndexChart=n},o.onBlurChart=function(e){s(function(){o.showSearchChart=!1,o.showResultsChart=!1},100)};var b=r.data("season-section");function S(e,t){var n="toLowerCase";return-1<t.fn[n]().indexOf(e)||-1<t.ln[n]().indexOf(e)}o.searchYearChart=i.get(b).Season,o.recentSearchesChart.length,n.on("click",function(e){var t;o.showSearchChart&&(t=e.target,$.contains(r.get(0),t)||(o.showSearchChart=!1,o.showResultsChart=!1,o.$apply()))})}stats.controller("QuickLinksPlayersNextController",e),e.$inject=["$scope","$element","$location","$interval","$timeout","$document","$filter","LeagueGamelogsService","SeasonsService","SplitsService","StatsWidgetService","PlayersService","TeamsService","RecentSearchesService"]}(),function(){function e(t,e,n,a,i,r,s){t.showSafety=!1,t.renderHtml=function(e){return r.trustAsHtml(e)};t.teams={east:["BOS","BKN","IND","MIA","MIL","ORL","PHI","TOR","WAS"].map(n.getByAbbr),west:["DAL","DEN","HOU","LAC","LAL","MEM","NOP","OKC","PHX","POR","SAC","SAS","UTA"].map(n.getByAbbr)};t.hubElementClicked=function(e,t){s.triggerEvent("rtpHub",[t,e])},i.get("hub/hub").then(function(e){t.isLoading=!0,t.feedData=angular.extend({},JSON.parse(e.body)),t.filterTitle=function(e){return{head:e.split(" ").slice(0,-1).join(" "),tail:e.split(" ").slice(-1).join(" ")}},t.isLoading=!1})}stats.controller("ReturnToPlay2020Controller",e),e.$inject=["$scope","$http","TeamsService","SplitsService","StatsFlatDataService","$sce","DtmService"]}(),function(){function e(l,i,r,s,t,n,o,a,e,c,u,h,d,f,p,m,g,v){l.decodeHtml=function(e){var t=document.createElement("textarea");return t.innerHTML=e,n.trustAsHtml(t.value)};var y=h.get("schedule"),_=y.Flags,b=""+(d.gameDate.getMonth()+1+3)%12,S=0;!1!==_.initialMonth&&(b=""+_.initialMonth);var T,w=f.get(["TeamID",{name:"Month",default:0,initial:b},{name:"Week",default:"0",initial:"0",type:"select",label:"Week",options:((T=r("range")(1,24).map(function(e){return{val:""+e,text:"Week "+e}})).unshift({val:"0",text:"All Weeks"}),T)},{name:"BC",default:"",initial:"",type:"select",label:"National Broadcaster",options:[{val:"",text:"All Games"},{val:"NATL",text:"National Broadcasters"},{val:"ESPN",text:"ESPN"},{val:"ABC",text:"ABC"},{val:"TNT",text:"TNT"},{val:"NBA TV",text:"NBA TV"},{val:"LP",text:"LEAGUE PASS"}]},{name:"PD",default:"Y",initial:_.hidePrev,type:"toggle",label:"Hide Previous Dates",val:{true:"Y",false:"N"}}]);l.splits=w.splits,l.params=w.params,l.isExternal=d.isExternal,l.isDomestic=d.isDomestic,l.seeMore=function(){l.itemsPerPage=l.itemsPerPage+10,l.noMoreData=l.itemsPerPage>=l.numGames},l.noMoreData=!1,l.isSpecial=function(e){var t=p.getById(e);return!t||t.special},l.getWeekInfo=function(t){var e={isNewWeek:t!=S,hasWeek:!1};if(S=t,!e.isNewWeek||!l.weeks)return e;var n=l.weeks.find(function(e){return e.week==t});return e.hasWeek=!!n,e=angular.merge(e,n)},l.hasEsi=!(!window.esi_||"US"!==window.esi_.country),l.round=function(e){return Math.round(10*e)/10},l.pointsBetLink="https://join.pointsbet.com/nba-win-probability/?utm_source=Unbounce_NBA&utm_medium=NBA&utm_campaign=Risk_Free_2_200_NBA_Win_Probability&utm_term=Unbounce&utm_content=NBA&promo=NBAWIN",l.setPrevMonth=function(e){--e<1&&(e=12);l.params.Month=e,t.search("Month",e),A(),I(),l.splits.Month=f.get([{name:"Month",default:e,initial:e}]).splits.Month},l.setNextMonth=function(e){12<(e=+e+1)&&(e=1);l.params.Month=e,t.search("Month",e),A(),I(),l.splits.Month=f.get([{name:"Month",default:e,initial:e}]).splits.Month};var P=h.get().SeasonYear;l.isAbove2018=2018<+P;d.gameDate.getMonth(),d.gameDate.getFullYear();function x(e){e.v.info=p.getById(e.v.tid)||{},e.h.info=p.getById(e.h.tid)||{},e.v.isSpecial=e.v.info.special||e.v.isSpecial||!e.v.info.id,e.h.isSpecial=e.h.info.special||e.h.isSpecial||!e.h.info.id,e.gameObj=r("gameIdToObject")(e.gid);var t=e.bd.b.find(function(e){return"natl"===e.scope}),n=e.bd.b.filter(function(e){return"natl"!==e.scope});e.natl=t?t.disp:"",e.localbd=n}function C(t){var e;!l.games||(e=l.games.find(function(e){return e.gid==t.gid}))&&angular.extend(e,t)}function D(){var t,e,n,a,i;l.games&&(e=l.games.slice(0),"0"!==l.params.Month&&"0"===l.params.Week&&(t=(+l.params.Month+9)%12||12,e=e.filter(function(e){return e.gmonth===t})),"0"!==l.params.Week&&(n=+l.params.Week,e=e.filter(function(e){return e.gweek===+n})),"0"!==l.params.TeamID&&(a=+l.params.TeamID,e=e.filter(function(e){return e.v.tid===a||e.h.tid===a})),""!==l.params.BC&&"LP"!==l.params.BC&&"NATL"!==l.params.BC&&(e=e.filter(function(e){return e.natl===l.params.BC})),"LP"===l.params.BC&&(e=e.filter(function(e){return""===e.natl})),"NATL"===l.params.BC&&(e=e.filter(function(e){return""!==e.natl})),i=d.gameDate,"Y"===l.params.PD&&(e=e.filter(function(e){var t=new Date(e.gdte+"T00:00:00Z");return t.setUTCHours(5),i.setUTCHours(5),t.getTime()>=i.getTime()})),l.numGames=e.length,l.noMoreData=l.itemsPerPage>=l.numGames,l.gamesByDay=r("groupBy")(e,"gdte",{asArray:!0}),l.gamesByDay.forEach(E),l.noData=0===l.gamesByDay.length)}function E(e){e.items&&e.items.length?e.week=e.items[0].gweek||null:e.week=null}function A(){l.isLoading=!0,c.get(y.SeasonYear).then(function(e){var t,n,a;l.isLoading=!1,e.games.forEach(x),l.games=e.games,l.weeks=e.weeks||window.nbaWeeks.filter(function(e){return+e.season==+y.SeasonYear}),(n=window.nbaSchedule||[]).forEach(x),n&&(t=n.reduce(function(e,t){return l.games.find(function(e){return e.gcode===t.gcode||e.gid===t.gid})||e.push(t),e},[]),l.games=l.games.concat(t)),D(),a=r("date")(d.gameDate,"yyyy-MM-dd"),o(function(){var e=i.find('[data-game-day="'+a+'"]');e&&e.length&&$("html, body").animate({scrollTop:e.offset().top-80},250)},0),k(),s(k,1e4)}).catch(function(e){l.isLoading=!1,l.noData=!0}),u.get(y.SeasonYear).then(function(e){l.tickets=e})}function k(){m.get().then(function(e){e.data.gs.g.forEach(C)})}function I(){l.isLoading=!0;v.get("notices/schedule_notices").then(function(e){l.feedData=angular.extend({},JSON.parse(e.body)),l.filterTitle=function(e){return{head:e.split(" ").slice(0,-1).join(" "),tail:e.split(" ").slice(-1).join(" ")}},l.isLoading=!1})}l.itemsPerPage=40,l.$on("runit",function(e){D()}),A(),I(),l.$watch("gamesByDay",function(e,t){e&&function(){l.isLoading=!0;var e=new Date,t=e.getFullYear(),n=9<(n=e.getMonth())?n+1:("0"+(n+1)).slice(-2),a=e.getDate(),i=9<a?a:("0"+a).slice(-2),r="".concat(t,"-").concat(n,"-").concat(i),s="".concat(t).concat(n).concat(i);l.gameDate=r;var o={seasonYear:h.get().SeasonYear,gameDate:s};l.pointsBetGames={},l.todaysGames=e.getMonth()!==l.splits.Month.selected.val?[]:l.gamesByDay.filter(function(e){return e.group===r})[0].items,l.todaysGames.map(function(e){return l.pointsBetGames[e.gid]=e}),g.get(o).then(function(e){l.isLoading=!1,e&&(l.pointsBetGames=e,l.gamesByDay.forEach(function(e){e.group===l.gameDate&&(l.todaysGames=e.items,l.todaysGames.forEach(function(e){e=angular.extend(e,{pointsBetGames:l.pointsBetGames[e.gid]})}))}))})}()}),l.scheduleNoticeLinkClicked=function(e){a.triggerEvent("scheduleRtp",[e])}}stats.controller("ScheduleController",e),e.$inject=["$scope","$element","$filter","$interval","$location","$sce","$timeout","DtmService","MobileSeasonScheduleWeekService","MobileSeasonScheduleWeekTBDService","MobileTicketLinksService","SeasonsService","ReferrerService","SplitsService","TeamsService","TodaysScoresService","StatsPointsBetService","StatsFlatDataService"]}(),function(){function e(a,e,i,r,t,s,n,o,l,c,u,h,d){var f,p=e.data("season-section"),m=l.get(p),g=m.SeasonYear,v=m.Flags,y=[{val:"13",text:"Sacramento"},{val:"15",text:"Vegas"},{val:"16",text:"Utah"}],_=u.get([{name:"PD",default:"N",initial:v.hidePrev||"N",type:"toggle",label:"Hide Previous Dates",val:{true:"Y",false:"N"}},{name:"League",default:"",initial:"",type:"select",label:"League",options:[{val:"",text:"All Leagues"}].concat(y)}]);function b(e){e.v.info=h.getById(e.v.tid)||{},e.h.info=h.getById(e.h.tid)||{},e.v.isSpecial=e.v.info.special||e.v.isSpecial,e.h.isSpecial=e.h.info.special||e.v.isSpecial,e.gameObj=i("gameIdToObject")(e.gid);var t=e.bd.b.find(function(e){return"natl"===e.scope}),n=e.bd.b.filter(function(e){return"natl"!==e.scope});e.natl=t?t.disp:"",e.localbd=n}function S(t){var e;!a.games||(e=a.games.find(function(e){return e.gid==t.gid}))&&angular.extend(e,t)}function T(){var e,n;a.games&&(e=a.games.slice(0),a.params.League&&(e=e.filter(function(e){return e.lid===a.params.League})),n=c.gameDate,"Y"===a.params.PD&&(e=e.filter(function(e){var t=new Date(e.gdte+"T00:00:00Z");return t.setUTCHours(5),n.setUTCHours(5),t.getTime()>=n.getTime()})),a.numGames=e.length,a.noMoreData=a.itemsPerPage>=a.numGames,a.gamesByDay=i("groupBy")(e,"gdte",{asArray:!0}),a.noData=0===a.gamesByDay.length)}function w(e,t){var n=s.defer();return o.get(e,t).then(function(e){t.games=e,t.intervalPromise=r(function(e){d.get(e).then(function(e){e.data.gs.g.forEach(S)})}.bind("",t),t.intervalDuration),n.resolve(t)}).catch(function(e){t.games=[],n.resolve(t)}),n.promise}a.splits=_.splits,a.params=_.params,a.$on("runit",function(e){T()}),f=y.map(function(e){var t={league:e.text.toLowerCase(),leagueId:e.val,intervalDuration:1e4,intervalPromise:null,season:g};return w(g,t)}),s.all(f).then(function(e){var n;e&&e.length?(n=[],e.forEach(function(t){t.games.forEach(function(e){e.league=t.league,e.lid=t.leagueId,n.push(e)})}),n.forEach(b),a.games=n,T()):console.error("no games returned")}).catch(function(e){console.error(e)})}stats.controller("SummerleagueScheduleController",e),e.$inject=["$scope","$element","$filter","$interval","$location","$q","$timeout","MobileSeasonScheduleService","SeasonsService","ReferrerService","SplitsService","TeamsService","TodaysScoresService"]}(),function(){function e(o,e,a,i,r,s,n,t,l,c,u,h,d,f,p,m){o.isLoading=!0,o.noGames=!0,o.hasLineup=!1,o.games=[],o.lgames=[],o.trustAsHtml=e.trustAsHtml,o.tickerScrollLeft=0,o.navPrev=function(e){e.preventDefault();var t=$(".stats-game-ticker__container").scrollLeft();o.tickerScrollLeft=Math.max(0,t-135)},o.navNext=function(e){e.preventDefault();var t=$(".stats-game-ticker__container").scrollLeft();o.tickerScrollLeft=Math.min(o.tickerMax,t+135)},o.getTeamLink=function(e){return e&&!e.special?"/stats/team/"+e.id+"/stats/":""},o.params={LeagueID:"00",DayOffset:"0",gameDate:""};var g=u.get("scores"),v=h.get(["LeagueID",{name:"Season",initial:g.Season,seasonRange:[g.SeasonYearFrom,g.SeasonYear]},{name:"SeasonType",initial:g.SeasonType},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight"]);function y(e){e=angular.extend(e,p.getById(e.TEAM_ID))}function _(e){e.date=e.GAMECODE.substr(0,8),e.dateStr=e.GAME_DATE_EST.substr(0,10),e.vtm=p.getById(e.linescores.vtm.TEAM_ID),e.htm=p.getById(e.linescores.htm.TEAM_ID)}function b(){var e,a;o.hasGames&&o.hasPlayers&&(e=o.games,a=o.teams,e.forEach(function(e){var t=e.linescores.vtm.TEAM_ABBREVIATION,n=e.linescores.htm.TEAM_ABBREVIATION;"EST"!==t&&"WST"!==n&&a[t]&&a[n]&&(e.linescores.vtm.players=a[t].items.slice(0,5),e.linescores.htm.players=a[n].items.slice(0,5),o.isAllStar=!1),"EST"==t&&"WST"==n&&(o.isAllStar=!0)}))}function S(){(new Date).getFullYear();var e="https://data.nba.com/data/5s/v2015/json/mobile_teams/nba/"+u.get("site").SeasonYear+"/scores/00_todays_scores.json";i.get(e).then(function(e){var t=e.data.gs.g;t&&t.length&&o.games&&o.games.length&&t.forEach(function(a){var i=o.games.find(function(e){return e.GAME_ID===a.gid});i&&(i.LIVE_PERIOD=a.p,i.LIVE_PC_TIME=a.cl,i.GAME_STATUS_ID=a.st,i.GAME_STATUS_TEXT=a.stt,[["q1","PTS_QTR1"],["q2","PTS_QTR2"],["q3","PTS_QTR3"],["q4","PTS_QTR4"],["ot1","PTS_OT1"],["ot2","PTS_OT2"],["ot3","PTS_OT3"],["ot4","PTS_OT4"],["ot5","PTS_OT5"],["ot6","PTS_OT6"],["ot7","PTS_OT7"],["ot8","PTS_OT8"],["ot9","PTS_OT9"],["ot10","PTS_OT10"],["s","PTS"]].forEach(function(e){var t=e[1],n=e[0];i.linescores.vtm[t]=a.v[n],i.linescores.htm[t]=a.h[n]}),i.linescores.htm.isWinner=i.linescores.htm.PTS>=i.linescores.vtm.PTS,i.linescores.vtm.isWinner=i.linescores.vtm.PTS>=i.linescores.htm.PTS,delete i.$$hashKey)})})}function T(e){s.cancel(o.livePromise),o.livePromise=s(w,e)}function w(){d.get("scores_leaders").then(function(e){var t={},n="N"!==e.items[1].items[0].livegamestate[0].LIVE_GAME_FLAG;e.items[0].items[0].playergametats.forEach(function(e){t[e.TEAM_ABBREVIATION]=e}),o.playerGameStats=t,T(n?3e4:3e5)})}function P(){o.isLoading=!0;var e=u.get().SeasonYear,t=o.params.gameDate.split("/"),n=_slicedToArray(t,3),a=n[0],i=n[1],r=n[2],s={seasonYear:e,gameDate:"".concat(r).concat(a).concat(i)};m.get(s).then(function(e){o.isLoading=!1,e&&(o.pointsBetGames=e)})}o.splits=v.splits,o.playerStatParams=v.params,o.playerStatParams.MeasureType="Base",o.hasEsi=!(!window.esi_||"US"!==window.esi_.country),o.pointsBetLink="https://join.pointsbet.com/nba-win-probability/?utm_source=Unbounce_NBA&utm_medium=NBA&utm_campaign=Risk_Free_2_200_NBA_Win_Probability&utm_term=Unbounce&utm_content=NBA&promo=NBAWIN",o.round=function(e){return Math.round(10*e)/10},c.get(o.playerStatParams).then(function(e){o.players=e.rows,o.players.sort(function(e,t){return e.PTS>t.PTS?-1:1}),o.teams=r("groupBy")(o.players,"TEAM_ABBREVIATION"),o.hasPlayers=!0,b()}),d.get("scores_leaders").then(function(e){var t={};e&&e.items&&e.items.length&&(T("N"!==e.items[1].items[0].livegamestate[0].LIVE_GAME_FLAG?3e4:3e5),e.items[0].items[0].playergametats.forEach(function(e){t[e.TEAM_ABBREVIATION]=e}),o.playerGameStats=t)}),d.get("scores_sidebar").then(function(e){o.sidebar=e}),o.$watch(function(){return n.absUrl()},function(){var e,t;6<=n.absUrl().split("/").length?"game"===n.absUrl().split("/")[3]?(e=new Date(o.boxscore.gameInfo.GAME_DATE),t=r("date")(e,"MM/dd/yyyy"),o.params.gameDate=t):o.params.gameDate=n.absUrl().split("/stats/scores/")[1]:o.params.gameDate=r("date")(new Date,"MM/dd/yyyy"),o.isLoading=!0,f.get(o.params).then(function(e){var t;if(o.games=e.games.map(function(e){return angular.extend(e,{gameLinks:{gamebook:{lessThan2018:{display:1==e.WH_STATUS&&2010<=e.SEASON&&e.SEASON<2018||(2==e.GAME_STATUS_ID||3==e.GAME_STATUS_ID)&&2010<=e.SEASON&&e.SEASON<2018,url:"http://www.nba.com/data/html/nbacom/"+e.SEASON+"/gameinfo/"+e.GAMECODE.substr(0,8)+"/"+e.GAME_ID+"_Book.pdf"},greaterThan2018:{display:1==e.WH_STATUS&&2018<=e.SEASON||(2==e.GAME_STATUS_ID||3==e.GAME_STATUS_ID)&&2018<=e.SEASON,url:"https://statsdmz.nba.com/pdfs/"+e.GAMECODE.substr(0,8)+"/"+e.GAMECODE.replace("/","_")+"_book.pdf"}},pdf:{display:2==e.GAME_STATUS_ID||3==e.GAME_STATUS_ID,url:"https://statsdmz.nba.com/pdfs/"+e.GAMECODE.substr(0,8)+"/"+e.GAMECODE.replace("/","_")+".pdf"}}})}),o.standings=e.standings,o.standings[0].rows.forEach(y),o.standings[1].rows.forEach(y),o.standings[0].rows[0]&&(t=o.standings[0].rows[0].SEASON_ID+"",o.seasonInfo={Season:r("seasonyear")(t.substr(1,4)),SeasonType:r("seasonTypeIdToSeasonType")(t.substr(0,1))}),o.tickerMax=135*(o.games.length+1),o.games.forEach(_),o.noGames=0===o.games.length,a.$emit("numberOfGames",o.games.length),S(),o.fetchInterval?a.$on("gameDateChange",function(){new Date(o.params.gameDate)<new Date&&s.cancel(o.fetchInterval)}):o.fetchInterval=s(S,1e4),o.hasGames=!0,!o.noGames){for(var n in o.games)"PPD"==o.games[n].GAME_STATUS_TEXT&&o.games.push(o.games.splice(n,1)[0]),1==o.games[n].GAME_STATUS_ID&&"PPD"!=o.games[n].GAME_STATUS_TEXT&&function(){if(o.noGames)return;var a=o.games,e=Number(a[0].GAMECODE.split("/")[0]),t="daily_lineups_"+e,n="/stats/js/data/dailylineups/"+o.seasonInfo.Season.slice(0,4)+"/"+t+".json";i.get(n).then(function(e){var t=e.data;if(0!==t.results.length){o.lineup=r("groupBy")(t.results,"GameID"),o.hasLineup=!0;for(var n=0;n<a.length;n++)o.lineup[a[n].GAME_ID]&&(o.games[n].projectedLineup=o.lineup[a[n].GAME_ID].items)}else o.hasLineup=!1})}(),3!==o.games[n].GAME_STATUS_ID&&b();2016<o.params.gameDate.split("/")[2]&&function(){if(o.noGames)return;var a=o.games,e="boxscore_breakdown_"+Number(a[0].GAMECODE.split("/")[0]),t="/stats/js/data/boxscorebreakdowns/"+a[0].GAMECODE.slice(0,4)+"/"+e+".json";i.get(t).then(function(e){var t,n=e.data;n.results&&0!==n.results.length?(t=r("groupBy")(n.results,"GameID"),o.hasBreakdown=!0,a.forEach(function(e){t[e.GAME_ID]&&""!==t[e.GAME_ID].items[0].Breakdown&&(e.boxscoreBreakdown=t[e.GAME_ID].items[0])})):o.hasBreakdown=!1})}()}o.isLoading=!1})}),o.trackTabChange=function(e,t){var n=["team leaders","box score breakdowns","lead tracker"][e],a=[t.GAME_ID,t.vtm.abbr+"@"+t.htm.abbr,n].join("_");l.triggerEvent("scoresPageTab",a)},o.trackLinkClick=function(e,t){var n=e.target.dataset.scoresLink,a=[t.date.slice(4)+""+t.date.slice(0,4),t.vtm.abbr+"@"+t.htm.abbr,n].join("_");l.triggerEvent("scoresPageLink",a)},o.$watch("games",function(e,t){e&&(o.isAbove2018=2018<+o.params.gameDate.substring(o.params.gameDate.length-4),P(),o.fetchPointsInterval?a.$on("gameDateChange",function(){new Date(o.params.gameDate)<new Date&&s.cancel(o.fetchPointsInterval)}):o.fetchPointsInterval=s(P,6e4))})}stats.controller("ScoresController",e),e.$inject=["$scope","$sce","$rootScope","$http","$filter","$interval","$location","CMSENV","DtmService","LeaguePlayerGeneralService","SeasonsService","SplitsService","StatsWidgetService","ScoresService","TeamsService","StatsPointsBetService"]}(),function(){function e(o,e,t,n,a,i,r,s,l,c,u){var h;function d(){o.noData=!1,o.isLoading=!0,o.isLandingPage=!1,l.get(f(o.params)).then(function(e){!function(e){var t=[];t=e.slice(0);var n,a,i={},r=[],s=0;t.forEach(function(e){n=e.PLAYER_ID,void 0===i[n]?(i[n]=s,e.TOTAL_GAMES=1,r.push(e),s++):(a=i[n],r[a].TOTAL_GAMES+=1)}),o.grouped=r}(e),o.isLoading=!1,e&&0!==e.length?(o.tableHeaders=Object.keys(e[0]).slice(0,-3),o.players=e,o.noData=!1):o.noData=!0}).catch(function(e){o.isLandingPage=!0,o.isLoading=!1,o.noData=!0}),s.triggerEvent("boxScoreSearch",s.setFilterProps(f(o.splits)))}function f(e){var i=angular.copy(e);return o.filters&&angular.forEach(o.filters,function(e){var t=e.value.split("*"),n=t[1]+t[0],a=t[2];-1<t[0].indexOf("PCT")&&(a/=100),i[n]=a}),i}o.isLandingPage=!0,o.isLoading=!0,o.noData=!0,o.showGroup=!1,o.isFilters=!0,o.pageTitle="Player Game Log Search",o.playerList=u.get().map(function(e){var t=e.name.split(",");return{$hash:e.id,DISPLAY_LAST_COMMA_FIRST:e.name,DISPLAY_FIRST_LAST:e.name,FIRST_NAME:t[1],LAST_NAME:t[0],PERSON_ID:e.id,text:e.name,val:e.id,selected:{text:e.name,val:e.id}}}),h=c.get(["Season","SeasonType","TeamID","VsTeamID","Outcome","Location","DateFrom","DateTo","VsConference","VsDivision","Conference","Division","DraftYear","DraftNumber","DraftRound",{name:"StatCategory",without:["DD","TD","PTSPAINT","PTSFB","PTS2NDCHANCE","PTSOFFTOV"]},{name:"GB",default:"N",initial:"N",type:"toggle",label:"Total Games",val:{true:"Y",false:"N"}},"PlayerID"]),o.splits=h.splits,o.params=h.params,o.params.PlayerOrTeam="P",o.params.LeagueID="00",o.options={sortField:t.data("sort-field"),sortDirection:t.data("sort-direction")},o.customFields=h.splits.StatCategory.options.map(function(e){return{name:e.val,text:e.text}}),delete o.splits.StatCategory,r(function(){var e=i.search();"CF"in e&&0<Object.keys(e).length?(o.isLandingPage=!1,o.runit()):o.filters=[{name:"CF0",value:"PTS*gt*40"}]},0),o.$on("runit",function(e){var t;o.isLandingPage&&o.toggleFilters(),d(),o.showGroup="Y"===o.params.GB,t=[],o.filters.forEach(function(e){t.push(e.text)}),o.pageTitle="Player Game Log Search",0<t.length&&(o.pageTitle=t.join(", ")+" - "+o.pageTitle),o.isFilters=!1}),o.toggleFilters=function(){o.isFilters=!o.isFilters}}stats.controller("GameFinderPlayerController",e),e.$inject=["$scope","$anchorScroll","$element","$filter","$http","$location","$timeout","QuerytoolDtmService","GameFinderService","QuerytoolSplitsService","PlayersService"]}(),function(){function e(o,e,t,n,a,i,r,s,l,c,u){o.isLandingPage=!0,o.isLoading=!0,o.noData=!0,o.showGroup=!1,o.isFilters=!0,o.pageTitle="Team Game Log Search",o.ai={},o.ai.isNotAllstarTeam=function(e){var t=d.filter(function(t){return function(e){return+e.id===t}}(e));return 0<t.length&&t[0]};var h,d=u.get();function f(){o.noData=!1,o.isLoading=!0,o.isLandingPage=!1,l.get(p(o.params)).then(function(e){!function(e){var t=[];t=e.slice(0);var n,a,i={},r=[],s=0;t.forEach(function(e){n=e.TEAM_ID,void 0===i[n]?(i[n]=s,e.TOTAL_GAMES=1,r.push(e),s++):(a=i[n],r[a].TOTAL_GAMES+=1)}),o.grouped=r}(e),o.isLoading=!1,e&&0!==e.length?(o.tableHeaders=Object.keys(e[0]).slice(0,-3),o.teams=e,o.noData=!1):o.noData=!0}).catch(function(e){o.isLandingPage=!0,o.isLoading=!1,o.noData=!0}),s.triggerEvent("boxScoreSearch",s.setFilterProps(p(o.splits)))}function p(e){var i=angular.copy(e);return o.filters&&angular.forEach(o.filters,function(e){var t=e.value.split("*"),n=t[1]+t[0],a=t[2];-1<t[0].indexOf("PCT")&&(a/=100),i[n]=a}),i}h=c.get(["Season","SeasonType","TeamID","VsTeamID","Outcome","Location","DateFrom","DateTo","VsConference","VsDivision","Conference","Division","DraftYear","DraftNumber","DraftRound",{name:"StatCategory",without:["DD","TD","MINUTES","PTSPAINT","PTSFB","PTS2NDCHANCE","PTSOFFTOV"]},{name:"GB",default:"N",initial:"N",type:"toggle",label:"Total Games",val:{true:"Y",false:"N"}}]),o.splits=h.splits,o.params=h.params,o.params.PlayerOrTeam="T",o.params.LeagueID="00",o.options={sortField:t.data("sort-field"),sortDirection:t.data("sort-direction")},o.customFields=h.splits.StatCategory.options.map(function(e){return{name:e.val,text:e.text}}),delete o.splits.StatCategory,r(function(){var e=i.search();"CF"in e&&0<Object.keys(e).length?(o.isLandingPage=!1,o.runit()):o.filters=[{name:"CF0",value:"PTS*gt*130"}]},0),o.$on("runit",function(e){var t;o.isLandingPage&&o.toggleFilters(),f(),o.showGroup="Y"===o.params.GB,t=[],o.filters.forEach(function(e){t.push(e.text)}),o.pageTitle="Team Game Log Search",0<t.length&&(o.pageTitle=t.join(", ")+" - "+o.pageTitle),o.isFilters=!1,o.limit=50}),o.toggleFilters=function(){o.isFilters=!o.isFilters}}stats.controller("GameFinderTeamController",e),e.$inject=["$scope","$anchorScroll","$element","$filter","$http","$location","$timeout","QuerytoolDtmService","GameFinderService","QuerytoolSplitsService","TeamsService"]}(),function(){function e(n,e,t,a,i,r,s,o,l,c){var u;function h(e){var i=angular.copy(e);return n.filters&&angular.forEach(n.filters,function(e){var t=e.value.split("*"),n=t[1]+t[0],a=t[2];-1<t[0].indexOf("PCT")&&(a/=100),i[n]=a}),i}n.isLandingPage=!0,n.isLoading=!0,n.noData=!0,n.isFilters=!0,n.pageTitle="Player Streak Search",u=c.get(["ActiveStreaksOnly","Season","SeasonType","TeamID","VsTeamID","Outcome","Location","DateFrom","DateTo","VsConference","VsDivision","Conference","Division","DraftYear","DraftNumber","DraftRound",{name:"StatCategory",without:["DD","TD","PTSPAINT","PTSFB","PTS2NDCHANCE","PTSOFFTOV"]},"MinGames"]),n.splits=u.splits,n.params=u.params,n.options={sortField:t.data("sort-field"),sortDirection:t.data("sort-direction")},n.customFields=u.splits.StatCategory.options.map(function(e){return{name:e.val,text:e.text}}),n.params.LeagueID="00",delete n.splits.StatCategory,s(function(){var e=r.search();"CF"in e&&0<Object.keys(e).length?(n.isLandingPage=!1,n.runit()):n.filters=[{name:"CF0",value:"PTS*gt*30"}]},0),n.$on("runit",function(e){var t;n.isLandingPage&&n.toggleFilters(),n.noData=!1,n.isLoading=!0,n.isLandingPage=!1,l.get(h(n.params)).then(function(e){n.isLoading=!1,e&&0!==e.length?(n.tableHeaders=Object.keys(e[0]).slice(0,-2),n.players=e,n.noData=!1):n.noData=!0}).catch(function(e){n.isLandingPage=!0,n.isLoading=!1,n.noData=!0}),o.triggerEvent("playerStreakSearch",o.setFilterProps(h(n.splits))),t=[],n.filters.forEach(function(e){t.push(e.text)}),n.pageTitle="Player Streak Search",0<t.length&&(n.pageTitle=t.join(", ")+" - "+n.pageTitle),n.isFilters=!1}),n.toggleFilters=function(){n.isFilters=!n.isFilters}}stats.controller("StreakFinderController",e),e.$inject=["$scope","$anchorScroll","$element","$filter","$http","$location","$timeout","QuerytoolDtmService","PlayerGameStreakService","QuerytoolSplitsService"]}(),function(){function e(n,e,t,a,i,r,s,o,l,c,u){n.isLandingPage=!0,n.isLoading=!0,n.noData=!0,n.isFilters=!0,n.pageTitle="Team Streak Search",n.ai={},n.ai.isNotAllstarTeam=function(e){var t=d.filter(function(t){return function(e){return+e.id===t}}(e));return 0<t.length&&t[0]};var h,d=u.get();function f(e){var i=angular.copy(e);return n.filters&&angular.forEach(n.filters,function(e){var t=e.value.split("*"),n=t[1]+t[0],a=t[2];-1<t[0].indexOf("PCT")&&(a/=100),i[n]=a}),n.oppFilters&&angular.forEach(n.oppFilters,function(e){var t=e.value.split("*"),n="OPP"+t[0],n="gt"==t[1]?"Btr"+n:"Wrs"+n;i[n]="YES"}),i}h=c.get(["ActiveStreaksOnly","Season","SeasonType","TeamID","VsTeamID","Outcome","Location","DateFrom","DateTo","VsConference","VsDivision","Conference","Division","DraftYear","DraftNumber","DraftRound",{name:"StatCategory",without:["DD","TD","MINUTES"],include:[{val:"OPPPTS",text:"Opp PTS"},{val:"OPPREB",text:"Opp REB"},{val:"OPPAST",text:"Opp AST"},{val:"OPPSTL",text:"Opp STL"},{val:"OPPBLK",text:"Opp BLK"},{val:"OPPOREB",text:"Opp OREB"},{val:"OPPDREB",text:"Opp DREB"},{val:"OPPTOV",text:"Opp TOV"},{val:"OPPPF",text:"Opp PF"},{val:"OPPFGM",text:"Opp FGM"},{val:"OPPFGA",text:"Opp FGA"},{val:"OPPFG_PCT",text:"Opp FG%"},{val:"OPPFG3M",text:"Opp 3PM"},{val:"OPPFG3A",text:"Opp 3PA"},{val:"OPPFG3_PCT",text:"Opp 3P%"},{val:"OPPFTM",text:"Opp FTM"},{val:"OPPFTA",text:"Opp FTA"},{val:"OPPFT_PCT",text:"Opp FT%"},{val:"OPPPTSPAINT",text:"Opp PITP"},{val:"OPPPTSFB",text:"Opp FB PTS"},{val:"OPPPTS2NDCHANCE",text:"Opp 2nd PTS"},{val:"OPPPTSOFFTOV",text:"Opp PTS Off TOV"}]},"MinGames"]),n.splits=h.splits,n.params=h.params,n.options={sortField:t.data("sort-field"),sortDirection:t.data("sort-direction")},n.customFields=h.splits.StatCategory.options.map(function(e){return{name:e.val,text:e.text}}),n.oppFields=angular.copy(n.customFields).slice(0,22),n.params.LeagueID="00",delete n.splits.StatCategory,s(function(){var e=r.search();("CF"in e||"MATCHUP"in e)&&0<Object.keys(e).length?(n.isLandingPage=!1,n.runit()):n.filters=[{name:"CF0",value:"PTS*gt*120"}]},0),n.$on("runit",function(e){var t;n.isLandingPage&&n.toggleFilters(),n.noData=!1,n.isLoading=!0,n.isLandingPage=!1,l.get(f(n.params)).then(function(e){n.isLoading=!1,e&&0!==e.length?(n.tableHeaders=Object.keys(e[0]).slice(0,-2),n.teams=e,n.noData=!1):n.noData=!0}).catch(function(e){n.isLandingPage=!0,n.isLoading=!1,n.noData=!0}),o.triggerEvent("teamStreakSearch",o.setFilterProps(f(n.splits))),t=[],n.filters.forEach(function(e){t.push(e.text)}),n.pageTitle="Team Streak Search",0<t.length&&(n.pageTitle=t.join(", ")+" - "+n.pageTitle),n.isFilters=!1,n.limit=50}),n.toggleFilters=function(){n.isFilters=!n.isFilters}}stats.controller("TeamStreakFinderController",e),e.$inject=["$scope","$anchorScroll","$element","$filter","$http","$location","$timeout","QuerytoolDtmService","TeamGameStreakService","QuerytoolSplitsService","TeamsService"]}(),function(){function e(o,t,l,n,a,e,i,c,r,u,s){o.decodeHtml=function(e){var t=document.createElement("textarea");return t.innerHTML=e,n.trustAsHtml(t.value)};var h=i.get("standings"),d=["Oct","Nov","Dec","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"],f=c.get(["LeagueID",{name:"Season",initial:h.Season,default:h.Season,seasonRange:[h.SeasonYearFrom,h.SeasonYear]},{name:"SeasonType",initial:h.SeasonType,default:h.SeasonType,without:["Pre Season","Playoffs","All Star"]},{name:"GroupBy",label:"Group By",default:"Conference",initial:"Conference",type:"select",options:[{val:"Conference",text:"Conference"},{val:"Division",text:"Division"}]},{name:"Section",label:"Section",default:"",initial:"",type:"select",options:[{val:"",text:"Overall"},{val:"streaks",text:"Streaks"},{val:"ab",text:"Ahead/Behind"},{val:"margins",text:"Margins & Stats"},{val:"vs",text:"vs Div/Conf"},{val:"calendar",text:"Calendar"}]}]);o.splits=f.splits,o.params=f.params,o.isExternal=e.isExternal,o.isDomestic=e.isDomestic,o.ai={},o.ai.isExternal=o.isExternal,o.ai.isDomestic=o.isDomestic;function p(){delete o.params.Section,delete o.params.GroupBy,o.isLoading=!0,r.get(o.params).then(function(e){for(var t in o.isLoading=!1,e.rows.forEach(function(t){d.forEach(function(e){t[e]&&(o.ai[e]=!0)})}),o.standings=e.rows.filter(function(e){return"Intl"!==e.Conference}),o.standings){var n=u.getById(o.standings[t].TeamID);o.standings[t].Team=n.code,o.standings[t].abbr=n.abbr}var a,i,r,s;o.groups=(a=o.standings,i=o.splits.GroupBy.selected.val,r=l("groupBy")(a,i),s=c.get([{name:"Conference",without:[""]},{name:"Division",without:[""]}]).splits[i].options.map(function(e){return r[e.val]}),o.ai.group=i,s)}).catch(function(e){o.isLoading=!1,o.noData=!0})}o.$on("customFields",function(e,t){o.customFields=t}),o.$on("runit",function(e){"2019-20"===e.targetScope.params.Season&&(o.splits.GroupBy.selected=c.findDefault(o.splits.GroupBy),t.search("GroupBy",null)),p()}),o.standingsNoticeLinkClicked=function(e){a.triggerEvent("standingsRtp",[e])},o.isLoading=!0,s.get("notices/standings_notices").then(function(e){o.feedData=angular.extend({},JSON.parse(e.body)),o.filterTitle=function(e){return{head:e.split(" ").slice(0,-1).join(" "),tail:e.split(" ").slice(-1).join(" ")}},o.isLoading=!1}),"2019-20"===o.params.Season&&(o.splits.GroupBy.selected=c.findDefault(o.splits.GroupBy),t.search("GroupBy",null)),p()}stats.controller("StandingsController",e),e.$inject=["$scope","$location","$filter","$sce","DtmService","ReferrerService","SeasonsService","SplitsService","StandingsService","TeamsService","StatsFlatDataService"]}(),function(){function e(t,e,n,a){var i=e.get("summerleague");function r(e){var t=a.getById(e.TeamID);t?(e.tc=t.city,e.tn=t.name,e.info=t):(e.tc=e.TeamCity,e.tn=e.TeamName)}t.params={Season:i.SeasonYear,SeasonType:i.SeasonType,LeagueID:"15"},delete t.params.Section,t.isLoading=!0,n.get(t.params).then(function(e){t.isLoading=!1,t.standings=e.rows,e.rows.forEach(r)}).catch(function(e){t.isLoading=!1,t.noData=!0})}stats.controller("SummerleagueStandingsController",e),e.$inject=["$scope","SeasonsService","StandingsService","TeamsService"]}(),function(){function e(t,e,n,a,i,r){var s=r.get("summerleague");t.isLoaded=!1,t.params={LeagueID:n.LeagueID,LeagueName:i.findOptionByValue("LeagueID",n.LeagueID).text,TeamName:n.TeamName,Season:s.SeasonYear,SeasonType:s.SeasonTypeId},a.get(t.params.TeamName,t.params.Season,t.params.LeagueName,t.params.SeasonType).then(function(e){t.isLoaded=!0,t.hasRoster=!!e.roster.pl.length,t.hasTotals=!!e.stats.tot.length,t.hasAverages=!!e.stats.avg.length,t.team=e}).catch(function(e){t.isLoaded=!0,t.hasRoster=!1,t.hasTotals=!1,t.hasAverages=!1,console.error(e)})}stats.controller("SummerLeagueTeamController",e),e.$inject=["$scope","$filter","$routeParams","MobileTeamService","SplitsService","SeasonsService"]}(),function(){function e(i,r,e,t,s,o,n){function l(){i.isLoading=!0,n.get(i.params).then(function(e){i.stats=e,i.noData=!e.rows.length,i.isLoading=!1}).catch(function(e){i.isLoading=!1,i.noData=!0})}i.$watch("teamInfo",function(e){if(!e)return;var t=s.get("teamStats"),n=i.teamObject,a=o.get(["LeagueID",{name:"Season",initial:n.Season,default:n.Season,seasonRange:[t.SeasonYearFrom,e.MAX_YEAR]},{name:"SeasonType",initial:n.SeasonType,default:n.SeasonType,without:["All Star"]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","PORound","ShotClockRange","DateFrom","DateTo"]);i.splits=a.splits,i.params=a.params,i.params.TeamID=e.TEAM_ID,i.params.PerMode="Totals",i.params.MeasureType=r.data("measure-type"),l()}),i.$on("customFields",function(e,t){i.customFields=t}),i.$on("runit",function(e){l()})}stats.controller("TeamBoxscoreSplitsController",e),e.$inject=["$scope","$element","$filter","$location","SeasonsService","SplitsService","TeamGamelogSplitsService"]}(),function(){function e(n,e,t,a,i,r){n.isLoading=!0;var s=a.get("teamGameLogs");function o(){n.isLoading=!0,r.get(n.params).then(function(e){n.teamStats=e,n.noData=0===e.rows.length,n.isLoading=!1}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),n.$watch("teamInfo",function(e){if(!e)return;var t=i.get(["LeagueID",{name:"Season",initial:s.Season,seasonRange:[e.MIN_YEAR,e.MAX_YEAR],includeBefore:[{val:"ALL",text:"All Seasons"}]},{name:"SeasonType",initial:s.SeasonType,without:["All Star"]},"DateFrom","DateTo"]);n.splits=t.splits,n.params=t.params,n.params.TeamID=e.TEAM_ID,o()})}stats.controller("TeamBoxscoresController",e),e.$inject=["$scope","$filter","$location","SeasonsService","SplitsService","TeamGamelogsService"]}(),function(){function e(a,e,t,i,r){function s(){a.isLoading=!0,a.teamInfo=window.nbaStatsTeamInfo,t.get(a.params).then(function(e){a.teamStats=e.rows,a.noData=0===a.teamStats.length,a.isLoading=!1}).catch(function(e){a.isLoading=!1,a.noData=!0})}a.isLoading=!0,a.noData=!1,a.$watch("teamInfo",function(e){var t,n;e&&(i.get("teamStats"),t=a.teamInfo,n=r.get(["LeagueID",{name:"SeasonType",initial:t.SeasonType,default:t.SeasonType,without:["Pre Season","All Star"]},"PerMode"]),a.splits=n.splits,a.params=n.params,a.params.TeamID=e.TEAM_ID,s())}),a.$on("runit",function(e){s()})}stats.controller("TeamFranchiseLeadersController",e),e.$inject=["$scope","$filter","FranchiseLeadersRankService","SeasonsService","SplitsService"]}(),function(){function e(n,e,t,a,i){function r(){n.isLoading=!0,i.get(n.params).then(function(e){n.teamStats=e,n.isLoading=!1,n.noData=!e.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.isLoading=!0,n.showSplits=!1,n.noData=!1,n.$on("runit",function(e){r()}),n.$on("customFields",function(e,t){n.customFields=t}),n.$watch("teamInfo",function(e){if(!e)return;n.teamObject;var t=a.get(["LeagueID",{name:"SeasonType",without:["Pre Season","All Star"]},"PerMode"]);n.splits=t.splits,n.params=t.params,n.params.TeamID=e.TEAM_ID,r()})}stats.controller("TeamHistoricRosterController",e),e.$inject=["$scope","$element","$filter","SplitsService","TeamFranchiseRosterService"]}(),function(){function e(n,a,e,i,r,t,s){n.isLoading=!0,n.showSplits=!1,n.rowsPerPage=50,n.noData=!1;var o=t.get("teamLineups");function l(){n.isLoading=!0,s.get(n.params).then(function(e){n.datasets=e.Lineups,n.noData=0===n.datasets.rows.length,n.isLoading=!1}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){l()}),n.$watch("teamInfo",function(e){if(!e)return;var t=r.get(["LeagueID",{name:"Season",initial:o.Season,seasonRange:[o.SeasonYearFrom,e.MAX_YEAR]},{name:"SeasonType",initial:o.SeasonType,without:["Pre Season","All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"GroupQuantity","PlusMinus","PaceAdjust","PORound","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo",{name:"GameID",default:"",type:"pseudo"}]);n.splits=t.splits,n.params=t.params,n.params.MeasureType=a.data("measure-type"),n.params.TeamID=e.TEAM_ID,n.splits.GameID.selected.text=function(e){if(!e)return"";var t=e.substr(0,4),n=e.substr(4,2),a=e.substr(6,2);return e.substr(9,3)+" vs "+e.substr(12,3)+" - "+n+"/"+a+"/"+t}(i.search().GameCode),l()})}stats.controller("TeamLineupsController",e),e.$inject=["$scope","$element","$filter","$location","SplitsService","SeasonsService","TeamLineupsService"]}(),function(){function e(r,e,s,o,l,c,t){function u(){var e;r.isLoading=!0,delete(e="Offense"===r.params.Matchup?angular.extend({},r.params,{OffTeamID:r.teamId}):angular.extend({},r.params,{DefTeamID:r.teamId})).Matchup,t.get(e).then(function(e){r.dataset=e,r.noData=0===e.rows.length,r.isLoading=!1}).catch(function(e){r.isLoading=!1,r.noData=!0})}r.$watch("teamInfo",function(e){if(!e)return;r.availableStats.stats||o.path("/career/");var t=l.get("leagueMatchups"),n=s("seasonyear")(Math.min(e.MAX_YEAR,t.SeasonYear)),a=[2017,e.MAX_YEAR];if(a[1]<a[0])return r.noData=!0,void(r.isLoading=!1);var i=c.get(["LeagueID",{name:"Season",initial:n,default:n,seasonRange:a},{name:"SeasonType",initial:t.SeasonType,without:["Pre Season","All Star"]},{name:"PerMode",default:"Totals"},"Outcome","DateFrom","DateTo","PORound",{name:"Matchup",type:"select",label:"Team On",initial:"Defense",default:"Defense",options:[{val:"Offense",text:"Offense"},{val:"Defense",text:"Defense"}]}]);r.teamId=e.TEAM_ID,r.splits=i.splits,r.params=i.params,u()}),r.$on("customFields",function(e,t){r.customFields=t}),r.$on("runit",function(e){u()})}stats.controller("TeamMatchupsController",e),e.$inject=["$scope","$element","$filter","$location","SeasonsService","SplitsService","LeagueMatchupsService"]}(),function(){function e(n,e,t,a,i,r){n.isLoading=!0,n.showSplits=!1,n.noData=!1;var s=i.get("teamOnOffCourt");function o(){n.isLoading=!0,r.get(n.params).then(function(e){n.datasets=e,n.isLoading=!1,n.noData=0===n.datasets.OverallTeamPlayerOnOffSummary.rows.length||0===n.datasets.PlayersOnCourtTeamPlayerOnOffSummary.rows.length||0===n.datasets.PlayersOffCourtTeamPlayerOnOffSummary.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.$on("runit",function(e){o()}),n.$watch("teamInfo",function(e){if(!e)return;var t=a.get(["LeagueID",{name:"Season",initial:s.Season,seasonRange:[s.SeasonYearFrom,e.MAX_YEAR]},{name:"SeasonType",initial:s.SeasonType,without:["Pre Season","All Star"]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo"]);n.splits=t.splits,n.params=t.params,n.params.MeasureType="Base",n.params.TeamID=e.TEAM_ID,n.params.PerMode="Totals",o()})}stats.controller("TeamOnOffCourtSummaryController",e),e.$inject=["$scope","$filter","$location","SplitsService","SeasonsService","TeamOnOffCourtSummaryService"]}(),function(){function e(n,a,e,t,i,r,s){n.isLoading=!0,n.noData=!1;var o=r.get("teamOnOffCourt");function l(){n.isLoading=!0,s.get(n.params).then(function(e){n.isLoading=!1,n.datasets=e,n.noData=0===n.datasets.OverallTeamPlayerOnOffDetails.rows.length||0===n.datasets.PlayersOnCourtTeamPlayerOnOffDetails.rows.length||0===n.datasets.PlayersOffCourtTeamPlayerOnOffDetails.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.$on("runit",function(e){l()}),n.$watch("teamInfo",function(e){if(!e)return;var t=i.get(["LeagueID",{name:"Season",initial:o.Season,seasonRange:[o.SeasonYearFrom,e.MAX_YEAR]},{name:"SeasonType",initial:o.SeasonType,without:["Pre Season","All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo"]);n.splits=t.splits,n.params=t.params,n.params.MeasureType=a.data("measure-type"),n.params.TeamID=e.TEAM_ID,l()})}stats.controller("TeamOnOffCourtController",e),e.$inject=["$scope","$element","$filter","$location","SplitsService","SeasonsService","TeamOnOffCourtService"]}(),function(){function e(a,i,e,t,r,n,s){a.isLoading=!0,a.showSplits=!1,a.noData=!1;var o=n.get("teamPlayer");function l(){a.isLoading=!0,s.get(a.params).then(function(e){a.datasets=e,a.isLoading=!1,a.noData=0===a.datasets.TeamOverall.rows.length||0===a.datasets.PlayersSeasonTotals.rows.length}).catch(function(e){a.isLoading=!1,a.noData=!0})}a.$on("runit",function(e){l()}),a.$watch("teamInfo",function(e){if(!e)return;var t=a.teamObject,n=r.get(["LeagueID",{name:"Season",initial:t.Season,default:t.Season,seasonRange:[o.SeasonYearFrom,e.MAX_YEAR]},{name:"SeasonType",initial:t.SeasonType,default:t.SeasonType,without:["All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"PORound","PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo"]);a.splits=n.splits,a.params=n.params,a.params.MeasureType=i.data("measure-type"),a.params.TeamId=e.TEAM_ID,l()})}stats.controller("TeamPlayersController",e),e.$inject=["$scope","$element","$filter","$location","SplitsService","SeasonsService","TeamPlayersService"]}(),function(){function e(i,n,e,t,a,r,s,o){i.isLoading=!0;var l=a.get("teamRoster");function c(){i.isLoading=!0,s.get(i.params).then(function(e){for(var t in i.isLoading=!1,i.roster=e.CommonTeamRoster,i.coaches=e.Coaches,i.roster.rows)i.roster.rows[t].HEIGHT_INCHES=n("toInches")(i.roster.rows[t].HEIGHT),i.roster.rows[t].DOB=new Date(i.roster.rows[t].BIRTH_DATE);i.roster.rows.forEach(function(e){e.NO=+e.NUM,e.XP="R"===e.EXP?0:+e.EXP})}).catch(function(e){i.isLoading=!1})}i.$on("runit",function(e){c()}),i.$watch("teamInfo",function(e){if(!e)return;var t=o.getById(e.TEAM_ID),n=Math.max(e.MAX_YEAR,l.SeasonYear);t&&t.special&&(n=e.MAX_YEAR);var a=r.get(["LeagueID",{name:"Season",initial:l.Season,seasonRange:[e.MIN_YEAR,n]}]);i.splits=a.splits,i.params=a.params,i.params.TeamID=e.TEAM_ID,c()})}stats.controller("TeamProfileRosterController",e),e.$inject=["$scope","$filter","$location","$rootScope","SeasonsService","SplitsService","TeamRosterService","TeamsService"]}(),function(){function e(i,e,t,r,s,n){function o(){i.isLoading=!0,n.get(i.params).then(function(e){i.teamStats=e.TeamStats.rows.reverse(),i.noData=0===i.teamStats.length,i.isLoading=!1}).catch(function(e){i.isLoading=!1,i.noData=!0})}i.isLoading=!0,i.rowsPerPage=100,i.noData=!1,i.$watch("teamInfo",function(e){var t,n,a=r.get("teamStats");e&&(t={LeagueID:a.LeagueID,TeamID:e.TEAM_ID,SeasonType:"Regular Season"},n=s.get([{name:"PerMode",initial:"Totals"}]),i.splits=n.splits,i.params=n.params,i.params=angular.extend({},i.params,t),o())}),i.$on("runit",function(e){o()})}stats.controller("TeamSeasonsController",e),e.$inject=["$scope","$filter","$location","SeasonsService","SplitsService","TeamSeasonsService"]}(),function(){function e(a,e,t,n,i,r,s){function o(){a.isLoading=!0,s.get(a.params).then(function(e){a.datasets=e.filter(function(e){return"AssistedBy"!==e.name}),a.noData=!a.datasets[0].rows.length,a.isLoading=!1}).catch(function(e){a.isLoading=!1,a.noData=!0})}a.$on("customFields",function(e,t){a.customFields=t}),a.$on("runit",function(e){o()}),a.$watch("teamInfo",function(e){var t,n;e&&(t=i.get("teamStats"),n=r.get(["LeagueID",{name:"Season",initial:t.Season,seasonRange:[t.SeasonYearFrom,e.MAX_YEAR]},{name:"SeasonType",initial:t.SeasonType,without:["All Star"]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","PORound","ShotClockRange","DateFrom","DateTo"]),a.splits=n.splits,a.params=n.params,a.params.TeamID=e.TEAM_ID,a.params.MeasureType="Base",a.params.PerMode="Totals",o())})}stats.controller("TeamStatsShootingController",e),e.$inject=["$scope","$element","$filter","$location","SeasonsService","SplitsService","TeamShootingSplitsService"]}(),function(){function e(a,e,t,i,n,r){"use strict";var s,o=n.get("teamTracking");function l(){a.isLoading=!0,a.noData=!1,r.get(a.params).then(function(e){var t=e;0===t.GeneralShooting.rows.length?(a.noData=!0,a.datasets=[]):(a.noData=!1,a.datasets=[{name:"GeneralShooting",datatable:t.GeneralShooting.rows},{name:"ShotClockShooting",datatable:t.ShotClockShooting.rows},{name:"DribbleShooting",datatable:t.DribbleShooting.rows},{name:"ClosestDefenderShooting",datatable:t.ClosestDefenderShooting.rows},{name:"ClosestDefender10ftPlusShooting",datatable:t.ClosestDefender10ftPlusShooting.rows},{name:"TouchTimeShooting",datatable:t.TouchTimeShooting.rows}]),a.isLoading=!1}).catch(function(e){a.isLoading=!1,a.noData=!0})}a.isLoading=!0,a.showSplits=!1,a.noData=!1,a.$on("runit",function(e){l()}),a.$watch("teamInfo",function(e){var t,n;(s=e)&&(t=s,n=i.get([{name:"Season",initial:o.Season,default:o.Season,seasonRange:[o.SeasonYearFrom,Math.min(t.MAX_YEAR,o.SeasonYear)]},{name:"SeasonType",initial:o.SeasonType,without:["Pre Season","All Star"]},"PerMode","PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo"]),a.splits=n.splits,a.params={MeasureType:"Base",LeagueID:"00",TeamID:t.TEAM_ID,Season:a.splits.Season.selected.val,SeasonType:a.splits.SeasonType.selected.val,PerMode:a.splits.PerMode.selected.val,PlusMinus:a.splits.PlusMinus.selected.val,PaceAdjust:a.splits.PaceAdjust.selected.val,Rank:a.splits.Rank.selected.val,Outcome:a.splits.Outcome.selected.val,Location:a.splits.Location.selected.val,Month:a.splits.Month.selected.val,SeasonSegment:a.splits.SeasonSegment.selected.val,OpponentTeamID:a.splits.OpponentTeamID.selected.val,VsConference:a.splits.VsConference.selected.val,VsDivision:a.splits.VsDivision.selected.val,GameSegment:a.splits.GameSegment.selected.val,Period:a.splits.Period.selected.val,LastNGames:a.splits.LastNGames.selected.val,DateFrom:a.splits.DateFrom.selected.val,DateTo:a.splits.DateTo.selected.val},l())})}stats.controller("TeamTrackingDashShotsController",e),e.$inject=["$scope","$location","$filter","SplitsService","SeasonsService","TeamTrackingDashShotsService"]}(),function(){function e(i,r,e,s,o,l,c){function u(){i.isLoading=!0,c.endpoint=i.splits.Split.selected.endpoint,c.get(i.params).then(function(e){i.datasets=e,i.noData=!i.datasets[0].rows.length,i.isLoading=!1}).catch(function(e){i.isLoading=!1,i.noData=!0})}i.$watch("teamInfo",function(e){if(!e)return;var t=o.get("teamStats"),n=i.teamObject;n.special&&s.path(n.id+"/seasons/");var a=l.get(["LeagueID",{name:"Season",initial:n.Season,default:n.Season,seasonRange:[t.SeasonYearFrom,e.MAX_YEAR]},{name:"SeasonType",initial:n.SeasonType,default:n.SeasonType,without:["All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},{name:"Split",label:"Split",order:900,default:c.endpoints[0].val,initial:c.endpoints[0].val,type:"select",options:c.endpoints.slice(0)},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","PORound","ShotClockRange","DateFrom","DateTo"]);i.splits=a.splits,i.params=a.params,i.params.TeamID=e.TEAM_ID,i.params.MeasureType=r.data("measure-type"),u()}),i.$on("customFields",function(e,t){i.customFields=t}),i.$on("runit",function(e){u()})}stats.controller("TeamSplitsController",e),e.$inject=["$scope","$element","$filter","$location","SeasonsService","SplitsService","TeamSplitsService"]}(),function(){function e(a,i,e,t,n,r,s,o){var l,c=e.absUrl();-1<c.indexOf("/#!/")&&(document.location=c.replace("/#!/","/")),a.TeamID=i.data("team-id"),a.isLoading=!0,l=s.getById(a.TeamID),a.teamObject=l,a.teamInfo=window.nbaStatsTeamInfo,a.teamRanks=window.nbaStatsTeamRanks,a.teamSeasons=window.nbaStatsTeamSeasons,a.TeamAbbr=l.abbr,a.LeagueTeams=s.get(),a.ai=a.teamInfo,a.availableStats={stats:!l.special,matchups:2017<=a.teamInfo.MAX_YEAR},a.$emit("onTeamInfo",{id:l.id,name:l.name,city:l.city,abbr:l.abbr,isSpecial:l.special,sections:a.availableStats}),a.isLoading=!1,a.$on("$viewContentLoaded",function(e,t){var n=i.find(".team-view");a.pageCat=n.data("cat"),a.pageSection=n.data("section")});var u=[null,null,a.TeamID,a.TeamAbbr];r.triggerEvent("pageLoad",u)}stats.controller("TeamSummaryCtrl",e),e.$inject=["$scope","$element","$location","$window","$routeParams","DtmService","TeamsService","TeamSummaryService"]}(),function(){function e(n,e,t,a,i,r){var s={};n.isLoading=!0,n.showSplits=!1,n.noData=!1;var o=i.get("teamTracking");function l(){n.isLoading=!0,n.noData=!1,r.get(n.params).then(function(e){var t=e;0===t.PassesMade.rows.length&&0===t.PassesReceived.rows.length?(n.noData=!0,n.datasets=[]):(n.noData=!1,n.datasets=[{name:"Passes Made",datatable:t.PassesMade.rows},{name:"Passes Received",datatable:t.PassesReceived.rows}]),n.isLoading=!1}).catch(function(e){n.isLoading=!1,n.noData=!0})}function c(e){var t=a.get([{name:"Season",initial:o.Season,default:o.Season,seasonRange:[o.SeasonYearFrom,Math.min(e.MAX_YEAR,o.SeasonYear)]},{name:"SeasonType",initial:o.SeasonType,without:["Pre Season"]},"PerMode","PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo","PORound"]);n.splits=t.splits,n.params={MeasureType:"Base",LeagueID:"00",TeamID:e.TEAM_ID,Season:n.splits.Season.selected.val,SeasonType:n.splits.SeasonType.selected.val,Permode:n.splits.PerMode.selected.val,PlusMinus:n.splits.PlusMinus.selected.val,PaceAdjust:n.splits.PaceAdjust.selected.val,Rank:n.splits.Rank.selected.val,Outcome:n.splits.Outcome.selected.val,Location:n.splits.Location.selected.val,Month:n.splits.Month.selected.val,SeasonSegment:n.splits.SeasonSegment.selected.val,OpponentTeamID:n.splits.OpponentTeamID.selected.val,VsConference:n.splits.VsConference.selected.val,VsDivision:n.splits.VsDivision.selected.val,GameSegment:n.splits.GameSegment.selected.val,Period:n.splits.Period.selected.val,LastNGames:n.splits.LastNGames.selected.val,DateFrom:n.splits.DateFrom.selected.val,DateTo:n.splits.DateTo.selected.val}}n.$on("runit",function(e){c(s),l()}),n.$watch("teamInfo",function(e){(s=e)&&(c(s),l())})}stats.controller("TeamTrackingDashPassesCtrl",e),e.$inject=["$scope","$filter","$location","SplitsService","SeasonsService","TeamTrackingDashPassesService"]}(),function(){function e(n,e,t,a,i,r){var s={};n.isLoading=!0,n.showSlits=!1,n.noData=!1;var o=i.get("teamTracking");function l(){n.isLoading=!0,n.noData=!1,r.get(n.params).then(function(e){var t=e;0===t.OverallRebounding.rows.length?(n.noData=!0,n.datasets=[]):(n.noData=!1,n.datasets=[{name:"OverallRebounding",datatable:t.OverallRebounding.rows},{name:"NumContestedRebounding",datatable:t.NumContestedRebounding.rows},{name:"RebDistanceRebounding",datatable:t.RebDistanceRebounding.rows},{name:"ShotDistanceRebounding",datatable:t.ShotDistanceRebounding.rows},{name:"ShotTypeRebounding",datatable:t.ShotTypeRebounding.rows}]),n.isLoading=!1}).catch(function(e){n.isLoading=!1,n.noData=!0})}function c(e){var t=a.get([{name:"Season",initial:o.Season,default:o.Season,seasonRange:[o.SeasonYearFrom,Math.min(e.MAX_YEAR,o.SeasonYear)]},{name:"SeasonType",initial:o.SeasonType,without:["Pre Season"]},"PerMode","PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo","PORound"]);n.splits=t.splits,n.params={MeasureType:"Base",LeagueID:"00",TeamID:e.TEAM_ID,Season:n.splits.Season.selected.val,SeasonType:n.splits.SeasonType.selected.val,PerMode:n.splits.PerMode.selected.val,PlusMinus:n.splits.PlusMinus.selected.val,PaceAdjust:n.splits.PaceAdjust.selected.val,Rank:n.splits.Rank.selected.val,Outcome:n.splits.Outcome.selected.val,Location:n.splits.Location.selected.val,Month:n.splits.Month.selected.val,SeasonSegment:n.splits.SeasonSegment.selected.val,OpponentTeamID:n.splits.OpponentTeamID.selected.val,VsConference:n.splits.VsConference.selected.val,VsDivision:n.splits.VsDivision.selected.val,GameSegment:n.splits.GameSegment.selected.val,Period:n.splits.Period.selected.val,LastNGames:n.splits.LastNGames.selected.val,DateFrom:n.splits.DateFrom.selected.val,DateTo:n.splits.DateTo.selected.val,PORound:n.splits.PORound.selected.val}}n.$on("runit",function(e){c(s),l()}),n.$watch("teamInfo",function(e){(s=e)&&(c(s),l())})}stats.controller("TeamTrackingDashReboundsCtrl",e),e.$inject=["$scope","$filter","$location","SplitsService","SeasonsService","TeamTrackingDashReboundsService"]}(),function(){function e(t,e){t.isLoading=!0,e.get("advanced_leaders").then(function(e){t.feed=e,t.isLoading=!1})}stats.controller("TeamsAdvancedLeadersController",e),e.$inject=["$scope","StatsWidgetService"]}(),function(){function e(n,e,t,a,i,r,s){function o(){n.isLoading=!0,s.get(n.params).then(function(e){n.stats=e,n.noData=!e.rows.length,n.isLoading=!1}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.ai={},n.ai.showTeamCol=!1,n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()});var l=i.get("leagueGameLogs"),c=l.Season,u=[1996,l.SeasonYear];if(u[1]<u[0])return n.noData=!0,void(n.isLoading=!1);var h=r.get(["LeagueID",{name:"Season",initial:c,default:c,seasonRange:u},{name:"SeasonType",initial:l.SeasonType,without:["All Star"]},"PlusMinus","PaceAdjust","Rank","Outcome","Location","Month","SeasonSegment","OpponentTeamID","VsConference","VsDivision","GameSegment","Period","LastNGames","DateFrom","DateTo","PORound","ShotClockRange"]);n.splits=h.splits,n.params=h.params,n.params.PerMode="Totals",n.params.MeasureType=e.data("measure-type"),o()}stats.controller("TeamsBoxscoreSplitsController",e),e.$inject=["$scope","$element","$filter","$location","SeasonsService","SplitsService","TeamGamelogSplitsService"]}(),function(){function e(n,e,t,a,i,r){n.isLoading=!0,n.showSplits=!1,n.isAllTime=!1,e.on("click","th[zort]",function(){var e=angular.element(this).data("field");n.params.Sorter==e?n.params.Direction="DESC"===n.params.Direction?"ASC":"DESC":(n.params.Sorter=e,n.params.Direction="DESC");t.search("Sorter",n.params.Sorter),t.search("Direction",n.params.Direction),l()});var s=i.get("leagueGameLogs"),o=r.get(["LeagueID",{name:"Season",initial:s.Season,seasonRange:[s.SeasonYearFrom,s.SeasonYear],includeBefore:[{val:"ALLTIME",text:"All Seasons"}]},{name:"SeasonType",initial:s.SeasonType},"DateFrom","DateTo"]);function l(){n.isLoading=!0,a.get(n.params).then(function(e){n.teamStats=e.rows,n.noData=0===n.teamStats.length,n.isLoading=!1}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=o.splits,n.params=o.params,n.params.Sorter=t.search().Sorter||"DATE",n.params.Direction=t.search().Direction||"DESC",n.params.PlayerOrTeam="T",n.params.Counter="1000",n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){"ALLTIME"===n.params.Season?(n.isAllTime||(t.search("sort",null),t.search("dir",null)),n.isAllTime=!0):(n.isAllTime&&(t.search("Sorter",null),t.search("Direction",null)),n.isAllTime=!1),l()}),l()}stats.controller("TeamsBoxscoresController",e),e.$inject=["$scope","$element","$location","LeagueGamelogsService","SeasonsService","SplitsService"]}(),function(){function e(n,e,t,a,i){var r=i.get("leagueTeamStats"),s=a.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","ClutchTime","AheadBehind","PointDiff","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound"]);function o(){n.isLoading=!0,t.get(n.params).then(function(e){n.isLoading=!1,n.datasets=e.rows,n.noData=0===n.datasets.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.params.MeasureType=e.data("measure-type"),n.options={sortField:e.data("sort-field"),sortDirection:e.data("sort-direction")},n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("TeamsClutchController",e),e.$inject=["$scope","$element","LeagueTeamClutchService","SplitsService","SeasonsService"]}(),function(){function e(n,e,t,a,i,r){var s=a.get("trackingStats"),o=i.get(["LeagueID",{name:"Season",initial:s.Season,seasonRange:[s.SeasonYearFrom,s.SeasonYear]},{name:"SeasonType",initial:s.SeasonType,without:["Pre Season"]},"Conference","DateFrom","DateTo","Division","GameSegment","LastNGames","Location","Month","OpponentTeamID","Outcome","Period","PerMode","PORound","SeasonSegment","TeamID","VsConference","VsDivision"]);function l(){n.isLoading=!0,r.get(n.params).then(function(e){n.isLoading=!1,n.datasets=e,n.noData=0===n.datasets.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=o.splits,n.params=o.params,n.params.DefenseCategory=e.data("defense-category"),n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){l()}),l()}stats.controller("TeamsDefenseDashController",e),e.$inject=["$scope","$element","$location","SeasonsService","SplitsService","LeagueTeamTrackingDefensiveService"]}(),function(){function e(n,e,t,a,i){var r=i.get("leagueTeamStats"),s=a.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType}]);function o(){n.isLoading=!0,t.get(n.params).then(function(e){n.isLoading=!1,n.teamStats=e,n.noData=0===e.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.options={sortField:e.data("sort-field"),sortDirection:e.data("sort-direction")},n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("TeamsEstimatedController",e),e.$inject=["$scope","$element","LeagueTeamEstimatedMetricsService","SplitsService","SeasonsService"]}(),function(){function e(n,e,t,a,i){var r=i.get("leagueTeamStats"),s=a.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound","TwoWay"]);function o(){n.isLoading=!0,t.get(n.params).then(function(e){n.isLoading=!1,n.teamStats=e,n.noData=0===e.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.params.MeasureType=e.data("measure-type"),n.options={sortField:e.data("sort-field"),sortDirection:e.data("sort-direction")},n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("TeamsGeneralController",e),e.$inject=["$scope","$element","LeagueTeamGeneralService","SplitsService","SeasonsService"]}(),function(){function e(t,e){t.isLoading=!0,e.get("hustle_leaders").then(function(e){t.feed=e,t.isLoading=!1})}stats.controller("TeamsHustleLeadersController",e),e.$inject=["$scope","StatsWidgetService"]}(),function(){function e(n,e,t,a,i,r){n.isLoading=!0,n.showSplits=!1,n.ai={};var s=e.data("season-section"),o=i.get(s),l=a.get(["LeagueID",{name:"Season",initial:o.Season,default:o.Season,seasonRange:[o.SeasonYearFrom,o.SeasonYear]},{name:"SeasonType",initial:o.SeasonType,default:o.SeasonType,without:["Pre Season"]},{name:"PerMode",include:[{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"}]},"GameSegment","Period","PlayerPosition","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight"]);function c(){n.isLoading=!0,n.ai.seasoncode=+(n.splits.SeasonType.selected.st+""+n.splits.Season.selected.num),r.get(n.params).then(function(e){n.teamStats=e.rows,n.isLoading=!1,n.noData=0===n.teamStats.length||n.ai.seasoncode<=22015}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=l.splits,n.params=l.params,n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){c()}),c()}stats.controller("TeamsHustleController",e),e.$inject=["$scope","$element","$location","SplitsService","SeasonsService","LeagueTeamHustleService"]}(),function(){function e(r,n,a,e,t,s,i,o){r.isLoading=!0,r.trustAsHtml=t.trustAsHtml,r.modules={},r.teams=i.get();r.scrollTo=function(e){var t=a.hash();n.yOffset=50,a.hash(e),n(),a.hash(t)};var l=0;["teams_landing_inner","teams_landing_sidebar"].forEach(function(a,e,i){s.get(a).then(function(e){var t,n=e.items;l++,r.modules[a]=n,l===i.length&&(r.isLoading=!1,t=r.modules,r.sidebar=t.teams_landing_sidebar,r.league_leaders=t.teams_landing_inner[0],r.leaders=t.teams_landing_inner.slice(1),function(e){var t,n=e.items;for(t in n)for(var a=0;a<n[t].teamstats.length;a++){var i=n[t].name,r=a+1;!n[t].teamstats[a].rank&&0===a||n[t].teamstats[a][i]<n[t].teamstats[a-1][i]?n[t].teamstats[a].rank=r:n[t].teamstats[a][i]==n[t].teamstats[a-1][i]&&(n[t].teamstats[a].rank=n[t].teamstats[a-1].rank)}}(r.league_leaders))})})}stats.controller("TeamsLandingCtrl",e),e.$inject=["$scope","$anchorScroll","$location","$http","$sce","StatsWidgetService","TeamsService","CMSENV"]}(),function(){function e(n,e,t,a,i,r){var s=i.get("trackingStats"),o=r.get(["LeagueID",{name:"Season",initial:s.Season,default:s.Season,seasonRange:[s.SeasonYearFrom,s.SeasonYear]},{name:"SeasonType",initial:s.SeasonType,default:s.SeasonType,without:["Pre Season"]},"PerMode","GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight","TouchTimeRange","GeneralRange","DribbleRange","CloseDefDistRange",{name:"ShotClockRange",initial:"24-22",default:"24-22",without:[""]}]);n.splits=o.splits,n.params=o.params;var l=e.data("measure-type");function c(){n.isLoading=!0,a.get(n.params).then(function(e){n.isLoading=!1,n.datasets=e,n.noData=0===n.datasets.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}"cddr"!==l&&(n.params.CloseDefDistRange="",delete n.splits.CloseDefDistRange),"ttr"!==l&&(n.params.TouchTimeRange="",delete n.splits.TouchTimeRange),"scr"!==l&&(n.params.ShotClockRange="",delete n.splits.ShotClockRange),"gr"!==l&&(n.params.GeneralRange="",delete n.splits.GeneralRange),"dr"!==l&&(n.params.DribbleRange="",delete n.splits.DribbleRange),n.params.ShotDistRange=e.data("sdr")?e.data("sdr"):"",n.$on("runit",function(e){c()}),n.$on("customFields",function(e,t){n.customFields=t}),c()}stats.controller("TeamsOppShotDashController",e),e.$inject=["$scope","$element","$location","LeagueTeamTrackingOppShotsService","SeasonsService","SplitsService"]}(),function(){function e(n,a,e,t,i){n.isLoading=!0,n.showSplits=!1,n.setDistanceRange=function(e){var t=e===+n.splits.DistanceRange.default?null:e;a.search("DistanceRange",t),n.params.DistanceRange=e,o()};var r=t.get("leagueTeamStats"),s=e.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType},"PerMode","DistanceRange","GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound"]);function o(){n.isLoading=!0,i.get(n.params).then(function(e){n.teamStats=e[0].datatable,n.isLoading=!1,n.noData=0===e[0].datatable.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.params.MeasureType="Opponent",n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("TeamsOpponentShootingController",e),e.$inject=["$scope","$location","SplitsService","SeasonsService","LeagueTeamShootingService"]}(),function(){function e(n,e,t,a,i){var r=t.get("playtypeStats"),s=e.data("category"),o={name:"OD",as:"TypeGrouping"};-1<["cut","putbacks","misc"].indexOf(s.toLowerCase())&&(o.without=["defensive"]);var l=a.get(["LeagueID",{name:"Season",as:"SeasonYear",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType,without:["Pre Season","All Star"]},o,"PerMode"]);function c(){n.isLoading=!0,i.get(n.params).then(function(e){n.teamStats=e.SynergyPlayType,n.isLoading=!1,n.noData=0===e.SynergyPlayType.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=l.splits,n.params=l.params,n.params.PlayerOrTeam="T",n.params.PlayType=s,n.$on("$routeChangeSuccess",function(e,t){c()}),n.$on("runit",function(e){c()}),n.$on("customFields",function(e,t){n.customFields=t}),c()}stats.controller("TeamsPlaytypeController",e),e.$inject=["$scope","$element","SeasonsService","SplitsService","SynergyPlaytypesService"]}(),function(){function e(n,e,t,a,i){n.isLoading=!0,n.showSplits=!1;var r=a.get("leagueTeamStats"),s=t.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType},"PerMode","DistanceRange","GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","ShotClockRange","TeamID","Conference","Division","PORound"]);function o(){n.isLoading=!0,i.get(n.params).then(function(e){n.teamStats=e[0].datatable,n.isLoading=!1,n.noData=0===n.teamStats.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.params.MeasureType="Base",n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("TeamsShootingController",e),e.$inject=["$scope","$location","SplitsService","SeasonsService","LeagueTeamShootingService"]}(),function(){function e(n,e,t,a,i,r){var s=i.get("trackingStats"),o=r.get(["LeagueID",{name:"Season",initial:s.Season,default:s.Season,seasonRange:[s.SeasonYearFrom,s.SeasonYear]},{name:"SeasonType",initial:s.SeasonType,default:s.SeasonType,without:["Pre Season"]},"PerMode","GameSegment","Period","PlayerPosition","StarterBench","PlayerExperience","OpponentTeamID","VsConference","VsDivision","Outcome","Location","SeasonSegment","Month","LastNGames","PlusMinus","PaceAdjust","Rank","GameScope","DateFrom","DateTo","TeamID","Conference","Division","PORound","DraftYear","DraftPick","College","Country","Height","Weight","TouchTimeRange","GeneralRange","DribbleRange","CloseDefDistRange",{name:"ShotClockRange",initial:"24-22",default:"24-22",without:[""]}]);n.splits=o.splits,n.params=o.params;var l=e.data("measure-type");function c(){n.isLoading=!0,a.get(n.params).then(function(e){n.isLoading=!1,n.datasets=e,n.noData=0===n.datasets.rows.length}).catch(function(e){n.isLoading=!1,n.noData=!0})}"cddr"!==l&&(n.params.CloseDefDistRange="",delete n.splits.CloseDefDistRange),"ttr"!==l&&(n.params.TouchTimeRange="",delete n.splits.TouchTimeRange),"scr"!==l&&(n.params.ShotClockRange="",delete n.splits.ShotClockRange),"gr"!==l&&(n.params.GeneralRange="",delete n.splits.GeneralRange),"dr"!==l&&(n.params.DribbleRange="",delete n.splits.DribbleRange),n.params.ShotDistRange=e.data("sdr")?e.data("sdr"):"",n.$on("runit",function(e){c()}),n.$on("customFields",function(e,t){n.customFields=t}),c()}stats.controller("TeamsShotDashController",e),e.$inject=["$scope","$element","$location","LeagueTeamTrackingShotsService","SeasonsService","SplitsService"]}(),function(){function e(n,e,t,a,i){var r=t.get("trackingStats"),s=a.get(["LeagueID",{name:"Season",initial:r.Season,seasonRange:[r.SeasonYearFrom,r.SeasonYear]},{name:"SeasonType",initial:r.SeasonType,without:["Preseason"]},"College","Conference","Country","DateFrom","DateTo","Division","DraftPick","DraftYear","GameScope","Height","LastNGames","Location","Month","OpponentTeamID","Outcome","PerMode","PlayerExperience","PlayerPosition","PORound","SeasonSegment","StarterBench","VsConference","VsDivision","Weight","TeamID","Period","GameSegment"]);function o(){n.isLoading=!0,i.get(n.params).then(function(e){n.datasets=e.LeagueDashPtStats.rows,n.noData=0===n.datasets.length,n.isLoading=!1}).catch(function(e){n.isLoading=!1,n.noData=!0})}n.splits=s.splits,n.params=s.params,n.params.PlayerOrTeam="Team",n.params.PtMeasureType=e.data("measure-type"),n.$on("customFields",function(e,t){n.customFields=t}),n.$on("runit",function(e){o()}),o()}stats.controller("TeamsTrackingController",e),e.$inject=["$scope","$element","SeasonsService","SplitsService","TrackingDataService"]}(),function(){function e(a,e,i,t){a.showSplits=!1,a.isLoading=!0,a.noData=!1,a.seeMore=function(){a.itemsPerPage=a.itemsPerPage+15,s()},a.currentPage=0,a.itemsPerPage=8,a.noMoreData=!1;var r={};a.dates=[];var n=t.get(["LeagueID","TeamID","Month"]);function s(){a.itemsPerPage>=a.groupDates.length?a.noMoreData=!0:a.noMoreData=!1}function o(){var t,e,n;a.dates&&(e=angular.copy(a.dates.slice(0)),"0"!==a.params.Month&&(t=(+a.params.Month+9)%12||12,e=e.filter(function(e){return+e.date.split("-")[1]===t})),"0"!==a.params.TeamID&&(n=+a.params.TeamID,e=e.filter(function(e){return e.transactions=e.transactions.filter(function(e){return e.TEAM_ID===n}),0!==e.transactions.length})),a.groupDates=e,a.noData=0===e.length,s())}a.splits=n.splits,a.params=n.params,e.get("/stats/js/data/playermovement/NBA_Player_Movement.json").then(function(e){for(var t=e.data.NBA_Player_Movement.rows,n=0;n<t.length;n++)t[n].TEAM_ABBR=i.getById(t[n].TEAM_ID).abbr;for(n=0;n<t.length;n++)0===n&&0===a.dates.length?(r.date=t[n].TRANSACTION_DATE,r.transactions=[],r.transactions.push(t[n]),a.dates.push(r),r={},a.indexPushed=n):0<n&&(a.dates[a.indexPushed].date==t[n].TRANSACTION_DATE?a.dates[a.indexPushed].transactions.push(t[n]):(a.indexPushed=a.indexPushed+1,r.date=t[n].TRANSACTION_DATE,r.transactions=[],r.transactions.push(t[n]),a.dates.push(r),r={}));a.isLoading=!1,a.groupDates=a.dates,o()}),a.$on("runit",function(e){o()})}stats.controller("TransactionsController",e),e.$inject=["$scope","$http","TeamsService","SplitsService"]}(),function(){function e(T,e,w,i,t,P,a,n,r,s,l,o){"use strict";T.noHTH=!0,T.noSBD=!0,T.noSBA=!0;var c,u,h=s.get("playerVsPlayerStats"),x=P.getSearchURL();for(c in T.isLoading=!0,T.limit=5,T.hidePlayerSelect=!1,T.hideLineupSelect=!1,T.params={IsOnlyCurrentSeason:"0",LeagueID:"00",PlayerID1:0,PlayerID2:0,PlayerID3:0,PlayerID4:0,PlayerID5:0,PlayerTeamID:x.PlayerTeamID||1,Season:h.Season,SeasonType:"Regular Season",VsPlayerID1:0,VsPlayerID2:0,VsPlayerID3:0,VsPlayerID4:0,VsPlayerID5:0,VsTeamID:x.VsTeamID||1},T.compare={isReady:!1,left:{type:"",hasPlayer:!1,hasTeam:!1,hasLineup:!1,isLoading:!0,lineup:[],lineupChosen:[],lineupIDs:[],lineupShow:!1,info:{},checked:0,tag:"left",opp:"right",showDropdown:!1,query:""},right:{type:"",hasPlayer:!1,hasTeam:!1,hasLineup:!1,isLoading:!0,lineup:[],lineupShow:!1,lineupChosen:[],lineupIDs:[],info:{},checked:0,tag:"right",opp:"left",showDropdown:!1,query:""}},T.columns=[],T.showCol)T.showCol[c].name=c,T.columns.push(T.showCol[c]);function d(t,n){var a=i.defer();return void 0!==t&&(T.params.TeamID=t),n.hasPlayer=!1,n.hasTeam=!1,o.get(T.params).then(function(e){n.lineup=e.CommonTeamRoster.rows,n.lineupShow=!0,n.lineupTeam=t,a.resolve(n.lineup)}),a.promise}function f(t){var n=i.defer();return r.get(T.params).then(function(e){T.params.PerMode="Totals",t.info=e.playerInfo,T.isLoading=!1,t.hasPlayer=!0,t.team=l.getById(t.info.TEAM_ID),t.type="player",T.params.PlayerID=t.info.PERSON_ID,n.resolve()}),n.promise}function p(e,t){T.hidePlayerSelect=!0,T.hideLineupSelect=!0}function m(e,t){T.$broadcast("onCompareSearch",t)}T.switchSides=function(){var e=T.compare.left;T.compare.left=T.compare.right,T.compare.right=e,T.compare.left.tag="left",T.compare.left.opp="right",T.compare.right.tag="right",T.compare.right.opp="left"},T.setStatType=function(e,t,n){t.type;t.type=e,t.lineup=[],t.lineupChosen=[],t.lineupIDs=[],t.checked=0,t.hasTeam=!1,t.hasLineup=!1,t.hasPlayer=!1,"left"===n&&(T.compare.right.type="",T.compare.right.setType="",T.compare.right.info=null),T.compare.left.showDropdown=!1,T.compare.right.showDropdown=!1,T.compare.isReady=!1},T.setTeam=function(e,t){var n=i.defer();return t.info=e,t.setType="team",t.type="team",t.hasTeam=!0,t.isReady=!0,n.resolve(),n.promise},T.setLineup=function(e){e.lineupChosen.length<2||5<e.lineupChosen.length||(e.lineupShow=!1,e.hasLineup=!0,e.isReady=!0,e.type="lineup",e.setType="lineup")},T.chooseLineup=function(e,t){t.lineup=[],d(e,t),t.lineupShow=!0,t.team=e},T.checkChange=function(e,t){var n;e.selected?(t.checked++,t.lineupChosen.push(e),t.lineupIDs.push(e.PLAYER_ID)):(n=t.lineupIDs.indexOf(e.PLAYER_ID),t.lineupIDs.splice(n,1),t.lineupChosen.splice(n,1),t.checked--)},T.onSelect=function(e,t,n,a,i){T.$item=e,T.$model=t,T.$label=n,T.params.PlayerID=T.$model.id,f(a),a.lineupRoutes=[],a.info=T.$model,a.info.paramID=T.params.PlayerID,a.isReady=!0,T.compare[i].query=""},T.searchPlayerName=function(t){return function(e){return-1!==(e.fn+" "+e.ln).toLowerCase().indexOf(t.toLowerCase())}},T.$watch("compare",function(e,t){var n,a=T.compare.left.hasLineup,i=T.compare.right.hasLineup,r=T.compare.left.hasPlayer,s=T.compare.right.hasPlayer,o=T.compare.left.hasTeam,l=o&&s,c=r&&s,u=a&&i,h={};for(n in angular.copy(x,h),h){if("Season"===n)break;delete h[n]}var d,f,p={};(l||c||u)&&(T.compare.isReady=!0),(l||c)&&(o?p.TeamID=T.compare.left.info.id:p.PlayerID=T.compare.left.info.PERSON_ID,p.VsPlayerID=T.compare.right.info.PERSON_ID),u&&(p.LineupIDs=T.compare.left.lineupIDs.join("~"),p.VsLineupIDs=T.compare.right.lineupIDs.join("~"),p.PlayerTeamID=p.TeamID=T.compare.left.team,p.VsTeamID=T.compare.right.team,d=[],f=[],T.compare.left.lineupChosen.forEach(function(e){d.push(e.PLAYER)}),T.compare.right.lineupChosen.forEach(function(e){f.push(e.PLAYER)}),p.PlayerNames=d.join("~"),p.VsPlayerNames=f.join("~"));var m,g,v,y,_,b,S=[];for(b in m=p,g=x,y=Object.keys(m),_=Object.keys(g),S=y.length?_.filter((v=y,function(e){var t,n=!1;for(t in v)if(n=-1!==e.indexOf(v[t]))break;return!n})):[])w.search(S[b],null);angular.extend(p,h),P.setSearchURL(p)},!0),T.$on("$locationChangeSuccess",function(){w.search().TeamID;var e,t=w.search().PlayerID,n=w.search().VsPlayerID;t&&n&&(e=[T.compare.left.info.DISPLAY_FIRST_LAST,T.compare.right.info.DISPLAY_FIRST_LAST].join("|"),a.triggerEvent("compareToolPlayerVsPlayer",e))}),T.$on("$locationChangeSuccess",function(){var e=w.absUrl().split("/")[4];"four-factors"!==e&&"opponent"!==e&&(T.search="?"+w.url().split("?")[1],m(0,T.search));var t,n=w.search().TeamID,a=w.search().VsTeamID,i=w.search().PlayerID,r=w.search().VsPlayerID,s=w.search().LineupIDs,o=w.search().VsLineupIDs;if(!T.compare.isReady){if(s&&o)return T.compare.left.lineupIDs=s.split("~"),T.compare.right.lineupIDs=o.split("~"),void d(n,T.compare.left).then(function(){T.compare.left.lineupShow=!1,d(a,T.compare.right).then(function(){T.compare.right.lineupShow=!1,T.compare.isReady=!0})});if(i&&r)return T.params.PlayerID=i,void f(T.compare.left).then(function(){T.params.PlayerID=r,f(T.compare.right).then(function(){T.compare.isReady=!0})});if(n&&r)return t=l.getById(n),void T.setTeam(t,T.compare.left).then(function(){T.params.PlayerID=r,f(T.compare.right).then(function(){T.compare.isReady=!0})});i&&(T.params.PlayerID=i,f(T.compare.left)),n&&(t=l.getById(n),T.setTeam(t,T.compare.left))}}),T.$on("onFourFactorsSearch",m),T.$on("onOpponentSearch",m),T.$on("onOnOffFourFactors",p),T.$on("onOnOffOpponent",p),T.pages=[{value:"/advanced/",text:"Advanced"},{value:"/misc/",text:"Misc"},{value:"/scoring/",text:"Scoring"},{value:"/fourfactors/",text:"Four Factors"},{value:"/opponent/",text:"Opponent"}],T.$emit("onOnOffInfo",{}),T.players=n.get(!0),T.isLoading=!1,u=l.get().slice(0),T.teams=u}stats.controller("VsSummaryController",e),e.$inject=["$scope","$filter","$location","$q","$routeParams","DeepLinksFactory","DtmService","PlayersService","PlayerSummaryService","SeasonsService","TeamsService","TeamRosterService"]}(),function(){function e(n,e,t,a,i,r){"use strict";var s=r.get("playerVsPlayerStats"),o=a.getSearchURL(),l=!!o.LineupIDs,c=[],u=[],h=[],d=[];l&&(c=o.LineupIDs.split("~"),u=o.PlayerNames.split("~"),h=o.VsLineupIDs.split("~"),d=o.VsPlayerNames.split("~"));var f,p=t.get([{name:"Season",initial:s.Season,seasonRange:e.search().range},{name:"SeasonType",initial:s.SeasonType,without:["All Star"]},"SeasonSegment","VsDivision","ShotClockRange","OpponentTeamID","GameSegment","Outcome","Location","Period","Month","VsConference","LastNGames","DateFrom","DateTo","PlusMinus","PaceAdjust","Rank"]);for(f in n.splits=p.splits,n.params=p.params,angular.extend(n.params,{MeasureType:"Advanced",PerMode:o.PerMode||"PerGame",PlayerID1:c[0]||0,PlayerID2:c[1]||0,PlayerID3:c[2]||0,PlayerID4:c[3]||0,PlayerID5:c[4]||0,PlayerTeamID:o.PlayerTeamID||1,TeamID:e.search().VsTeamID,VsPlayerID1:h[0]||0,VsPlayerID2:h[1]||0,VsPlayerID3:h[2]||0,VsPlayerID4:h[3]||0,VsPlayerID5:h[4]||0,VsTeamID:o.VsTeamID||1}),l&&(n.compare.left.lineupIDs=c.map(function(e){return e}),n.compare.right.lineupIDs=h.map(function(e){return e}),n.compare.left.lineupIDs.forEach(function(e,t){n.compare.left.lineupChosen[t]={PLAYER_ID:e,PLAYER:u[t]}}),n.compare.right.lineupIDs.forEach(function(e,t){n.compare.right.lineupChosen[t]={PLAYER_ID:e,PLAYER:d[t]}}),n.compare.left.lineup=n.compare.left.lineupIDs,n.compare.right.lineup=n.compare.right.lineupIDs,n.compare.left.type=n.compare.right.type="lineup",m()),n.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},OFF_RATING:{visible:!1,index:1,label:"OFF RATING",format:"number",invert:!1},DEF_RATING:{visible:!1,index:2,label:"DEF RATING",format:"number",invert:!0},NET_RATING:{visible:!0,index:3,label:"NET RATING",format:"number",invert:!1},AST_PCT:{visible:!1,index:4,label:"AST %",format:"percent",invert:!1},AST_TO:{visible:!1,index:5,label:"AST TO",format:"number",invert:!1},AST_RATIO:{visible:!0,index:6,label:"AST RATIO",format:"number",invert:!1},OREB_PCT:{visible:!1,index:7,label:"OREB %",format:"percent",invert:!1},DREB_PCT:{visible:!1,index:8,label:"DREB %",format:"percent",invert:!1},REB_PCT:{visible:!0,index:9,label:"REB %",format:"percent",invert:!1},TM_TOV_PCT:{visible:!1,index:10,label:"TO RATIO",format:"percent",invert:!0},EFG_PCT:{visible:!0,index:11,label:"EFG %",format:"percent",invert:!1},TS_PCT:{visible:!1,index:12,label:"TS %",format:"percent",invert:!1},USG_PCT:{visible:!1,index:13,label:"USG %",format:"percent",invert:!1},PACE:{visible:!1,index:14,label:"PACE",format:"number",invert:!1},PIE:{visible:!0,index:15,label:"PIE",format:"percent",invert:!1}},n.columns=[],n.showCol)n.showCol[f].name=f,n.columns.push(n.showCol[f]);function m(){i.getStats(n)}n.$on("runit",function(e){for(var t in n.compare.isReady=!0,n.splits)n.params[t]=n.splits[t].selected.val;m()}),n.$watch("compare",function(){n.compare.isReady&&(n.params.PlayerID1=n.compare.left.lineupIDs[0]||n.params.PlayerID1,n.params.PlayerID2=n.compare.left.lineupIDs[1]||n.params.PlayerID2,n.params.PlayerID3=n.compare.left.lineupIDs[2]||n.params.PlayerID3,n.params.PlayerID4=n.compare.left.lineupIDs[3]||n.params.PlayerID4,n.params.PlayerID5=n.compare.left.lineupIDs[4]||n.params.PlayerID5,n.params.VsPlayerID1=n.compare.right.lineupIDs[0]||n.params.VsPlayerID1,n.params.VsPlayerID2=n.compare.right.lineupIDs[1]||n.params.VsPlayerID2,n.params.VsPlayerID3=n.compare.right.lineupIDs[2]||n.params.VsPlayerID3,n.params.VsPlayerID4=n.compare.right.lineupIDs[3]||n.params.VsPlayerID4,n.params.VsPlayerID5=n.compare.right.lineupIDs[4]||n.params.VsPlayerID5,n.params.TeamID=n.compare.left.team||n.params.PlayerTeamID,n.params.PlayerTeamID=n.compare.left.team||n.params.PlayerTeamID,n.params.VsTeamID=n.compare.right.team||n.params.VsTeamID,m(),n.splits=p.splits)},!0),n.$on("customFields",function(e,t){n.customFields=t})}stats.controller("PlayerVsPlayerAdvancedController",e),e.$inject=["$scope","$location","SplitsService","DeepLinksFactory","VsPlayerVersusService","SeasonsService"]}(),function(){function e(c,u,h,i,e,t,n){"use strict";var a=e.get("playerVsPlayerStats"),r=h.getSearchURL();c.brSearch="",c.$emit("onOnOffFourFactors",{});var s,o=t.get([{name:"Season",initial:a.Season},{name:"SeasonType",initial:a.SeasonType,without:["All Star"]},"PerMode","Month","VsConference","LastNGames","SeasonSegment","VsDivision","ShotClockRange","OpponentTeamID","GameSegment","Outcome","Location","Period","DateFrom","DateTo","PlusMinus","PaceAdjust","Rank"]);for(s in c.splits=o.splits,c.params=o.params,angular.extend(c.params,{MeasureType:"Four Factors",PlayerID1:0,PlayerID2:0,PlayerID3:0,PlayerID4:0,PlayerID5:0,PlayerTeamID:r.PlayerTeamID||1,VsPlayerID1:0,VsPlayerID2:0,VsPlayerID3:0,VsPlayerID4:0,VsPlayerID5:0,VsTeamID:r.VsTeamID||1}),c.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},EFG_PCT:{visible:!0,index:1,label:"EFG %",format:"percent",invert:!1},FTA_RATE:{visible:!0,index:2,label:"FTA RT",format:"number",invert:!1},TM_TOV_PCT:{visible:!0,index:3,label:"TM TV %",format:"percent",invert:!1},OREB_PCT:{visible:!0,index:4,label:"OREB %",format:"percent",invert:!1},OPP_EFG_PCT:{visible:!0,index:5,label:"OPP EFG %",format:"percent",invert:!0},OPP_FTA_RATE:{visible:!0,index:6,label:"OPP FTA RT",format:"number",invert:!0},OPP_TOV_PCT:{visible:!0,index:7,label:"OPP FTM",format:"percent",invert:!0},OPP_OREB_PCT:{visible:!1,index:8,label:"OPP FTA",format:"percent",invert:!0}},c.columns=[],c.showCol)c.showCol[s].name=s,c.columns.push(c.showCol[s]);function l(){n.getStats(c)}function d(e,t,n){var a=i.getById(n);c.compare[e].tag=e,c.compare[e].opp=t,c.compare[e].info.PERSON_ID=a.id,c.compare[e].info.DISPLAY_FIRST_LAST=a.fn+" "+a.ln,c.compare[e].info.TEAM_NAME=a.tn,c.compare[e].info.TEAM_ID=a.tid,c.compare[e].info.TEAM_ABBREVIATION=a.ta,c.compare[e].setType="player"}function f(e,t,n){var a;c.compare[e].tag=e,c.compare[e].opp=t,c.compare[e].lineupChosen=n.split("~").map(function(e){var t={};return a=i.getById(e),t.PLAYER_ID=a.id,t.PLAYER=a.fn+" "+a.ln,t}),c.compare[e].setType="lineup"}c.$on("runit",function(e){for(var t in c.compare.isReady=!0,c.splits)c.params[t]=c.splits[t].selected.val;l()}),c.$watch("compare",function(){c.compare.isReady&&(c.params.PlayerID1=c.compare.left.lineupIDs[0]||c.params.PlayerID1,c.params.PlayerID2=c.compare.left.lineupIDs[1]||c.params.PlayerID2,c.params.PlayerID3=c.compare.left.lineupIDs[2]||c.params.PlayerID3,c.params.PlayerID4=c.compare.left.lineupIDs[3]||c.params.PlayerID4,c.params.PlayerID5=c.compare.left.lineupIDs[4]||c.params.PlayerID5,c.params.VsPlayerID1=c.compare.right.lineupIDs[0]||c.params.VsPlayerID1,c.params.VsPlayerID2=c.compare.right.lineupIDs[1]||c.params.VsPlayerID2,c.params.VsPlayerID3=c.compare.right.lineupIDs[2]||c.params.VsPlayerID3,c.params.VsPlayerID4=c.compare.right.lineupIDs[3]||c.params.VsPlayerID4,c.params.VsPlayerID5=c.compare.right.lineupIDs[4]||c.params.VsPlayerID5,c.params.TeamID=c.compare.left.team||c.params.PlayerTeamID,c.params.PlayerTeamID=c.compare.left.team||c.params.PlayerTeamID,c.params.VsTeamID=c.compare.right.team||c.params.VsTeamID,l(),c.splits=o.splits)},!0),c.$on("customFields",function(e,t){c.customFields=t}),c.$on("$locationChangeStart",function(){var e,t,n,a,i="?"+u.url().split("?")[1],r=u.search().PlayerID,s=u.search().VsPlayerID,o=u.search().LineupIDs,l=u.search().VsLineupIDs;(r||o||l)&&(c.brSearch="?"+u.url().split("?")[1],t=s,n=o,a=l,(e=r)&&t?(d("left","right",e),d("right","left",t)):n&&a&&(f("left","right",n),f("right","left",a)),c.noData=!0,c.noHTH=!0,c.noSBD=!0,c.noSBA=!0,h.resetSearchURL()),c.search="undefined"!==i.slice(1)?i:c.brSearch,c.$emit("onFourFactorsSearch",c.search)})}stats.controller("PlayerVsPlayerFourFactorsController",e),e.$inject=["$scope","$location","DeepLinksFactory","PlayersService","SeasonsService","SplitsService","VsPlayerVersusService"]}(),function(){function e(c,u,h,i,e,t,n){"use strict";var a=h.getSearchURL();c.$emit("onOnOffOpponent",{});var r,s=e.get("playerVsPlayerStats"),o=t.get([{name:"Season",initial:s.Season,seasonRange:u.search().seasonRange},{name:"SeasonType",initial:s.SeasonType,without:["All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"Month","VsConference","LastNGames","SeasonSegment","VsDivision","ShotClockRange","OpponentTeamID","GameSegment","Outcome","Location","Period","DateFrom","DateTo","PlusMinus","PaceAdjust","Rank"]);for(r in c.splits=o.splits,c.params=o.params,angular.extend(c.params,{MeasureType:"Opponent",PlayerID1:0,PlayerID2:0,PlayerID3:0,PlayerID4:0,PlayerID5:0,PlayerTeamID:a.PlayerTeamID||1,TeamID:u.search().VsTeamID,VsPlayerID1:0,VsPlayerID2:0,VsPlayerID3:0,VsPlayerID4:0,VsPlayerID5:0,VsTeamID:a.VsTeamID||1}),c.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},OPP_FGM:{visible:!1,index:1,label:"OPP FGM",format:"number",invert:!0},OPP_FGA:{visible:!1,index:2,label:"OPP FGA",format:"number",invert:!0},OPP_FG_PCT:{visible:!0,index:3,label:"OPP FG%",format:"percent",invert:!0},OPP_FG3M:{visible:!1,index:4,label:"OPP 3PM",format:"number",invert:!0},OPP_FG3A:{visible:!1,index:5,label:"OPP 3PA",format:"number",invert:!0},OPP_FG3_PCT:{visible:!0,index:6,label:"OPP 3P%",format:"percent",invert:!0},OPP_FTM:{visible:!1,index:7,label:"OPP FTM",format:"number",invert:!0},OPP_FTA:{visible:!1,index:8,label:"OPP FTA",format:"number",invert:!0},OPP_FT_PCT:{visible:!0,index:9,label:"OPP FT%",format:"percent",invert:!0},OPP_OREB:{visible:!1,index:10,label:"OPP OREB",format:"number",invert:!0},OPP_DREB:{visible:!1,index:11,label:"OPP DREB",format:"number",invert:!0},OPP_REB:{visible:!0,index:12,label:"OPP REB",format:"number",invert:!0},OPP_AST:{visible:!0,index:13,label:"OPP AST",format:"number",invert:!0},OPP_TOV:{visible:!1,index:14,label:"OPP TOV",format:"number",invert:!1},OPP_STL:{visible:!0,index:15,label:"OPP STL",format:"number",invert:!0},OPP_BLK:{visible:!0,index:16,label:"OPP BLK",format:"number",invert:!0},OPP_PF:{visible:!1,index:17,label:"OPP PF",format:"number",invert:!0},OPP_PTS:{visible:!1,index:18,label:"OPP PTS",format:"number",invert:!0}},c.columns=[],c.showCol)c.showCol[r].name=r,c.columns.push(c.showCol[r]);function l(){n.getStats(c)}function d(e,t,n){var a=i.getById(n);c.compare[e].tag=e,c.compare[e].opp=t,c.compare[e].info.PERSON_ID=a.id,c.compare[e].info.DISPLAY_FIRST_LAST=a.fn+" "+a.ln,c.compare[e].info.TEAM_NAME=a.tn,c.compare[e].info.TEAM_ID=a.tid,c.compare[e].info.TEAM_ABBREVIATION=a.ta,c.compare[e].setType="player"}function f(e,t,n){var a;c.compare[e].tag=e,c.compare[e].opp=t,c.compare[e].lineupChosen=n.split("~").map(function(e){var t={};return a=i.getById(e),t.PLAYER_ID=a.id,t.PLAYER=a.fn+" "+a.ln,t}),c.compare[e].setType="lineup"}c.$on("runit",function(e){for(var t in c.compare.isReady=!0,c.splits)c.params[t]=c.splits[t].selected.val;l()}),c.$watch("compare",function(){c.compare.isReady&&(c.params.PlayerID1=c.compare.left.lineupIDs[0]||c.params.PlayerID1,c.params.PlayerID2=c.compare.left.lineupIDs[1]||c.params.PlayerID2,c.params.PlayerID3=c.compare.left.lineupIDs[2]||c.params.PlayerID3,c.params.PlayerID4=c.compare.left.lineupIDs[3]||c.params.PlayerID4,c.params.PlayerID5=c.compare.left.lineupIDs[4]||c.params.PlayerID5,c.params.VsPlayerID1=c.compare.right.lineupIDs[0]||c.params.VsPlayerID1,c.params.VsPlayerID2=c.compare.right.lineupIDs[1]||c.params.VsPlayerID2,c.params.VsPlayerID3=c.compare.right.lineupIDs[2]||c.params.VsPlayerID3,c.params.VsPlayerID4=c.compare.right.lineupIDs[3]||c.params.VsPlayerID4,c.params.VsPlayerID5=c.compare.right.lineupIDs[4]||c.params.VsPlayerID5,c.params.TeamID=c.compare.left.team||c.params.PlayerTeamID,c.params.PlayerTeamID=c.compare.left.team||c.params.PlayerTeamID,c.params.VsTeamID=c.compare.right.team||c.params.VsTeamID,l(),c.splits=o.splits)},!0),c.$on("customFields",function(e,t){c.customFields=t}),c.$on("$locationChangeStart",function(){var e,t,n,a,i="?"+u.url().split("?")[1],r=u.search().PlayerID,s=u.search().VsPlayerID,o=u.search().LineupIDs,l=u.search().VsLineupIDs;(r||o||l)&&(c.brSearch="?"+u.url().split("?")[1],t=s,n=o,a=l,(e=r)&&t?(d("left","right",e),d("right","left",t)):n&&a&&(f("left","right",n),f("right","left",a)),c.noData=!0,c.noHTH=!0,c.noSBD=!0,c.noSBA=!0,h.resetSearchURL()),c.search="undefined"!==i.slice(1)?i:c.brSearch,c.$emit("onOpponentSearch",c.search)})}stats.controller("PlayerVsPlayerOpponentController",e),e.$inject=["$scope","$location","DeepLinksFactory","PlayersService","SeasonsService","SplitsService","VsPlayerVersusService"]}(),function(){function e(n,e,t,a,i,r){"use strict";var s=a.getSearchURL(),o=!!s.LineupIDs,l=[],c=[],u=[],h=[];o&&(l=s.LineupIDs.split("~"),c=s.PlayerNames.split("~"),u=s.VsLineupIDs.split("~"),h=s.VsPlayerNames.split("~"));var d,f=r.get("playerVsPlayerStats"),p=t.get([{name:"Season",initial:f.Season,seasonRange:e.search().range},{name:"SeasonType",initial:f.SeasonType,without:["All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"Month","VsConference","LastNGames","SeasonSegment","VsDivision","ShotClockRange","OpponentTeamID","GameSegment","Outcome","Location","Period","DateFrom","DateTo","PlusMinus","PaceAdjust","Rank"]);for(d in n.splits=p.splits,n.params=p.params,angular.extend(n.params,{MeasureType:"Misc",PerMode:s.PerMode||"PerGame",PlayerID1:l[0]||0,PlayerID2:l[1]||0,PlayerID3:l[2]||0,PlayerID4:l[3]||0,PlayerID5:l[4]||0,PlayerTeamID:s.PlayerTeamID||1,TeamID:e.search().VsTeamID,VsPlayerID1:u[0]||0,VsPlayerID2:u[1]||0,VsPlayerID3:u[2]||0,VsPlayerID4:u[3]||0,VsPlayerID5:u[4]||0,VsTeamID:s.VsTeamID||1}),o&&(n.compare.left.lineupIDs=l.map(function(e){return e}),n.compare.right.lineupIDs=u.map(function(e){return e}),n.compare.left.lineupIDs.forEach(function(e,t){n.compare.left.lineupChosen[t]={PLAYER_ID:e,PLAYER:c[t]}}),n.compare.right.lineupIDs.forEach(function(e,t){n.compare.right.lineupChosen[t]={PLAYER_ID:e,PLAYER:h[t]}}),n.compare.left.lineup=n.compare.left.lineupIDs,n.compare.right.lineup=n.compare.right.lineupIDs,n.compare.left.type=n.compare.right.type="lineup",m()),n.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},PTS_OFF_TOV:{visible:!0,index:1,label:"PTS OFF TOV",format:"number",invert:!1},PTS_2ND_CHANCE:{visible:!0,index:2,label:"PTS 2ND CHANCE",format:"number",invert:!1},PTS_FB:{visible:!0,index:3,label:"PTS FB",format:"number",invert:!1},PTS_PAINT:{visible:!1,index:4,label:"PTS PAINT",format:"number",invert:!1},OPP_PTS_OFF_TOV:{visible:!1,index:5,label:"OPP PTS OFF TOV",format:"number",invert:!0},OPP_PTS_2ND_CHANCE:{visible:!1,index:6,label:"OPP PTS 2ND CHANCE",format:"number",invert:!0},OPP_PTS_FB:{visible:!1,index:7,label:"OPP PTS FB",format:"number",invert:!0},OPP_PTS_PAINT:{visible:!0,index:8,label:"OPP PTS PAINT",format:"number",invert:!0},BLK:{visible:!1,index:9,label:"BLK",format:"number",invert:!1},BLKA:{visible:!1,index:10,label:"BLKA",format:"number",invert:!0},PF:{visible:!1,index:11,label:"PF",format:"number",invert:!0},PFD:{visible:!1,index:12,label:"PFD",format:"number",invert:!0}},n.columns=[],n.showCol)n.showCol[d].name=d,n.columns.push(n.showCol[d]);function m(){i.getStats(n)}n.$on("runit",function(e){for(var t in n.compare.isReady=!0,n.splits)n.params[t]=n.splits[t].selected.val;m()}),n.$watch("compare",function(){n.compare.isReady&&(n.params.PlayerID1=n.compare.left.lineupIDs[0]||n.params.PlayerID1,n.params.PlayerID2=n.compare.left.lineupIDs[1]||n.params.PlayerID2,n.params.PlayerID3=n.compare.left.lineupIDs[2]||n.params.PlayerID3,n.params.PlayerID4=n.compare.left.lineupIDs[3]||n.params.PlayerID4,n.params.PlayerID5=n.compare.left.lineupIDs[4]||n.params.PlayerID5,n.params.VsPlayerID1=n.compare.right.lineupIDs[0]||n.params.VsPlayerID1,n.params.VsPlayerID2=n.compare.right.lineupIDs[1]||n.params.VsPlayerID2,n.params.VsPlayerID3=n.compare.right.lineupIDs[2]||n.params.VsPlayerID3,n.params.VsPlayerID4=n.compare.right.lineupIDs[3]||n.params.VsPlayerID4,n.params.VsPlayerID5=n.compare.right.lineupIDs[4]||n.params.VsPlayerID5,n.params.TeamID=n.compare.left.team||n.params.PlayerTeamID,n.params.PlayerTeamID=n.compare.left.team||n.params.PlayerTeamID,n.params.VsTeamID=n.compare.right.team||n.params.VsTeamID,m(),n.splits=p.splits)},!0),n.$on("customFields",function(e,t){n.customFields=t})}stats.controller("PlayerVsPlayerMiscController",e),e.$inject=["$scope","$location","SplitsService","DeepLinksFactory","VsPlayerVersusService","SeasonsService"]}(),function(){function e(n,e,t,a,i,r){"use strict";var s=a.getSearchURL(),o=!!s.LineupIDs,l=[],c=[],u=[],h=[];o&&(l=s.LineupIDs.split("~"),c=s.PlayerNames.split("~"),u=s.VsLineupIDs.split("~"),h=s.VsPlayerNames.split("~"));var d,f=r.get("playerVsPlayerStats"),p=t.get([{name:"Season",initial:f.Season,seasonRange:e.search().range},{name:"SeasonType",initial:f.SeasonType,without:["All Star"]},"PerMode","Month","VsConference","LastNGames","SeasonSegment","VsDivision","ShotClockRange","OpponentTeamID","GameSegment","Outcome","Location","Period","DateFrom","DateTo","PlusMinus","PaceAdjust","Rank"]);for(d in n.splits=p.splits,n.params=p.params,angular.extend(n.params,{MeasureType:"Scoring",PerMode:s.PerMode||"PerGame",PlayerID1:l[0]||0,PlayerID2:l[1]||0,PlayerID3:l[2]||0,PlayerID4:l[3]||0,PlayerID5:l[4]||0,PlayerTeamID:s.PlayerTeamID||1,TeamID:e.search().VsTeamID,VsPlayerID1:u[0]||0,VsPlayerID2:u[1]||0,VsPlayerID3:u[2]||0,VsPlayerID4:u[3]||0,VsPlayerID5:u[4]||0,VsTeamID:s.VsTeamID||1}),o&&(n.compare.left.lineupIDs=l.map(function(e){return e}),n.compare.right.lineupIDs=u.map(function(e){return e}),n.compare.left.lineupIDs.forEach(function(e,t){n.compare.left.lineupChosen[t]={PLAYER_ID:e,PLAYER:c[t]}}),n.compare.right.lineupIDs.forEach(function(e,t){n.compare.right.lineupChosen[t]={PLAYER_ID:e,PLAYER:h[t]}}),n.compare.left.lineup=n.compare.left.lineupIDs,n.compare.right.lineup=n.compare.right.lineupIDs,n.compare.left.type=n.compare.right.type="lineup",m()),n.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},PCT_FGA_2PT:{visible:!1,index:1,label:"% FGA 2PT",format:"percent",invert:!1},PCT_FGA_3PT:{visible:!1,index:2,label:"% FGA 3PT",format:"percent",invert:!1},PCT_PTS_2PT:{visible:!1,index:3,label:"% PTS 2PT",format:"percent",invert:!1},PCT_PTS_2PT_MR:{visible:!0,index:4,label:"% PTS 2PT MR",format:"percent",invert:!1},PCT_PTS_3PT:{visible:!0,index:5,label:"% PTS 3PT",format:"percent",invert:!1},PCT_PTS_FB:{visible:!0,index:6,label:"% PTS FB",format:"percent",invert:!1},PCT_PTS_FT:{visible:!0,index:7,label:"% PTS FT",format:"percent",invert:!1},PCT_PTS_OFF_TOV:{visible:!1,index:8,label:"% PTS OFF TOV",format:"percent",invert:!1},PCT_PTS_PAINT:{visible:!0,index:9,label:"% PTS PAINT",format:"percent",invert:!1},PCT_AST_2PM:{visible:!1,index:10,label:"% AST 2PM",format:"percent",invert:!1},PCT_UAST_2PM:{visible:!1,index:11,label:"% UAST 2PM",format:"percent",invert:!1},PCT_AST_3PM:{visible:!1,index:12,label:"% AST 3PM ",format:"percent",invert:!1},PCT_UAST_3PM:{visible:!1,index:13,label:"% UAST 3PM",format:"percent",invert:!1},PCT_AST_FGM:{visible:!1,index:14,label:"% AST FGM",format:"percent",invert:!1},PCT_UAST_FGM:{visible:!1,index:15,label:"% UAST FGM",format:"percent",invert:!1}},n.columns=[],n.showCol)n.showCol[d].name=d,n.columns.push(n.showCol[d]);function m(){i.getStats(n)}n.$on("runit",function(e){for(var t in n.compare.isReady=!0,n.splits)n.params[t]=n.splits[t].selected.val;m()}),n.$watch("compare",function(){n.compare.isReady&&(n.params.PlayerID1=n.compare.left.lineupIDs[0]||n.params.PlayerID1,n.params.PlayerID2=n.compare.left.lineupIDs[1]||n.params.PlayerID2,n.params.PlayerID3=n.compare.left.lineupIDs[2]||n.params.PlayerID3,n.params.PlayerID4=n.compare.left.lineupIDs[3]||n.params.PlayerID4,n.params.PlayerID5=n.compare.left.lineupIDs[4]||n.params.PlayerID5,n.params.VsPlayerID1=n.compare.right.lineupIDs[0]||n.params.VsPlayerID1,n.params.VsPlayerID2=n.compare.right.lineupIDs[1]||n.params.VsPlayerID2,n.params.VsPlayerID3=n.compare.right.lineupIDs[2]||n.params.VsPlayerID3,n.params.VsPlayerID4=n.compare.right.lineupIDs[3]||n.params.VsPlayerID4,n.params.VsPlayerID5=n.compare.right.lineupIDs[4]||n.params.VsPlayerID5,n.params.TeamID=n.compare.left.team||n.params.PlayerTeamID,n.params.PlayerTeamID=n.compare.left.team||n.params.PlayerTeamID,n.params.VsTeamID=n.compare.right.team||n.params.VsTeamID,m(),n.splits=p.splits)},!0),n.$on("customFields",function(e,t){n.customFields=t})}stats.controller("PlayerVsPlayerScoringController",e),e.$inject=["$scope","$location","SplitsService","DeepLinksFactory","VsPlayerVersusService","SeasonsService"]}(),function(){function e(n,e,t,a,i,r){"use strict";var s=a.getSearchURL(),o=!!s.LineupIDs,l=[],c=[],u=[],h=[];o&&(l=s.LineupIDs.split("~"),c=s.PlayerNames.split("~"),u=s.VsLineupIDs.split("~"),h=s.VsPlayerNames.split("~"));var d,f=r.get("playerVsPlayerStats"),p=t.get([{name:"Season",initial:f.Season,seasonRange:e.search().seasonRange},{name:"SeasonType",initial:f.SeasonType,without:["All Star"]},{name:"PerMode",include:[{val:"Per100Possessions",text:"Per 100 Poss"},{val:"Per100Plays",text:"Per 100 Plays"},{val:"Per48",text:"Per 48 Minutes"},{val:"Per40",text:"Per 40 Minutes"},{val:"Per36",text:"Per 36 Minutes"},{val:"PerMinute",text:"Per 1 Minute"},{val:"PerPossession",text:"Per 1 Poss"},{val:"PerPlay",text:"Per 1 Play"},{val:"MinutesPer",text:"Minutes Per"}]},"Month","VsConference","LastNGames","SeasonSegment","VsDivision","ShotClockRange","OpponentTeamID","GameSegment","Outcome","Location","Period","StatCategory","DateFrom","DateTo","PlusMinus","PaceAdjust","Rank"]);for(d in n.splits=p.splits,n.params=p.params,angular.extend(n.params,{MeasureType:"Base",PerMode:s.PerMode||"PerGame",PlayerID1:l[0]||0,PlayerID2:l[1]||0,PlayerID3:l[2]||0,PlayerID4:l[3]||0,PlayerID5:l[4]||0,PlayerTeamID:s.PlayerTeamID||1,TeamID:e.search().VsTeamID,VsPlayerID1:u[0]||0,VsPlayerID2:u[1]||0,VsPlayerID3:u[2]||0,VsPlayerID4:u[3]||0,VsPlayerID5:u[4]||0,VsTeamID:s.VsTeamID||1}),o&&(n.compare.left.lineupIDs=l.map(function(e){return e}),n.compare.right.lineupIDs=u.map(function(e){return e}),n.compare.left.lineupIDs.forEach(function(e,t){n.compare.left.lineupChosen[t]={PLAYER_ID:e,PLAYER:c[t]}}),n.compare.right.lineupIDs.forEach(function(e,t){n.compare.right.lineupChosen[t]={PLAYER_ID:e,PLAYER:h[t]}}),n.compare.left.lineup=n.compare.left.lineupIDs,n.compare.right.lineup=n.compare.right.lineupIDs,n.compare.left.type=n.compare.right.type="lineup",m()),n.showCol={MIN:{visible:!1,index:0,label:"MIN",format:"number",invert:!1},FGM:{visible:!1,index:1,label:"FGM",format:"number",invert:!1},FGA:{visible:!1,index:2,label:"FGA",format:"number",invert:!1},FG_PCT:{visible:!1,index:3,label:"FG%",format:"percent",invert:!1},FG3M:{visible:!1,index:4,label:"3PM",format:"number",invert:!1},FG3A:{visible:!1,index:5,label:"3PA",format:"number",invert:!1},FG3_PCT:{visible:!1,index:6,label:"3P%",format:"percent",invert:!1},FTM:{visible:!1,index:7,label:"FTM",format:"number",invert:!1},FTA:{visible:!1,index:8,label:"FTA",format:"number",invert:!1},FT_PCT:{visible:!1,index:9,label:"FT%",format:"percent",invert:!1},OREB:{visible:!1,index:10,label:"OREB",format:"number",invert:!1},DREB:{visible:!1,index:11,label:"DREB",format:"number",invert:!1},REB:{visible:!0,index:12,label:"REB",format:"number",invert:!1},AST:{visible:!0,index:13,label:"AST",format:"number",invert:!1},TOV:{visible:!1,index:14,label:"TOV",format:"number",invert:!0},STL:{visible:!0,index:15,label:"STL",format:"number",invert:!1},BLK:{visible:!0,index:16,label:"BLK",format:"number",invert:!1},PF:{visible:!1,index:17,label:"PF",format:"number",invert:!1},PTS:{visible:!0,index:18,label:"PTS",format:"number",invert:!1}},n.columns=[],n.showCol)n.showCol[d].name=d,n.columns.push(n.showCol[d]);function m(){i.getStats(n)}n.$on("runit",function(e){for(var t in n.compare.isReady=!0,n.splits)n.params[t]=n.splits[t].selected.val;m()}),n.$watch("compare",function(){n.compare.isReady&&(n.params.PlayerID1=n.compare.left.lineupIDs[0]||n.params.PlayerID1,n.params.PlayerID2=n.compare.left.lineupIDs[1]||n.params.PlayerID2,n.params.PlayerID3=n.compare.left.lineupIDs[2]||n.params.PlayerID3,n.params.PlayerID4=n.compare.left.lineupIDs[3]||n.params.PlayerID4,n.params.PlayerID5=n.compare.left.lineupIDs[4]||n.params.PlayerID5,n.params.VsPlayerID1=n.compare.right.lineupIDs[0]||n.params.VsPlayerID1,n.params.VsPlayerID2=n.compare.right.lineupIDs[1]||n.params.VsPlayerID2,n.params.VsPlayerID3=n.compare.right.lineupIDs[2]||n.params.VsPlayerID3,n.params.VsPlayerID4=n.compare.right.lineupIDs[3]||n.params.VsPlayerID4,n.params.VsPlayerID5=n.compare.right.lineupIDs[4]||n.params.VsPlayerID5,n.params.TeamID=n.compare.left.team||n.params.PlayerTeamID,n.params.PlayerTeamID=n.compare.left.team||n.params.PlayerTeamID,n.params.VsTeamID=n.compare.right.team||n.params.VsTeamID,m(),n.splits=p.splits)},!0),n.$on("customFields",function(e,t){n.customFields=t})}stats.controller("PlayerVsPlayerBaseController",e),e.$inject=["$scope","$location","SplitsService","DeepLinksFactory","VsPlayerVersusService","SeasonsService"]}(),function(){function e(i,r,s,e){i.$watch("playerId",t),i.$watch("teamId",t),i.$watch("season",t),r.addClass("player-img").on("error",function(){o?(o=!1,r.attr("src",l.base)):r.attr("src",l.fallback).attr("srcset","").addClass("not-found")});var o=!1,l={};function t(){var e,t,n,a;i.playerId&&(e=i.playerId,t=i.teamId,n=i.season,o=!!n,a=s.getById(e)||{},l={season:"https://ak-static.cms.nba.com/wp-content/uploads/headshots/nba/"+t+"/"+n+"/260x190/"+e+".png",base:"https://ak-static.cms.nba.com/wp-content/uploads/headshots/nba/latest/260x190/"+e+".png",fallback:"https://ak-static.cms.nba.com/wp-content/uploads/headshots/nba/latest/260x190/logoman.png"},r.attr("src",o?l.season:l.base).attr("alt",a.fn+" "+a.ln).attr("title",a.fn+" "+a.ln))}}stats.directive("playerHeadshot",function(){return{restrict:"A",scope:{playerId:"@",teamId:"@",season:"@"},controller:e}}),e.$inject=["$scope","$element","PlayersService","TeamsService"]}(),function(){function e(i,r,s,e){i.$watch("playerId",t),i.$watch("teamId",t),i.$watch("season",t),r.addClass("player-silo").on("error",function(){o?(o=!1,r.attr("src",l.base)):r.attr("src",l.fallback).attr("srcset","").addClass("not-found")});var o=!1,l={};function t(){var e,t,n,a;i.playerId&&(e=i.playerId,t=i.teamId,n=i.season,a=s.getById(e),o=!!n,l={season:"https://ak-static.cms.nba.com/wp-content/uploads/silos/nba/"+t+"/"+n+"/440x700/"+e+".png",base:"https://ak-static.cms.nba.com/wp-content/uploads/silos/nba/latest/440x700/"+i.playerId+".png",fallback:"https://ak-static.cms.nba.com/wp-content/uploads/silos/nba/latest/440x700/no-silo.png"},r.attr("src",o?l.season:l.base).attr("alt",a.fn+" "+a.ln).attr("title",a.fn+" "+a.ln))}}stats.directive("playerSilo",function(){return{restrict:"A",scope:{playerId:"@",teamId:"@",season:"@"},controller:e}}),e.$inject=["$scope","$element","PlayersService"]}(),function(){function e(a,i,r){a.$watch("abbr",e),a.$watch("season",e);var s={root:"/stats/media/img/teams/logos/",fallback:"/stats/media/img/teams/logos/NBA_logo.svg"},o={base:"",season:""},l=!1;function e(){var e,t=a.abbr,n=a.season;t&&(e=r.getByAbbr(t),l=!!n,s.season=[s.root,"season/",n,"/",t,"_logo.svg"].join(""),s.base=[s.root,t,"_logo.svg"].join(""),e&&(o.season=[n," ",e.city," ",e.name," logo"].join(""),o.base=[e.city," ",e.name," logo"].join("")),i.attr("src",l?s.season:s.base).attr("alt",l?o.season:o.base).attr("title",l?o.season:o.base))}i.addClass("team-img").attr("type","image/svg+xml").attr("src",s.fallback).on("error",function(){l?(l=!1,i.attr("src",s.base).attr("alt",o.base).attr("title",o.base)):i.attr("src",s.fallback)})}stats.directive("teamLogo",function(){return{restrict:"A",scope:{abbr:"@",season:"@"},controller:e}}),e.$inject=["$scope","$element","TeamsService"]}(),function(){function e(r,e){r.chart={width:590,height:730,barchartMaxHeight:220,barchartWidth:30},r.isLoading=!0,r.getStatTotalHeight=function(e){return e/r.chart.maxValue*r.chart.barchartMaxHeight},r.responsiveOptions={min:300,max:1140},r.categories=["PTS","REB","AST","BLK","STL","TOV"],r.$watch("stats",function(e){if(!e)return;r.chart.maxValue=function(e){var t,n=0;for(t in r.categories){var a=r.categories[t],i=Math.max(e.vtm.player[a],e.htm.player[a]);n=n<i?i:n}return n}(e),r.isLoading=!1},!0)}stats.directive("statsFanduelChart",function(){return{restrict:"AE",replace:!1,scope:{stats:"="},templateUrl:"/stats/templates/angular/charts/stats-fanduel-chart.html",controller:e}}),e.$inject=["$scope","$filter"]}(),function(){function e(i){i.svg={height:550,width:1140},i.chart={padding:{bottom:120,left:60,right:40,top:20}},i.responsiveOptions={min:300,max:1140},i.chart.height=i.svg.height-(i.chart.padding.bottom+i.chart.padding.top),i.chart.width=i.svg.width-(i.chart.padding.left+i.chart.padding.right),i.$watch("gameSummary",function(e){if(!e||!e.events)return;var t=function(e){var t,n=0;for(t in e)n=Math.abs(e[t].HOME_SCORE_MARGIN)>n?Math.abs(e[t].HOME_SCORE_MARGIN):n;return n+10-(n+10)%10}((i.summary=e).events),n=e.events.slice(-1)[0].PERIOD,a=function(e){return e<=4?720*e:2880+300*(e-4)}(n);i.xAxis=function(e,t){for(var n=[],a=t/(48+5*(e-4)),i=0;i<e;i+=1){var r,s={period:i+1};e<=4||4<e&&i<4?(s.x=i*a*12,s.text="Q"+s.period):4<e&&4<=i&&(r=s.period-4,s.x=4*a*12+(r-1)*a*5,s.text="OT"+r),n.push(s)}return n}(n,i.chart.width),i.yAxisMargin=function(e,t){for(var n,a=[],i=t/(e/5*2),r=e;-e<=r;r-=5){var s={text:Math.abs(r)};a.push(s)}for(n in a)a[n].y=n*i;return a}(t,i.chart.height),i.eventData=function(e,t,n,a,i){var r,s=a/2,o=t/n,l=s/i,c=[{e:null,x:0,y:s}],u=[{e:null,x:0,y:s}],h=[{e:null,x:0,y:s}],d={htm:0,vtm:0};for(r in e){var f=e[r],p=function(e,t,n){var a=0;a=e<=4?720*(e-1)+(720-t):2880+300*(e-5)+(300-t);return a*n}(f.PERIOD,f.SECONDS_REMAINING,o);d.htm=f.HOME_PTS,d.vtm=f.VISITOR_PTS,c.push({e:f,f:"h"==f.LOCATION,x:p,y:Math.max(f.HOME_SCORE_MARGIN*l,0)+s,z:f.HOME_SCORE_MARGIN*l+s}),u.push({e:f,f:"v"==f.LOCATION,x:p,y:-1*Math.max(-1*f.HOME_SCORE_MARGIN*l,0)+s,z:f.HOME_SCORE_MARGIN*l+s}),h.push({e:f,x:p,y:(f.HOME_PCT-.5)*a+s})}return c.push({e:null,x:t,y:s}),u.push({e:null,x:t,y:s}),h.push({e:null,x:t,y:s}),{htm:c,vtm:u,pct:h}}(e.events,i.chart.width,a,i.chart.height,t),i.htmPath=r(i.eventData.htm,i.chart.height,i.chart.width),i.vtmPath=r(i.eventData.vtm,i.chart.height,i.chart.width)},!0)}function r(e,t,n){var a,i="M0 "+t/2;for(a in e){var r=e[a];i+=" H"+r.x.toFixed(1)+" V"+r.y.toFixed(1)}return i+=" H"+n+" V"+t/2+" Z"}stats.directive("statsGameFlow",function(){return{restrict:"E",transclude:!1,templateUrl:"/stats/templates/angular/charts/stats-game-flow.html",scope:{gameSummary:"="},controller:e}}),e.$inject=["$scope"]}(),function(){function e(t,e){t.chart={width:800,height:700,padding:{left:90,right:90,top:30,bottom:20},group:{height:50,labelWidth:100,padding:{top:20}}},t.chart.maxRectWidth=280,t.isLoading=!0,t.responsiveOptions={min:300,max:1140},t.$watch("stats",function(e){if(!e)return;t.isLoading=!1},!0)}stats.directive("statsGameRotationsChart",function(){return{restrict:"E",replace:!1,scope:{stats:"="},templateUrl:"/stats/templates/angular/charts/stats-head-to-head-chart.html",controller:e}}),e.$inject=["$scope","$filter"]}(),function(){function e(t,e){t.chart={width:800,height:700,padding:{left:90,right:90,top:30,bottom:20},group:{height:50,labelWidth:100,padding:{top:20}}},t.chart.maxRectWidth=280,t.isLoading=!0,t.getStatTotal=function(e){if(isNaN(e))return 0;return e/t.chart.maxValue*t.chart.maxRectWidth},t.getFormattedStat=function(e,t){if(isNaN(e))return"-";if(-1<t.indexOf("%"))return e.toFixed(1);return e},t.responsiveOptions={min:300,max:1140},t.$watch("stats",function(e){if(!e)return;t.chart.maxValue=function(e){var t,n=0;for(t in e){var a=e[t],i=Math.max(a.vtm||0,a.htm||0);n=n<i?i:n}return n}(e),t.isLoading=!1},!0)}stats.directive("statsHeadToHeadChart",function(){return{restrict:"AE",replace:!1,scope:{stats:"=",vtm:"=",htm:"="},templateUrl:"/stats/templates/angular/charts/stats-head-to-head-chart.html",controller:e}}),e.$inject=["$scope","$filter"]}(),function(){function e(n,e,g,t,a){e.addClass("stats-lead-tracker");var v=e.find("canvas").get(0).getContext("2d");n.height=600,n.width=1600;var i,y,_,r={left:80,top:50,right:20,bottom:50},s=n.height-(r.top+r.bottom),o=n.width-(r.left+r.right),l=s/2,c=o/2,u=!1,h="",d="",b=1,S=1,T={};function f(t){a.get(h,d,t).then(function(e){e.forEach(function(e){e.per=t,e.points=+e.points}),T[t]={per:t,plays:e},function(){if(Object.keys(T).length!=S)return;var f=g("range")(1,S).reduce(function(e,t){return e.concat(T[t].plays)},[]);S=Math.max(S,4);var e=function(e){var t,n=0;for(t in e)n=Math.max(e[t].points,n);var a=n+10-(n+10)%10;return Math.max(a,20)}(f),t=function(e){return e<=4?720*e:2880+300*(e-4)}(S);v.clearRect(0,0,o+r.left+r.right,s+r.top+r.bottom),v.fillStyle="#333333",v.font="bold 42px Roboto Condensed",v.fill(),v.textAlign="center",v.fillText(n.title,c+r.left,40),v.save(),v.translate(r.left,r.top),v.rect(0,0,o,s),v.lineWidth=1,v.strokeStyle="#7a7a7a",v.fillStyle="#f2f2f2",v.font="bold 48px Roboto Condensed",v.fill(),v.stroke();var a=function(e,t){for(var n=[],a=t/(48+5*(e-4)),i=0;i<e;i+=1){var r,s={period:i+1};e<=4||4<e&&i<4?(s.x=i*a*12,s.text="Q"+s.period):4<e&&4<=i&&(r=s.period-4,s.x=4*a*12+(r-1)*a*5,s.text="OT"+r),n.push(s)}return n}(S,o);v.fillStyle="#454545",a.forEach(function(e,t){var n=(n=a[t+1])||{x:o};v.fillStyle="#9a9a9a",v.strokeStyle="#9a9a9a",v.textAlign="right",v.fillText(e.text,n.x-12,s-15),v.beginPath(),v.moveTo(Math.round(e.x),0),v.lineTo(Math.round(e.x),s),v.closePath(),v.stroke()}),function(e,t){for(var n,a=[],i=t/(e/5*2),r=e;-e<=r;r-=5){var s={text:Math.abs(r)};a.push(s)}for(n in a)a[n].y=n*i;return a}(e,s).forEach(function(e){v.save(),v.translate(0,Math.round(e.y)),v.fillStyle="#454545",v.textAlign="right",v.font="bold 32px Roboto Condensed",v.fillText(e.text,-20,12),v.beginPath(),v.setLineDash([4,8]),v.moveTo(0,0),v.lineTo(o,0),v.closePath(),v.stroke(),v.beginPath(),v.setLineDash([]),v.moveTo(-10,0),v.lineTo(0,0),v.closePath(),v.stroke(),v.restore()}),v.fillStyle="#333333",v.font="bold 42px Roboto Condensed",v.fill(),v.textAlign="left",v.fillText(y.abbr,10,42),v.fillStyle="#333333",v.font="bold 42px Roboto Condensed",v.fill(),v.textAlign="left",v.fillText(_.abbr,10,s-10),v.beginPath(),v.moveTo(0,l),v.lineTo(o,l),v.closePath(),v.stroke(),v.save(),v.rect(0,0,o,s),v.strokeStyle="#7a7a7a",v.stroke(),v.restore();_.color,y.color;var p=o/t,m=l/e;v.save(),v.translate(0,Math.round(l)),v.lineWidth=p,f.forEach(function(e,t){var n,a,i,r,s,o=t===f.length-1,l=0===e.points,c=o?{clock:"00:00",per:S}:f[t+1],u=o&&2==b?0:e.points,h="#000000",d=1;l||(e.leadTeamId==y.id?(h=y.color,d=-1):e.leadTeamId==_.id&&(h=_.color,d=1),n=g("decimalTime")(e.per,e.clock),a=g("decimalTime")(c.per,c.clock),i=n*p/10,r=a*p/10,s=u*m,v.beginPath(),v.fillStyle=h,v.strokeStyle=h,v.fillRect(i,0,r-i,s*d),v.strokeRect(i,0,r-i,s*d),v.stroke(),v.closePath())}),v.restore(),v.textAlign="right",v.font="42px Roboto Condensed",v.fillText("NBA.com/Stats",o,s+42),v.restore()}()})}n.$watch("gameid",function(){if(u=!1,!n.gameid||!n.date)return;h=n.gameid,d=n.date,b=+n.state,S=+n.period,y=n.vtm,_=n.htm,n.title,1<b&&g("range")(1,S).forEach(f);2===b&&(t.cancel(i),i=t(f.bind("",S),1e4));3===b&&t.cancel(i);u=!0}),n.$watch("period",function(e){e=+e,u&&1<e&&f(S-1);S=e}),n.$watch("state",function(e){b=+e,u&&!(2===b)&&f(S)})}stats.directive("statsLeadTracker",function(){return{restrict:"E",template:'<canvas height="{{ height }}" width="{{ width }}" filename="{{ title }}.png"></canvas>',scope:{date:"@",gameid:"@",state:"@",period:"@",title:"@",vtm:"=",htm:"="},controller:e}}),e.$inject=["$scope","$element","$filter","$interval","MobileLeadTrackerService"]}(),function(){function e(t,e){t.$watch("stats",function(e){if(!e)return;t.isLoading=!1},!0)}stats.directive("statsLineupsChart",function(){return{restrict:"E",replace:!1,scope:{stats:"="},controller:e}}),e.$inject=["$scope","$filter"]}(),function(){function e(i,e){i.width=1140,i.height=920,i.paddingTop=200,i.chartHeight=i.height-i.paddingTop,i.isLoading=!0,i.stats=[],i.getArcPath=function(e,t,n,a,i){var r=u(e,t,n,i),s=u(e,t,n,a),o=i-a<=180?"0":"1";return["M",e,t,"L",r.x,r.y,"A",n,n,0,o,0,s.x,s.y,"Z"].join(" ")},i.responsiveOptions={min:300,max:1140};for(var t=["REB","BLK","AST","PTS"],n=["vtm","htm"],a=360/(t.length*n.length),r=0;r<t.length;++r)for(var s=0;s<n.length;++s){var o=r*n.length+s,l={cat:t[r],type:n[s],index:o,angle:o*a,rads:(o*a-90+a/2)*Math.PI/180,line:{len:350},side:180<o*a+a/2?"left":"right"};i.stats.push(l)}function c(e){return e.value}function u(e,t,n,a){var i=(a-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}}i.$watch("linescores",function(e){if(!e)return;i.stats.forEach(function(e,t){var n=t.cat,a=t.type,i=e[a].players;t.team=e[a];var r=i.reduce(function(e,t){return e&&e[n]&&(!t||!t[n]||e[n]>=t[n])?e:t});t.value=r[n],t.player=r,t.value||(t.value=0)}.bind(null,e));var t=i.stats.map(c),n=Math.max.apply(Math,t),a=210/n;i.stats.forEach(function(e,t,n){n.radius=e*n.value+t,n.cx=n.radius*Math.cos(n.rads),n.cy=n.radius*Math.sin(n.rads),n.line.x=n.line.len*Math.cos(n.rads),n.line.y=n.line.len*Math.sin(n.rads),n.left="left"===n.side?-140:0}.bind(null,a,90)),i.isLoading=!1},!0)}stats.directive("statsRoseChart",function(){return{restrict:"AE",replace:!1,scope:{linescores:"="},templateUrl:"/stats/templates/angular/charts/stats-rose-chart.html",controller:e}}),e.$inject=["$scope","$filter"]}(),function(){function e(d){d.padding={left:50,right:50,top:50},d.size=300,d.half=d.size/2,d.innerRadius=70,d.statRadius=40,d.responsiveOptions={min:80,max:400},d.$watch("stat",function(e){if(!e)return;var t=e.vtm.value+e.htm.value,n=e.htm.value/t*100,a=2*Math.PI/100,i=n*a,r=d.half,s=r+Math.sin(0)*r,o=r-Math.cos(0)*r,l=r+Math.sin(i)*r,c=r-Math.cos(i)*r,u=i>Math.PI?1:0,h=["M ",r,",",r," L ",s,",",o," A ",r,",",r," 0 ",u," 1 ",l,",",c," Z"].join("");d.path=h},!0)}stats.directive("statsSvgDonutChart",function(){return{restrict:"E",templateUrl:"/stats/templates/angular/charts/stats-svg-donut-chart.html",scope:{stat:"="},controller:e}}),e.$inject=["$scope"]}(),function(){function e(t){function e(){t.x=+t.x,t.y=+t.y,t.left="left"===t.side?-1*t.width:0}t.width=140,t.left=0,t.headshotHeight=113,t.rectHeight=52,t.height=t.headshotHeight+t.rectHeight,t.$watch("playerName",function(e){e&&(t.firstName=e.match(/([a-zA-Z\-.]+)(.*)/)[1].toUpperCase(),t.lastName=e.match(/([a-zA-Z\-.]+)(.*)/)[2].toUpperCase())}),t.$watch("side",e),t.$watch("x",e),t.$watch("y",e)}stats.directive("statsSvgHeadshot",function(){return{restrict:"AE",replace:!1,scope:{playerId:"@",playerName:"@",teamAbbr:"@",color:"@",x:"@",y:"@",side:"@"},templateUrl:"/stats/templates/angular/charts/stats-svg-headshot.html",controller:e}}),e.$inject=["$scope"]}(),function(){function e(r,s){function e(e){var t=+r.x,n=+r.y,a=+r.r,i=+r.angle;r.path=s("arcPath")(t,n,a,i,45+i)}r.$watch("x",e),r.$watch("y",e),r.$watch("r",e),r.$watch("angle",e)}stats.directive("svgArc",function(){return{restrict:"AE",replace:!1,scope:{x:"@",y:"@",r:"@",angle:"@",color:"@"},template:['<path ng-attr-d="{{ path }}" fill="{{ color }}" />'].join(""),controller:e}}),e.$inject=["$scope","$filter"]}(),function(){function e(i,r,s){r.on("click",function(e){e.preventDefault();var t=angular.element(i.for).get(0),n=+r.data("top")||0,a=+r.data("left")||0;saveSvgAsPng(t,"rotations.png",{left:a,top:n,encoderOptions:1}),s.triggerEvent("shotchartSave")})}stats.directive("svgDownloadRotations",function(){return{restrict:"A",scope:{for:"@"},controller:e}}),e.$inject=["$scope","$element","DtmService"]}(),function(){function e(i,r,s){r.on("click",function(e){e.preventDefault();var t=angular.element(i.for).get(0),n=+r.data("top")||0,a=+r.data("left")||0;saveSvgAsPng(t,"shotchart.png",{left:a,top:n,encoderOptions:1}),s.triggerEvent("shotchartSave")})}stats.directive("svgDownload",function(){return{restrict:"A",scope:{for:"@"},controller:e}}),e.$inject=["$scope","$element","DtmService"]}(),function(){function e(i,r,s){r.on("click",function(e){e.preventDefault();var t=angular.element(i.for).get(0),n=+r.data("top")||0,a=+r.data("left")||0;saveSvgAsPng(t,"lineups.png",{left:a,top:n,encoderOptions:1}),s.triggerEvent("shotchartSave")})}stats.directive("svgDownloadLineups",function(){return{restrict:"A",scope:{for:"@"},controller:e}}),e.$inject=["$scope","$element","DtmService"]}(),function(){function e(a,e){a.$watch("shots",t),a.$watch("options",t,!0);function t(){var e,t,n;a.shots&&(e={},t=+a.options.cellsize||10,(n={}).radius=t,n.height=2*n.radius,n.width=Math.sqrt(3)/2*n.height,n.heightRow=.75*n.height,n.heightHalf=.5*n.height,n.widthHalf=n.width/2,n.apothem=n.height-n.heightRow,a.shots.forEach(function(e,t,n){var a=Math.floor((n.LOC_Y+t.apothem)/t.heightRow),i=a*t.heightRow-t.heightHalf,r=n.LOC_Y-i,s=1&a,o=s?Math.floor(n.LOC_X/t.width):Math.floor((n.LOC_X+t.widthHalf)/t.width),l=s?o*t.width+t.widthHalf:o*t.width,c=n.LOC_X-l,u=t.apothem/t.widthHalf;r>t.heightRow&&(c<0?t.height-r<-u*(c+t.widthHalf)+t.apothem&&(a+=1,s||--o):t.height-r<u*c&&(a+=1,s&&(o+=1)));var h=a+"_"+o,d=e[h];d=d||(e[h]={row:a,col:o,size:t.radius,scale:1,shots:[],fgm:0,fga:0});d.shots.push(n),d.fga+=1,d.fgm+=n.SHOT_MADE_FLAG}.bind("",e,n)),a.hexes=Object.keys(e).map(function(e,t,n){var a=e[n],i=a.shots.reduce(o,{});a.zone=function(t){var n=0,a="";return Object.keys(t).forEach(function(e){t[e].count>n&&(n=t[e].count,a=e)}),a}(i),a.zonePerf=t.advanced[a.zone].zPerf;var r=Math.log(a.fga)/Math.log(10),s=(2.5*(1-r)+10*r)/10;return a.scale=Math.min(Math.max(s,.3),1),a}.bind("",e,a.zones)))}}function o(e,t){var n=t.SHOT_ZONE_AREA+" | "+t.SHOT_ZONE_RANGE;return e[n]||(e[n]={id:n,count:0}),e[n].count+=1,e}stats.directive("svgHexGrid",function(){return{restrict:"E",scope:{zones:"=",shots:"=",options:"="},templateUrl:"/stats/test/hexagons/templates/hexgrid.html",controller:e}}),e.$inject=["$scope","$element"]}(),function(){function e(e,t){var i=this;t.addClass("svg-hexagon");var n=Math.sqrt(3),r=Math.PI/180;i.text=e.text,i.r=+e.r,i.scale=+e.scale||1,i.row=+e.row||0,i.col=+e.col||0,i.h=i.r,i.w=n/2*i.r,i.v=.75*i.h,i.cy=i.v*i.row*2,i.cx=(1&i.row)*i.w+i.col*i.w*2,i.path=[0,1,2,3,4,5,6].map(function(e){var t=(60*e+30)*r,n=i.r*Math.cos(t),a=i.r*Math.sin(t);return[n.toFixed(2),a.toFixed(2)].join(",")}).join(" ")}stats.directive("svgHexagon",function(){return{restrict:"A",replace:!0,scope:{r:"@",row:"@",col:"@",dir:"@",scale:"@",text:"@"},templateNamespace:"svg",template:['<g ng-attr-transform="translate({{ ::hex.cx }}, {{ ::hex.cy }}) scale({{ ::hex.scale }})">',' <polygon ng-attr-points="{{ ::hex.path }}" />',' <text x="0" ng-attr-y="{{ ::hex.r/2 }}" text-anchor="middle">{{ ::text }}</text>',"</g>"].join(""),controller:e,controllerAs:"hex"}}),e.$inject=["$scope","$element"]}(),function(){function e(e,t){var n=angular.element(t).get(0),a=document.createElementNS("http://www.w3.org/2000/svg","image");function i(){if(e.href&&e.height&&e.width){for(;n.hasChildNodes();)n.removeChild(n.lastChild);a.setAttributeNS("http://www.w3.org/1999/xlink","href",e.href),a.setAttribute("height",e.height),a.setAttribute("width",e.width),a.setAttribute("x",0),a.setAttribute("y",0),n.appendChild(a)}}e.$watch("href",i,!0),e.$watch("height",i,!0),e.$watch("width",i,!0)}stats.directive("svgImageEmbed",function(){return{restrict:"A",replace:!1,transclude:!1,scope:{href:"@",height:"@",width:"@"},controller:e}}),e.$inject=["$scope","$element"]}(),function(){function e(e,t){var n=e.get(0),a=e.attr("svg-include"),i=angular.element(a).get(0).innerHTML,r=document.createElement("div");r.innerHTML="<svg>"+i+"</svg>",Array.prototype.slice.call(r.childNodes[0].childNodes).forEach(function(e){n.appendChild(e)})}stats.directive("svgInclude",function(){return{restrict:"A",compile:e}})}(),function(){function e(t,n,e){var a=angular.element(e);function i(){var e;t.options&&(e=Math.max(Math.min(t.container.width(),t.options.max),t.options.min),n.attr("width",e),n.attr("height",e*t.ratio))}t.getWindowDimensions=function(){return{h:a.height(),w:a.width()}},t.$watch("svgResponsive",function(e){e&&(t.options=e,t.ratio=n.attr("height")/n.attr("width"),t.container=e.selector?angular.element(e.selector):n.parent().parent(),i())}),t.$watch(t.getWindowDimensions,function(e,t){i()},!0),a.on("resize",function(){t.$apply()})}stats.directive("svgResponsive",function(){return{restrict:"A",replace:!1,scope:{svgResponsive:"="},controller:e}}),e.$inject=["$scope","$element","$window"]}(),function(){function f(e,t,n,a){var i=(a-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}}stats.filter("arcPath",function(){return function(e,t,n,a,i){return l=a,u=f(r=e,s=t,o=n,c=i),h=f(r,s,o,l),d=c-l<=180?"0":"1",["M",r,s,"L",u.x,u.y,"A",o,o,0,d,0,h.x,h.y,"Z"].join(" ");var r,s,o,l,c,u,h,d}})}(),stats.filter("area",function(){return function(e){return e?(e/100).toFixed(1)+" ft Â²":0}}),stats.filter("donutArc",function(){return function(e,t){if(e){var n=100*e*(2*Math.PI/100),a=t+Math.sin(0)*t,i=t-Math.cos(0)*t,r=t+Math.sin(n)*t,s=t-Math.cos(n)*t;return["M ",t,",",t," L ",a,",",i," A ",t,",",t," 0 ",n>Math.PI?1:0," 1 ",r,",",s," Z"].join("")}}}),function(){function e(n){return function(e,t){return t+="",null===e?"-":-1<t.indexOf("DATE")?n("date")(e,"MM/dd/yyyy"):-1<t.indexOf("ACTIVE")?1===e?"Yes":"No":-1<t.indexOf("_PCT")?(100*Number(e)).toFixed(1):e}}stats.filter("qtFieldFormatter",e),e.$inject=["$filter"]}(),stats.filter("qtTableHeader",function(){return function(e){return e=(e+="").replace("3FGM","3PM").replace("3FGA","3PA").replace("FG3M","3PM").replace("FG3A","3PA").replace("FG3_PCT","3P%").replace("M_","*").replace("GAMESTREAK","GAMES").replace("DATE","").replace("PLUS_MINUS","+/-").replace("_PCT","%").replace(/\_/g," ").replace("NUM","").replace("ACTIVESTREAK","ACTIVE")}}),function(){function e(n,r,s){return{get:function(a,e){var i=n.defer(),t=a?s.prefix+"wp-json/statscms/v1/rotowire/player/?team="+a:s.prefix+"wp-json/statscms/v1/rotowire/player/";return r({method:"GET",url:t}).then(function(e){var t=e.data,n=a?t.TeamRotowires:t.ListItems;i.resolve(n)}).catch(function(e){i.resolve([])}),i.promise}}}stats.service("FantasyNewsService",e),e.$inject=["$q","$http","CMSENV"]}(),function(){function e(a,i,r){return{get:function(e){var n=a.defer(),t=r.prefix+"wp-json/statscms/v1/json/?slug="+e+"-finals";return i.get(t).then(function(e){var t=e.data.posts[0].JSON_content.finals;n.resolve(t)}).catch(function(e){n.reject(e)}),n.promise}}}stats.service("FinalsInfographicService",e),e.$inject=["$q","$http","CMSENV"]}(),function(){function e(a,i,r){return{get:function(e){var n=a.defer(),t=r.prefix+"wp-json/statscms/v1/rotowire/player/?playerId="+e;return i.get(t,{cache:!0}).then(function(e){var t=e.data;n.resolve(t.PlayerRotowires||[])}).catch(function(e){n.resolve(null)}),n.promise}}}stats.service("PlayerNewsService",e),e.$inject=["$q","$http","CMSENV"]}(),function(){function e(t,a,i){return{get:function(){var n=t.defer(),e=i.prefix+"feeds2feed/more_scores.json";return a.get(e,{cache:!0}).then(function(e){var t=e.data;n.resolve(t)}).catch(function(e){n.resolve(null)}),n.promise}}}stats.service("ScoresSidebarService",e),e.$inject=["$q","$http","CMSENV"]}(),function(){function e(r,s){var o={cache:!1};return{get:function(e,t){var n=r.defer(),a="/stats/js/data/"+e+".json",i=angular.extend({},o,t);return s.get(a,{cache:i.cache}).then(function(e){var t=e.data||e;n.resolve(t)}).catch(function(e){n.resolve(null)}),n.promise}}}stats.service("StatsFlatDataService",e),e.$inject=["$q","$http"]}(),function(){function e(r,s){var o={cache:!1};return{get:function(e,t){var n=r.defer(),a="/stats/js/data/pointsbet/"+e.seasonYear+"/"+e.gameDate+".json",i=angular.extend({},o,t);return s.get(a,{cache:i.cache}).then(function(e){var t=e.data||e;n.resolve(t)}).catch(function(e){n.resolve(null)}),n.promise}}}stats.service("StatsPointsBetService",e),e.$inject=["$q","$http"]}(),function(){function e(r,s){var o={cache:!1};return{get:function(e,t){var n=r.defer(),a="/stats/js/data/widgets/"+e+".json",i=angular.extend({},o,t);return s.get(a,{cache:i.cache}).then(function(e){var t=e.data||e;n.resolve(t)}).catch(function(e){n.resolve(null)}),n.promise}}}stats.service("StatsWidgetService",e),e.$inject=["$q","$http"]}(),stats.service("AnalyticsService",function(){return{googs:function(e,t,n){"undefined"!=typeof ga&&ga("send","event",e,t,n)}}}),stats.factory("DeepLinksFactory",["$location",function(i){"use strict";var e={getSearchURL:function(e){return e?i.search()[e]:i.search()},setSearchURL:function(e){var t,n=e||{};for(t in n)i.search(t,n[t])},resetSearchURL:function(e){for(var t=e||Object.keys(i.search()),n=t.length,a=0;a<n;a++)i.search(t[a],null)},hasSearchURL:function(){return 0<Object.keys(i.search()).length},getHashURL:function(){return i.hash()},setHashURL:function(e){i.hash(e)},resetHashURL:function(){i.hash(null)},getFullURL:function(){return i.absUrl()},getPath:function(){return i.path()},setPath:function(e){i.path(e)}};return e}]),function(){function e(e){var n=!1,r={pageLoad:{desc:"track page load event for team and player pages",props:["playerName","playerId","teamId","teamName"],defaultProps:{}},homeDailyLeadersTab:{desc:"track homepage daily leaders tab click",props:"interactionName",defaultProps:{interactionType:"tab click",interactionName:"",event:"interaction - tab click"}},homeSeasonLeadersTab:{desc:"track homepage season leaders tab click",props:"interactionName",defaultProps:{interactionType:"tab click",interactionName:"",event:"interaction - tab click"}},navigation:{desc:"user changes the Primary, secondary or tertiary inline nav component",props:"statsNavigationRefinement",defaultProps:{statsNavigationRefinement:"",event:"navigation refinement"}},setCustomFilter:{desc:"user sets a custom Filter",props:["customFilter","numFiltersUsed"],defaultProps:{event:"custom filter"}},setFilter:{desc:"user sets a standard or advanced filter",props:["filter","numFiltersUsed"],defaultProps:{event:"standard filter"}},scoresPageTab:{desc:"A user click on a tab on the scores pages",props:"interactionName",defaultProps:{interactionType:"tab click",interactionName:"<<date_game_tabname>>",event:"interaction - tab click"}},scoresPageLink:{desc:"user clicks on a link on the scores page, links below the box score",props:"interactionName",defaultProps:{interactionType:"link click",interactionName:"",event:"interaction - link click"}},fantasyCompareTool:{desc:"user compares players with the fantasy compare tool",props:"impactComparePlayer",defaultProps:{impactComparePlayer:"",event:"fantasy compare"}},compareToolPlayerVsPlayer:{desc:"user compares players with the compare tool",props:"impactComparePlayer",defaultProps:{event:"compare tool"}},compareToolTeamVsPlayer:{desc:"user compares team vs player with the compare tool",props:["impactComparePlayer","impactCompareTeam"],defaultProps:{event:"compare tool"}},compareImpact:{desc:"user compares players/teams with the impact tool",props:["impactComparePlayer","impactCompareTeam"],defaultProps:{event:"impact tool"}},share:{desc:"user clicks share on share bar directive",props:"interactionName",defaultProps:{interactionType:"social share",interactionName:"",event:"interaction - social share"}},shotchartSave:{desc:"user clicks save on a shot chart",defaultProps:{interactionType:"download",interactionName:"shot chart",event:"interaction - download"}},playerProfileGLeagueLink:{desc:"user clicks on g league profile link in player summary header",props:["playerId","playerName"],defaultProps:{interactionType:"click",interactionName:"NBA G League Stats",playerId:"",playerName:"",event:"interaction - NBA G League click"}},homepageLiveScoresLink:{desc:"user clicks on the live scores link in the homepage daily leaders module",defaultProps:{interactionType:"click",interactionName:"live scores",event:"interaction - live scores click"}},viewInfographic:{desc:"user clicks save on a shot chart",props:"interactionName",defaultProps:{interactionType:"infographic",interactionName:"",event:"interaction - infographic"}},rtpHub:{desc:"user click a link on the rtp hub",props:["interactionType","interactionName"],defaultProps:{event:"interaction",interactionType:"",interactionName:""}},scheduleRtp:{desc:"user click more details link on schedule rtp notice",props:["interactionName"],defaultProps:{event:"interaction",interactionType:"rtp:schedule",interactionName:""}},standingsRtp:{desc:"user click more details link on standings rtp notice",props:["interactionName"],defaultProps:{event:"interaction",interactionType:"rtp:standings",interactionName:""}}};function s(e){n&&console.error("âï¸ð« DTM Service Error: "+e)}function o(e){var t="",n="";if("t"===e)return(t="stats.nba.com:")+(n=location.pathname.replace(/#/g,"").replace(/\/$/,""))+"/";if("n"!==e)return null;var a,t="us:stats";return(n=location.pathname.replace(/#/g,"").replace(/\/$/,"").replace(/\//gi,":")).includes("scores")&&!n.includes("boxscores")&&(n=":"+(a=n.split(":"))[1]+":"+a.slice(-3).join("")),""!==n&&":"!==n||(n=":main"),t+n}return{triggerEvent:function(e,t){var a,i;e&&((a=r[e])?!a.props||t?(i=angular.extend({},a.defaultProps),a.props&&(Array.isArray(t)?t.forEach(function(e,t){var n;e&&(n=a.props[t],i[n]=e+"")}):i[a.props]=t),n&&(console.warn("----"),console.warn("âï¸ DTM: "+e+" event triggered with props: "+t),console.warn("âï¸ New digital data: ",window.digitalData),console.warn("----")),function(e){{var t;window._satellite?(t=function(){var e=function(){var e=location.pathname.replace(/#/g,"").replace(/\/$/,"").replace(/\//gi,":");e=""===e||":"===e?"main":e.split(":")[1];return"stats.nba.com:"+e}(),t=o("t"),n=o("n"),a=function(e){if(e)for(var t=0;t<e.split(";").length;t++){var n=e[t];if(-1!==n.indexOf("aam_uuid"))return n.split("=")[1]}return""}(document.cookie);return{tPageName:t,nPageName:n,tChannel:e,nChannel:e,registeredUser:"",page:{pageInfo:{uuid:a}}}}(),window.digitalData=angular.extend({},window.digitalData,t,e)):s("DTM package not detected. window._satellite object not found.")}}(i)):s("Event is missing required props."):s("Event does not exist."))},setCustomFilterProps:function(e){return["["+e.map(function(e){if(e.text)return e.text.replace(/ /g,"")}).join(",")+"]",e.length]},setFilterProps:function(i){var e=Object.keys(i).reduce(function(e,t){var n,a=i[t];return a.default!==a.selected.val&&(n=t+"="+a.selected.val,e.push(n)),e},[]);return["["+e.join(", ")+"]",e.length+""]},parseMenuOptions:function(t,n,e){var a="";return Object.keys(t).forEach(function(e){!0===t[e]&&(a=e)}),Object.keys(n).forEach(function(e){!0===n[e]&&(a=e)}),"main menu: "+[a,"",e].filter(function(e){return""!==e}).join(" | ")}}}stats.service("DtmService",e),e.$inject=["$http"]}(),function(){function e(e,t,i){var r=t.get("playerList"),n=window.stats_ptsd,s={},a=(n&&n.data&&n.data.players?n.data.players:[]).map(function(e){var t,n={},a=e[1].split(",");return n.id=e[0],n.name=e[1],n.fn=(a[1]||"").trim(),n.ln=(a[0]||"").trim(),n.rs=1===e[2],n.gp="Y"===e[6],n.from=+e[3],n.to=+e[4],n.type="pl",n.active=n.to>=r.SeasonYear,e[5]&&(t=i.getById(e[5]),n.tid=t.id,n.ta=t.abbr,n.tc=t.city,n.tn=t.name),s[n.id]=n});return{get:function(e){return e?a.filter(function(e){return e.rs}):a},getById:function(e){return s[e]},findBy:function(t,n){return a.filter(function(e){return e[t]===n})}}}stats.factory("PlayersService",e),e.$inject=["$filter","SeasonsService","TeamsService"]}(),function(){function e(i,o,r){var s={},l={};function c(t,e){var n,a=e?"initial":"default";return"select"===t.type||"combo"===t.type?n=t.options.find(function(e){return e.val==t[a]}):"number"===t.type||"datepicker"===t.type||"multi"===t.type?n={val:t[a],text:t[a],key:t.name,label:t.label}:"async"===t.type&&(n={val:t[a],text:t[a],key:t.name,label:t.label,isLoaded:!1}),n}function u(t){t.options.forEach(function(e){e.key=t.name,e.label=t.label})}function h(e){var t=angular.extend({},angular.copy(r[e.name]),e);return t?("toggle"===t.type&&(t.initial=o.search()[t.name]||t.initial||t.default,t.selected={key:t.name,label:t.name,text:t.initial,val:t.initial}),e.hasOwnProperty("default")&&(t.default=e.default),e.range&&(t.options=function(e,t){for(var n=[],a=t;e<=a;--a)n.push({val:a,text:a});return n}(parseInt(e.range[0],10),parseInt(e.range[1],10))),e.seasonRange&&(t.options=function(e,t){for(var n=[],a=t;e<=a;--a)n.push({val:i("seasonyear")(a),text:i("seasonyear")(a)});return n}(parseInt(e.seasonRange[0],10),parseInt(e.seasonRange[1],10))),e.without&&(t.options=t.options.filter(function(e){return-1===this.indexOf(e.val)}.bind(e.without))),e.include&&(t.options=t.options.concat(e.include)),e.includeBefore&&(t.options=e.includeBefore.concat(t.options)),e.as&&(e.name=e.as,t.name=e.name),void 0!==o.search()[t.name]?t.initial=o.search()[t.name]:e.initial?t.initial=e.initial:t.initial=t.default,"select"!==t.type&&"search"!==t.type||(u(t),t.selected=c(t,!0)),t):e}return{get:function(e){for(var t in s={},l={},e){var n,a=e[t];"string"==typeof a?(s[a]=function(e){var n,t=angular.copy(r[e]),a=o.search()[e];return t&&("select"===t.type?(t.initial=a||t.default,u(t),t.selected=c(t,!0)):"datepicker"===t.type?a&&(t.selected={val:a,text:t.label+" : "+a,key:t.name,label:t.label}):"number"===t.type?a&&(t.selected={val:+a,text:t.label+" : "+ +a,key:t.name,label:t.label}):"multi"===t.type?(n=o.search()[e]?o.search()[e].split(","):t.default,t.selected=t.options.reduce(function(e,t){return-1<n.indexOf(t.val)&&e.push(t),e},[])):"async"===t.type&&a&&(t.selected={val:+a,text:+a})),t}(a),s[a]?l[a]=s[a].selected.val:l[a]=o.search()[a]):"object"===_typeof(a)&&(n=h(a),s[n.name]=n,s[a.name].selected&&(a.param?l[a.param]=s[a.name].selected.val:l[a.name]=s[a.name].selected.val))}return{splits:s,params:l}},findDefault:c,runSplits:function(e,t){var n,a=[];for(n in e){var i,r=e[n],s=r.selected.val;s==r.default&&"SeasonType"!=n&&"Season"!=n?o.search(n,null):(o.search(n,s),delete(i=angular.extend({},r.selected)).$$hashKey,a.push(i)),t[n]=s}return a}}}stats.factory("QuerytoolSplitsService",e),e.$inject=["$filter","$location","QuerytoolSplits"]}(),stats.service("RecentFiltersService",function(){var n="stats-recent-filters",a=JSON.stringify,i=JSON.parse,r=!1;if("object"===("undefined"==typeof localStorage?"undefined":_typeof(localStorage)))try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage"),r=!0}catch(e){r=!1}r&&!localStorage.getItem(n)&&localStorage.setItem(n,a([]));return{get:function(){return r?i(localStorage.getItem(n)):[]},add:function(e){if(!r)return[];var t=i(localStorage.getItem(n));return t.unshift(e),t=t.slice(0,10),localStorage.setItem(n,a(t)),t}}}),function(){function e(a){var i="stats-recent-searches",r=JSON.stringify,s=JSON.parse,o=!1;if("object"===("undefined"==typeof localStorage?"undefined":_typeof(localStorage)))try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage"),o=!0}catch(e){o=!1}return o&&!localStorage.getItem(i)&&localStorage.setItem(i,r([])),{get:function(){return o?s(localStorage.getItem(i)):[]},add:function(e){if(!o)return[];e.$$hashKey&&delete e.$$hashKey;var t=s(localStorage.getItem(i));t.unshift(e);var n=(n=a("uniqueKey")(t,"id")).slice(0,5);return localStorage.setItem(i,r(n)),n}}}stats.service("RecentSearchesService",e),e.$inject=["$filter"]}(),function(){function e(e,t){var n={},a=t.navigator.userAgent,i="";e.search()?i=e.search().rfr||"":console.warn("stats referrer not found here");var r=i.split(":");n.isExternal="nba"===r[0],n.refSection=r[1],window.esi_?(angular.extend(n,window.esi_),n.isDomestic="US"==n.country||"CA"==n.country):(n.isDomestic=!0,n.country="US");var s=new Date;s.getUTCHours()<18&&s.setUTCDate(s.getUTCDate()-1);var o=new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate());return n.gameDate=o,n.isMobile=/(iphone|ipod|android|blackberry|opera.mobi)/gi.test(a),n.browserType=function(){var e,t={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/trident/i};for(e in t)if(t[e].test(a))return e;return"unknown"}(),n}stats.service("ReferrerService",e),e.$inject=["$location","$window"]}(),function(){function e(n){var e=window.stats_ptsd,a={};(e&&e.data&&e.data.seasons?e.data.seasons:[]).map(function(e){var t={};return t.Section=e[0],t.LeagueID=e[1],t.LeagueName=n("leagueIdToName")(e[1]),t.Season=n("seasonyear")(e[2]),t.SeasonYear=e[2],t.SeasonType=n("seasonTypeIdToSeasonType")(e[3]),t.SeasonTypeId=n("padLeft")(e[3],2,"0"),t.SeasonTypeInt=+e[3],t.SeasonFrom=n("seasonyear")(e[4]),t.SeasonYearFrom=e[4],t.Flags=function(e){if(!Array.isArray(e))return;var i={};return e.forEach(function(e){var t=e[0],n=e[1],a=e[2];i[t]=n&&a?a:n}),i}(e[5]),a[t.Section]=t});return{get:function(e){var t=a[e];return t||a.site}}}stats.service("SeasonsService",e),e.$inject=["$filter"]}(),function(){function e(a,i){return{getLinks:function(t){var n=a.defer(),e={url:t};return i.post("https://a.data.nba.com/nba/shortlinks",e).then(function(e){var t=e.data;n.resolve(t)}).catch(function(e){n.resolve(t)}),n.promise}}}stats.service("SocialService",e),e.$inject=["$q","$http"]}(),function(){function e(a,l,c){var u={},h={};function d(t,e){var n,a=e?"initial":"default";return"select"===t.type||"combo"===t.type?n=t.options.find(function(e){return e.val==t[a]}):"number"===t.type||"datepicker"===t.type||"text"===t.type||"pseudo"===t.type?n={val:t[a],text:t[a],key:t.name,label:t.label}:"toggle"===t.type&&(n={val:t[a],text:t.label+": "+t[a],key:t.name,label:t.label}),n}function f(t){t.options.forEach(function(e){e.key=t.name,e.label=t.label})}function p(e){var t,n=angular.extend({},angular.copy(c[e.name]),e);return"pseudo"===(n=n||e).type?(n.initial=l.search()[n.name]||n.default,n.selected={key:n.name,label:n.name,text:n.initial,val:n.initial}):("toggle"===n.type&&(n.initial=l.search()[n.name]||n.initial||n.default,n.selected={key:n.name,label:n.name,text:n.initial,val:n.initial}),e.hasOwnProperty("default")&&(n.default=e.default),e.range&&(n.options=a("range")(+e.range[0],+e.range[1]).map(function(e){return{val:e,text:e}}).reverse()),e.seasonRange&&(n.options=a("range")(+e.seasonRange[0],+e.seasonRange[1],"seasonyear").map(function(e){return{val:e,text:e,num:parseInt(e.substr(0,4))}}).reverse()),e.without&&(n.options=n.options.filter(function(e){return-1===this.indexOf(e.val)}.bind(e.without))),e.include&&(n.options=n.options.concat(e.include)),e.includeBefore&&(n.options=e.includeBefore.concat(n.options)),e.as&&(e.name=e.as,n.name=e.name),void 0!==l.search()[n.name]?n.initial=l.search()[n.name]:e.initial?n.initial=e.initial:n.initial=n.default,"select"!==n.type&&"search"!==n.type||(f(n),t=d(n,!0),n.selected=t||n.options[0])),n}return{get:function(e){for(var t in u={},h={},e){var n,a=e[t];"string"==typeof a?(u[a]=(i=a,o=s=r=void 0,s=angular.copy(c[i]),o=l.search()[i],s&&("select"===s.type||"search"===s.type?(s.initial=o||s.default,f(s),r=d(s,!0),s.selected=r||s.options[0]):"datepicker"===s.type||"text"===s.type||"toggle"===s.type?o&&(s.selected={val:o,text:s.label+": "+o,key:s.name,label:s.label}):"number"===s.type&&o&&(s.selected={val:+o,text:s.label+": "+ +o,key:s.name,label:s.label})),s),u[a]?h[a]=u[a].selected.val:h[a]=l.search()[a]||""):"object"===_typeof(a)&&(n=p(a),u[n.name]=n,u[a.name].selected?a.param?h[a.param]=u[a.name].selected.val:h[a.name]=u[a.name].selected.val:(h[a.name]=a.initial,u[a.name]=a))}var i,r,s,o;return{splits:u,params:h}},findDefault:d,findOptionByValue:function(e,t,n){var a=c[e];if(n=n||"val",a&&a.options)return a.options.find(function(e){return e[n]===t})},runSplits:function(e,t){var n,a=[];for(n in e){var i,r,s=e[n];s&&s.selected&&((i=s.selected.val)==s.default&&"SeasonType"!=n&&"Season"!=n?l.search(n,null):(l.search(n,i),delete(r=angular.extend({},s.selected)).$$hashKey,a.push(r)),t[n]=i)}return a}}}stats.factory("SplitsService",e),e.$inject=["$filter","$location","SPLITS"]}(),function(){function e(n){var a=["","Eastern","Western"],i=["","Atlantic","Central","Northwest","Pacific","Southeast","Southwest"],e=window.stats_ptsd,r={},s={},o={},l=(e&&e.data&&e.data.teams?e.data.teams:[]).map(function(e){var t={};return t.id=e[0],t.abbr=e[1],t.code=e[2],t.city=e[3],t.name=e[4],t.conference=a[e[5]],t.division=i[e[6]],t.special=1===e[7],t.Season=n("seasonyear")(e[8]),t.seasonyear=e[8],t.SeasonType=n("seasonTypeIdToSeasonType")(e[9]),t.color=e[10][0],t.colors=e[10],r[t.id]=t,s[t.code]=t,o[t.abbr]=t});return l=n("orderBy")(l,"city"),{get:function(e){return e?l:l.filter(function(e){return!e.special})},getByAbbr:function(e){return o[e]},getByCode:function(e){return s[e]},getById:function(e){return r[e]},findBy:function(t,n){return l.filter(function(e){return e[t]===n})}}}stats.factory("TeamsService",e),e.$inject=["$filter"]}(),function(){function e(i,r,s){function n(e){var t=s.defer(),n="/stats/js/data/draftcombine/"+e+"_gamedetail.json";return i.get(n,{cache:!1}).then(function(e){t.resolve(e.data.g)}).catch(function(e){t.reject({error:"no game data"})}),t.promise}function a(e,t){var n=s.defer(),a="/stats/js/data/draftcombine/"+e+"_"+t+"_pbp.json";return i.get(a,{cache:!1}).then(function(e){n.resolve(e.data.g)}).catch(function(e){console.error("pbp error fetch",a),n.resolve({error:"no pbp data"})}),n.promise}return{get:function(e){var i=s.defer(),t=[n(e),a(e,1),a(e,2)];return s.all(t).then(function(e){var t,n,a=((n={}).game=(t=e)[0],n.period=n.game.p,n.hls=n.game.hls,n.vls=n.game.vls,n.pbps=t.slice(1),n.plays=[],n.pbps.forEach(function(t){t&&!t.error&&t.pla&&t.pla.length&&(t.pla.forEach(function(e){e.p=t.p,e.decimalTime=r("decimalTime")(e.p,e.cl)}),n.plays=n.plays.concat(t.pla))}),n);i.resolve(a)}).catch(function(e){i.reject(e)}),i.promise},getGameDetails:n,getPlayByPlay:a}}stats.service("CombineScrimmageService",e),e.$inject=["$http","$filter","$q"]}(),function(){function e(a,i){return{get:function(e){var n=a.defer(),t="https://data.nba.net/data/5s/prod/draft/".concat(e.Season,"/draft_pick.json");return i.get(t,{cache:!1}).then(function(e){var t=e.data;n.resolve(t)}).catch(function(e){n.reject(e)}),n.promise}}}stats.service("DraftboardService",e),e.$inject=["$q","$http"]}(),function(){function e(s,o,l,e){var t=e.get("site"),c={league:t.LeagueName.toLowerCase(),season:t.SeasonYear,cache:!1};function u(e,t){e.id=t,e.memo=e.memo||""}return{get:function(e,t){var i=l.defer(),n=s("gameIdToObject")(e);c.season=n.seasonyear,c.league=n.league;var a=angular.extend({},c,t),r="https://data.nba.com/data/10s/v2015/json/mobile_teams/".concat(a.league.toLowerCase(),"/").concat(a.season,"/scores/gamedetail/").concat(e,"_gamedetail.json");return o.get(r,{cache:a.cache}).then(function(e){var t,n=e.data,a=((t=n.g).hls.pstsg&&t.vls.pstsg?(t.hls.pstsg.forEach(u),t.vls.pstsg.forEach(u)):(t.vls.pstsg=[],t.hls.pstsg=[]),t);i.resolve(a)}).catch(function(e){i.reject(e)}),i.promise}}}stats.service("MobileGameDetailService",e),e.$inject=["$filter","$http","$q","SeasonsService"]}(),function(){function e(r,e,s){return{get:function(e,t,n){var a=s.defer(),i="https://data.nba.net/data/10s/prod/v1/".concat(t,"/").concat(e,"_lead_tracker_").concat(n,".json");return r.get(i,{cache:!1}).then(function(e){var t=e.data;a.resolve(t.plays)}),a.promise}}}stats.service("MobileLeadTrackerService",e),e.$inject=["$http","$filter","$q"]}(),function(){function e(r,s,o,e){var t=e.get("site"),l={league:t.LeagueName,season:t.SeasonYear,cache:!1};return{get:function(e,t){var a=o.defer(),n=angular.extend({},l,t),i="https://data.nba.com/data/10s/v2015/json/mobile_teams/".concat(n.league.toLowerCase(),"/").concat(n.season,"/scores/pbp/").concat(e,"_full_pbp.json");return r.get(i,n.cache).then(function(e){var t=e.data.g,n=t.pd.reduce(function(e,t){return t.pla.forEach(function(e){e.p=t.p,e.decimalTime=s("decimalTime")(e.p,e.cl)}),e=e.concat(t.pla)},[]);a.resolve(n)}),a.promise}}}stats.service("MobilePlayByPlayService",e),e.$inject=["$http","$filter","$q","SeasonsService"]}(),function(){function e(i,r,e){var t=e.get("site"),s={league:t.LeagueName,leagueid:t.LeagueID,season:t.SeasonYear,cache:!0};return{get:function(e){var n=r.defer(),t=angular.extend({},s,e),a="https://data.nba.com/data/10s/v2015/json/mobile_teams/".concat(t.league.toLowerCase(),"/").concat(t.season,"/players/").concat(t.leagueid,"_player_info.json");return i.get(a,{cache:t.cache}).then(function(e){var t=e.data.pls.pl;n.resolve(t)}).catch(function(e){n.reject(e)}),n.promise}}}stats.service("MobilePlayerInfoService",e),e.$inject=["$http","$q","SeasonsService"]}(),function(){function e(e,s,o){var l={league:"nba",leagueId:"00",cache:!1};return{get:function(e,t,n){var a=o.defer(),i=angular.extend({},l,n),r=["https://data.nba.com/data/10s/v2015/json/mobile_teams/",i.league,"/",e,"/league/",i.leagueId,"_league_schedule_",t,".json"].join("");return s.get(r,{cache:i.cache}).then(function(e){var t=e.data;t.scd?a.resolve(t.scd.g):t.mscd.g&&a.resolve(t.mscd.g)}).catch(function(e){console.error("error fetching schedule data",r),a.resolve([])}),a.promise}}}stats.service("MobileScheduleService",e),e.$inject=["$filter","$http","$q"]}(),function(){function e(e,r,s){var o={league:"nba",leagueId:"00",cache:!0};return{get:function(e,t){var n=s.defer(),a=angular.extend({},o,t),i=["wnba"===a.league.toLowerCase()?"https://data.wnba.com/data/10s/v2015/json/mobile_teams/":"https://data.nba.com/data/10s/v2015/json/mobile_teams/","gleague"===a.league.toLowerCase()||"g league"===a.league.toLowerCase()?"dleague":a.league,"/",e,"/league/",a.leagueId,"_full_schedule.json"].join("");return r.get(i,a.cache).then(function(e){var t=e.data.lscd.reduce(function(e,t){return e=e.concat(t.mscd.g)},[]);t.forEach(function(e){e.gmonth=+e.gdte.substr(5,2),e.st=+e.st}),n.resolve(t)}).catch(function(e){console.error("error fetching schedule data",i),n.resolve([])}),n.promise}}}stats.service("MobileSeasonScheduleService",e),e.$inject=["$filter","$http","$q"]}(),function(){function e(e,r,s){var o={league:"nba",leagueId:"00",cache:!0};return{get:function(e,t){var i=s.defer(),n=angular.extend({},o,t),a=["https://data.nba.com/data/10s/v2015/json/mobile_teams/",n.league,"/",e,"/league/",n.leagueId,"_full_schedule_week.json"].join("");return r.get(a,{cache:n.cache}).then(function(e){var t,n=e.data,a=n.lscd.reduce(function(e,t){return e=e.concat(t.mscd.g)},[]);a.forEach(function(e){e.gmonth=+e.gdte.substr(5,2),e.st=+e.st}),n&&n.lws&&n.lws.length&&(t=n.lws.map(function(e){var t=e.from+"",n=e.to+"";return{week:+e.week,from:t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2),to:n.substr(0,4)+"-"+n.substr(4,2)+"-"+n.substr(6,2)}})),i.resolve({games:a,weeks:t})}).catch(function(e){console.error("error fetching schedule data",a),i.resolve({games:[],weeks:[]})}),i.promise}}}stats.service("MobileSeasonScheduleWeekService",e),e.$inject=["$filter","$http","$q"]}(),function(){function e(e,r,s){var o={league:"nba",leagueId:"00",cache:!0};return{get:function(e,t){var i=s.defer(),n=angular.extend({},o,t),a=["https://data.nba.com/data/10s/v2015/json/mobile_teams/",n.league,"/",e,"/league/",n.leagueId,"_full_schedule_week_tbds.json"].join("");return r.get(a,{cache:n.cache}).then(function(e){var t,n=e.data,a=n.lscd.reduce(function(e,t){return e=e.concat(t.mscd.g)},[]);a.forEach(function(e){e.gmonth=+e.gdte.substr(5,2),e.st=+e.st}),n&&n.lws&&n.lws.length&&(t=n.lws.map(function(e){var t=e.from+"",n=e.to+"";return{week:+e.week,from:t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2),to:n.substr(0,4)+"-"+n.substr(4,2)+"-"+n.substr(6,2)}})),i.resolve({games:a,weeks:t})}).catch(function(e){console.error("error fetching schedule data",a),i.resolve({games:[],weeks:[]})}),i.promise}}}stats.service("MobileSeasonScheduleWeekTBDService",e),e.$inject=["$filter","$http","$q"]}(),function(){function e(e,i,r){return{get:function(e,t){var n=r.defer(),a=["https://data.nba.com/data/10s/v2015/json/mobile_teams/nba/",t,"/teams/",e,"_schedule.json"].join("");return i.get(a,{cache:!0}).then(function(e){var t=e.data.gscd.g;n.resolve(t)}),n.promise}}}stats.service("MobileTeamScheduleService",e),e.$inject=["$filter","$http","$q"]}(),function(){function e(v,y,_){var b="https://data.nba.com/data/v2015/json/mobile_teams/";function S(e){var r={avg:[],tot:[]};return e.pl.forEach(function(e){var t,n={fn:e.fn,ln:e.ln,pid:e.pid,pos:e.pos},a=angular.extend({},e.avg,n),i=angular.extend({},e.tot,n);(t=i).fgpct=t.fgm/t.fga||0,t.tppct=t.tpm/t.tpa||0,t.ftpct=t.ftm/t.fta||0,r.avg.push(a),r.tot.push(i)}),r}return{get:function(e,t,n,a){var i,r,s,o,l,c,u,h,d,f,p,m=_.defer(),g=[(u=e,h=t,d=n,f=_.defer(),p=[b,d.toLowerCase(),"/",h,"/teams/",u,"_roster.json"].join(""),y.get(p).then(function(e){var t,n=((t=e.data.t).pl.forEach(function(e){e.birthday=v("date")(e.dob,"MMM dd, yyyy").toUpperCase(),e.htInches=v("toInches")(e.ht),e.exp=e.y?e.y:"R"}),t);f.resolve(n)}).catch(function(e){f.reject("Mobile Team Service: Team Roster Feed Error: \n"+e)}),f.promise),(i=e,r=t,s=n,o=a,l=_.defer(),c=[b,s.toLowerCase(),"/",r,"/teams/",i,"/player_averages_",o,".json"].join(""),y.get(c).then(function(e){var t=S(e.data.tpsts);l.resolve(t)}).catch(function(e){l.reject("Mobile Team Service: Team Player Averages Feed Error: \n"+e)}),l.promise)];return _.all(g).then(function(e){var t={roster:e[0],stats:e[1]};m.resolve(t)}).catch(function(e){console.error(e)}),m.promise}}}stats.service("MobileTeamService",e),e.$inject=["$filter","$http","$q"]}(),function(){function e(e,a,i){return{get:function(e){var n=i.defer(),t=["https://data.nba.com/data/10s/v2015/json/mobile_teams/nba/",e,"/league/00_league_tickets.json"].join("");return a.get(t,{cache:!0}).then(function(e){var t=e.data;n.resolve(t.gtls)}),n.promise}}}stats.service("MobileTicketLinksService",e),e.$inject=["$filter","$http","$q"]}(),function(){function e(a,i){return{get:function(e){var n=a.defer(),t="https://data.nba.com/data/5s/json/bios/player_"+e+".json";return i.get(t,{cache:!0}).then(function(e){var t=e.data;n.resolve(t)}),n.promise}}}stats.service("PlayerBioService",e),e.$inject=["$q","$http"]}(),function(){function e(n){return{get:function(e){var t="https://data.nba.com/data/10s/v2015/json/mobile_teams/nba/".concat(e,"/scores/00_playoff_bracket.json");return n.get(t)}}}stats.service("PlayoffBracketsService",e),e.$inject=["$http"]}(),function(){function e(a,e){var i={season:e.get("site").SeasonYear,league:"nba",leagueId:"00",cache:!1};return{get:function(e){var t=angular.extend({},i,e),n=["wnba"===t.league.toLowerCase()?"https://data.wnba.com/data/10s/v2015/json/mobile_teams/":"https://data.nba.com/data/10s/v2015/json/mobile_teams/","gleague"===t.league.toLowerCase()||"g league"===t.league.toLowerCase()?"dleague":t.league,"/",t.season,"/scores/",t.leagueId,"_todays_scores.json"].join("");return a({method:"GET",url:n,cache:t.cache})}}}stats.service("TodaysScoresService",e),e.$inject=["$http","SeasonsService"]}(),stats.service("QuerytoolDtmService",function(){var n=!1,r={boxScoreSearch:{desc:"A user performs a box score search (Custom Filter)",props:["customFilter","numFiltersUsed"],defaultProps:{event:"score search"}},playerStreakSearch:{desc:"A user performs a player streak search (Custom Filter)",props:["customFilter","numFiltersUsed"],defaultProps:{event:"player streak search"}},teamStreakSearch:{desc:"A user performs a team streak search (Custom Filter)",props:["customFilter","numFiltersUsed"],defaultProps:{event:"team streak search"}}};function s(e){n&&console.log("âï¸ð« DTM Service Error: "+e)}function o(e){var t="",n="";if("t"===e)return(t="stats.nba.com:")+(n=location.pathname.replace(/#/g,"").replace(/\/$/,""))+"/";if("n"!==e)return null;var a,t="us:stats";return(n=location.pathname.replace(/#/g,"").replace(/\/$/,"").replace(/\//gi,":")).includes("scores")&&!n.includes("boxscores")&&(n=":"+(a=n.split(":"))[1]+":"+a.slice(-3).join("")),""!==n&&":"!==n||(n=":main"),t+n}return{triggerEvent:function(e,t){var a,i;e&&((a=r[e])?!a.props||t?(i=angular.extend({},a.defaultProps),a.props&&(Array.isArray(t)?t.map(function(e,t){var n;e&&(n=a.props[t],i[n]=e+"")}):i[a.props]=t),n&&(console.log("----"),console.log("âï¸ DTM: "+e+" event triggered with props: "+t),console.log("âï¸ New digital data: ",window.digitalData),console.log("----")),function(e){{var t;window._satellite?(t=function(){var e=function(){var e=location.pathname.replace(/#/g,"").replace(/\/$/,"").replace(/\//gi,":");e=""===e||":"===e?"main":e.split(":")[1];return"stats.nba.com:"+e}(),t=o("t"),n=o("n");return{tPageName:t,nPageName:n,tChannel:e,nChannel:e,registeredUser:""}}(),window.digitalData=angular.extend({},window.digitalData,t,e)):s("DTM package not detected. window._satellite object not found.")}}(i)):s("Event is missing required props."):s("Event does not exist."))},setFilterProps:function(i){var e=Object.keys(i).reduce(function(e,t){var n=i[t],a="";return Array.isArray(n.default)&&Array.isArray(n.selected)?""===n.default[0]&&0!==n.selected.length&&n.default[0]!==n.selected[0]&&(a=t+"="+n.selected[0].val,e.push(a)):"object"===_typeof(n)?Array.isArray(n.selected)||n.default===n.selected.val||(a=t+"="+n.selected.val,e.push(a)):(a=t+"="+n,e.push(a)),e},[]);return["["+e.join(", ")+"]",e.length+""]}}}),function(){function e(t){var n="leaguegamefinder";function a(e){return e.sets[0].rows}return{endpoint:n,params:{},splits:{},get:function(e){return t.get(n,e,a)},transform:a}}stats.service("GameFinderService",e),e.$inject=["HanaService"]}(),function(){function e(t){var n="playergamestreakfinder";function a(e){return e.sets[0].rows}return{endpoint:n,params:{},splits:{},get:function(e){return t.get(n,e,a)},transform:a}}stats.service("PlayerGameStreakService",e),e.$inject=["HanaService"]}(),function(){function e(t){var n="teamgamestreakfinder";function a(e){return e.sets[0].rows}return{endpoint:n,params:{},splits:{},get:function(e){return t.get(n,e,a)},transform:a}}stats.service("TeamGameStreakService",e),e.$inject=["HanaService"]}(),function(){function e(e){"use strict";function n(e,t){for(var n in t)t[n].name=t[n].name.replace(/([A-Z]+)/g,",$1"),t[n].name=t[n].name.replace(/,/g," ");for(n in e.datasets={OverallCompare:{},Individual:{}},t)e.datasets[n]&&(e.datasets[n]=t[n]);if(e.player={a:t.OverallCompare.rows[0],b:"team"==e.compare.left.type?t.vsPlayerOverall.rows[0]:t.OverallCompare.rows[1]},e.datasets.Individual&&0<e.datasets.Individual.rows.length)for(n in e.datasets.Individual.rows)e.datasets.Individual.rows[n].TM_TOV_PCT&&(e.datasets.Individual.rows[n].TM_TOV_PCT=e.datasets.Individual.rows[n].TM_TOV_PCT/100);if(e.datasets.OverallCompare&&0<e.datasets.OverallCompare.rows.length)for(n in e.datasets.OverallCompare.rows)e.datasets.OverallCompare.rows[n].TM_TOV_PCT&&(e.datasets.OverallCompare.rows[n].TM_TOV_PCT=e.datasets.OverallCompare.rows[n].TM_TOV_PCT/100);e.isLoading=!1,function(e){var t,n=0;for(t in e.datasets)n+=e.datasets[t].rows.length;e.noHTH=0===n,e.noData=e.noHTH}(e)}return{getStats:function(t){t.isLoading=!0,t.showGraph=!0,e.get(t.params).then(function(e){n(t,e),t.isLoading=!1})}}}stats.service("VsFantasyCompareService",e),e.$inject=["FantasyCompareService"]}(),function(){function e(u){"use strict";function h(e,t){var n,a=e.compare.left.type;for(n in t)t[n].name=t[n].name.replace(/([A-Z]+)/g,",$1"),t[n].name=t[n].name.replace(/,/g," ");for(n in e.datasets="lineup"===a||""===a?{Combined:{},Individual:{},OverallCompare:{}}:{OnOffCourt:{},Overall:{}},"team"===a&&(e.datasets.vsPlayerOverall={}),e.shootingsets={ShotAreaOffCourt:{},ShotAreaOnCourt:{},ShotAreaOverall:{},ShotDistanceOffCourt:{},ShotDistanceOnCourt:{},ShotDistanceOverall:{}},t)e.datasets[n]&&(e.datasets[n]=t[n]),e.shootingsets[n]&&(e.shootingsets[n]=t[n]);if("lineup"===a||""===a)e.player={a:t.OverallCompare.rows[0],b:t.OverallCompare.rows[1]};else{for(n in e.player={a:t.Overall.rows[0],b:"team"==e.compare.left.type?t.vsPlayerOverall.rows[0]:t.Overall.rows[1]},e.shootingsets=t,e.shootingsets)n.indexOf("Shot")<0&&delete e.shootingsets[n];e.shootingByDistance=[e.shootingsets.ShotDistanceOverall,e.shootingsets.ShotDistanceOnCourt,e.shootingsets.ShotDistanceOffCourt],e.shootingByArea=[e.shootingsets.ShotAreaOverall,e.shootingsets.ShotAreaOnCourt,e.shootingsets.ShotAreaOffCourt]}if("team"==e.compare.left.type){if(e.datasets.vsPlayerOverall&&0<e.datasets.vsPlayerOverall.rows.length)for(n in e.datasets.vsPlayerOverall.rows)e.datasets.vsPlayerOverall.rows[n].TM_TOV_PCT&&(e.datasets.vsPlayerOverall.rows[n].TM_TOV_PCT=e.datasets.vsPlayerOverall.rows[n].TM_TOV_PCT/100)}else if("lineup"!=e.compare.left.type){if(e.datasets.Overall&&0<e.datasets.Overall.rows.length)for(n in e.datasets.Overall.rows)e.datasets.Overall.rows[n].TM_TOV_PCT&&(e.datasets.Overall.rows[n].TM_TOV_PCT=e.datasets.Overall.rows[n].TM_TOV_PCT/100);if(e.datasets.OnOffCourt&&0<e.datasets.OnOffCourt.rows.length)for(n in e.datasets.OnOffCourt.rows)e.datasets.OnOffCourt.rows[n].TM_TOV_PCT&&(e.datasets.OnOffCourt.rows[n].TM_TOV_PCT=e.datasets.OnOffCourt.rows[n].TM_TOV_PCT/100)}e.isLoading=!1,function(e){var t,n=0;for(t in e.datasets)n+=e.datasets[t].rows.length;for(t in e.noHTH=0===n,n=0,e.shootingByDistance)n+=e.shootingByDistance[t].rows.length;for(t in e.noSBD=0===n,n=0,e.shootingByArea)n+=e.shootingByArea[t].rows.length;e.noSBA=0===n,e.noData=e.noHTH&&e.noSBD&&e.noSBA}(e)}return{getStats:function(a){var e,t=a.compare.left.hasPlayer,n=a.compare.left.hasTeam,i=!!a.compare.left.lineupIDs.length;if(t&&(e="playerVsPlayer",a.params.PlayerID=a.compare.left.info.PERSON_ID,a.params.VsPlayerID=a.compare.right.info.PERSON_ID),n&&(e="teamVsPlayer",a.params.TeamID=a.compare.left.info.id,a.params.VsPlayerID=a.compare.right.info.PERSON_ID),i){e="playersVsPlayers";var r,s,o=[a.params.PlayerID1,a.params.PlayerID2,a.params.PlayerID3,a.params.PlayerID4,a.params.PlayerID5],l=[a.params.VsPlayerID1,a.params.VsPlayerID2,a.params.VsPlayerID3,a.params.VsPlayerID4,a.params.VsPlayerID5];for(s in a.compare.left.lineupChosen.forEach(function(e,t,n){o[t]=a.compare.left.lineupChosen[t].PLAYER_ID}),a.compare.right.lineupChosen.forEach(function(e,t,n){l[t]=a.compare.right.lineupChosen[t].PLAYER_ID}),a.params)for(var c=o.length;r<c;r++)a.params[o[0]]&&(a.params[o[0]]=o[0]),a.params[l[0]]&&(a.params[l[0]]=l[0])}a.isLoading=!0,a.showGraph=!0,u.endpoint=e,u.get(a.params).then(function(e){h(a,e),a.isLoading=!1})}}}stats.service("VsPlayerVersusService",e),e.$inject=["OnOffCompareService"]}(),function(){function e(a,e,i,r){e.addClass("stats-shotchart"),a.options={zone:{zonetype:"Advanced",scaletype:"rg"},plot:{},hex:{cellsize:8,scaletype:"div",zonetype:"zone"}},a.$watch("shots",function(e){var t,n;e&&(a.$watch("activeTab",function(e){i.search("sct",e)}),(t=i.search().sct)?a.activeTab=t:(n=r("groupBy")(e,"GAME_ID"),1<Object.keys(n).length?a.activeTab="hex":a.activeTab="plot"))})}stats.directive("statsShotchart",function(){return{restrict:"E",replace:!1,scope:{title:"@",zones:"=",league:"=",shots:"=",params:"="},templateUrl:"/stats/templates/angular/shotcharts/stats-shotchart.html",controller:e}}),e.$inject=["$scope","$element","$location","$filter"]}(),function(){function e(e,t){t.addClass("stats-shotheat"),e.$watch("shots",function(e){if(!e||0===e.length)return;var t=d3.contourDensity().x(function(e){return u(e.LOC_X)}).y(function(e){return h(e.LOC_Y)}).size([c,l]).bandwidth(40)(e),n=d3.scaleLinear().domain(d3.extent(t,function(e){return e.value})).interpolate(function(){return d3.interpolateInferno}),a=p.selectAll("path").data(t),i=m.selectAll("circle").data(e);a.exit().remove(),i.exit().remove(),a.attr("d",d3.geoPath()).attr("fill",function(e){return n(e.value)}).attr("fill-opacity",.2),i.attr("fill","white").attr("cx",function(e){return u(e.LOC_X)}).attr("cy",function(e){return h(e.LOC_Y)}).attr("r",1),a.enter().append("path").attr("d",d3.geoPath()).attr("fill",function(e){return n(e.value)}).attr("fill-opacity",.2),i.enter().append("circle").attr("fill","white").attr("cx",function(e){return u(e.LOC_X)}).attr("cy",function(e){return h(e.LOC_Y)}).attr("r",1)}),e.$watch("title",function(e){d.text(e)});var n=t.find("svg").get(0),a=d3.select(n),i=30,r=10,s=10,o=10,l=510,c=520,u=d3.scaleLinear().domain([-250,250]).rangeRound([0,500]),h=d3.scaleLinear().domain([420,-50]).rangeRound([470,0]);a.append("rect").attr("width",c).attr("height",l).attr("fill","#c5c5c5"),a.append("rect").attr("width",c).attr("height",20).attr("fill","#fff"),a.append("clipPath").attr("id","court-clip").append("rect").attr("x",4).attr("y",0).attr("width",494).attr("height",470);var d=a.append("text").attr("dx",11).attr("dy",16).attr("fill","#000").attr("font-family","Roboto Condensed").attr("font-size","16px"),f=a.append("g").attr("transform","translate(".concat(o,", ").concat(i,")")).attr("clip-path","url(#court-clip)"),p=f.append("g").attr("class","contours");a.append("svg:image").attr("xlink:href","/stats/media/img/halfcourt.png").attr("transform","translate(".concat(o,", ").concat(i,")")).attr("width",500).attr("height",470);var m=f.append("g").attr("class","shots");a.append("text").attr("x",c-r-7).attr("y",l-s-7).attr("text-anchor","end").attr("fill","#1a477b").attr("font-family","Roboto Condensed").attr("font-size","20px").text("NBA.com/Stats")}stats.directive("statsShotheat",function(){return{restrict:"E",replace:!1,scope:{shots:"=",title:"@"},template:'<div>\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 520 510" preserveAspectRatio="xMinYMin">\n        </svg>\n      </div>',controller:e}}),e.$inject=["$scope","$element"]}(),function(){function e(a,e){e.addClass("stats-shothex"),a.$watch("shots",t),a.$watch("options",t,!0);function t(){var e,t,n;a.shots&&0!==a.shots.length&&(e={},t=+a.options.cellsize||10,(n={}).radius=t,n.height=2*n.radius,n.width=Math.sqrt(3)/2*n.height,n.heightRow=.75*n.height,n.heightHalf=.5*n.height,n.widthHalf=n.width/2,n.apothem=n.height-n.heightRow,a.shots.forEach(function(e,t,n){var a=Math.floor((n.LOC_Y+t.apothem)/t.heightRow),i=a*t.heightRow-t.heightHalf,r=n.LOC_Y-i,s=1&a,o=s?Math.floor(n.LOC_X/t.width):Math.floor((n.LOC_X+t.widthHalf)/t.width),l=s?o*t.width+t.widthHalf:o*t.width,c=n.LOC_X-l,u=t.apothem/t.widthHalf;r>t.heightRow&&(c<0?t.height-r<-u*(c+t.widthHalf)+t.apothem&&(a+=1,s||--o):t.height-r<u*c&&(a+=1,s&&(o+=1)));var h=a+"_"+o,d=e[h];d=d||(e[h]={row:a,col:o,size:t.radius,scale:1,shots:[],fgm:0,fga:0});d.shots.push(n),d.fga+=1,d.fgm+=n.SHOT_MADE_FLAG}.bind("",e,n)),a.hexes=Object.keys(e).map(function(e,t,n){var a=e[n],i=a.shots.reduce(o,{});a.zone=function(t){var n=0,a="";return Object.keys(t).forEach(function(e){t[e].count>n&&(n=t[e].count,a=e)}),a}(i),a.zonePerf=0,t.advanced[a.zone]&&(a.zoneObject=t.advanced[a.zone],a.zonePerf=t.advanced[a.zone].zPerf,a.leaguePct=t.advanced[a.zone].leagueFG_PCT);var r=Math.log(a.fga)/Math.log(10),s=(2.5*(1-r)+10*r)/10;return a.pct=a.fgm/a.fga,a.trueScale=s,a.scalePct=r,a.scale=Math.min(Math.max(s,.4),1),a}.bind("",e,a.zones)))}}function o(e,t){var n=t.SHOT_ZONE_AREA+" | "+t.SHOT_ZONE_RANGE;return e[n]||(e[n]={id:n,count:0}),e[n].count+=1,e}stats.directive("statsShothex",function(){return{restrict:"E",scope:{zones:"=",shots:"=",options:"=",title:"@"},templateUrl:"/stats/templates/angular/shotcharts/stats-shothex.html",controller:e}}),e.$inject=["$scope","$element"]}(),function(){function e(s,o,i,l,e,r,c){function t(e,t){n(t.rows)}function n(e){var n,t,a;e&&0!==e.length?(n=0,s.events=e.slice(0).map(function(e,t){return e.locX=e.locX||e.LOC_X||0,e.locY=e.locY||e.LOC_Y||0,e.madeflag=1===e.SHOT_MADE_FLAG||1===e.etype,e.madeClass=e.madeflag?"made":"missed",e.tid=e.tid||e.TEAM_ID,e.team=c.getById(e.tid),e.pid=e.pid||e.PLAYER_ID,e.player=r.getById(e.pid),e.p=e.PERIOD||e.p,e.clock=e.cl||e.MINUTES_REMAINING+":"+i("padLeft")(e.SECONDS_REMAINING,2,"0"),e.idx=t,n+=e.madeflag?1:0,e}),t=s.events.length,a=n/t*100||0,s.totalPct=a.toFixed(1),s.totalMade=n,s.totalAttempts=t):s.events=[]}o.addClass("stats-shotplot"),s.$watch("shots",n),s.$on("$statsTableFilter",t),s.$on("$statsTableSort",t),e(function(){o.on("click",".shotplot__shot",function(e){var t,n,a=$(e.currentTarget),i=a.attr("index")||a.attr("data-index"),r={$elm:o,index:+i,data:s.events[i]};t="$shotchartShotClick",n=r,l.$broadcast(t,n)})})}stats.directive("statsShotplot",function(){return{restrict:"E",replace:!1,scope:{shots:"=",title:"@"},templateUrl:"/stats/templates/angular/shotcharts/stats-shotplot.html",templateNamespace:"svg",controller:e}}),e.$inject=["$scope","$element","$filter","$rootScope","$timeout","PlayersService","TeamsService"]}(),function(){function e(e,t){t.addClass("stats-shotstream"),e.$watch("shots",function(e){if(!e||0===e.length)return;var t=e.reduce(m,{fgm:0,fga:0,fg2m:0,fg2a:0,fg3m:0,fg3a:0}),n=[{label:"FG%",val:t.fgm/t.fga},{label:"eFG%",val:(t.fgm+.5*t.fg3m)/t.fga}],a=e.reduce(p,{});(a=Object.values(a).sort(function(e,t){return e.ft-t.ft})).forEach(function(e){return e.fgpct=e.fgm/e.fga}),a.fgm=a.reduce(function(e,t){return e+t.fgm},0),a.fga=a.reduce(function(e,t){return e+t.fga},0),a.fgpct=a.fgm/a.fga;function i(e){return"M".concat(h(0),", ").concat(d(e.val),"H").concat(h(30))}var r=d3.area().curve(d3.curveBasis).x(function(e){return h(e.ft)}).y0(function(e){return d(e.fgpct+e.fga/a.fga)}).y1(function(e){return d(e.fgpct-e.fga/a.fga)}),s=d3.line().curve(d3.curveBasis).x(function(e){return h(e.ft)}).y(function(e){return d(e.fgpct)}),o=f.selectAll(".stream-area").data([a]),l=f.selectAll(".stream-line").data([a]),c=f.selectAll(".pct-line").data(n),u=f.selectAll(".pct-text").data(n);o.exit().remove(),l.exit().remove(),c.exit().remove(),u.exit().remove(),o.attr("d",r),l.attr("d",s),c.attr("d",i),u.attr("y",function(e){return d(e.val)}),o.enter().append("path").attr("clip-path","url(#chart-clip)").attr("d",r).attr("class","stream-area").attr("fill","#fa8320"),l.enter().append("path").attr("d",s).attr("class","stream-line").attr("fill","none").attr("stroke","#000000").attr("stroke-width",2),c.enter().append("path").attr("d",i).attr("class","pct-line").attr("fill","none").attr("stroke","steelblue").attr("stroke-width",2).attr("stroke-dasharray","4 4"),u.enter().append("text").attr("x",function(e){return h(30)}).attr("dx",5).attr("dy",2).attr("y",function(e){return d(e.val)}).attr("class","pct-text chart-label").attr("fill","#000000").text(function(e){return e.label})}),e.$watch("title",function(e){l.text(e)});var n=t.find("svg").get(0),a=d3.select(n),i=30,r=35,s=50,o=30,h=d3.scaleLinear().domain([0,30]).range([o,520-r]),d=d3.scaleLinear().domain([0,1]).rangeRound([530-s,i]),l=a.append("text").attr("dx",11).attr("dy",16).attr("fill","#000").attr("font-family","Roboto Condensed").attr("font-size","16px"),f=a.append("g").attr("class","chart");function p(e,t){var n=Math.min(2*Math.round(t.SHOT_DISTANCE/2),30);return e[n]||(e[n]={ft:n,fgm:0,fga:0}),e[n].fga+=1,e[n].fgm+=t.madeflag?1:0,e}function m(e,t){var n=t.madeflag?1:0;return e.fga+=1,e.fgm+=n,"2PT Field Goal"===t.SHOT_TYPE?(e.fg2a+=1,e.fg2m+=n):"3PT Field Goal"===t.SHOT_TYPE&&(e.fg3a+=1,e.fg3m+=n),e}a.append("clipPath").attr("id","chart-clip").append("rect").attr("transform","translate(".concat(o,", ").concat(i,")")).attr("width",520-o-r).attr("height",530-s-i),a.append("g").call(function(e){e.append("g").attr("class","x-axis").attr("transform","translate(0,".concat(530-s,")")).call(d3.axisBottom(h).tickSize(-(530-i-s)).tickSizeOuter(0)).call(function(e){return e.select(".domain").remove()}).call(function(e){return e.select(".tick:last-of-type text").text("30+").select(function(){return this.parentNode.appendChild(this.cloneNode())}).attr("y",-3).attr("dy",null).attr("font-weight","bold").attr("text-anchor","end").text("DISTANCE FROM RIM (FT.)")})}),a.append("g").call(function(e){e.append("g").attr("class","y-axis").attr("transform","translate(".concat(o,",0)")).call(d3.axisLeft(d).tickSize(-(520-o-r)).tickSizeOuter(0).tickFormat(d3.format(".0%"))).call(function(e){return e.select(".domain").remove()}).call(function(e){return e.select(".tick:last-of-type text").select(function(){return this.parentNode.appendChild(this.cloneNode())}).attr("x",3).attr("text-anchor","start").attr("font-weight","bold").attr("dy",10).text("FG%")})}),a.append("text").attr("x",520-r).attr("y",523).attr("text-anchor","end").attr("fill","#1a477b").attr("font-family","Roboto Condensed").attr("font-size","20px").text("NBA.com/Stats"),a.append("text").attr("x",o).attr("y",523).attr("text-anchor","start").attr("class","chart-label").text("FREQ:"),a.append("rect").attr("x",o+47).attr("y",508).attr("height",20).attr("width",50).attr("fill","#fa8320")}stats.directive("statsShotstream",function(){return{restrict:"E",replace:!1,scope:{shots:"=",title:"@"},template:'<div>\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 520 530" preserveAspectRatio="xMinYMin">\n          <style>\n            .chart-label {\n              font-family: sans-serif;\n              font-size: 11px;\n            }\n            .y-axis line,\n            .x-axis line {\n              stroke-dasharray: 2 2;\n              stroke: #bababa;\n            }\n        </svg>\n      </div>',controller:e}}),e.$inject=["$scope","$element"]}(),function(){function e(e,t,n,a){t.addClass("stats-shotzone"),e.$watch("options",function(e){})}stats.directive("statsShotzone",function(){return{restrict:"E",replace:!1,scope:{params:"=",zones:"=",shots:"=",options:"=",title:"@"},templateUrl:"/stats/templates/angular/shotcharts/stats-shotzone.html",controller:e}}),e.$inject=["$scope","$element","$location","$filter"]}();